function o9(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var dQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Z0={exports:{}},Md={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P4;function s9(){if(P4)return Md;P4=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,o){var a=null;if(o!==void 0&&(a=""+o),i.key!==void 0&&(a=""+i.key),"key"in i){o={};for(var c in i)c!=="key"&&(o[c]=i[c])}else o=i;return i=o.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:o}}return Md.Fragment=e,Md.jsx=t,Md.jsxs=t,Md}var M4;function a9(){return M4||(M4=1,Z0.exports=s9()),Z0.exports}var y=a9(),J0={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k4;function l9(){if(k4)return qe;k4=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(W){return W===null||typeof W!="object"?null:(W=p&&W[p]||W["@@iterator"],typeof W=="function"?W:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,A={};function S(W,Y,oe){this.props=W,this.context=Y,this.refs=A,this.updater=oe||_}S.prototype.isReactComponent={},S.prototype.setState=function(W,Y){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,Y,"setState")},S.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function x(){}x.prototype=S.prototype;function O(W,Y,oe){this.props=W,this.context=Y,this.refs=A,this.updater=oe||_}var P=O.prototype=new x;P.constructor=O,E(P,S.prototype),P.isPureReactComponent=!0;var D=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function M(W,Y,oe,te,se,pe){return oe=pe.ref,{$$typeof:n,type:W,key:Y,ref:oe!==void 0?oe:null,props:pe}}function R(W,Y){return M(W.type,Y,void 0,void 0,void 0,W.props)}function k(W){return typeof W=="object"&&W!==null&&W.$$typeof===n}function U(W){var Y={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(oe){return Y[oe]})}var z=/\/+/g;function q(W,Y){return typeof W=="object"&&W!==null&&W.key!=null?U(""+W.key):Y.toString(36)}function F(){}function Ce(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(F,F):(W.status="pending",W.then(function(Y){W.status==="pending"&&(W.status="fulfilled",W.value=Y)},function(Y){W.status==="pending"&&(W.status="rejected",W.reason=Y)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function Ee(W,Y,oe,te,se){var pe=typeof W;(pe==="undefined"||pe==="boolean")&&(W=null);var ge=!1;if(W===null)ge=!0;else switch(pe){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(W.$$typeof){case n:case e:ge=!0;break;case h:return ge=W._init,Ee(ge(W._payload),Y,oe,te,se)}}if(ge)return se=se(W),ge=te===""?"."+q(W,0):te,D(se)?(oe="",ge!=null&&(oe=ge.replace(z,"$&/")+"/"),Ee(se,Y,oe,"",function(Zt){return Zt})):se!=null&&(k(se)&&(se=R(se,oe+(se.key==null||W&&W.key===se.key?"":(""+se.key).replace(z,"$&/")+"/")+ge)),Y.push(se)),1;ge=0;var ke=te===""?".":te+":";if(D(W))for(var $e=0;$e<W.length;$e++)te=W[$e],pe=ke+q(te,$e),ge+=Ee(te,Y,oe,pe,se);else if($e=g(W),typeof $e=="function")for(W=$e.call(W),$e=0;!(te=W.next()).done;)te=te.value,pe=ke+q(te,$e++),ge+=Ee(te,Y,oe,pe,se);else if(pe==="object"){if(typeof W.then=="function")return Ee(Ce(W),Y,oe,te,se);throw Y=String(W),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ge}function Q(W,Y,oe){if(W==null)return W;var te=[],se=0;return Ee(W,te,"","",function(pe){return Y.call(oe,pe,se++)}),te}function me(W){if(W._status===-1){var Y=W._result;Y=Y(),Y.then(function(oe){(W._status===0||W._status===-1)&&(W._status=1,W._result=oe)},function(oe){(W._status===0||W._status===-1)&&(W._status=2,W._result=oe)}),W._status===-1&&(W._status=0,W._result=Y)}if(W._status===1)return W._result.default;throw W._result}var ue=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function De(){}return qe.Children={map:Q,forEach:function(W,Y,oe){Q(W,function(){Y.apply(this,arguments)},oe)},count:function(W){var Y=0;return Q(W,function(){Y++}),Y},toArray:function(W){return Q(W,function(Y){return Y})||[]},only:function(W){if(!k(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},qe.Component=S,qe.Fragment=t,qe.Profiler=i,qe.PureComponent=O,qe.StrictMode=r,qe.Suspense=u,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,qe.__COMPILER_RUNTIME={__proto__:null,c:function(W){return j.H.useMemoCache(W)}},qe.cache=function(W){return function(){return W.apply(null,arguments)}},qe.cloneElement=function(W,Y,oe){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var te=E({},W.props),se=W.key,pe=void 0;if(Y!=null)for(ge in Y.ref!==void 0&&(pe=void 0),Y.key!==void 0&&(se=""+Y.key),Y)!H.call(Y,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&Y.ref===void 0||(te[ge]=Y[ge]);var ge=arguments.length-2;if(ge===1)te.children=oe;else if(1<ge){for(var ke=Array(ge),$e=0;$e<ge;$e++)ke[$e]=arguments[$e+2];te.children=ke}return M(W.type,se,void 0,void 0,pe,te)},qe.createContext=function(W){return W={$$typeof:a,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:o,_context:W},W},qe.createElement=function(W,Y,oe){var te,se={},pe=null;if(Y!=null)for(te in Y.key!==void 0&&(pe=""+Y.key),Y)H.call(Y,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(se[te]=Y[te]);var ge=arguments.length-2;if(ge===1)se.children=oe;else if(1<ge){for(var ke=Array(ge),$e=0;$e<ge;$e++)ke[$e]=arguments[$e+2];se.children=ke}if(W&&W.defaultProps)for(te in ge=W.defaultProps,ge)se[te]===void 0&&(se[te]=ge[te]);return M(W,pe,void 0,void 0,null,se)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(W){return{$$typeof:c,render:W}},qe.isValidElement=k,qe.lazy=function(W){return{$$typeof:h,_payload:{_status:-1,_result:W},_init:me}},qe.memo=function(W,Y){return{$$typeof:d,type:W,compare:Y===void 0?null:Y}},qe.startTransition=function(W){var Y=j.T,oe={};j.T=oe;try{var te=W(),se=j.S;se!==null&&se(oe,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(De,ue)}catch(pe){ue(pe)}finally{j.T=Y}},qe.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},qe.use=function(W){return j.H.use(W)},qe.useActionState=function(W,Y,oe){return j.H.useActionState(W,Y,oe)},qe.useCallback=function(W,Y){return j.H.useCallback(W,Y)},qe.useContext=function(W){return j.H.useContext(W)},qe.useDebugValue=function(){},qe.useDeferredValue=function(W,Y){return j.H.useDeferredValue(W,Y)},qe.useEffect=function(W,Y,oe){var te=j.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(W,Y)},qe.useId=function(){return j.H.useId()},qe.useImperativeHandle=function(W,Y,oe){return j.H.useImperativeHandle(W,Y,oe)},qe.useInsertionEffect=function(W,Y){return j.H.useInsertionEffect(W,Y)},qe.useLayoutEffect=function(W,Y){return j.H.useLayoutEffect(W,Y)},qe.useMemo=function(W,Y){return j.H.useMemo(W,Y)},qe.useOptimistic=function(W,Y){return j.H.useOptimistic(W,Y)},qe.useReducer=function(W,Y,oe){return j.H.useReducer(W,Y,oe)},qe.useRef=function(W){return j.H.useRef(W)},qe.useState=function(W){return j.H.useState(W)},qe.useSyncExternalStore=function(W,Y,oe){return j.H.useSyncExternalStore(W,Y,oe)},qe.useTransition=function(){return j.H.useTransition()},qe.version="19.1.0",qe}var L4;function Df(){return L4||(L4=1,J0.exports=l9()),J0.exports}var C=Df();const In=pv(C),t6=o9({__proto__:null,default:In},[C]);var ey={exports:{}},kd={},ty={exports:{}},ny={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j4;function c9(){return j4||(j4=1,function(n){function e(Q,me){var ue=Q.length;Q.push(me);e:for(;0<ue;){var De=ue-1>>>1,W=Q[De];if(0<i(W,me))Q[De]=me,Q[ue]=W,ue=De;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var me=Q[0],ue=Q.pop();if(ue!==me){Q[0]=ue;e:for(var De=0,W=Q.length,Y=W>>>1;De<Y;){var oe=2*(De+1)-1,te=Q[oe],se=oe+1,pe=Q[se];if(0>i(te,ue))se<W&&0>i(pe,te)?(Q[De]=pe,Q[se]=ue,De=se):(Q[De]=te,Q[oe]=ue,De=oe);else if(se<W&&0>i(pe,ue))Q[De]=pe,Q[se]=ue,De=se;else break e}}return me}function i(Q,me){var ue=Q.sortIndex-me.sortIndex;return ue!==0?ue:Q.id-me.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var u=[],d=[],h=1,p=null,g=3,_=!1,E=!1,A=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function D(Q){for(var me=t(d);me!==null;){if(me.callback===null)r(d);else if(me.startTime<=Q)r(d),me.sortIndex=me.expirationTime,e(u,me);else break;me=t(d)}}function j(Q){if(A=!1,D(Q),!E)if(t(u)!==null)E=!0,H||(H=!0,q());else{var me=t(d);me!==null&&Ee(j,me.startTime-Q)}}var H=!1,M=-1,R=5,k=-1;function U(){return S?!0:!(n.unstable_now()-k<R)}function z(){if(S=!1,H){var Q=n.unstable_now();k=Q;var me=!0;try{e:{E=!1,A&&(A=!1,O(M),M=-1),_=!0;var ue=g;try{t:{for(D(Q),p=t(u);p!==null&&!(p.expirationTime>Q&&U());){var De=p.callback;if(typeof De=="function"){p.callback=null,g=p.priorityLevel;var W=De(p.expirationTime<=Q);if(Q=n.unstable_now(),typeof W=="function"){p.callback=W,D(Q),me=!0;break t}p===t(u)&&r(u),D(Q)}else r(u);p=t(u)}if(p!==null)me=!0;else{var Y=t(d);Y!==null&&Ee(j,Y.startTime-Q),me=!1}}break e}finally{p=null,g=ue,_=!1}me=void 0}}finally{me?q():H=!1}}}var q;if(typeof P=="function")q=function(){P(z)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Ce=F.port2;F.port1.onmessage=z,q=function(){Ce.postMessage(null)}}else q=function(){x(z,0)};function Ee(Q,me){M=x(function(){Q(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(Q){switch(g){case 1:case 2:case 3:var me=3;break;default:me=g}var ue=g;g=me;try{return Q()}finally{g=ue}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(Q,me){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ue=g;g=Q;try{return me()}finally{g=ue}},n.unstable_scheduleCallback=function(Q,me,ue){var De=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?De+ue:De):ue=De,Q){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ue+W,Q={id:h++,callback:me,priorityLevel:Q,startTime:ue,expirationTime:W,sortIndex:-1},ue>De?(Q.sortIndex=ue,e(d,Q),t(u)===null&&Q===t(d)&&(A?(O(M),M=-1):A=!0,Ee(j,ue-De))):(Q.sortIndex=W,e(u,Q),E||_||(E=!0,H||(H=!0,q()))),Q},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(Q){var me=g;return function(){var ue=g;g=me;try{return Q.apply(this,arguments)}finally{g=ue}}}}(ny)),ny}var V4;function u9(){return V4||(V4=1,ty.exports=c9()),ty.exports}var ry={exports:{}},ur={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B4;function d9(){if(B4)return ur;B4=1;var n=Df();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ur.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ur.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(u,d,null,h)},ur.flushSync=function(u){var d=a.T,h=r.p;try{if(a.T=null,r.p=2,u)return u()}finally{a.T=d,r.p=h,r.d.f()}},ur.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},ur.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},ur.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=c(h,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,_=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:_}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:g,fetchPriority:_,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ur.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},ur.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=c(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ur.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},ur.requestFormReset=function(u){r.d.r(u)},ur.unstable_batchedUpdates=function(u,d){return u(d)},ur.useFormState=function(u,d,h){return a.H.useFormState(u,d,h)},ur.useFormStatus=function(){return a.H.useHostTransitionStatus()},ur.version="19.1.0",ur}var F4;function n6(){if(F4)return ry.exports;F4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ry.exports=d9(),ry.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U4;function f9(){if(U4)return kd;U4=1;var n=u9(),e=Df(),t=n6();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function a(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(o(s)!==s)throw Error(r(188))}function u(s){var l=s.alternate;if(!l){if(l=o(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,m=l;;){var w=f.return;if(w===null)break;var b=w.alternate;if(b===null){if(m=w.return,m!==null){f=m;continue}break}if(w.child===b.child){for(b=w.child;b;){if(b===f)return c(w),s;if(b===m)return c(w),l;b=b.sibling}throw Error(r(188))}if(f.return!==m.return)f=w,m=b;else{for(var N=!1,L=w.child;L;){if(L===f){N=!0,f=w,m=b;break}if(L===m){N=!0,m=w,f=b;break}L=L.sibling}if(!N){for(L=b.child;L;){if(L===f){N=!0,f=b,m=w;break}if(L===m){N=!0,m=b,f=w;break}L=L.sibling}if(!N)throw Error(r(189))}}if(f.alternate!==m)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function d(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=d(s),l!==null)return l;s=s.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),P=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=z&&s[z]||s["@@iterator"],typeof s=="function"?s:null)}var F=Symbol.for("react.client.reference");function Ce(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===F?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case E:return"Fragment";case S:return"Profiler";case A:return"StrictMode";case j:return"Suspense";case H:return"SuspenseList";case k:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case P:return(s.displayName||"Context")+".Provider";case O:return(s._context.displayName||"Context")+".Consumer";case D:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return l=s.displayName||null,l!==null?l:Ce(s.type)||"Memo";case R:l=s._payload,s=s._init;try{return Ce(s(l))}catch{}}return null}var Ee=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},De=[],W=-1;function Y(s){return{current:s}}function oe(s){0>W||(s.current=De[W],De[W]=null,W--)}function te(s,l){W++,De[W]=s.current,s.current=l}var se=Y(null),pe=Y(null),ge=Y(null),ke=Y(null);function $e(s,l){switch(te(ge,l),te(pe,s),te(se,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?a4(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=a4(l),s=l4(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}oe(se),te(se,s)}function Zt(){oe(se),oe(pe),oe(ge)}function mt(s){s.memoizedState!==null&&te(ke,s);var l=se.current,f=l4(l,s.type);l!==f&&(te(pe,s),te(se,f))}function Ie(s){pe.current===s&&(oe(se),oe(pe)),ke.current===s&&(oe(ke),Rd._currentValue=ue)}var Le=Object.prototype.hasOwnProperty,xe=n.unstable_scheduleCallback,bt=n.unstable_cancelCallback,cn=n.unstable_shouldYield,Tr=n.unstable_requestPaint,Wn=n.unstable_now,mo=n.unstable_getCurrentPriorityLevel,as=n.unstable_ImmediatePriority,Cl=n.unstable_UserBlockingPriority,ya=n.unstable_NormalPriority,J1=n.unstable_LowPriority,Il=n.unstable_IdlePriority,Iu=n.log,oh=n.unstable_setDisableYieldValue,$t=null,yt=null;function Lr(s){if(typeof Iu=="function"&&oh(s),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode($t,s)}catch{}}var lr=Math.clz32?Math.clz32:va,sh=Math.log,eg=Math.LN2;function va(s){return s>>>=0,s===0?32:31-(sh(s)/eg|0)|0}var wa=256,_a=4194304;function bi(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Rl(s,l,f){var m=s.pendingLanes;if(m===0)return 0;var w=0,b=s.suspendedLanes,N=s.pingedLanes;s=s.warmLanes;var L=m&134217727;return L!==0?(m=L&~b,m!==0?w=bi(m):(N&=L,N!==0?w=bi(N):f||(f=L&~s,f!==0&&(w=bi(f))))):(L=m&~b,L!==0?w=bi(L):N!==0?w=bi(N):f||(f=m&~s,f!==0&&(w=bi(f)))),w===0?0:l!==0&&l!==w&&(l&b)===0&&(b=w&-w,f=l&-l,b>=f||b===32&&(f&4194048)!==0)?l:w}function ba(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Ru(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nu(){var s=wa;return wa<<=1,(wa&4194048)===0&&(wa=256),s}function Ou(){var s=_a;return _a<<=1,(_a&62914560)===0&&(_a=4194304),s}function po(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function go(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Du(s,l,f,m,w,b){var N=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var L=s.entanglements,G=s.expirationTimes,J=s.hiddenUpdates;for(f=N&~f;0<f;){var le=31-lr(f),fe=1<<le;L[le]=0,G[le]=-1;var ne=J[le];if(ne!==null)for(J[le]=null,le=0;le<ne.length;le++){var re=ne[le];re!==null&&(re.lane&=-536870913)}f&=~fe}m!==0&&ji(s,m,0),b!==0&&w===0&&s.tag!==0&&(s.suspendedLanes|=b&~(N&~l))}function ji(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var m=31-lr(l);s.entangledLanes|=l,s.entanglements[m]=s.entanglements[m]|1073741824|f&4194090}function Pu(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var m=31-lr(f),w=1<<m;w&l|s[m]&l&&(s[m]|=l),f&=~w}}function ls(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Nl(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function cs(){var s=me.p;return s!==0?s:(s=window.event,s===void 0?32:C4(s.type))}function ah(s,l){var f=me.p;try{return me.p=s,l()}finally{me.p=f}}var Lt=Math.random().toString(36).slice(2),_n="__reactFiber$"+Lt,un="__reactProps$"+Lt,Qr="__reactContainer$"+Lt,Mu="__reactEvents$"+Lt,tg="__reactListeners$"+Lt,us="__reactHandles$"+Lt,lh="__reactResources$"+Lt,Ea="__reactMarker$"+Lt;function ds(s){delete s[_n],delete s[un],delete s[Mu],delete s[tg],delete s[us]}function yo(s){var l=s[_n];if(l)return l;for(var f=s.parentNode;f;){if(l=f[Qr]||f[_n]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=f4(s);s!==null;){if(f=s[_n])return f;s=f4(s)}return l}s=f,f=s.parentNode}return null}function Vi(s){if(s=s[_n]||s[Qr]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function Bi(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function gr(s){var l=s[lh];return l||(l=s[lh]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Jt(s){s[Ea]=!0}var ku=new Set,Ol={};function Ei(s,l){vo(s,l),vo(s+"Capture",l)}function vo(s,l){for(Ol[s]=l,s=0;s<l.length;s++)ku.add(l[s])}var ch=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),uh={},Aa={};function dh(s){return Le.call(Aa,s)?!0:Le.call(uh,s)?!1:ch.test(s)?Aa[s]=!0:(uh[s]=!0,!1)}function fs(s,l,f){if(dh(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function Fi(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function $n(s,l,f,m){if(m===null)s.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+m)}}var Ta,fh;function wo(s){if(Ta===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Ta=l&&l[1]||"",fh=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ta+s+fh}var Dl=!1;function Pl(s,l){if(!s||Dl)return"";Dl=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(re){var ne=re}Reflect.construct(s,[],fe)}else{try{fe.call()}catch(re){ne=re}s.call(fe.prototype)}}else{try{throw Error()}catch(re){ne=re}(fe=s())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(re){if(re&&ne&&typeof re.stack=="string")return[re.stack,ne.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=m.DetermineComponentFrameRoot(),N=b[0],L=b[1];if(N&&L){var G=N.split(`
`),J=L.split(`
`);for(w=m=0;m<G.length&&!G[m].includes("DetermineComponentFrameRoot");)m++;for(;w<J.length&&!J[w].includes("DetermineComponentFrameRoot");)w++;if(m===G.length||w===J.length)for(m=G.length-1,w=J.length-1;1<=m&&0<=w&&G[m]!==J[w];)w--;for(;1<=m&&0<=w;m--,w--)if(G[m]!==J[w]){if(m!==1||w!==1)do if(m--,w--,0>w||G[m]!==J[w]){var le=`
`+G[m].replace(" at new "," at ");return s.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",s.displayName)),le}while(1<=m&&0<=w);break}}}finally{Dl=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?wo(f):""}function Lu(s){switch(s.tag){case 26:case 27:case 5:return wo(s.type);case 16:return wo("Lazy");case 13:return wo("Suspense");case 19:return wo("SuspenseList");case 0:case 15:return Pl(s.type,!1);case 11:return Pl(s.type.render,!1);case 1:return Pl(s.type,!0);case 31:return wo("Activity");default:return""}}function Ml(s){try{var l="";do l+=Lu(s),s=s.return;while(s);return l}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function yr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ju(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ng(s){var l=ju(s)?"checked":"value",f=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),m=""+s[l];if(!s.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var w=f.get,b=f.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return w.call(this)},set:function(N){m=""+N,b.call(this,N)}}),Object.defineProperty(s,l,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(N){m=""+N},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function kl(s){s._valueTracker||(s._valueTracker=ng(s))}function Vu(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),m="";return s&&(m=ju(s)?s.checked?"true":"false":s.value),s=m,s!==f?(l.setValue(s),!0):!1}function Sa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var rg=/[\n"\\]/g;function dn(s){return s.replace(rg,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function jr(s,l,f,m,w,b,N,L){s.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.type=N:s.removeAttribute("type"),l!=null?N==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+yr(l)):s.value!==""+yr(l)&&(s.value=""+yr(l)):N!=="submit"&&N!=="reset"||s.removeAttribute("value"),l!=null?hs(s,N,yr(l)):f!=null?hs(s,N,yr(f)):m!=null&&s.removeAttribute("value"),w==null&&b!=null&&(s.defaultChecked=!!b),w!=null&&(s.checked=w&&typeof w!="function"&&typeof w!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?s.name=""+yr(L):s.removeAttribute("name")}function xa(s,l,f,m,w,b,N,L){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),l!=null||f!=null){if(!(b!=="submit"&&b!=="reset"||l!=null))return;f=f!=null?""+yr(f):"",l=l!=null?""+yr(l):f,L||l===s.value||(s.value=l),s.defaultValue=l}m=m??w,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=L?s.checked:!!m,s.defaultChecked=!!m,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(s.name=N)}function hs(s,l,f){l==="number"&&Sa(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function _o(s,l,f,m){if(s=s.options,l){l={};for(var w=0;w<f.length;w++)l["$"+f[w]]=!0;for(f=0;f<s.length;f++)w=l.hasOwnProperty("$"+s[f].value),s[f].selected!==w&&(s[f].selected=w),w&&m&&(s[f].defaultSelected=!0)}else{for(f=""+yr(f),l=null,w=0;w<s.length;w++){if(s[w].value===f){s[w].selected=!0,m&&(s[w].defaultSelected=!0);return}l!==null||s[w].disabled||(l=s[w])}l!==null&&(l.selected=!0)}}function Et(s,l,f){if(l!=null&&(l=""+yr(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+yr(f):""}function Ca(s,l,f,m){if(l==null){if(m!=null){if(f!=null)throw Error(r(92));if(Ee(m)){if(1<m.length)throw Error(r(93));m=m[0]}f=m}f==null&&(f=""),l=f}f=yr(l),s.defaultValue=f,m=s.textContent,m===f&&m!==""&&m!==null&&(s.value=m)}function Zr(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var Ia=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hh(s,l,f){var m=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":m?s.setProperty(l,f):typeof f!="number"||f===0||Ia.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function Bu(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var w in l)m=l[w],l.hasOwnProperty(w)&&f[w]!==m&&hh(s,w,m)}else for(var b in l)l.hasOwnProperty(b)&&hh(s,b,l[b])}function Fu(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ig=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),og=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ll(s){return og.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var bo=null;function Jr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Eo=null,Ao=null;function Uu(s){var l=Vi(s);if(l&&(s=l.stateNode)){var f=s[un]||null;e:switch(s=l.stateNode,l.type){case"input":if(jr(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+dn(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var m=f[l];if(m!==s&&m.form===s.form){var w=m[un]||null;if(!w)throw Error(r(90));jr(m,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(l=0;l<f.length;l++)m=f[l],m.form===s.form&&Vu(m)}break e;case"textarea":Et(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&_o(s,!!f.multiple,l,!1)}}}var Ui=!1;function mh(s,l,f){if(Ui)return s(l,f);Ui=!0;try{var m=s(l);return m}finally{if(Ui=!1,(Eo!==null||Ao!==null)&&(am(),Eo&&(l=Eo,s=Ao,Ao=Eo=null,Uu(l),s)))for(l=0;l<s.length;l++)Uu(s[l])}}function Ra(s,l){var f=s.stateNode;if(f===null)return null;var m=f[un]||null;if(m===null)return null;f=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var Ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ei=!1;if(Ai)try{var Na={};Object.defineProperty(Na,"passive",{get:function(){ei=!0}}),window.addEventListener("test",Na,Na),window.removeEventListener("test",Na,Na)}catch{ei=!1}var zi=null,ms=null,To=null;function zu(){if(To)return To;var s,l=ms,f=l.length,m,w="value"in zi?zi.value:zi.textContent,b=w.length;for(s=0;s<f&&l[s]===w[s];s++);var N=f-s;for(m=1;m<=N&&l[f-m]===w[b-m];m++);return To=w.slice(s,1<m?1-m:void 0)}function Hi(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Gi(){return!0}function Hu(){return!1}function Mn(s){function l(f,m,w,b,N){this._reactName=f,this._targetInst=w,this.type=m,this.nativeEvent=b,this.target=N,this.currentTarget=null;for(var L in s)s.hasOwnProperty(L)&&(f=s[L],this[L]=f?f(b):b[L]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Gi:Hu,this.isPropagationStopped=Hu,this}return h(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),l}var pt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jl=Mn(pt),Oa=h({},pt,{view:0,detail:0}),ph=Mn(Oa),Vl,Bl,qi,Da=h({},Oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ka,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==qi&&(qi&&s.type==="mousemove"?(Vl=s.screenX-qi.screenX,Bl=s.screenY-qi.screenY):Bl=Vl=0,qi=s),Vl)},movementY:function(s){return"movementY"in s?s.movementY:Bl}}),ti=Mn(Da),gh=h({},Da,{dataTransfer:0}),sg=Mn(gh),Pa=h({},Oa,{relatedTarget:0}),Fl=Mn(Pa),Gu=h({},pt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ul=Mn(Gu),yh=h({},pt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),zl=Mn(yh),ag=h({},pt,{data:0}),qu=Mn(ag),Ma={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wu(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=wh[s])?!!l[s]:!1}function ka(){return Wu}var _h=h({},Oa,{key:function(s){if(s.key){var l=Ma[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Hi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?vh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ka,charCode:function(s){return s.type==="keypress"?Hi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Hi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Hl=Mn(_h),bh=h({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$u=Mn(bh),So=h({},Oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ka}),Eh=Mn(So),Ah=h({},pt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Th=Mn(Ah),Sh=h({},Da,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Gl=Mn(Sh),vr=h({},pt,{newState:0,oldState:0}),xh=Mn(vr),Ch=[9,13,27,32],Wi=Ai&&"CompositionEvent"in window,v=null;Ai&&"documentMode"in document&&(v=document.documentMode);var T=Ai&&"TextEvent"in window&&!v,I=Ai&&(!Wi||v&&8<v&&11>=v),V=" ",K=!1;function ie(s,l){switch(s){case"keyup":return Ch.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ye(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var rt=!1;function bn(s,l){switch(s){case"compositionend":return ye(l);case"keypress":return l.which!==32?null:(K=!0,V);case"textInput":return s=l.data,s===V&&K?null:s;default:return null}}function it(s,l){if(rt)return s==="compositionend"||!Wi&&ie(s,l)?(s=zu(),To=ms=zi=null,rt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return I&&l.locale!=="ko"?null:l.data;default:return null}}var kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function En(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!kn[s.type]:l==="textarea"}function xo(s,l,f,m){Eo?Ao?Ao.push(m):Ao=[m]:Eo=m,l=hm(l,"onChange"),0<l.length&&(f=new jl("onChange","change",null,f,m),s.push({event:f,listeners:l}))}var Xn=null,$i=null;function Xu(s){n4(s,0)}function Ih(s){var l=Bi(s);if(Vu(l))return s}function A_(s,l){if(s==="change")return l}var T_=!1;if(Ai){var lg;if(Ai){var cg="oninput"in document;if(!cg){var S_=document.createElement("div");S_.setAttribute("oninput","return;"),cg=typeof S_.oninput=="function"}lg=cg}else lg=!1;T_=lg&&(!document.documentMode||9<document.documentMode)}function x_(){Xn&&(Xn.detachEvent("onpropertychange",C_),$i=Xn=null)}function C_(s){if(s.propertyName==="value"&&Ih($i)){var l=[];xo(l,$i,s,Jr(s)),mh(Xu,l)}}function k5(s,l,f){s==="focusin"?(x_(),Xn=l,$i=f,Xn.attachEvent("onpropertychange",C_)):s==="focusout"&&x_()}function L5(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ih($i)}function j5(s,l){if(s==="click")return Ih(l)}function V5(s,l){if(s==="input"||s==="change")return Ih(l)}function B5(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Vr=typeof Object.is=="function"?Object.is:B5;function Yu(s,l){if(Vr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),m=Object.keys(l);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var w=f[m];if(!Le.call(l,w)||!Vr(s[w],l[w]))return!1}return!0}function I_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function R_(s,l){var f=I_(s);s=0;for(var m;f;){if(f.nodeType===3){if(m=s+f.textContent.length,s<=l&&m>=l)return{node:f,offset:l-s};s=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=I_(f)}}function N_(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?N_(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function O_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Sa(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=Sa(s.document)}return l}function ug(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var F5=Ai&&"documentMode"in document&&11>=document.documentMode,ql=null,dg=null,Ku=null,fg=!1;function D_(s,l,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;fg||ql==null||ql!==Sa(m)||(m=ql,"selectionStart"in m&&ug(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ku&&Yu(Ku,m)||(Ku=m,m=hm(dg,"onSelect"),0<m.length&&(l=new jl("onSelect","select",null,l,f),s.push({event:l,listeners:m}),l.target=ql)))}function La(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var Wl={animationend:La("Animation","AnimationEnd"),animationiteration:La("Animation","AnimationIteration"),animationstart:La("Animation","AnimationStart"),transitionrun:La("Transition","TransitionRun"),transitionstart:La("Transition","TransitionStart"),transitioncancel:La("Transition","TransitionCancel"),transitionend:La("Transition","TransitionEnd")},hg={},P_={};Ai&&(P_=document.createElement("div").style,"AnimationEvent"in window||(delete Wl.animationend.animation,delete Wl.animationiteration.animation,delete Wl.animationstart.animation),"TransitionEvent"in window||delete Wl.transitionend.transition);function ja(s){if(hg[s])return hg[s];if(!Wl[s])return s;var l=Wl[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in P_)return hg[s]=l[f];return s}var M_=ja("animationend"),k_=ja("animationiteration"),L_=ja("animationstart"),U5=ja("transitionrun"),z5=ja("transitionstart"),H5=ja("transitioncancel"),j_=ja("transitionend"),V_=new Map,mg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mg.push("scrollEnd");function Ti(s,l){V_.set(s,l),Ei(l,[s])}var B_=new WeakMap;function ni(s,l){if(typeof s=="object"&&s!==null){var f=B_.get(s);return f!==void 0?f:(l={value:s,source:l,stack:Ml(l)},B_.set(s,l),l)}return{value:s,source:l,stack:Ml(l)}}var ri=[],$l=0,pg=0;function Rh(){for(var s=$l,l=pg=$l=0;l<s;){var f=ri[l];ri[l++]=null;var m=ri[l];ri[l++]=null;var w=ri[l];ri[l++]=null;var b=ri[l];if(ri[l++]=null,m!==null&&w!==null){var N=m.pending;N===null?w.next=w:(w.next=N.next,N.next=w),m.pending=w}b!==0&&F_(f,w,b)}}function Nh(s,l,f,m){ri[$l++]=s,ri[$l++]=l,ri[$l++]=f,ri[$l++]=m,pg|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function gg(s,l,f,m){return Nh(s,l,f,m),Oh(s)}function Xl(s,l){return Nh(s,null,null,l),Oh(s)}function F_(s,l,f){s.lanes|=f;var m=s.alternate;m!==null&&(m.lanes|=f);for(var w=!1,b=s.return;b!==null;)b.childLanes|=f,m=b.alternate,m!==null&&(m.childLanes|=f),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(w=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,w&&l!==null&&(w=31-lr(f),s=b.hiddenUpdates,m=s[w],m===null?s[w]=[l]:m.push(l),l.lane=f|536870912),b):null}function Oh(s){if(50<bd)throw bd=0,E0=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Yl={};function G5(s,l,f,m){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Br(s,l,f,m){return new G5(s,l,f,m)}function yg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Co(s,l){var f=s.alternate;return f===null?(f=Br(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function U_(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Dh(s,l,f,m,w,b){var N=0;if(m=s,typeof s=="function")yg(s)&&(N=1);else if(typeof s=="string")N=WN(s,f,se.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case k:return s=Br(31,f,l,w),s.elementType=k,s.lanes=b,s;case E:return Va(f.children,w,b,l);case A:N=8,w|=24;break;case S:return s=Br(12,f,l,w|2),s.elementType=S,s.lanes=b,s;case j:return s=Br(13,f,l,w),s.elementType=j,s.lanes=b,s;case H:return s=Br(19,f,l,w),s.elementType=H,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case x:case P:N=10;break e;case O:N=9;break e;case D:N=11;break e;case M:N=14;break e;case R:N=16,m=null;break e}N=29,f=Error(r(130,s===null?"null":typeof s,"")),m=null}return l=Br(N,f,l,w),l.elementType=s,l.type=m,l.lanes=b,l}function Va(s,l,f,m){return s=Br(7,s,m,l),s.lanes=f,s}function vg(s,l,f){return s=Br(6,s,null,l),s.lanes=f,s}function wg(s,l,f){return l=Br(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var Kl=[],Ql=0,Ph=null,Mh=0,ii=[],oi=0,Ba=null,Io=1,Ro="";function Fa(s,l){Kl[Ql++]=Mh,Kl[Ql++]=Ph,Ph=s,Mh=l}function z_(s,l,f){ii[oi++]=Io,ii[oi++]=Ro,ii[oi++]=Ba,Ba=s;var m=Io;s=Ro;var w=32-lr(m)-1;m&=~(1<<w),f+=1;var b=32-lr(l)+w;if(30<b){var N=w-w%5;b=(m&(1<<N)-1).toString(32),m>>=N,w-=N,Io=1<<32-lr(l)+w|f<<w|m,Ro=b+s}else Io=1<<b|f<<w|m,Ro=s}function _g(s){s.return!==null&&(Fa(s,1),z_(s,1,0))}function bg(s){for(;s===Ph;)Ph=Kl[--Ql],Kl[Ql]=null,Mh=Kl[--Ql],Kl[Ql]=null;for(;s===Ba;)Ba=ii[--oi],ii[oi]=null,Ro=ii[--oi],ii[oi]=null,Io=ii[--oi],ii[oi]=null}var wr=null,Xt=null,ft=!1,Ua=null,Xi=!1,Eg=Error(r(519));function za(s){var l=Error(r(418,""));throw Ju(ni(l,s)),Eg}function H_(s){var l=s.stateNode,f=s.type,m=s.memoizedProps;switch(l[_n]=s,l[un]=m,f){case"dialog":et("cancel",l),et("close",l);break;case"iframe":case"object":case"embed":et("load",l);break;case"video":case"audio":for(f=0;f<Ad.length;f++)et(Ad[f],l);break;case"source":et("error",l);break;case"img":case"image":case"link":et("error",l),et("load",l);break;case"details":et("toggle",l);break;case"input":et("invalid",l),xa(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),kl(l);break;case"select":et("invalid",l);break;case"textarea":et("invalid",l),Ca(l,m.value,m.defaultValue,m.children),kl(l)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||m.suppressHydrationWarning===!0||s4(l.textContent,f)?(m.popover!=null&&(et("beforetoggle",l),et("toggle",l)),m.onScroll!=null&&et("scroll",l),m.onScrollEnd!=null&&et("scrollend",l),m.onClick!=null&&(l.onclick=mm),l=!0):l=!1,l||za(s)}function G_(s){for(wr=s.return;wr;)switch(wr.tag){case 5:case 13:Xi=!1;return;case 27:case 3:Xi=!0;return;default:wr=wr.return}}function Qu(s){if(s!==wr)return!1;if(!ft)return G_(s),ft=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||V0(s.type,s.memoizedProps)),f=!f),f&&Xt&&za(s),G_(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(f=s.data,f==="/$"){if(l===0){Xt=xi(s.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++;s=s.nextSibling}Xt=null}}else l===27?(l=Xt,Ns(s.type)?(s=z0,z0=null,Xt=s):Xt=l):Xt=wr?xi(s.stateNode.nextSibling):null;return!0}function Zu(){Xt=wr=null,ft=!1}function q_(){var s=Ua;return s!==null&&(Cr===null?Cr=s:Cr.push.apply(Cr,s),Ua=null),s}function Ju(s){Ua===null?Ua=[s]:Ua.push(s)}var Ag=Y(null),Ha=null,No=null;function ps(s,l,f){te(Ag,l._currentValue),l._currentValue=f}function Oo(s){s._currentValue=Ag.current,oe(Ag)}function Tg(s,l,f){for(;s!==null;){var m=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),s===f)break;s=s.return}}function Sg(s,l,f,m){var w=s.child;for(w!==null&&(w.return=s);w!==null;){var b=w.dependencies;if(b!==null){var N=w.child;b=b.firstContext;e:for(;b!==null;){var L=b;b=w;for(var G=0;G<l.length;G++)if(L.context===l[G]){b.lanes|=f,L=b.alternate,L!==null&&(L.lanes|=f),Tg(b.return,f,s),m||(N=null);break e}b=L.next}}else if(w.tag===18){if(N=w.return,N===null)throw Error(r(341));N.lanes|=f,b=N.alternate,b!==null&&(b.lanes|=f),Tg(N,f,s),N=null}else N=w.child;if(N!==null)N.return=w;else for(N=w;N!==null;){if(N===s){N=null;break}if(w=N.sibling,w!==null){w.return=N.return,N=w;break}N=N.return}w=N}}function ed(s,l,f,m){s=null;for(var w=l,b=!1;w!==null;){if(!b){if((w.flags&524288)!==0)b=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var N=w.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var L=w.type;Vr(w.pendingProps.value,N.value)||(s!==null?s.push(L):s=[L])}}else if(w===ke.current){if(N=w.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(s!==null?s.push(Rd):s=[Rd])}w=w.return}s!==null&&Sg(l,s,f,m),l.flags|=262144}function kh(s){for(s=s.firstContext;s!==null;){if(!Vr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ga(s){Ha=s,No=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function cr(s){return W_(Ha,s)}function Lh(s,l){return Ha===null&&Ga(s),W_(s,l)}function W_(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},No===null){if(s===null)throw Error(r(308));No=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else No=No.next=l;return f}var q5=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,m){s.push(m)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},W5=n.unstable_scheduleCallback,$5=n.unstable_NormalPriority,An={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xg(){return{controller:new q5,data:new Map,refCount:0}}function td(s){s.refCount--,s.refCount===0&&W5($5,function(){s.controller.abort()})}var nd=null,Cg=0,Zl=0,Jl=null;function X5(s,l){if(nd===null){var f=nd=[];Cg=0,Zl=R0(),Jl={status:"pending",value:void 0,then:function(m){f.push(m)}}}return Cg++,l.then($_,$_),l}function $_(){if(--Cg===0&&nd!==null){Jl!==null&&(Jl.status="fulfilled");var s=nd;nd=null,Zl=0,Jl=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function Y5(s,l){var f=[],m={status:"pending",value:null,reason:null,then:function(w){f.push(w)}};return s.then(function(){m.status="fulfilled",m.value=l;for(var w=0;w<f.length;w++)(0,f[w])(l)},function(w){for(m.status="rejected",m.reason=w,w=0;w<f.length;w++)(0,f[w])(void 0)}),m}var X_=Q.S;Q.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&X5(s,l),X_!==null&&X_(s,l)};var qa=Y(null);function Ig(){var s=qa.current;return s!==null?s:Ot.pooledCache}function jh(s,l){l===null?te(qa,qa.current):te(qa,l.pool)}function Y_(){var s=Ig();return s===null?null:{parent:An._currentValue,pool:s}}var rd=Error(r(460)),K_=Error(r(474)),Vh=Error(r(542)),Rg={then:function(){}};function Q_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Bh(){}function Z_(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(Bh,Bh),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,eb(s),s;default:if(typeof l.status=="string")l.then(Bh,Bh);else{if(s=Ot,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(m){if(l.status==="pending"){var w=l;w.status="fulfilled",w.value=m}},function(m){if(l.status==="pending"){var w=l;w.status="rejected",w.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,eb(s),s}throw id=l,rd}}var id=null;function J_(){if(id===null)throw Error(r(459));var s=id;return id=null,s}function eb(s){if(s===rd||s===Vh)throw Error(r(483))}var gs=!1;function Ng(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Og(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ys(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function vs(s,l,f){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(vt&2)!==0){var w=m.pending;return w===null?l.next=l:(l.next=w.next,w.next=l),m.pending=l,l=Oh(s),F_(s,null,f),l}return Nh(s,m,l,f),Oh(s)}function od(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var m=l.lanes;m&=s.pendingLanes,f|=m,l.lanes=f,Pu(s,f)}}function Dg(s,l){var f=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var w=null,b=null;if(f=f.firstBaseUpdate,f!==null){do{var N={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};b===null?w=b=N:b=b.next=N,f=f.next}while(f!==null);b===null?w=b=l:b=b.next=l}else w=b=l;f={baseState:m.baseState,firstBaseUpdate:w,lastBaseUpdate:b,shared:m.shared,callbacks:m.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var Pg=!1;function sd(){if(Pg){var s=Jl;if(s!==null)throw s}}function ad(s,l,f,m){Pg=!1;var w=s.updateQueue;gs=!1;var b=w.firstBaseUpdate,N=w.lastBaseUpdate,L=w.shared.pending;if(L!==null){w.shared.pending=null;var G=L,J=G.next;G.next=null,N===null?b=J:N.next=J,N=G;var le=s.alternate;le!==null&&(le=le.updateQueue,L=le.lastBaseUpdate,L!==N&&(L===null?le.firstBaseUpdate=J:L.next=J,le.lastBaseUpdate=G))}if(b!==null){var fe=w.baseState;N=0,le=J=G=null,L=b;do{var ne=L.lane&-536870913,re=ne!==L.lane;if(re?(ot&ne)===ne:(m&ne)===ne){ne!==0&&ne===Zl&&(Pg=!0),le!==null&&(le=le.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Ue=s,je=L;ne=l;var St=f;switch(je.tag){case 1:if(Ue=je.payload,typeof Ue=="function"){fe=Ue.call(St,fe,ne);break e}fe=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=je.payload,ne=typeof Ue=="function"?Ue.call(St,fe,ne):Ue,ne==null)break e;fe=h({},fe,ne);break e;case 2:gs=!0}}ne=L.callback,ne!==null&&(s.flags|=64,re&&(s.flags|=8192),re=w.callbacks,re===null?w.callbacks=[ne]:re.push(ne))}else re={lane:ne,tag:L.tag,payload:L.payload,callback:L.callback,next:null},le===null?(J=le=re,G=fe):le=le.next=re,N|=ne;if(L=L.next,L===null){if(L=w.shared.pending,L===null)break;re=L,L=re.next,re.next=null,w.lastBaseUpdate=re,w.shared.pending=null}}while(!0);le===null&&(G=fe),w.baseState=G,w.firstBaseUpdate=J,w.lastBaseUpdate=le,b===null&&(w.shared.lanes=0),xs|=N,s.lanes=N,s.memoizedState=fe}}function tb(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function nb(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)tb(f[s],l)}var ec=Y(null),Fh=Y(0);function rb(s,l){s=Vo,te(Fh,s),te(ec,l),Vo=s|l.baseLanes}function Mg(){te(Fh,Vo),te(ec,ec.current)}function kg(){Vo=Fh.current,oe(ec),oe(Fh)}var ws=0,Ye=null,At=null,fn=null,Uh=!1,tc=!1,Wa=!1,zh=0,ld=0,nc=null,K5=0;function en(){throw Error(r(321))}function Lg(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!Vr(s[f],l[f]))return!1;return!0}function jg(s,l,f,m,w,b){return ws=b,Ye=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Q.H=s===null||s.memoizedState===null?Fb:Ub,Wa=!1,b=f(m,w),Wa=!1,tc&&(b=ob(l,f,m,w)),ib(s),b}function ib(s){Q.H=Xh;var l=At!==null&&At.next!==null;if(ws=0,fn=At=Ye=null,Uh=!1,ld=0,nc=null,l)throw Error(r(300));s===null||Ln||(s=s.dependencies,s!==null&&kh(s)&&(Ln=!0))}function ob(s,l,f,m){Ye=s;var w=0;do{if(tc&&(nc=null),ld=0,tc=!1,25<=w)throw Error(r(301));if(w+=1,fn=At=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}Q.H=rN,b=l(f,m)}while(tc);return b}function Q5(){var s=Q.H,l=s.useState()[0];return l=typeof l.then=="function"?cd(l):l,s=s.useState()[0],(At!==null?At.memoizedState:null)!==s&&(Ye.flags|=1024),l}function Vg(){var s=zh!==0;return zh=0,s}function Bg(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function Fg(s){if(Uh){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Uh=!1}ws=0,fn=At=Ye=null,tc=!1,ld=zh=0,nc=null}function Sr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Ye.memoizedState=fn=s:fn=fn.next=s,fn}function hn(){if(At===null){var s=Ye.alternate;s=s!==null?s.memoizedState:null}else s=At.next;var l=fn===null?Ye.memoizedState:fn.next;if(l!==null)fn=l,At=s;else{if(s===null)throw Ye.alternate===null?Error(r(467)):Error(r(310));At=s,s={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},fn===null?Ye.memoizedState=fn=s:fn=fn.next=s}return fn}function Ug(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cd(s){var l=ld;return ld+=1,nc===null&&(nc=[]),s=Z_(nc,s,l),l=Ye,(fn===null?l.memoizedState:fn.next)===null&&(l=l.alternate,Q.H=l===null||l.memoizedState===null?Fb:Ub),s}function Hh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return cd(s);if(s.$$typeof===P)return cr(s)}throw Error(r(438,String(s)))}function zg(s){var l=null,f=Ye.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var m=Ye.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(w){return w.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Ug(),Ye.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),m=0;m<s;m++)f[m]=U;return l.index++,f}function Do(s,l){return typeof l=="function"?l(s):l}function Gh(s){var l=hn();return Hg(l,At,s)}function Hg(s,l,f){var m=s.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=f;var w=s.baseQueue,b=m.pending;if(b!==null){if(w!==null){var N=w.next;w.next=b.next,b.next=N}l.baseQueue=w=b,m.pending=null}if(b=s.baseState,w===null)s.memoizedState=b;else{l=w.next;var L=N=null,G=null,J=l,le=!1;do{var fe=J.lane&-536870913;if(fe!==J.lane?(ot&fe)===fe:(ws&fe)===fe){var ne=J.revertLane;if(ne===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),fe===Zl&&(le=!0);else if((ws&ne)===ne){J=J.next,ne===Zl&&(le=!0);continue}else fe={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},G===null?(L=G=fe,N=b):G=G.next=fe,Ye.lanes|=ne,xs|=ne;fe=J.action,Wa&&f(b,fe),b=J.hasEagerState?J.eagerState:f(b,fe)}else ne={lane:fe,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},G===null?(L=G=ne,N=b):G=G.next=ne,Ye.lanes|=fe,xs|=fe;J=J.next}while(J!==null&&J!==l);if(G===null?N=b:G.next=L,!Vr(b,s.memoizedState)&&(Ln=!0,le&&(f=Jl,f!==null)))throw f;s.memoizedState=b,s.baseState=N,s.baseQueue=G,m.lastRenderedState=b}return w===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function Gg(s){var l=hn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var m=f.dispatch,w=f.pending,b=l.memoizedState;if(w!==null){f.pending=null;var N=w=w.next;do b=s(b,N.action),N=N.next;while(N!==w);Vr(b,l.memoizedState)||(Ln=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),f.lastRenderedState=b}return[b,m]}function sb(s,l,f){var m=Ye,w=hn(),b=ft;if(b){if(f===void 0)throw Error(r(407));f=f()}else f=l();var N=!Vr((At||w).memoizedState,f);N&&(w.memoizedState=f,Ln=!0),w=w.queue;var L=cb.bind(null,m,w,s);if(ud(2048,8,L,[s]),w.getSnapshot!==l||N||fn!==null&&fn.memoizedState.tag&1){if(m.flags|=2048,rc(9,qh(),lb.bind(null,m,w,f,l),null),Ot===null)throw Error(r(349));b||(ws&124)!==0||ab(m,l,f)}return f}function ab(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=Ye.updateQueue,l===null?(l=Ug(),Ye.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function lb(s,l,f,m){l.value=f,l.getSnapshot=m,ub(l)&&db(s)}function cb(s,l,f){return f(function(){ub(l)&&db(s)})}function ub(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!Vr(s,f)}catch{return!0}}function db(s){var l=Xl(s,2);l!==null&&Gr(l,s,2)}function qg(s){var l=Sr();if(typeof s=="function"){var f=s;if(s=f(),Wa){Lr(!0);try{f()}finally{Lr(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:s},l}function fb(s,l,f,m){return s.baseState=f,Hg(s,At,typeof m=="function"?m:Do)}function Z5(s,l,f,m,w){if($h(s))throw Error(r(485));if(s=l.action,s!==null){var b={payload:w,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){b.listeners.push(N)}};Q.T!==null?f(!0):b.isTransition=!1,m(b),f=l.pending,f===null?(b.next=l.pending=b,hb(l,b)):(b.next=f.next,l.pending=f.next=b)}}function hb(s,l){var f=l.action,m=l.payload,w=s.state;if(l.isTransition){var b=Q.T,N={};Q.T=N;try{var L=f(w,m),G=Q.S;G!==null&&G(N,L),mb(s,l,L)}catch(J){Wg(s,l,J)}finally{Q.T=b}}else try{b=f(w,m),mb(s,l,b)}catch(J){Wg(s,l,J)}}function mb(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){pb(s,l,m)},function(m){return Wg(s,l,m)}):pb(s,l,f)}function pb(s,l,f){l.status="fulfilled",l.value=f,gb(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,hb(s,f)))}function Wg(s,l,f){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=f,gb(l),l=l.next;while(l!==m)}s.action=null}function gb(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function yb(s,l){return l}function vb(s,l){if(ft){var f=Ot.formState;if(f!==null){e:{var m=Ye;if(ft){if(Xt){t:{for(var w=Xt,b=Xi;w.nodeType!==8;){if(!b){w=null;break t}if(w=xi(w.nextSibling),w===null){w=null;break t}}b=w.data,w=b==="F!"||b==="F"?w:null}if(w){Xt=xi(w.nextSibling),m=w.data==="F!";break e}}za(m)}m=!1}m&&(l=f[0])}}return f=Sr(),f.memoizedState=f.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yb,lastRenderedState:l},f.queue=m,f=jb.bind(null,Ye,m),m.dispatch=f,m=qg(!1),b=Qg.bind(null,Ye,!1,m.queue),m=Sr(),w={state:l,dispatch:null,action:s,pending:null},m.queue=w,f=Z5.bind(null,Ye,w,b,f),w.dispatch=f,m.memoizedState=s,[l,f,!1]}function wb(s){var l=hn();return _b(l,At,s)}function _b(s,l,f){if(l=Hg(s,l,yb)[0],s=Gh(Do)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=cd(l)}catch(N){throw N===rd?Vh:N}else m=l;l=hn();var w=l.queue,b=w.dispatch;return f!==l.memoizedState&&(Ye.flags|=2048,rc(9,qh(),J5.bind(null,w,f),null)),[m,b,s]}function J5(s,l){s.action=l}function bb(s){var l=hn(),f=At;if(f!==null)return _b(l,f,s);hn(),l=l.memoizedState,f=hn();var m=f.queue.dispatch;return f.memoizedState=s,[l,m,!1]}function rc(s,l,f,m){return s={tag:s,create:f,deps:m,inst:l,next:null},l=Ye.updateQueue,l===null&&(l=Ug(),Ye.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(m=f.next,f.next=s,s.next=m,l.lastEffect=s),s}function qh(){return{destroy:void 0,resource:void 0}}function Eb(){return hn().memoizedState}function Wh(s,l,f,m){var w=Sr();m=m===void 0?null:m,Ye.flags|=s,w.memoizedState=rc(1|l,qh(),f,m)}function ud(s,l,f,m){var w=hn();m=m===void 0?null:m;var b=w.memoizedState.inst;At!==null&&m!==null&&Lg(m,At.memoizedState.deps)?w.memoizedState=rc(l,b,f,m):(Ye.flags|=s,w.memoizedState=rc(1|l,b,f,m))}function Ab(s,l){Wh(8390656,8,s,l)}function Tb(s,l){ud(2048,8,s,l)}function Sb(s,l){return ud(4,2,s,l)}function xb(s,l){return ud(4,4,s,l)}function Cb(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Ib(s,l,f){f=f!=null?f.concat([s]):null,ud(4,4,Cb.bind(null,l,s),f)}function $g(){}function Rb(s,l){var f=hn();l=l===void 0?null:l;var m=f.memoizedState;return l!==null&&Lg(l,m[1])?m[0]:(f.memoizedState=[s,l],s)}function Nb(s,l){var f=hn();l=l===void 0?null:l;var m=f.memoizedState;if(l!==null&&Lg(l,m[1]))return m[0];if(m=s(),Wa){Lr(!0);try{s()}finally{Lr(!1)}}return f.memoizedState=[m,l],m}function Xg(s,l,f){return f===void 0||(ws&1073741824)!==0?s.memoizedState=l:(s.memoizedState=f,s=PE(),Ye.lanes|=s,xs|=s,f)}function Ob(s,l,f,m){return Vr(f,l)?f:ec.current!==null?(s=Xg(s,f,m),Vr(s,l)||(Ln=!0),s):(ws&42)===0?(Ln=!0,s.memoizedState=f):(s=PE(),Ye.lanes|=s,xs|=s,l)}function Db(s,l,f,m,w){var b=me.p;me.p=b!==0&&8>b?b:8;var N=Q.T,L={};Q.T=L,Qg(s,!1,l,f);try{var G=w(),J=Q.S;if(J!==null&&J(L,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var le=Y5(G,m);dd(s,l,le,Hr(s))}else dd(s,l,m,Hr(s))}catch(fe){dd(s,l,{then:function(){},status:"rejected",reason:fe},Hr())}finally{me.p=b,Q.T=N}}function eN(){}function Yg(s,l,f,m){if(s.tag!==5)throw Error(r(476));var w=Pb(s).queue;Db(s,w,l,ue,f===null?eN:function(){return Mb(s),f(m)})}function Pb(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:ue},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function Mb(s){var l=Pb(s).next.queue;dd(s,l,{},Hr())}function Kg(){return cr(Rd)}function kb(){return hn().memoizedState}function Lb(){return hn().memoizedState}function tN(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=Hr();s=ys(f);var m=vs(l,s,f);m!==null&&(Gr(m,l,f),od(m,l,f)),l={cache:xg()},s.payload=l;return}l=l.return}}function nN(s,l,f){var m=Hr();f={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},$h(s)?Vb(l,f):(f=gg(s,l,f,m),f!==null&&(Gr(f,s,m),Bb(f,l,m)))}function jb(s,l,f){var m=Hr();dd(s,l,f,m)}function dd(s,l,f,m){var w={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if($h(s))Vb(l,w);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var N=l.lastRenderedState,L=b(N,f);if(w.hasEagerState=!0,w.eagerState=L,Vr(L,N))return Nh(s,l,w,0),Ot===null&&Rh(),!1}catch{}finally{}if(f=gg(s,l,w,m),f!==null)return Gr(f,s,m),Bb(f,l,m),!0}return!1}function Qg(s,l,f,m){if(m={lane:2,revertLane:R0(),action:m,hasEagerState:!1,eagerState:null,next:null},$h(s)){if(l)throw Error(r(479))}else l=gg(s,f,m,2),l!==null&&Gr(l,s,2)}function $h(s){var l=s.alternate;return s===Ye||l!==null&&l===Ye}function Vb(s,l){tc=Uh=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function Bb(s,l,f){if((f&4194048)!==0){var m=l.lanes;m&=s.pendingLanes,f|=m,l.lanes=f,Pu(s,f)}}var Xh={readContext:cr,use:Hh,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useLayoutEffect:en,useInsertionEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useSyncExternalStore:en,useId:en,useHostTransitionStatus:en,useFormState:en,useActionState:en,useOptimistic:en,useMemoCache:en,useCacheRefresh:en},Fb={readContext:cr,use:Hh,useCallback:function(s,l){return Sr().memoizedState=[s,l===void 0?null:l],s},useContext:cr,useEffect:Ab,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,Wh(4194308,4,Cb.bind(null,l,s),f)},useLayoutEffect:function(s,l){return Wh(4194308,4,s,l)},useInsertionEffect:function(s,l){Wh(4,2,s,l)},useMemo:function(s,l){var f=Sr();l=l===void 0?null:l;var m=s();if(Wa){Lr(!0);try{s()}finally{Lr(!1)}}return f.memoizedState=[m,l],m},useReducer:function(s,l,f){var m=Sr();if(f!==void 0){var w=f(l);if(Wa){Lr(!0);try{f(l)}finally{Lr(!1)}}}else w=l;return m.memoizedState=m.baseState=w,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:w},m.queue=s,s=s.dispatch=nN.bind(null,Ye,s),[m.memoizedState,s]},useRef:function(s){var l=Sr();return s={current:s},l.memoizedState=s},useState:function(s){s=qg(s);var l=s.queue,f=jb.bind(null,Ye,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:$g,useDeferredValue:function(s,l){var f=Sr();return Xg(f,s,l)},useTransition:function(){var s=qg(!1);return s=Db.bind(null,Ye,s.queue,!0,!1),Sr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var m=Ye,w=Sr();if(ft){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Ot===null)throw Error(r(349));(ot&124)!==0||ab(m,l,f)}w.memoizedState=f;var b={value:f,getSnapshot:l};return w.queue=b,Ab(cb.bind(null,m,b,s),[s]),m.flags|=2048,rc(9,qh(),lb.bind(null,m,b,f,l),null),f},useId:function(){var s=Sr(),l=Ot.identifierPrefix;if(ft){var f=Ro,m=Io;f=(m&~(1<<32-lr(m)-1)).toString(32)+f,l=""+l+"R"+f,f=zh++,0<f&&(l+="H"+f.toString(32)),l+=""}else f=K5++,l=""+l+"r"+f.toString(32)+"";return s.memoizedState=l},useHostTransitionStatus:Kg,useFormState:vb,useActionState:vb,useOptimistic:function(s){var l=Sr();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=Qg.bind(null,Ye,!0,f),f.dispatch=l,[s,l]},useMemoCache:zg,useCacheRefresh:function(){return Sr().memoizedState=tN.bind(null,Ye)}},Ub={readContext:cr,use:Hh,useCallback:Rb,useContext:cr,useEffect:Tb,useImperativeHandle:Ib,useInsertionEffect:Sb,useLayoutEffect:xb,useMemo:Nb,useReducer:Gh,useRef:Eb,useState:function(){return Gh(Do)},useDebugValue:$g,useDeferredValue:function(s,l){var f=hn();return Ob(f,At.memoizedState,s,l)},useTransition:function(){var s=Gh(Do)[0],l=hn().memoizedState;return[typeof s=="boolean"?s:cd(s),l]},useSyncExternalStore:sb,useId:kb,useHostTransitionStatus:Kg,useFormState:wb,useActionState:wb,useOptimistic:function(s,l){var f=hn();return fb(f,At,s,l)},useMemoCache:zg,useCacheRefresh:Lb},rN={readContext:cr,use:Hh,useCallback:Rb,useContext:cr,useEffect:Tb,useImperativeHandle:Ib,useInsertionEffect:Sb,useLayoutEffect:xb,useMemo:Nb,useReducer:Gg,useRef:Eb,useState:function(){return Gg(Do)},useDebugValue:$g,useDeferredValue:function(s,l){var f=hn();return At===null?Xg(f,s,l):Ob(f,At.memoizedState,s,l)},useTransition:function(){var s=Gg(Do)[0],l=hn().memoizedState;return[typeof s=="boolean"?s:cd(s),l]},useSyncExternalStore:sb,useId:kb,useHostTransitionStatus:Kg,useFormState:bb,useActionState:bb,useOptimistic:function(s,l){var f=hn();return At!==null?fb(f,At,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:zg,useCacheRefresh:Lb},ic=null,fd=0;function Yh(s){var l=fd;return fd+=1,ic===null&&(ic=[]),Z_(ic,s,l)}function hd(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Kh(s,l){throw l.$$typeof===p?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function zb(s){var l=s._init;return l(s._payload)}function Hb(s){function l(X,$){if(s){var Z=X.deletions;Z===null?(X.deletions=[$],X.flags|=16):Z.push($)}}function f(X,$){if(!s)return null;for(;$!==null;)l(X,$),$=$.sibling;return null}function m(X){for(var $=new Map;X!==null;)X.key!==null?$.set(X.key,X):$.set(X.index,X),X=X.sibling;return $}function w(X,$){return X=Co(X,$),X.index=0,X.sibling=null,X}function b(X,$,Z){return X.index=Z,s?(Z=X.alternate,Z!==null?(Z=Z.index,Z<$?(X.flags|=67108866,$):Z):(X.flags|=67108866,$)):(X.flags|=1048576,$)}function N(X){return s&&X.alternate===null&&(X.flags|=67108866),X}function L(X,$,Z,de){return $===null||$.tag!==6?($=vg(Z,X.mode,de),$.return=X,$):($=w($,Z),$.return=X,$)}function G(X,$,Z,de){var Ae=Z.type;return Ae===E?le(X,$,Z.props.children,de,Z.key):$!==null&&($.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===R&&zb(Ae)===$.type)?($=w($,Z.props),hd($,Z),$.return=X,$):($=Dh(Z.type,Z.key,Z.props,null,X.mode,de),hd($,Z),$.return=X,$)}function J(X,$,Z,de){return $===null||$.tag!==4||$.stateNode.containerInfo!==Z.containerInfo||$.stateNode.implementation!==Z.implementation?($=wg(Z,X.mode,de),$.return=X,$):($=w($,Z.children||[]),$.return=X,$)}function le(X,$,Z,de,Ae){return $===null||$.tag!==7?($=Va(Z,X.mode,de,Ae),$.return=X,$):($=w($,Z),$.return=X,$)}function fe(X,$,Z){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=vg(""+$,X.mode,Z),$.return=X,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case g:return Z=Dh($.type,$.key,$.props,null,X.mode,Z),hd(Z,$),Z.return=X,Z;case _:return $=wg($,X.mode,Z),$.return=X,$;case R:var de=$._init;return $=de($._payload),fe(X,$,Z)}if(Ee($)||q($))return $=Va($,X.mode,Z,null),$.return=X,$;if(typeof $.then=="function")return fe(X,Yh($),Z);if($.$$typeof===P)return fe(X,Lh(X,$),Z);Kh(X,$)}return null}function ne(X,$,Z,de){var Ae=$!==null?$.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ae!==null?null:L(X,$,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case g:return Z.key===Ae?G(X,$,Z,de):null;case _:return Z.key===Ae?J(X,$,Z,de):null;case R:return Ae=Z._init,Z=Ae(Z._payload),ne(X,$,Z,de)}if(Ee(Z)||q(Z))return Ae!==null?null:le(X,$,Z,de,null);if(typeof Z.then=="function")return ne(X,$,Yh(Z),de);if(Z.$$typeof===P)return ne(X,$,Lh(X,Z),de);Kh(X,Z)}return null}function re(X,$,Z,de,Ae){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return X=X.get(Z)||null,L($,X,""+de,Ae);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case g:return X=X.get(de.key===null?Z:de.key)||null,G($,X,de,Ae);case _:return X=X.get(de.key===null?Z:de.key)||null,J($,X,de,Ae);case R:var Ze=de._init;return de=Ze(de._payload),re(X,$,Z,de,Ae)}if(Ee(de)||q(de))return X=X.get(Z)||null,le($,X,de,Ae,null);if(typeof de.then=="function")return re(X,$,Z,Yh(de),Ae);if(de.$$typeof===P)return re(X,$,Z,Lh($,de),Ae);Kh($,de)}return null}function Ue(X,$,Z,de){for(var Ae=null,Ze=null,Ne=$,Ve=$=0,Vn=null;Ne!==null&&Ve<Z.length;Ve++){Ne.index>Ve?(Vn=Ne,Ne=null):Vn=Ne.sibling;var ut=ne(X,Ne,Z[Ve],de);if(ut===null){Ne===null&&(Ne=Vn);break}s&&Ne&&ut.alternate===null&&l(X,Ne),$=b(ut,$,Ve),Ze===null?Ae=ut:Ze.sibling=ut,Ze=ut,Ne=Vn}if(Ve===Z.length)return f(X,Ne),ft&&Fa(X,Ve),Ae;if(Ne===null){for(;Ve<Z.length;Ve++)Ne=fe(X,Z[Ve],de),Ne!==null&&($=b(Ne,$,Ve),Ze===null?Ae=Ne:Ze.sibling=Ne,Ze=Ne);return ft&&Fa(X,Ve),Ae}for(Ne=m(Ne);Ve<Z.length;Ve++)Vn=re(Ne,X,Ve,Z[Ve],de),Vn!==null&&(s&&Vn.alternate!==null&&Ne.delete(Vn.key===null?Ve:Vn.key),$=b(Vn,$,Ve),Ze===null?Ae=Vn:Ze.sibling=Vn,Ze=Vn);return s&&Ne.forEach(function(ks){return l(X,ks)}),ft&&Fa(X,Ve),Ae}function je(X,$,Z,de){if(Z==null)throw Error(r(151));for(var Ae=null,Ze=null,Ne=$,Ve=$=0,Vn=null,ut=Z.next();Ne!==null&&!ut.done;Ve++,ut=Z.next()){Ne.index>Ve?(Vn=Ne,Ne=null):Vn=Ne.sibling;var ks=ne(X,Ne,ut.value,de);if(ks===null){Ne===null&&(Ne=Vn);break}s&&Ne&&ks.alternate===null&&l(X,Ne),$=b(ks,$,Ve),Ze===null?Ae=ks:Ze.sibling=ks,Ze=ks,Ne=Vn}if(ut.done)return f(X,Ne),ft&&Fa(X,Ve),Ae;if(Ne===null){for(;!ut.done;Ve++,ut=Z.next())ut=fe(X,ut.value,de),ut!==null&&($=b(ut,$,Ve),Ze===null?Ae=ut:Ze.sibling=ut,Ze=ut);return ft&&Fa(X,Ve),Ae}for(Ne=m(Ne);!ut.done;Ve++,ut=Z.next())ut=re(Ne,X,Ve,ut.value,de),ut!==null&&(s&&ut.alternate!==null&&Ne.delete(ut.key===null?Ve:ut.key),$=b(ut,$,Ve),Ze===null?Ae=ut:Ze.sibling=ut,Ze=ut);return s&&Ne.forEach(function(i9){return l(X,i9)}),ft&&Fa(X,Ve),Ae}function St(X,$,Z,de){if(typeof Z=="object"&&Z!==null&&Z.type===E&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case g:e:{for(var Ae=Z.key;$!==null;){if($.key===Ae){if(Ae=Z.type,Ae===E){if($.tag===7){f(X,$.sibling),de=w($,Z.props.children),de.return=X,X=de;break e}}else if($.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===R&&zb(Ae)===$.type){f(X,$.sibling),de=w($,Z.props),hd(de,Z),de.return=X,X=de;break e}f(X,$);break}else l(X,$);$=$.sibling}Z.type===E?(de=Va(Z.props.children,X.mode,de,Z.key),de.return=X,X=de):(de=Dh(Z.type,Z.key,Z.props,null,X.mode,de),hd(de,Z),de.return=X,X=de)}return N(X);case _:e:{for(Ae=Z.key;$!==null;){if($.key===Ae)if($.tag===4&&$.stateNode.containerInfo===Z.containerInfo&&$.stateNode.implementation===Z.implementation){f(X,$.sibling),de=w($,Z.children||[]),de.return=X,X=de;break e}else{f(X,$);break}else l(X,$);$=$.sibling}de=wg(Z,X.mode,de),de.return=X,X=de}return N(X);case R:return Ae=Z._init,Z=Ae(Z._payload),St(X,$,Z,de)}if(Ee(Z))return Ue(X,$,Z,de);if(q(Z)){if(Ae=q(Z),typeof Ae!="function")throw Error(r(150));return Z=Ae.call(Z),je(X,$,Z,de)}if(typeof Z.then=="function")return St(X,$,Yh(Z),de);if(Z.$$typeof===P)return St(X,$,Lh(X,Z),de);Kh(X,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,$!==null&&$.tag===6?(f(X,$.sibling),de=w($,Z),de.return=X,X=de):(f(X,$),de=vg(Z,X.mode,de),de.return=X,X=de),N(X)):f(X,$)}return function(X,$,Z,de){try{fd=0;var Ae=St(X,$,Z,de);return ic=null,Ae}catch(Ne){if(Ne===rd||Ne===Vh)throw Ne;var Ze=Br(29,Ne,null,X.mode);return Ze.lanes=de,Ze.return=X,Ze}finally{}}}var oc=Hb(!0),Gb=Hb(!1),si=Y(null),Yi=null;function _s(s){var l=s.alternate;te(Tn,Tn.current&1),te(si,s),Yi===null&&(l===null||ec.current!==null||l.memoizedState!==null)&&(Yi=s)}function qb(s){if(s.tag===22){if(te(Tn,Tn.current),te(si,s),Yi===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(Yi=s)}}else bs()}function bs(){te(Tn,Tn.current),te(si,si.current)}function Po(s){oe(si),Yi===s&&(Yi=null),oe(Tn)}var Tn=Y(0);function Qh(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||U0(f)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Zg(s,l,f,m){l=s.memoizedState,f=f(m,l),f=f==null?l:h({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var Jg={enqueueSetState:function(s,l,f){s=s._reactInternals;var m=Hr(),w=ys(m);w.payload=l,f!=null&&(w.callback=f),l=vs(s,w,m),l!==null&&(Gr(l,s,m),od(l,s,m))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var m=Hr(),w=ys(m);w.tag=1,w.payload=l,f!=null&&(w.callback=f),l=vs(s,w,m),l!==null&&(Gr(l,s,m),od(l,s,m))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=Hr(),m=ys(f);m.tag=2,l!=null&&(m.callback=l),l=vs(s,m,f),l!==null&&(Gr(l,s,f),od(l,s,f))}};function Wb(s,l,f,m,w,b,N){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,b,N):l.prototype&&l.prototype.isPureReactComponent?!Yu(f,m)||!Yu(w,b):!0}function $b(s,l,f,m){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,m),l.state!==s&&Jg.enqueueReplaceState(l,l.state,null)}function $a(s,l){var f=l;if("ref"in l){f={};for(var m in l)m!=="ref"&&(f[m]=l[m])}if(s=s.defaultProps){f===l&&(f=h({},f));for(var w in s)f[w]===void 0&&(f[w]=s[w])}return f}var Zh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Xb(s){Zh(s)}function Yb(s){console.error(s)}function Kb(s){Zh(s)}function Jh(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function Qb(s,l,f){try{var m=s.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function e0(s,l,f){return f=ys(f),f.tag=3,f.payload={element:null},f.callback=function(){Jh(s,l)},f}function Zb(s){return s=ys(s),s.tag=3,s}function Jb(s,l,f,m){var w=f.type.getDerivedStateFromError;if(typeof w=="function"){var b=m.value;s.payload=function(){return w(b)},s.callback=function(){Qb(l,f,m)}}var N=f.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(s.callback=function(){Qb(l,f,m),typeof w!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var L=m.stack;this.componentDidCatch(m.value,{componentStack:L!==null?L:""})})}function iN(s,l,f,m,w){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=f.alternate,l!==null&&ed(l,f,w,!0),f=si.current,f!==null){switch(f.tag){case 13:return Yi===null?T0():f.alternate===null&&Yt===0&&(Yt=3),f.flags&=-257,f.flags|=65536,f.lanes=w,m===Rg?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([m]):l.add(m),x0(s,m,w)),!1;case 22:return f.flags|=65536,m===Rg?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([m]):f.add(m)),x0(s,m,w)),!1}throw Error(r(435,f.tag))}return x0(s,m,w),T0(),!1}if(ft)return l=si.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=w,m!==Eg&&(s=Error(r(422),{cause:m}),Ju(ni(s,f)))):(m!==Eg&&(l=Error(r(423),{cause:m}),Ju(ni(l,f))),s=s.current.alternate,s.flags|=65536,w&=-w,s.lanes|=w,m=ni(m,f),w=e0(s.stateNode,m,w),Dg(s,w),Yt!==4&&(Yt=2)),!1;var b=Error(r(520),{cause:m});if(b=ni(b,f),_d===null?_d=[b]:_d.push(b),Yt!==4&&(Yt=2),l===null)return!0;m=ni(m,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=w&-w,f.lanes|=s,s=e0(f.stateNode,m,s),Dg(f,s),!1;case 1:if(l=f.type,b=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Cs===null||!Cs.has(b))))return f.flags|=65536,w&=-w,f.lanes|=w,w=Zb(w),Jb(w,s,f,m),Dg(f,w),!1}f=f.return}while(f!==null);return!1}var eE=Error(r(461)),Ln=!1;function Yn(s,l,f,m){l.child=s===null?Gb(l,null,f,m):oc(l,s.child,f,m)}function tE(s,l,f,m,w){f=f.render;var b=l.ref;if("ref"in m){var N={};for(var L in m)L!=="ref"&&(N[L]=m[L])}else N=m;return Ga(l),m=jg(s,l,f,N,b,w),L=Vg(),s!==null&&!Ln?(Bg(s,l,w),Mo(s,l,w)):(ft&&L&&_g(l),l.flags|=1,Yn(s,l,m,w),l.child)}function nE(s,l,f,m,w){if(s===null){var b=f.type;return typeof b=="function"&&!yg(b)&&b.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=b,rE(s,l,b,m,w)):(s=Dh(f.type,null,m,l,l.mode,w),s.ref=l.ref,s.return=l,l.child=s)}if(b=s.child,!l0(s,w)){var N=b.memoizedProps;if(f=f.compare,f=f!==null?f:Yu,f(N,m)&&s.ref===l.ref)return Mo(s,l,w)}return l.flags|=1,s=Co(b,m),s.ref=l.ref,s.return=l,l.child=s}function rE(s,l,f,m,w){if(s!==null){var b=s.memoizedProps;if(Yu(b,m)&&s.ref===l.ref)if(Ln=!1,l.pendingProps=m=b,l0(s,w))(s.flags&131072)!==0&&(Ln=!0);else return l.lanes=s.lanes,Mo(s,l,w)}return t0(s,l,f,m,w)}function iE(s,l,f){var m=l.pendingProps,w=m.children,b=s!==null?s.memoizedState:null;if(m.mode==="hidden"){if((l.flags&128)!==0){if(m=b!==null?b.baseLanes|f:f,s!==null){for(w=l.child=s.child,b=0;w!==null;)b=b|w.lanes|w.childLanes,w=w.sibling;l.childLanes=b&~m}else l.childLanes=0,l.child=null;return oE(s,l,m,f)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&jh(l,b!==null?b.cachePool:null),b!==null?rb(l,b):Mg(),qb(l);else return l.lanes=l.childLanes=536870912,oE(s,l,b!==null?b.baseLanes|f:f,f)}else b!==null?(jh(l,b.cachePool),rb(l,b),bs(),l.memoizedState=null):(s!==null&&jh(l,null),Mg(),bs());return Yn(s,l,w,f),l.child}function oE(s,l,f,m){var w=Ig();return w=w===null?null:{parent:An._currentValue,pool:w},l.memoizedState={baseLanes:f,cachePool:w},s!==null&&jh(l,null),Mg(),qb(l),s!==null&&ed(s,l,m,!0),null}function em(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function t0(s,l,f,m,w){return Ga(l),f=jg(s,l,f,m,void 0,w),m=Vg(),s!==null&&!Ln?(Bg(s,l,w),Mo(s,l,w)):(ft&&m&&_g(l),l.flags|=1,Yn(s,l,f,w),l.child)}function sE(s,l,f,m,w,b){return Ga(l),l.updateQueue=null,f=ob(l,m,f,w),ib(s),m=Vg(),s!==null&&!Ln?(Bg(s,l,b),Mo(s,l,b)):(ft&&m&&_g(l),l.flags|=1,Yn(s,l,f,b),l.child)}function aE(s,l,f,m,w){if(Ga(l),l.stateNode===null){var b=Yl,N=f.contextType;typeof N=="object"&&N!==null&&(b=cr(N)),b=new f(m,b),l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Jg,l.stateNode=b,b._reactInternals=l,b=l.stateNode,b.props=m,b.state=l.memoizedState,b.refs={},Ng(l),N=f.contextType,b.context=typeof N=="object"&&N!==null?cr(N):Yl,b.state=l.memoizedState,N=f.getDerivedStateFromProps,typeof N=="function"&&(Zg(l,f,N,m),b.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(N=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),N!==b.state&&Jg.enqueueReplaceState(b,b.state,null),ad(l,m,b,w),sd(),b.state=l.memoizedState),typeof b.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(s===null){b=l.stateNode;var L=l.memoizedProps,G=$a(f,L);b.props=G;var J=b.context,le=f.contextType;N=Yl,typeof le=="object"&&le!==null&&(N=cr(le));var fe=f.getDerivedStateFromProps;le=typeof fe=="function"||typeof b.getSnapshotBeforeUpdate=="function",L=l.pendingProps!==L,le||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(L||J!==N)&&$b(l,b,m,N),gs=!1;var ne=l.memoizedState;b.state=ne,ad(l,m,b,w),sd(),J=l.memoizedState,L||ne!==J||gs?(typeof fe=="function"&&(Zg(l,f,fe,m),J=l.memoizedState),(G=gs||Wb(l,f,G,m,ne,J,N))?(le||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(l.flags|=4194308)):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=J),b.props=m,b.state=J,b.context=N,m=G):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{b=l.stateNode,Og(s,l),N=l.memoizedProps,le=$a(f,N),b.props=le,fe=l.pendingProps,ne=b.context,J=f.contextType,G=Yl,typeof J=="object"&&J!==null&&(G=cr(J)),L=f.getDerivedStateFromProps,(J=typeof L=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(N!==fe||ne!==G)&&$b(l,b,m,G),gs=!1,ne=l.memoizedState,b.state=ne,ad(l,m,b,w),sd();var re=l.memoizedState;N!==fe||ne!==re||gs||s!==null&&s.dependencies!==null&&kh(s.dependencies)?(typeof L=="function"&&(Zg(l,f,L,m),re=l.memoizedState),(le=gs||Wb(l,f,le,m,ne,re,G)||s!==null&&s.dependencies!==null&&kh(s.dependencies))?(J||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(m,re,G),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(m,re,G)),typeof b.componentDidUpdate=="function"&&(l.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof b.componentDidUpdate!="function"||N===s.memoizedProps&&ne===s.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&ne===s.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=re),b.props=m,b.state=re,b.context=G,m=le):(typeof b.componentDidUpdate!="function"||N===s.memoizedProps&&ne===s.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&ne===s.memoizedState||(l.flags|=1024),m=!1)}return b=m,em(s,l),m=(l.flags&128)!==0,b||m?(b=l.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:b.render(),l.flags|=1,s!==null&&m?(l.child=oc(l,s.child,null,w),l.child=oc(l,null,f,w)):Yn(s,l,f,w),l.memoizedState=b.state,s=l.child):s=Mo(s,l,w),s}function lE(s,l,f,m){return Zu(),l.flags|=256,Yn(s,l,f,m),l.child}var n0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function r0(s){return{baseLanes:s,cachePool:Y_()}}function i0(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=ai),s}function cE(s,l,f){var m=l.pendingProps,w=!1,b=(l.flags&128)!==0,N;if((N=b)||(N=s!==null&&s.memoizedState===null?!1:(Tn.current&2)!==0),N&&(w=!0,l.flags&=-129),N=(l.flags&32)!==0,l.flags&=-33,s===null){if(ft){if(w?_s(l):bs(),ft){var L=Xt,G;if(G=L){e:{for(G=L,L=Xi;G.nodeType!==8;){if(!L){L=null;break e}if(G=xi(G.nextSibling),G===null){L=null;break e}}L=G}L!==null?(l.memoizedState={dehydrated:L,treeContext:Ba!==null?{id:Io,overflow:Ro}:null,retryLane:536870912,hydrationErrors:null},G=Br(18,null,null,0),G.stateNode=L,G.return=l,l.child=G,wr=l,Xt=null,G=!0):G=!1}G||za(l)}if(L=l.memoizedState,L!==null&&(L=L.dehydrated,L!==null))return U0(L)?l.lanes=32:l.lanes=536870912,null;Po(l)}return L=m.children,m=m.fallback,w?(bs(),w=l.mode,L=tm({mode:"hidden",children:L},w),m=Va(m,w,f,null),L.return=l,m.return=l,L.sibling=m,l.child=L,w=l.child,w.memoizedState=r0(f),w.childLanes=i0(s,N,f),l.memoizedState=n0,m):(_s(l),o0(l,L))}if(G=s.memoizedState,G!==null&&(L=G.dehydrated,L!==null)){if(b)l.flags&256?(_s(l),l.flags&=-257,l=s0(s,l,f)):l.memoizedState!==null?(bs(),l.child=s.child,l.flags|=128,l=null):(bs(),w=m.fallback,L=l.mode,m=tm({mode:"visible",children:m.children},L),w=Va(w,L,f,null),w.flags|=2,m.return=l,w.return=l,m.sibling=w,l.child=m,oc(l,s.child,null,f),m=l.child,m.memoizedState=r0(f),m.childLanes=i0(s,N,f),l.memoizedState=n0,l=w);else if(_s(l),U0(L)){if(N=L.nextSibling&&L.nextSibling.dataset,N)var J=N.dgst;N=J,m=Error(r(419)),m.stack="",m.digest=N,Ju({value:m,source:null,stack:null}),l=s0(s,l,f)}else if(Ln||ed(s,l,f,!1),N=(f&s.childLanes)!==0,Ln||N){if(N=Ot,N!==null&&(m=f&-f,m=(m&42)!==0?1:ls(m),m=(m&(N.suspendedLanes|f))!==0?0:m,m!==0&&m!==G.retryLane))throw G.retryLane=m,Xl(s,m),Gr(N,s,m),eE;L.data==="$?"||T0(),l=s0(s,l,f)}else L.data==="$?"?(l.flags|=192,l.child=s.child,l=null):(s=G.treeContext,Xt=xi(L.nextSibling),wr=l,ft=!0,Ua=null,Xi=!1,s!==null&&(ii[oi++]=Io,ii[oi++]=Ro,ii[oi++]=Ba,Io=s.id,Ro=s.overflow,Ba=l),l=o0(l,m.children),l.flags|=4096);return l}return w?(bs(),w=m.fallback,L=l.mode,G=s.child,J=G.sibling,m=Co(G,{mode:"hidden",children:m.children}),m.subtreeFlags=G.subtreeFlags&65011712,J!==null?w=Co(J,w):(w=Va(w,L,f,null),w.flags|=2),w.return=l,m.return=l,m.sibling=w,l.child=m,m=w,w=l.child,L=s.child.memoizedState,L===null?L=r0(f):(G=L.cachePool,G!==null?(J=An._currentValue,G=G.parent!==J?{parent:J,pool:J}:G):G=Y_(),L={baseLanes:L.baseLanes|f,cachePool:G}),w.memoizedState=L,w.childLanes=i0(s,N,f),l.memoizedState=n0,m):(_s(l),f=s.child,s=f.sibling,f=Co(f,{mode:"visible",children:m.children}),f.return=l,f.sibling=null,s!==null&&(N=l.deletions,N===null?(l.deletions=[s],l.flags|=16):N.push(s)),l.child=f,l.memoizedState=null,f)}function o0(s,l){return l=tm({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function tm(s,l){return s=Br(22,s,null,l),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function s0(s,l,f){return oc(l,s.child,null,f),s=o0(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function uE(s,l,f){s.lanes|=l;var m=s.alternate;m!==null&&(m.lanes|=l),Tg(s.return,l,f)}function a0(s,l,f,m,w){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:w}:(b.isBackwards=l,b.rendering=null,b.renderingStartTime=0,b.last=m,b.tail=f,b.tailMode=w)}function dE(s,l,f){var m=l.pendingProps,w=m.revealOrder,b=m.tail;if(Yn(s,l,m.children,f),m=Tn.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&uE(s,f,l);else if(s.tag===19)uE(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}switch(te(Tn,m),w){case"forwards":for(f=l.child,w=null;f!==null;)s=f.alternate,s!==null&&Qh(s)===null&&(w=f),f=f.sibling;f=w,f===null?(w=l.child,l.child=null):(w=f.sibling,f.sibling=null),a0(l,!1,w,f,b);break;case"backwards":for(f=null,w=l.child,l.child=null;w!==null;){if(s=w.alternate,s!==null&&Qh(s)===null){l.child=w;break}s=w.sibling,w.sibling=f,f=w,w=s}a0(l,!0,f,null,b);break;case"together":a0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Mo(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),xs|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(ed(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=Co(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=Co(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function l0(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&kh(s)))}function oN(s,l,f){switch(l.tag){case 3:$e(l,l.stateNode.containerInfo),ps(l,An,s.memoizedState.cache),Zu();break;case 27:case 5:mt(l);break;case 4:$e(l,l.stateNode.containerInfo);break;case 10:ps(l,l.type,l.memoizedProps.value);break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(_s(l),l.flags|=128,null):(f&l.child.childLanes)!==0?cE(s,l,f):(_s(l),s=Mo(s,l,f),s!==null?s.sibling:null);_s(l);break;case 19:var w=(s.flags&128)!==0;if(m=(f&l.childLanes)!==0,m||(ed(s,l,f,!1),m=(f&l.childLanes)!==0),w){if(m)return dE(s,l,f);l.flags|=128}if(w=l.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),te(Tn,Tn.current),m)break;return null;case 22:case 23:return l.lanes=0,iE(s,l,f);case 24:ps(l,An,s.memoizedState.cache)}return Mo(s,l,f)}function fE(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)Ln=!0;else{if(!l0(s,f)&&(l.flags&128)===0)return Ln=!1,oN(s,l,f);Ln=(s.flags&131072)!==0}else Ln=!1,ft&&(l.flags&1048576)!==0&&z_(l,Mh,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var m=l.elementType,w=m._init;if(m=w(m._payload),l.type=m,typeof m=="function")yg(m)?(s=$a(m,s),l.tag=1,l=aE(null,l,m,s,f)):(l.tag=0,l=t0(null,l,m,s,f));else{if(m!=null){if(w=m.$$typeof,w===D){l.tag=11,l=tE(null,l,m,s,f);break e}else if(w===M){l.tag=14,l=nE(null,l,m,s,f);break e}}throw l=Ce(m)||m,Error(r(306,l,""))}}return l;case 0:return t0(s,l,l.type,l.pendingProps,f);case 1:return m=l.type,w=$a(m,l.pendingProps),aE(s,l,m,w,f);case 3:e:{if($e(l,l.stateNode.containerInfo),s===null)throw Error(r(387));m=l.pendingProps;var b=l.memoizedState;w=b.element,Og(s,l),ad(l,m,null,f);var N=l.memoizedState;if(m=N.cache,ps(l,An,m),m!==b.cache&&Sg(l,[An],f,!0),sd(),m=N.element,b.isDehydrated)if(b={element:m,isDehydrated:!1,cache:N.cache},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){l=lE(s,l,m,f);break e}else if(m!==w){w=ni(Error(r(424)),l),Ju(w),l=lE(s,l,m,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Xt=xi(s.firstChild),wr=l,ft=!0,Ua=null,Xi=!0,f=Gb(l,null,m,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Zu(),m===w){l=Mo(s,l,f);break e}Yn(s,l,m,f)}l=l.child}return l;case 26:return em(s,l),s===null?(f=g4(l.type,null,l.pendingProps,null))?l.memoizedState=f:ft||(f=l.type,s=l.pendingProps,m=pm(ge.current).createElement(f),m[_n]=l,m[un]=s,Qn(m,f,s),Jt(m),l.stateNode=m):l.memoizedState=g4(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return mt(l),s===null&&ft&&(m=l.stateNode=h4(l.type,l.pendingProps,ge.current),wr=l,Xi=!0,w=Xt,Ns(l.type)?(z0=w,Xt=xi(m.firstChild)):Xt=w),Yn(s,l,l.pendingProps.children,f),em(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&ft&&((w=m=Xt)&&(m=PN(m,l.type,l.pendingProps,Xi),m!==null?(l.stateNode=m,wr=l,Xt=xi(m.firstChild),Xi=!1,w=!0):w=!1),w||za(l)),mt(l),w=l.type,b=l.pendingProps,N=s!==null?s.memoizedProps:null,m=b.children,V0(w,b)?m=null:N!==null&&V0(w,N)&&(l.flags|=32),l.memoizedState!==null&&(w=jg(s,l,Q5,null,null,f),Rd._currentValue=w),em(s,l),Yn(s,l,m,f),l.child;case 6:return s===null&&ft&&((s=f=Xt)&&(f=MN(f,l.pendingProps,Xi),f!==null?(l.stateNode=f,wr=l,Xt=null,s=!0):s=!1),s||za(l)),null;case 13:return cE(s,l,f);case 4:return $e(l,l.stateNode.containerInfo),m=l.pendingProps,s===null?l.child=oc(l,null,m,f):Yn(s,l,m,f),l.child;case 11:return tE(s,l,l.type,l.pendingProps,f);case 7:return Yn(s,l,l.pendingProps,f),l.child;case 8:return Yn(s,l,l.pendingProps.children,f),l.child;case 12:return Yn(s,l,l.pendingProps.children,f),l.child;case 10:return m=l.pendingProps,ps(l,l.type,m.value),Yn(s,l,m.children,f),l.child;case 9:return w=l.type._context,m=l.pendingProps.children,Ga(l),w=cr(w),m=m(w),l.flags|=1,Yn(s,l,m,f),l.child;case 14:return nE(s,l,l.type,l.pendingProps,f);case 15:return rE(s,l,l.type,l.pendingProps,f);case 19:return dE(s,l,f);case 31:return m=l.pendingProps,f=l.mode,m={mode:m.mode,children:m.children},s===null?(f=tm(m,f),f.ref=l.ref,l.child=f,f.return=l,l=f):(f=Co(s.child,m),f.ref=l.ref,l.child=f,f.return=l,l=f),l;case 22:return iE(s,l,f);case 24:return Ga(l),m=cr(An),s===null?(w=Ig(),w===null&&(w=Ot,b=xg(),w.pooledCache=b,b.refCount++,b!==null&&(w.pooledCacheLanes|=f),w=b),l.memoizedState={parent:m,cache:w},Ng(l),ps(l,An,w)):((s.lanes&f)!==0&&(Og(s,l),ad(l,null,null,f),sd()),w=s.memoizedState,b=l.memoizedState,w.parent!==m?(w={parent:m,cache:m},l.memoizedState=w,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=w),ps(l,An,m)):(m=b.cache,ps(l,An,m),m!==w.cache&&Sg(l,[An],f,!0))),Yn(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function ko(s){s.flags|=4}function hE(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!b4(l)){if(l=si.current,l!==null&&((ot&4194048)===ot?Yi!==null:(ot&62914560)!==ot&&(ot&536870912)===0||l!==Yi))throw id=Rg,K_;s.flags|=8192}}function nm(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Ou():536870912,s.lanes|=l,cc|=l)}function md(s,l){if(!ft)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function zt(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,m=0;if(l)for(var w=s.child;w!==null;)f|=w.lanes|w.childLanes,m|=w.subtreeFlags&65011712,m|=w.flags&65011712,w.return=s,w=w.sibling;else for(w=s.child;w!==null;)f|=w.lanes|w.childLanes,m|=w.subtreeFlags,m|=w.flags,w.return=s,w=w.sibling;return s.subtreeFlags|=m,s.childLanes=f,l}function sN(s,l,f){var m=l.pendingProps;switch(bg(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(l),null;case 1:return zt(l),null;case 3:return f=l.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),Oo(An),Zt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Qu(l)?ko(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,q_())),zt(l),null;case 26:return f=l.memoizedState,s===null?(ko(l),f!==null?(zt(l),hE(l,f)):(zt(l),l.flags&=-16777217)):f?f!==s.memoizedState?(ko(l),zt(l),hE(l,f)):(zt(l),l.flags&=-16777217):(s.memoizedProps!==m&&ko(l),zt(l),l.flags&=-16777217),null;case 27:Ie(l),f=ge.current;var w=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==m&&ko(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return zt(l),null}s=se.current,Qu(l)?H_(l):(s=h4(w,m,f),l.stateNode=s,ko(l))}return zt(l),null;case 5:if(Ie(l),f=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==m&&ko(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return zt(l),null}if(s=se.current,Qu(l))H_(l);else{switch(w=pm(ge.current),s){case 1:s=w.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:s=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":s=w.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":s=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":s=w.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof m.is=="string"?w.createElement("select",{is:m.is}):w.createElement("select"),m.multiple?s.multiple=!0:m.size&&(s.size=m.size);break;default:s=typeof m.is=="string"?w.createElement(f,{is:m.is}):w.createElement(f)}}s[_n]=l,s[un]=m;e:for(w=l.child;w!==null;){if(w.tag===5||w.tag===6)s.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===l)break e;for(;w.sibling===null;){if(w.return===null||w.return===l)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}l.stateNode=s;e:switch(Qn(s,f,m),f){case"button":case"input":case"select":case"textarea":s=!!m.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ko(l)}}return zt(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==m&&ko(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(s=ge.current,Qu(l)){if(s=l.stateNode,f=l.memoizedProps,m=null,w=wr,w!==null)switch(w.tag){case 27:case 5:m=w.memoizedProps}s[_n]=l,s=!!(s.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||s4(s.nodeValue,f)),s||za(l)}else s=pm(s).createTextNode(m),s[_n]=l,l.stateNode=s}return zt(l),null;case 13:if(m=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(w=Qu(l),m!==null&&m.dehydrated!==null){if(s===null){if(!w)throw Error(r(318));if(w=l.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(r(317));w[_n]=l}else Zu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;zt(l),w=!1}else w=q_(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=w),w=!0;if(!w)return l.flags&256?(Po(l),l):(Po(l),null)}if(Po(l),(l.flags&128)!==0)return l.lanes=f,l;if(f=m!==null,s=s!==null&&s.memoizedState!==null,f){m=l.child,w=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(w=m.alternate.memoizedState.cachePool.pool);var b=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(b=m.memoizedState.cachePool.pool),b!==w&&(m.flags|=2048)}return f!==s&&f&&(l.child.flags|=8192),nm(l,l.updateQueue),zt(l),null;case 4:return Zt(),s===null&&P0(l.stateNode.containerInfo),zt(l),null;case 10:return Oo(l.type),zt(l),null;case 19:if(oe(Tn),w=l.memoizedState,w===null)return zt(l),null;if(m=(l.flags&128)!==0,b=w.rendering,b===null)if(m)md(w,!1);else{if(Yt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(b=Qh(s),b!==null){for(l.flags|=128,md(w,!1),s=b.updateQueue,l.updateQueue=s,nm(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)U_(f,s),f=f.sibling;return te(Tn,Tn.current&1|2),l.child}s=s.sibling}w.tail!==null&&Wn()>om&&(l.flags|=128,m=!0,md(w,!1),l.lanes=4194304)}else{if(!m)if(s=Qh(b),s!==null){if(l.flags|=128,m=!0,s=s.updateQueue,l.updateQueue=s,nm(l,s),md(w,!0),w.tail===null&&w.tailMode==="hidden"&&!b.alternate&&!ft)return zt(l),null}else 2*Wn()-w.renderingStartTime>om&&f!==536870912&&(l.flags|=128,m=!0,md(w,!1),l.lanes=4194304);w.isBackwards?(b.sibling=l.child,l.child=b):(s=w.last,s!==null?s.sibling=b:l.child=b,w.last=b)}return w.tail!==null?(l=w.tail,w.rendering=l,w.tail=l.sibling,w.renderingStartTime=Wn(),l.sibling=null,s=Tn.current,te(Tn,m?s&1|2:s&1),l):(zt(l),null);case 22:case 23:return Po(l),kg(),m=l.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(f&536870912)!==0&&(l.flags&128)===0&&(zt(l),l.subtreeFlags&6&&(l.flags|=8192)):zt(l),f=l.updateQueue,f!==null&&nm(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048),s!==null&&oe(qa),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Oo(An),zt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function aN(s,l){switch(bg(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Oo(An),Zt(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Ie(l),null;case 13:if(Po(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Zu()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return oe(Tn),null;case 4:return Zt(),null;case 10:return Oo(l.type),null;case 22:case 23:return Po(l),kg(),s!==null&&oe(qa),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Oo(An),null;case 25:return null;default:return null}}function mE(s,l){switch(bg(l),l.tag){case 3:Oo(An),Zt();break;case 26:case 27:case 5:Ie(l);break;case 4:Zt();break;case 13:Po(l);break;case 19:oe(Tn);break;case 10:Oo(l.type);break;case 22:case 23:Po(l),kg(),s!==null&&oe(qa);break;case 24:Oo(An)}}function pd(s,l){try{var f=l.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var w=m.next;f=w;do{if((f.tag&s)===s){m=void 0;var b=f.create,N=f.inst;m=b(),N.destroy=m}f=f.next}while(f!==w)}}catch(L){Rt(l,l.return,L)}}function Es(s,l,f){try{var m=l.updateQueue,w=m!==null?m.lastEffect:null;if(w!==null){var b=w.next;m=b;do{if((m.tag&s)===s){var N=m.inst,L=N.destroy;if(L!==void 0){N.destroy=void 0,w=l;var G=f,J=L;try{J()}catch(le){Rt(w,G,le)}}}m=m.next}while(m!==b)}}catch(le){Rt(l,l.return,le)}}function pE(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{nb(l,f)}catch(m){Rt(s,s.return,m)}}}function gE(s,l,f){f.props=$a(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(m){Rt(s,l,m)}}function gd(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof f=="function"?s.refCleanup=f(m):f.current=m}}catch(w){Rt(s,l,w)}}function Ki(s,l){var f=s.ref,m=s.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(w){Rt(s,l,w)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(w){Rt(s,l,w)}else f.current=null}function yE(s){var l=s.type,f=s.memoizedProps,m=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(w){Rt(s,s.return,w)}}function c0(s,l,f){try{var m=s.stateNode;IN(m,s.type,f,l),m[un]=l}catch(w){Rt(s,s.return,w)}}function vE(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ns(s.type)||s.tag===4}function u0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||vE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ns(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function d0(s,l,f){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=mm));else if(m!==4&&(m===27&&Ns(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(d0(s,l,f),s=s.sibling;s!==null;)d0(s,l,f),s=s.sibling}function rm(s,l,f){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(m!==4&&(m===27&&Ns(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(rm(s,l,f),s=s.sibling;s!==null;)rm(s,l,f),s=s.sibling}function wE(s){var l=s.stateNode,f=s.memoizedProps;try{for(var m=s.type,w=l.attributes;w.length;)l.removeAttributeNode(w[0]);Qn(l,m,f),l[_n]=s,l[un]=f}catch(b){Rt(s,s.return,b)}}var Lo=!1,tn=!1,f0=!1,_E=typeof WeakSet=="function"?WeakSet:Set,jn=null;function lN(s,l){if(s=s.containerInfo,L0=bm,s=O_(s),ug(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var w=m.anchorOffset,b=m.focusNode;m=m.focusOffset;try{f.nodeType,b.nodeType}catch{f=null;break e}var N=0,L=-1,G=-1,J=0,le=0,fe=s,ne=null;t:for(;;){for(var re;fe!==f||w!==0&&fe.nodeType!==3||(L=N+w),fe!==b||m!==0&&fe.nodeType!==3||(G=N+m),fe.nodeType===3&&(N+=fe.nodeValue.length),(re=fe.firstChild)!==null;)ne=fe,fe=re;for(;;){if(fe===s)break t;if(ne===f&&++J===w&&(L=N),ne===b&&++le===m&&(G=N),(re=fe.nextSibling)!==null)break;fe=ne,ne=fe.parentNode}fe=re}f=L===-1||G===-1?null:{start:L,end:G}}else f=null}f=f||{start:0,end:0}}else f=null;for(j0={focusedElem:s,selectionRange:f},bm=!1,jn=l;jn!==null;)if(l=jn,s=l.child,(l.subtreeFlags&1024)!==0&&s!==null)s.return=l,jn=s;else for(;jn!==null;){switch(l=jn,b=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,f=l,w=b.memoizedProps,b=b.memoizedState,m=f.stateNode;try{var Ue=$a(f.type,w,f.elementType===f.type);s=m.getSnapshotBeforeUpdate(Ue,b),m.__reactInternalSnapshotBeforeUpdate=s}catch(je){Rt(f,f.return,je)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)F0(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":F0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,jn=s;break}jn=l.return}}function bE(s,l,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:As(s,f),m&4&&pd(5,f);break;case 1:if(As(s,f),m&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(N){Rt(f,f.return,N)}else{var w=$a(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(w,l,s.__reactInternalSnapshotBeforeUpdate)}catch(N){Rt(f,f.return,N)}}m&64&&pE(f),m&512&&gd(f,f.return);break;case 3:if(As(s,f),m&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{nb(s,l)}catch(N){Rt(f,f.return,N)}}break;case 27:l===null&&m&4&&wE(f);case 26:case 5:As(s,f),l===null&&m&4&&yE(f),m&512&&gd(f,f.return);break;case 12:As(s,f);break;case 13:As(s,f),m&4&&TE(s,f),m&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=yN.bind(null,f),kN(s,f))));break;case 22:if(m=f.memoizedState!==null||Lo,!m){l=l!==null&&l.memoizedState!==null||tn,w=Lo;var b=tn;Lo=m,(tn=l)&&!b?Ts(s,f,(f.subtreeFlags&8772)!==0):As(s,f),Lo=w,tn=b}break;case 30:break;default:As(s,f)}}function EE(s){var l=s.alternate;l!==null&&(s.alternate=null,EE(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&ds(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var jt=null,xr=!1;function jo(s,l,f){for(f=f.child;f!==null;)AE(s,l,f),f=f.sibling}function AE(s,l,f){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount($t,f)}catch{}switch(f.tag){case 26:tn||Ki(f,l),jo(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:tn||Ki(f,l);var m=jt,w=xr;Ns(f.type)&&(jt=f.stateNode,xr=!1),jo(s,l,f),Sd(f.stateNode),jt=m,xr=w;break;case 5:tn||Ki(f,l);case 6:if(m=jt,w=xr,jt=null,jo(s,l,f),jt=m,xr=w,jt!==null)if(xr)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(f.stateNode)}catch(b){Rt(f,l,b)}else try{jt.removeChild(f.stateNode)}catch(b){Rt(f,l,b)}break;case 18:jt!==null&&(xr?(s=jt,d4(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),Pd(s)):d4(jt,f.stateNode));break;case 4:m=jt,w=xr,jt=f.stateNode.containerInfo,xr=!0,jo(s,l,f),jt=m,xr=w;break;case 0:case 11:case 14:case 15:tn||Es(2,f,l),tn||Es(4,f,l),jo(s,l,f);break;case 1:tn||(Ki(f,l),m=f.stateNode,typeof m.componentWillUnmount=="function"&&gE(f,l,m)),jo(s,l,f);break;case 21:jo(s,l,f);break;case 22:tn=(m=tn)||f.memoizedState!==null,jo(s,l,f),tn=m;break;default:jo(s,l,f)}}function TE(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Pd(s)}catch(f){Rt(l,l.return,f)}}function cN(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new _E),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new _E),l;default:throw Error(r(435,s.tag))}}function h0(s,l){var f=cN(s);l.forEach(function(m){var w=vN.bind(null,s,m);f.has(m)||(f.add(m),m.then(w,w))})}function Fr(s,l){var f=l.deletions;if(f!==null)for(var m=0;m<f.length;m++){var w=f[m],b=s,N=l,L=N;e:for(;L!==null;){switch(L.tag){case 27:if(Ns(L.type)){jt=L.stateNode,xr=!1;break e}break;case 5:jt=L.stateNode,xr=!1;break e;case 3:case 4:jt=L.stateNode.containerInfo,xr=!0;break e}L=L.return}if(jt===null)throw Error(r(160));AE(b,N,w),jt=null,xr=!1,b=w.alternate,b!==null&&(b.return=null),w.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)SE(l,s),l=l.sibling}var Si=null;function SE(s,l){var f=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Fr(l,s),Ur(s),m&4&&(Es(3,s,s.return),pd(3,s),Es(5,s,s.return));break;case 1:Fr(l,s),Ur(s),m&512&&(tn||f===null||Ki(f,f.return)),m&64&&Lo&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var w=Si;if(Fr(l,s),Ur(s),m&512&&(tn||f===null||Ki(f,f.return)),m&4){var b=f!==null?f.memoizedState:null;if(m=s.memoizedState,f===null)if(m===null)if(s.stateNode===null){e:{m=s.type,f=s.memoizedProps,w=w.ownerDocument||w;t:switch(m){case"title":b=w.getElementsByTagName("title")[0],(!b||b[Ea]||b[_n]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=w.createElement(m),w.head.insertBefore(b,w.querySelector("head > title"))),Qn(b,m,f),b[_n]=s,Jt(b),m=b;break e;case"link":var N=w4("link","href",w).get(m+(f.href||""));if(N){for(var L=0;L<N.length;L++)if(b=N[L],b.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&b.getAttribute("rel")===(f.rel==null?null:f.rel)&&b.getAttribute("title")===(f.title==null?null:f.title)&&b.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){N.splice(L,1);break t}}b=w.createElement(m),Qn(b,m,f),w.head.appendChild(b);break;case"meta":if(N=w4("meta","content",w).get(m+(f.content||""))){for(L=0;L<N.length;L++)if(b=N[L],b.getAttribute("content")===(f.content==null?null:""+f.content)&&b.getAttribute("name")===(f.name==null?null:f.name)&&b.getAttribute("property")===(f.property==null?null:f.property)&&b.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&b.getAttribute("charset")===(f.charSet==null?null:f.charSet)){N.splice(L,1);break t}}b=w.createElement(m),Qn(b,m,f),w.head.appendChild(b);break;default:throw Error(r(468,m))}b[_n]=s,Jt(b),m=b}s.stateNode=m}else _4(w,s.type,s.stateNode);else s.stateNode=v4(w,m,s.memoizedProps);else b!==m?(b===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):b.count--,m===null?_4(w,s.type,s.stateNode):v4(w,m,s.memoizedProps)):m===null&&s.stateNode!==null&&c0(s,s.memoizedProps,f.memoizedProps)}break;case 27:Fr(l,s),Ur(s),m&512&&(tn||f===null||Ki(f,f.return)),f!==null&&m&4&&c0(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Fr(l,s),Ur(s),m&512&&(tn||f===null||Ki(f,f.return)),s.flags&32){w=s.stateNode;try{Zr(w,"")}catch(re){Rt(s,s.return,re)}}m&4&&s.stateNode!=null&&(w=s.memoizedProps,c0(s,w,f!==null?f.memoizedProps:w)),m&1024&&(f0=!0);break;case 6:if(Fr(l,s),Ur(s),m&4){if(s.stateNode===null)throw Error(r(162));m=s.memoizedProps,f=s.stateNode;try{f.nodeValue=m}catch(re){Rt(s,s.return,re)}}break;case 3:if(vm=null,w=Si,Si=gm(l.containerInfo),Fr(l,s),Si=w,Ur(s),m&4&&f!==null&&f.memoizedState.isDehydrated)try{Pd(l.containerInfo)}catch(re){Rt(s,s.return,re)}f0&&(f0=!1,xE(s));break;case 4:m=Si,Si=gm(s.stateNode.containerInfo),Fr(l,s),Ur(s),Si=m;break;case 12:Fr(l,s),Ur(s);break;case 13:Fr(l,s),Ur(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(w0=Wn()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,h0(s,m)));break;case 22:w=s.memoizedState!==null;var G=f!==null&&f.memoizedState!==null,J=Lo,le=tn;if(Lo=J||w,tn=le||G,Fr(l,s),tn=le,Lo=J,Ur(s),m&8192)e:for(l=s.stateNode,l._visibility=w?l._visibility&-2:l._visibility|1,w&&(f===null||G||Lo||tn||Xa(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){G=f=l;try{if(b=G.stateNode,w)N=b.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{L=G.stateNode;var fe=G.memoizedProps.style,ne=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;L.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(re){Rt(G,G.return,re)}}}else if(l.tag===6){if(f===null){G=l;try{G.stateNode.nodeValue=w?"":G.memoizedProps}catch(re){Rt(G,G.return,re)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=s.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,h0(s,f))));break;case 19:Fr(l,s),Ur(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,h0(s,m)));break;case 30:break;case 21:break;default:Fr(l,s),Ur(s)}}function Ur(s){var l=s.flags;if(l&2){try{for(var f,m=s.return;m!==null;){if(vE(m)){f=m;break}m=m.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var w=f.stateNode,b=u0(s);rm(s,b,w);break;case 5:var N=f.stateNode;f.flags&32&&(Zr(N,""),f.flags&=-33);var L=u0(s);rm(s,L,N);break;case 3:case 4:var G=f.stateNode.containerInfo,J=u0(s);d0(s,J,G);break;default:throw Error(r(161))}}catch(le){Rt(s,s.return,le)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function xE(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;xE(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function As(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)bE(s,l.alternate,l),l=l.sibling}function Xa(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Es(4,l,l.return),Xa(l);break;case 1:Ki(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&gE(l,l.return,f),Xa(l);break;case 27:Sd(l.stateNode);case 26:case 5:Ki(l,l.return),Xa(l);break;case 22:l.memoizedState===null&&Xa(l);break;case 30:Xa(l);break;default:Xa(l)}s=s.sibling}}function Ts(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,w=s,b=l,N=b.flags;switch(b.tag){case 0:case 11:case 15:Ts(w,b,f),pd(4,b);break;case 1:if(Ts(w,b,f),m=b,w=m.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(J){Rt(m,m.return,J)}if(m=b,w=m.updateQueue,w!==null){var L=m.stateNode;try{var G=w.shared.hiddenCallbacks;if(G!==null)for(w.shared.hiddenCallbacks=null,w=0;w<G.length;w++)tb(G[w],L)}catch(J){Rt(m,m.return,J)}}f&&N&64&&pE(b),gd(b,b.return);break;case 27:wE(b);case 26:case 5:Ts(w,b,f),f&&m===null&&N&4&&yE(b),gd(b,b.return);break;case 12:Ts(w,b,f);break;case 13:Ts(w,b,f),f&&N&4&&TE(w,b);break;case 22:b.memoizedState===null&&Ts(w,b,f),gd(b,b.return);break;case 30:break;default:Ts(w,b,f)}l=l.sibling}}function m0(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&td(f))}function p0(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&td(s))}function Qi(s,l,f,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)CE(s,l,f,m),l=l.sibling}function CE(s,l,f,m){var w=l.flags;switch(l.tag){case 0:case 11:case 15:Qi(s,l,f,m),w&2048&&pd(9,l);break;case 1:Qi(s,l,f,m);break;case 3:Qi(s,l,f,m),w&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&td(s)));break;case 12:if(w&2048){Qi(s,l,f,m),s=l.stateNode;try{var b=l.memoizedProps,N=b.id,L=b.onPostCommit;typeof L=="function"&&L(N,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(G){Rt(l,l.return,G)}}else Qi(s,l,f,m);break;case 13:Qi(s,l,f,m);break;case 23:break;case 22:b=l.stateNode,N=l.alternate,l.memoizedState!==null?b._visibility&2?Qi(s,l,f,m):yd(s,l):b._visibility&2?Qi(s,l,f,m):(b._visibility|=2,sc(s,l,f,m,(l.subtreeFlags&10256)!==0)),w&2048&&m0(N,l);break;case 24:Qi(s,l,f,m),w&2048&&p0(l.alternate,l);break;default:Qi(s,l,f,m)}}function sc(s,l,f,m,w){for(w=w&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var b=s,N=l,L=f,G=m,J=N.flags;switch(N.tag){case 0:case 11:case 15:sc(b,N,L,G,w),pd(8,N);break;case 23:break;case 22:var le=N.stateNode;N.memoizedState!==null?le._visibility&2?sc(b,N,L,G,w):yd(b,N):(le._visibility|=2,sc(b,N,L,G,w)),w&&J&2048&&m0(N.alternate,N);break;case 24:sc(b,N,L,G,w),w&&J&2048&&p0(N.alternate,N);break;default:sc(b,N,L,G,w)}l=l.sibling}}function yd(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,m=l,w=m.flags;switch(m.tag){case 22:yd(f,m),w&2048&&m0(m.alternate,m);break;case 24:yd(f,m),w&2048&&p0(m.alternate,m);break;default:yd(f,m)}l=l.sibling}}var vd=8192;function ac(s){if(s.subtreeFlags&vd)for(s=s.child;s!==null;)IE(s),s=s.sibling}function IE(s){switch(s.tag){case 26:ac(s),s.flags&vd&&s.memoizedState!==null&&XN(Si,s.memoizedState,s.memoizedProps);break;case 5:ac(s);break;case 3:case 4:var l=Si;Si=gm(s.stateNode.containerInfo),ac(s),Si=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=vd,vd=16777216,ac(s),vd=l):ac(s));break;default:ac(s)}}function RE(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function wd(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var m=l[f];jn=m,OE(m,s)}RE(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)NE(s),s=s.sibling}function NE(s){switch(s.tag){case 0:case 11:case 15:wd(s),s.flags&2048&&Es(9,s,s.return);break;case 3:wd(s);break;case 12:wd(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,im(s)):wd(s);break;default:wd(s)}}function im(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var m=l[f];jn=m,OE(m,s)}RE(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Es(8,l,l.return),im(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,im(l));break;default:im(l)}s=s.sibling}}function OE(s,l){for(;jn!==null;){var f=jn;switch(f.tag){case 0:case 11:case 15:Es(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:td(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,jn=m;else e:for(f=s;jn!==null;){m=jn;var w=m.sibling,b=m.return;if(EE(m),m===f){jn=null;break e}if(w!==null){w.return=b,jn=w;break e}jn=b}}}var uN={getCacheForType:function(s){var l=cr(An),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f}},dN=typeof WeakMap=="function"?WeakMap:Map,vt=0,Ot=null,Je=null,ot=0,wt=0,zr=null,Ss=!1,lc=!1,g0=!1,Vo=0,Yt=0,xs=0,Ya=0,y0=0,ai=0,cc=0,_d=null,Cr=null,v0=!1,w0=0,om=1/0,sm=null,Cs=null,Kn=0,Is=null,uc=null,dc=0,_0=0,b0=null,DE=null,bd=0,E0=null;function Hr(){if((vt&2)!==0&&ot!==0)return ot&-ot;if(Q.T!==null){var s=Zl;return s!==0?s:R0()}return cs()}function PE(){ai===0&&(ai=(ot&536870912)===0||ft?Nu():536870912);var s=si.current;return s!==null&&(s.flags|=32),ai}function Gr(s,l,f){(s===Ot&&(wt===2||wt===9)||s.cancelPendingCommit!==null)&&(fc(s,0),Rs(s,ot,ai,!1)),go(s,f),((vt&2)===0||s!==Ot)&&(s===Ot&&((vt&2)===0&&(Ya|=f),Yt===4&&Rs(s,ot,ai,!1)),Zi(s))}function ME(s,l,f){if((vt&6)!==0)throw Error(r(327));var m=!f&&(l&124)===0&&(l&s.expiredLanes)===0||ba(s,l),w=m?mN(s,l):S0(s,l,!0),b=m;do{if(w===0){lc&&!m&&Rs(s,l,0,!1);break}else{if(f=s.current.alternate,b&&!fN(f)){w=S0(s,l,!1),b=!1;continue}if(w===2){if(b=l,s.errorRecoveryDisabledLanes&b)var N=0;else N=s.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){l=N;e:{var L=s;w=_d;var G=L.current.memoizedState.isDehydrated;if(G&&(fc(L,N).flags|=256),N=S0(L,N,!1),N!==2){if(g0&&!G){L.errorRecoveryDisabledLanes|=b,Ya|=b,w=4;break e}b=Cr,Cr=w,b!==null&&(Cr===null?Cr=b:Cr.push.apply(Cr,b))}w=N}if(b=!1,w!==2)continue}}if(w===1){fc(s,0),Rs(s,l,0,!0);break}e:{switch(m=s,b=w,b){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Rs(m,l,ai,!Ss);break e;case 2:Cr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(w=w0+300-Wn(),10<w)){if(Rs(m,l,ai,!Ss),Rl(m,0,!0)!==0)break e;m.timeoutHandle=c4(kE.bind(null,m,f,Cr,sm,v0,l,ai,Ya,cc,Ss,b,2,-0,0),w);break e}kE(m,f,Cr,sm,v0,l,ai,Ya,cc,Ss,b,0,-0,0)}}break}while(!0);Zi(s)}function kE(s,l,f,m,w,b,N,L,G,J,le,fe,ne,re){if(s.timeoutHandle=-1,fe=l.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(Id={stylesheets:null,count:0,unsuspend:$N},IE(l),fe=YN(),fe!==null)){s.cancelPendingCommit=fe(zE.bind(null,s,l,b,f,m,w,N,L,G,le,1,ne,re)),Rs(s,b,N,!J);return}zE(s,l,b,f,m,w,N,L,G)}function fN(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var w=f[m],b=w.getSnapshot;w=w.value;try{if(!Vr(b(),w))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Rs(s,l,f,m){l&=~y0,l&=~Ya,s.suspendedLanes|=l,s.pingedLanes&=~l,m&&(s.warmLanes|=l),m=s.expirationTimes;for(var w=l;0<w;){var b=31-lr(w),N=1<<b;m[b]=-1,w&=~N}f!==0&&ji(s,f,l)}function am(){return(vt&6)===0?(Ed(0),!1):!0}function A0(){if(Je!==null){if(wt===0)var s=Je.return;else s=Je,No=Ha=null,Fg(s),ic=null,fd=0,s=Je;for(;s!==null;)mE(s.alternate,s),s=s.return;Je=null}}function fc(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,NN(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),A0(),Ot=s,Je=f=Co(s.current,null),ot=l,wt=0,zr=null,Ss=!1,lc=ba(s,l),g0=!1,cc=ai=y0=Ya=xs=Yt=0,Cr=_d=null,v0=!1,(l&8)!==0&&(l|=l&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=l;0<m;){var w=31-lr(m),b=1<<w;l|=s[w],m&=~b}return Vo=l,Rh(),f}function LE(s,l){Ye=null,Q.H=Xh,l===rd||l===Vh?(l=J_(),wt=3):l===K_?(l=J_(),wt=4):wt=l===eE?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,zr=l,Je===null&&(Yt=1,Jh(s,ni(l,s.current)))}function jE(){var s=Q.H;return Q.H=Xh,s===null?Xh:s}function VE(){var s=Q.A;return Q.A=uN,s}function T0(){Yt=4,Ss||(ot&4194048)!==ot&&si.current!==null||(lc=!0),(xs&134217727)===0&&(Ya&134217727)===0||Ot===null||Rs(Ot,ot,ai,!1)}function S0(s,l,f){var m=vt;vt|=2;var w=jE(),b=VE();(Ot!==s||ot!==l)&&(sm=null,fc(s,l)),l=!1;var N=Yt;e:do try{if(wt!==0&&Je!==null){var L=Je,G=zr;switch(wt){case 8:A0(),N=6;break e;case 3:case 2:case 9:case 6:si.current===null&&(l=!0);var J=wt;if(wt=0,zr=null,hc(s,L,G,J),f&&lc){N=0;break e}break;default:J=wt,wt=0,zr=null,hc(s,L,G,J)}}hN(),N=Yt;break}catch(le){LE(s,le)}while(!0);return l&&s.shellSuspendCounter++,No=Ha=null,vt=m,Q.H=w,Q.A=b,Je===null&&(Ot=null,ot=0,Rh()),N}function hN(){for(;Je!==null;)BE(Je)}function mN(s,l){var f=vt;vt|=2;var m=jE(),w=VE();Ot!==s||ot!==l?(sm=null,om=Wn()+500,fc(s,l)):lc=ba(s,l);e:do try{if(wt!==0&&Je!==null){l=Je;var b=zr;t:switch(wt){case 1:wt=0,zr=null,hc(s,l,b,1);break;case 2:case 9:if(Q_(b)){wt=0,zr=null,FE(l);break}l=function(){wt!==2&&wt!==9||Ot!==s||(wt=7),Zi(s)},b.then(l,l);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:Q_(b)?(wt=0,zr=null,FE(l)):(wt=0,zr=null,hc(s,l,b,7));break;case 5:var N=null;switch(Je.tag){case 26:N=Je.memoizedState;case 5:case 27:var L=Je;if(!N||b4(N)){wt=0,zr=null;var G=L.sibling;if(G!==null)Je=G;else{var J=L.return;J!==null?(Je=J,lm(J)):Je=null}break t}}wt=0,zr=null,hc(s,l,b,5);break;case 6:wt=0,zr=null,hc(s,l,b,6);break;case 8:A0(),Yt=6;break e;default:throw Error(r(462))}}pN();break}catch(le){LE(s,le)}while(!0);return No=Ha=null,Q.H=m,Q.A=w,vt=f,Je!==null?0:(Ot=null,ot=0,Rh(),Yt)}function pN(){for(;Je!==null&&!cn();)BE(Je)}function BE(s){var l=fE(s.alternate,s,Vo);s.memoizedProps=s.pendingProps,l===null?lm(s):Je=l}function FE(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=sE(f,l,l.pendingProps,l.type,void 0,ot);break;case 11:l=sE(f,l,l.pendingProps,l.type.render,l.ref,ot);break;case 5:Fg(l);default:mE(f,l),l=Je=U_(l,Vo),l=fE(f,l,Vo)}s.memoizedProps=s.pendingProps,l===null?lm(s):Je=l}function hc(s,l,f,m){No=Ha=null,Fg(l),ic=null,fd=0;var w=l.return;try{if(iN(s,w,l,f,ot)){Yt=1,Jh(s,ni(f,s.current)),Je=null;return}}catch(b){if(w!==null)throw Je=w,b;Yt=1,Jh(s,ni(f,s.current)),Je=null;return}l.flags&32768?(ft||m===1?s=!0:lc||(ot&536870912)!==0?s=!1:(Ss=s=!0,(m===2||m===9||m===3||m===6)&&(m=si.current,m!==null&&m.tag===13&&(m.flags|=16384))),UE(l,s)):lm(l)}function lm(s){var l=s;do{if((l.flags&32768)!==0){UE(l,Ss);return}s=l.return;var f=sN(l.alternate,l,Vo);if(f!==null){Je=f;return}if(l=l.sibling,l!==null){Je=l;return}Je=l=s}while(l!==null);Yt===0&&(Yt=5)}function UE(s,l){do{var f=aN(s.alternate,s);if(f!==null){f.flags&=32767,Je=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){Je=s;return}Je=s=f}while(s!==null);Yt=6,Je=null}function zE(s,l,f,m,w,b,N,L,G){s.cancelPendingCommit=null;do cm();while(Kn!==0);if((vt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(b=l.lanes|l.childLanes,b|=pg,Du(s,f,b,N,L,G),s===Ot&&(Je=Ot=null,ot=0),uc=l,Is=s,dc=f,_0=b,b0=w,DE=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,wN(ya,function(){return $E(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=Q.T,Q.T=null,w=me.p,me.p=2,N=vt,vt|=4;try{lN(s,l,f)}finally{vt=N,me.p=w,Q.T=m}}Kn=1,HE(),GE(),qE()}}function HE(){if(Kn===1){Kn=0;var s=Is,l=uc,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=Q.T,Q.T=null;var m=me.p;me.p=2;var w=vt;vt|=4;try{SE(l,s);var b=j0,N=O_(s.containerInfo),L=b.focusedElem,G=b.selectionRange;if(N!==L&&L&&L.ownerDocument&&N_(L.ownerDocument.documentElement,L)){if(G!==null&&ug(L)){var J=G.start,le=G.end;if(le===void 0&&(le=J),"selectionStart"in L)L.selectionStart=J,L.selectionEnd=Math.min(le,L.value.length);else{var fe=L.ownerDocument||document,ne=fe&&fe.defaultView||window;if(ne.getSelection){var re=ne.getSelection(),Ue=L.textContent.length,je=Math.min(G.start,Ue),St=G.end===void 0?je:Math.min(G.end,Ue);!re.extend&&je>St&&(N=St,St=je,je=N);var X=R_(L,je),$=R_(L,St);if(X&&$&&(re.rangeCount!==1||re.anchorNode!==X.node||re.anchorOffset!==X.offset||re.focusNode!==$.node||re.focusOffset!==$.offset)){var Z=fe.createRange();Z.setStart(X.node,X.offset),re.removeAllRanges(),je>St?(re.addRange(Z),re.extend($.node,$.offset)):(Z.setEnd($.node,$.offset),re.addRange(Z))}}}}for(fe=[],re=L;re=re.parentNode;)re.nodeType===1&&fe.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<fe.length;L++){var de=fe[L];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}bm=!!L0,j0=L0=null}finally{vt=w,me.p=m,Q.T=f}}s.current=l,Kn=2}}function GE(){if(Kn===2){Kn=0;var s=Is,l=uc,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=Q.T,Q.T=null;var m=me.p;me.p=2;var w=vt;vt|=4;try{bE(s,l.alternate,l)}finally{vt=w,me.p=m,Q.T=f}}Kn=3}}function qE(){if(Kn===4||Kn===3){Kn=0,Tr();var s=Is,l=uc,f=dc,m=DE;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Kn=5:(Kn=0,uc=Is=null,WE(s,s.pendingLanes));var w=s.pendingLanes;if(w===0&&(Cs=null),Nl(f),l=l.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot($t,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=Q.T,w=me.p,me.p=2,Q.T=null;try{for(var b=s.onRecoverableError,N=0;N<m.length;N++){var L=m[N];b(L.value,{componentStack:L.stack})}}finally{Q.T=l,me.p=w}}(dc&3)!==0&&cm(),Zi(s),w=s.pendingLanes,(f&4194090)!==0&&(w&42)!==0?s===E0?bd++:(bd=0,E0=s):bd=0,Ed(0)}}function WE(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,td(l)))}function cm(s){return HE(),GE(),qE(),$E()}function $E(){if(Kn!==5)return!1;var s=Is,l=_0;_0=0;var f=Nl(dc),m=Q.T,w=me.p;try{me.p=32>f?32:f,Q.T=null,f=b0,b0=null;var b=Is,N=dc;if(Kn=0,uc=Is=null,dc=0,(vt&6)!==0)throw Error(r(331));var L=vt;if(vt|=4,NE(b.current),CE(b,b.current,N,f),vt=L,Ed(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot($t,b)}catch{}return!0}finally{me.p=w,Q.T=m,WE(s,l)}}function XE(s,l,f){l=ni(f,l),l=e0(s.stateNode,l,2),s=vs(s,l,2),s!==null&&(go(s,2),Zi(s))}function Rt(s,l,f){if(s.tag===3)XE(s,s,f);else for(;l!==null;){if(l.tag===3){XE(l,s,f);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Cs===null||!Cs.has(m))){s=ni(f,s),f=Zb(2),m=vs(l,f,2),m!==null&&(Jb(f,m,l,s),go(m,2),Zi(m));break}}l=l.return}}function x0(s,l,f){var m=s.pingCache;if(m===null){m=s.pingCache=new dN;var w=new Set;m.set(l,w)}else w=m.get(l),w===void 0&&(w=new Set,m.set(l,w));w.has(f)||(g0=!0,w.add(f),s=gN.bind(null,s,l,f),l.then(s,s))}function gN(s,l,f){var m=s.pingCache;m!==null&&m.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Ot===s&&(ot&f)===f&&(Yt===4||Yt===3&&(ot&62914560)===ot&&300>Wn()-w0?(vt&2)===0&&fc(s,0):y0|=f,cc===ot&&(cc=0)),Zi(s)}function YE(s,l){l===0&&(l=Ou()),s=Xl(s,l),s!==null&&(go(s,l),Zi(s))}function yN(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),YE(s,f)}function vN(s,l){var f=0;switch(s.tag){case 13:var m=s.stateNode,w=s.memoizedState;w!==null&&(f=w.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(l),YE(s,f)}function wN(s,l){return xe(s,l)}var um=null,mc=null,C0=!1,dm=!1,I0=!1,Ka=0;function Zi(s){s!==mc&&s.next===null&&(mc===null?um=mc=s:mc=mc.next=s),dm=!0,C0||(C0=!0,bN())}function Ed(s,l){if(!I0&&dm){I0=!0;do for(var f=!1,m=um;m!==null;){if(s!==0){var w=m.pendingLanes;if(w===0)var b=0;else{var N=m.suspendedLanes,L=m.pingedLanes;b=(1<<31-lr(42|s)+1)-1,b&=w&~(N&~L),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(f=!0,JE(m,b))}else b=ot,b=Rl(m,m===Ot?b:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(b&3)===0||ba(m,b)||(f=!0,JE(m,b));m=m.next}while(f);I0=!1}}function _N(){KE()}function KE(){dm=C0=!1;var s=0;Ka!==0&&(RN()&&(s=Ka),Ka=0);for(var l=Wn(),f=null,m=um;m!==null;){var w=m.next,b=QE(m,l);b===0?(m.next=null,f===null?um=w:f.next=w,w===null&&(mc=f)):(f=m,(s!==0||(b&3)!==0)&&(dm=!0)),m=w}Ed(s)}function QE(s,l){for(var f=s.suspendedLanes,m=s.pingedLanes,w=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var N=31-lr(b),L=1<<N,G=w[N];G===-1?((L&f)===0||(L&m)!==0)&&(w[N]=Ru(L,l)):G<=l&&(s.expiredLanes|=L),b&=~L}if(l=Ot,f=ot,f=Rl(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,f===0||s===l&&(wt===2||wt===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&bt(m),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||ba(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(m!==null&&bt(m),Nl(f)){case 2:case 8:f=Cl;break;case 32:f=ya;break;case 268435456:f=Il;break;default:f=ya}return m=ZE.bind(null,s),f=xe(f,m),s.callbackPriority=l,s.callbackNode=f,l}return m!==null&&m!==null&&bt(m),s.callbackPriority=2,s.callbackNode=null,2}function ZE(s,l){if(Kn!==0&&Kn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(cm()&&s.callbackNode!==f)return null;var m=ot;return m=Rl(s,s===Ot?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(ME(s,m,l),QE(s,Wn()),s.callbackNode!=null&&s.callbackNode===f?ZE.bind(null,s):null)}function JE(s,l){if(cm())return null;ME(s,l,!0)}function bN(){ON(function(){(vt&6)!==0?xe(as,_N):KE()})}function R0(){return Ka===0&&(Ka=Nu()),Ka}function e4(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ll(""+s)}function t4(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function EN(s,l,f,m,w){if(l==="submit"&&f&&f.stateNode===w){var b=e4((w[un]||null).action),N=m.submitter;N&&(l=(l=N[un]||null)?e4(l.formAction):N.getAttribute("formAction"),l!==null&&(b=l,N=null));var L=new jl("action","action",null,m,w);s.push({event:L,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Ka!==0){var G=N?t4(w,N):new FormData(w);Yg(f,{pending:!0,data:G,method:w.method,action:b},null,G)}}else typeof b=="function"&&(L.preventDefault(),G=N?t4(w,N):new FormData(w),Yg(f,{pending:!0,data:G,method:w.method,action:b},b,G))},currentTarget:w}]})}}for(var N0=0;N0<mg.length;N0++){var O0=mg[N0],AN=O0.toLowerCase(),TN=O0[0].toUpperCase()+O0.slice(1);Ti(AN,"on"+TN)}Ti(M_,"onAnimationEnd"),Ti(k_,"onAnimationIteration"),Ti(L_,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(U5,"onTransitionRun"),Ti(z5,"onTransitionStart"),Ti(H5,"onTransitionCancel"),Ti(j_,"onTransitionEnd"),vo("onMouseEnter",["mouseout","mouseover"]),vo("onMouseLeave",["mouseout","mouseover"]),vo("onPointerEnter",["pointerout","pointerover"]),vo("onPointerLeave",["pointerout","pointerover"]),Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ad="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ad));function n4(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var m=s[f],w=m.event;m=m.listeners;e:{var b=void 0;if(l)for(var N=m.length-1;0<=N;N--){var L=m[N],G=L.instance,J=L.currentTarget;if(L=L.listener,G!==b&&w.isPropagationStopped())break e;b=L,w.currentTarget=J;try{b(w)}catch(le){Zh(le)}w.currentTarget=null,b=G}else for(N=0;N<m.length;N++){if(L=m[N],G=L.instance,J=L.currentTarget,L=L.listener,G!==b&&w.isPropagationStopped())break e;b=L,w.currentTarget=J;try{b(w)}catch(le){Zh(le)}w.currentTarget=null,b=G}}}}function et(s,l){var f=l[Mu];f===void 0&&(f=l[Mu]=new Set);var m=s+"__bubble";f.has(m)||(r4(l,s,2,!1),f.add(m))}function D0(s,l,f){var m=0;l&&(m|=4),r4(f,s,m,l)}var fm="_reactListening"+Math.random().toString(36).slice(2);function P0(s){if(!s[fm]){s[fm]=!0,ku.forEach(function(f){f!=="selectionchange"&&(SN.has(f)||D0(f,!1,s),D0(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[fm]||(l[fm]=!0,D0("selectionchange",!1,l))}}function r4(s,l,f,m){switch(C4(l)){case 2:var w=ZN;break;case 8:w=JN;break;default:w=$0}f=w.bind(null,l,f,s),w=void 0,!ei||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(w=!0),m?w!==void 0?s.addEventListener(l,f,{capture:!0,passive:w}):s.addEventListener(l,f,!0):w!==void 0?s.addEventListener(l,f,{passive:w}):s.addEventListener(l,f,!1)}function M0(s,l,f,m,w){var b=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var N=m.tag;if(N===3||N===4){var L=m.stateNode.containerInfo;if(L===w)break;if(N===4)for(N=m.return;N!==null;){var G=N.tag;if((G===3||G===4)&&N.stateNode.containerInfo===w)return;N=N.return}for(;L!==null;){if(N=yo(L),N===null)return;if(G=N.tag,G===5||G===6||G===26||G===27){m=b=N;continue e}L=L.parentNode}}m=m.return}mh(function(){var J=b,le=Jr(f),fe=[];e:{var ne=V_.get(s);if(ne!==void 0){var re=jl,Ue=s;switch(s){case"keypress":if(Hi(f)===0)break e;case"keydown":case"keyup":re=Hl;break;case"focusin":Ue="focus",re=Fl;break;case"focusout":Ue="blur",re=Fl;break;case"beforeblur":case"afterblur":re=Fl;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=ti;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=sg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Eh;break;case M_:case k_:case L_:re=Ul;break;case j_:re=Th;break;case"scroll":case"scrollend":re=ph;break;case"wheel":re=Gl;break;case"copy":case"cut":case"paste":re=zl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=$u;break;case"toggle":case"beforetoggle":re=xh}var je=(l&4)!==0,St=!je&&(s==="scroll"||s==="scrollend"),X=je?ne!==null?ne+"Capture":null:ne;je=[];for(var $=J,Z;$!==null;){var de=$;if(Z=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||Z===null||X===null||(de=Ra($,X),de!=null&&je.push(Td($,de,Z))),St)break;$=$.return}0<je.length&&(ne=new re(ne,Ue,null,f,le),fe.push({event:ne,listeners:je}))}}if((l&7)===0){e:{if(ne=s==="mouseover"||s==="pointerover",re=s==="mouseout"||s==="pointerout",ne&&f!==bo&&(Ue=f.relatedTarget||f.fromElement)&&(yo(Ue)||Ue[Qr]))break e;if((re||ne)&&(ne=le.window===le?le:(ne=le.ownerDocument)?ne.defaultView||ne.parentWindow:window,re?(Ue=f.relatedTarget||f.toElement,re=J,Ue=Ue?yo(Ue):null,Ue!==null&&(St=o(Ue),je=Ue.tag,Ue!==St||je!==5&&je!==27&&je!==6)&&(Ue=null)):(re=null,Ue=J),re!==Ue)){if(je=ti,de="onMouseLeave",X="onMouseEnter",$="mouse",(s==="pointerout"||s==="pointerover")&&(je=$u,de="onPointerLeave",X="onPointerEnter",$="pointer"),St=re==null?ne:Bi(re),Z=Ue==null?ne:Bi(Ue),ne=new je(de,$+"leave",re,f,le),ne.target=St,ne.relatedTarget=Z,de=null,yo(le)===J&&(je=new je(X,$+"enter",Ue,f,le),je.target=Z,je.relatedTarget=St,de=je),St=de,re&&Ue)t:{for(je=re,X=Ue,$=0,Z=je;Z;Z=pc(Z))$++;for(Z=0,de=X;de;de=pc(de))Z++;for(;0<$-Z;)je=pc(je),$--;for(;0<Z-$;)X=pc(X),Z--;for(;$--;){if(je===X||X!==null&&je===X.alternate)break t;je=pc(je),X=pc(X)}je=null}else je=null;re!==null&&i4(fe,ne,re,je,!1),Ue!==null&&St!==null&&i4(fe,St,Ue,je,!0)}}e:{if(ne=J?Bi(J):window,re=ne.nodeName&&ne.nodeName.toLowerCase(),re==="select"||re==="input"&&ne.type==="file")var Ae=A_;else if(En(ne))if(T_)Ae=V5;else{Ae=L5;var Ze=k5}else re=ne.nodeName,!re||re.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?J&&Fu(J.elementType)&&(Ae=A_):Ae=j5;if(Ae&&(Ae=Ae(s,J))){xo(fe,Ae,f,le);break e}Ze&&Ze(s,ne,J),s==="focusout"&&J&&ne.type==="number"&&J.memoizedProps.value!=null&&hs(ne,"number",ne.value)}switch(Ze=J?Bi(J):window,s){case"focusin":(En(Ze)||Ze.contentEditable==="true")&&(ql=Ze,dg=J,Ku=null);break;case"focusout":Ku=dg=ql=null;break;case"mousedown":fg=!0;break;case"contextmenu":case"mouseup":case"dragend":fg=!1,D_(fe,f,le);break;case"selectionchange":if(F5)break;case"keydown":case"keyup":D_(fe,f,le)}var Ne;if(Wi)e:{switch(s){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else rt?ie(s,f)&&(Ve="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(Ve="onCompositionStart");Ve&&(I&&f.locale!=="ko"&&(rt||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&rt&&(Ne=zu()):(zi=le,ms="value"in zi?zi.value:zi.textContent,rt=!0)),Ze=hm(J,Ve),0<Ze.length&&(Ve=new qu(Ve,s,null,f,le),fe.push({event:Ve,listeners:Ze}),Ne?Ve.data=Ne:(Ne=ye(f),Ne!==null&&(Ve.data=Ne)))),(Ne=T?bn(s,f):it(s,f))&&(Ve=hm(J,"onBeforeInput"),0<Ve.length&&(Ze=new qu("onBeforeInput","beforeinput",null,f,le),fe.push({event:Ze,listeners:Ve}),Ze.data=Ne)),EN(fe,s,J,f,le)}n4(fe,l)})}function Td(s,l,f){return{instance:s,listener:l,currentTarget:f}}function hm(s,l){for(var f=l+"Capture",m=[];s!==null;){var w=s,b=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||b===null||(w=Ra(s,f),w!=null&&m.unshift(Td(s,w,b)),w=Ra(s,l),w!=null&&m.push(Td(s,w,b))),s.tag===3)return m;s=s.return}return[]}function pc(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function i4(s,l,f,m,w){for(var b=l._reactName,N=[];f!==null&&f!==m;){var L=f,G=L.alternate,J=L.stateNode;if(L=L.tag,G!==null&&G===m)break;L!==5&&L!==26&&L!==27||J===null||(G=J,w?(J=Ra(f,b),J!=null&&N.unshift(Td(f,J,G))):w||(J=Ra(f,b),J!=null&&N.push(Td(f,J,G)))),f=f.return}N.length!==0&&s.push({event:l,listeners:N})}var xN=/\r\n?/g,CN=/\u0000|\uFFFD/g;function o4(s){return(typeof s=="string"?s:""+s).replace(xN,`
`).replace(CN,"")}function s4(s,l){return l=o4(l),o4(s)===l}function mm(){}function Tt(s,l,f,m,w,b){switch(f){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||Zr(s,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&Zr(s,""+m);break;case"className":Fi(s,"class",m);break;case"tabIndex":Fi(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Fi(s,f,m);break;case"style":Bu(s,m,b);break;case"data":if(l!=="object"){Fi(s,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(f);break}m=Ll(""+m),s.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(f==="formAction"?(l!=="input"&&Tt(s,l,"name",w.name,w,null),Tt(s,l,"formEncType",w.formEncType,w,null),Tt(s,l,"formMethod",w.formMethod,w,null),Tt(s,l,"formTarget",w.formTarget,w,null)):(Tt(s,l,"encType",w.encType,w,null),Tt(s,l,"method",w.method,w,null),Tt(s,l,"target",w.target,w,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(f);break}m=Ll(""+m),s.setAttribute(f,m);break;case"onClick":m!=null&&(s.onclick=mm);break;case"onScroll":m!=null&&et("scroll",s);break;case"onScrollEnd":m!=null&&et("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(w.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}f=Ll(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(f,""+m):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":m===!0?s.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(f,m):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(f,m):s.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(f):s.setAttribute(f,m);break;case"popover":et("beforetoggle",s),et("toggle",s),fs(s,"popover",m);break;case"xlinkActuate":$n(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":$n(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":$n(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":$n(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":$n(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":$n(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":$n(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":$n(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":$n(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":fs(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=ig.get(f)||f,fs(s,f,m))}}function k0(s,l,f,m,w,b){switch(f){case"style":Bu(s,m,b);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(w.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof m=="string"?Zr(s,m):(typeof m=="number"||typeof m=="bigint")&&Zr(s,""+m);break;case"onScroll":m!=null&&et("scroll",s);break;case"onScrollEnd":m!=null&&et("scrollend",s);break;case"onClick":m!=null&&(s.onclick=mm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ol.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(w=f.endsWith("Capture"),l=f.slice(2,w?f.length-7:void 0),b=s[un]||null,b=b!=null?b[f]:null,typeof b=="function"&&s.removeEventListener(l,b,w),typeof m=="function")){typeof b!="function"&&b!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,m,w);break e}f in s?s[f]=m:m===!0?s.setAttribute(f,""):fs(s,f,m)}}}function Qn(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",s),et("load",s);var m=!1,w=!1,b;for(b in f)if(f.hasOwnProperty(b)){var N=f[b];if(N!=null)switch(b){case"src":m=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Tt(s,l,b,N,f,null)}}w&&Tt(s,l,"srcSet",f.srcSet,f,null),m&&Tt(s,l,"src",f.src,f,null);return;case"input":et("invalid",s);var L=b=N=w=null,G=null,J=null;for(m in f)if(f.hasOwnProperty(m)){var le=f[m];if(le!=null)switch(m){case"name":w=le;break;case"type":N=le;break;case"checked":G=le;break;case"defaultChecked":J=le;break;case"value":b=le;break;case"defaultValue":L=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,l));break;default:Tt(s,l,m,le,f,null)}}xa(s,b,L,G,J,N,w,!1),kl(s);return;case"select":et("invalid",s),m=N=b=null;for(w in f)if(f.hasOwnProperty(w)&&(L=f[w],L!=null))switch(w){case"value":b=L;break;case"defaultValue":N=L;break;case"multiple":m=L;default:Tt(s,l,w,L,f,null)}l=b,f=N,s.multiple=!!m,l!=null?_o(s,!!m,l,!1):f!=null&&_o(s,!!m,f,!0);return;case"textarea":et("invalid",s),b=w=m=null;for(N in f)if(f.hasOwnProperty(N)&&(L=f[N],L!=null))switch(N){case"value":m=L;break;case"defaultValue":w=L;break;case"children":b=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(91));break;default:Tt(s,l,N,L,f,null)}Ca(s,m,w,b),kl(s);return;case"option":for(G in f)if(f.hasOwnProperty(G)&&(m=f[G],m!=null))switch(G){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Tt(s,l,G,m,f,null)}return;case"dialog":et("beforetoggle",s),et("toggle",s),et("cancel",s),et("close",s);break;case"iframe":case"object":et("load",s);break;case"video":case"audio":for(m=0;m<Ad.length;m++)et(Ad[m],s);break;case"image":et("error",s),et("load",s);break;case"details":et("toggle",s);break;case"embed":case"source":case"link":et("error",s),et("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in f)if(f.hasOwnProperty(J)&&(m=f[J],m!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Tt(s,l,J,m,f,null)}return;default:if(Fu(l)){for(le in f)f.hasOwnProperty(le)&&(m=f[le],m!==void 0&&k0(s,l,le,m,f,void 0));return}}for(L in f)f.hasOwnProperty(L)&&(m=f[L],m!=null&&Tt(s,l,L,m,f,null))}function IN(s,l,f,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,b=null,N=null,L=null,G=null,J=null,le=null;for(re in f){var fe=f[re];if(f.hasOwnProperty(re)&&fe!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":G=fe;default:m.hasOwnProperty(re)||Tt(s,l,re,null,m,fe)}}for(var ne in m){var re=m[ne];if(fe=f[ne],m.hasOwnProperty(ne)&&(re!=null||fe!=null))switch(ne){case"type":b=re;break;case"name":w=re;break;case"checked":J=re;break;case"defaultChecked":le=re;break;case"value":N=re;break;case"defaultValue":L=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,l));break;default:re!==fe&&Tt(s,l,ne,re,m,fe)}}jr(s,N,L,G,J,le,b,w);return;case"select":re=N=L=ne=null;for(b in f)if(G=f[b],f.hasOwnProperty(b)&&G!=null)switch(b){case"value":break;case"multiple":re=G;default:m.hasOwnProperty(b)||Tt(s,l,b,null,m,G)}for(w in m)if(b=m[w],G=f[w],m.hasOwnProperty(w)&&(b!=null||G!=null))switch(w){case"value":ne=b;break;case"defaultValue":L=b;break;case"multiple":N=b;default:b!==G&&Tt(s,l,w,b,m,G)}l=L,f=N,m=re,ne!=null?_o(s,!!f,ne,!1):!!m!=!!f&&(l!=null?_o(s,!!f,l,!0):_o(s,!!f,f?[]:"",!1));return;case"textarea":re=ne=null;for(L in f)if(w=f[L],f.hasOwnProperty(L)&&w!=null&&!m.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Tt(s,l,L,null,m,w)}for(N in m)if(w=m[N],b=f[N],m.hasOwnProperty(N)&&(w!=null||b!=null))switch(N){case"value":ne=w;break;case"defaultValue":re=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:w!==b&&Tt(s,l,N,w,m,b)}Et(s,ne,re);return;case"option":for(var Ue in f)if(ne=f[Ue],f.hasOwnProperty(Ue)&&ne!=null&&!m.hasOwnProperty(Ue))switch(Ue){case"selected":s.selected=!1;break;default:Tt(s,l,Ue,null,m,ne)}for(G in m)if(ne=m[G],re=f[G],m.hasOwnProperty(G)&&ne!==re&&(ne!=null||re!=null))switch(G){case"selected":s.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Tt(s,l,G,ne,m,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in f)ne=f[je],f.hasOwnProperty(je)&&ne!=null&&!m.hasOwnProperty(je)&&Tt(s,l,je,null,m,ne);for(J in m)if(ne=m[J],re=f[J],m.hasOwnProperty(J)&&ne!==re&&(ne!=null||re!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,l));break;default:Tt(s,l,J,ne,m,re)}return;default:if(Fu(l)){for(var St in f)ne=f[St],f.hasOwnProperty(St)&&ne!==void 0&&!m.hasOwnProperty(St)&&k0(s,l,St,void 0,m,ne);for(le in m)ne=m[le],re=f[le],!m.hasOwnProperty(le)||ne===re||ne===void 0&&re===void 0||k0(s,l,le,ne,m,re);return}}for(var X in f)ne=f[X],f.hasOwnProperty(X)&&ne!=null&&!m.hasOwnProperty(X)&&Tt(s,l,X,null,m,ne);for(fe in m)ne=m[fe],re=f[fe],!m.hasOwnProperty(fe)||ne===re||ne==null&&re==null||Tt(s,l,fe,ne,m,re)}var L0=null,j0=null;function pm(s){return s.nodeType===9?s:s.ownerDocument}function a4(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function l4(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function V0(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var B0=null;function RN(){var s=window.event;return s&&s.type==="popstate"?s===B0?!1:(B0=s,!0):(B0=null,!1)}var c4=typeof setTimeout=="function"?setTimeout:void 0,NN=typeof clearTimeout=="function"?clearTimeout:void 0,u4=typeof Promise=="function"?Promise:void 0,ON=typeof queueMicrotask=="function"?queueMicrotask:typeof u4<"u"?function(s){return u4.resolve(null).then(s).catch(DN)}:c4;function DN(s){setTimeout(function(){throw s})}function Ns(s){return s==="head"}function d4(s,l){var f=l,m=0,w=0;do{var b=f.nextSibling;if(s.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"){if(0<m&&8>m){f=m;var N=s.ownerDocument;if(f&1&&Sd(N.documentElement),f&2&&Sd(N.body),f&4)for(f=N.head,Sd(f),N=f.firstChild;N;){var L=N.nextSibling,G=N.nodeName;N[Ea]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&N.rel.toLowerCase()==="stylesheet"||f.removeChild(N),N=L}}if(w===0){s.removeChild(b),Pd(l);return}w--}else f==="$"||f==="$?"||f==="$!"?w++:m=f.charCodeAt(0)-48;else m=0;f=b}while(f);Pd(l)}function F0(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":F0(f),ds(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function PN(s,l,f,m){for(;s.nodeType===1;){var w=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[Ea])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==w.rel||s.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||s.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||s.getAttribute("title")!==(w.title==null?null:w.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(w.src==null?null:w.src)||s.getAttribute("type")!==(w.type==null?null:w.type)||s.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var b=w.name==null?null:""+w.name;if(w.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=xi(s.nextSibling),s===null)break}return null}function MN(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=xi(s.nextSibling),s===null))return null;return s}function U0(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function kN(s,l){var f=s.ownerDocument;if(s.data!=="$?"||f.readyState==="complete")l();else{var m=function(){l(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function xi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}var z0=null;function f4(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return s;l--}else f==="/$"&&l++}s=s.previousSibling}return null}function h4(s,l,f){switch(l=pm(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Sd(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);ds(s)}var li=new Map,m4=new Set;function gm(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Bo=me.d;me.d={f:LN,r:jN,D:VN,C:BN,L:FN,m:UN,X:HN,S:zN,M:GN};function LN(){var s=Bo.f(),l=am();return s||l}function jN(s){var l=Vi(s);l!==null&&l.tag===5&&l.type==="form"?Mb(l):Bo.r(s)}var gc=typeof document>"u"?null:document;function p4(s,l,f){var m=gc;if(m&&typeof l=="string"&&l){var w=dn(l);w='link[rel="'+s+'"][href="'+w+'"]',typeof f=="string"&&(w+='[crossorigin="'+f+'"]'),m4.has(w)||(m4.add(w),s={rel:s,crossOrigin:f,href:l},m.querySelector(w)===null&&(l=m.createElement("link"),Qn(l,"link",s),Jt(l),m.head.appendChild(l)))}}function VN(s){Bo.D(s),p4("dns-prefetch",s,null)}function BN(s,l){Bo.C(s,l),p4("preconnect",s,l)}function FN(s,l,f){Bo.L(s,l,f);var m=gc;if(m&&s&&l){var w='link[rel="preload"][as="'+dn(l)+'"]';l==="image"&&f&&f.imageSrcSet?(w+='[imagesrcset="'+dn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(w+='[imagesizes="'+dn(f.imageSizes)+'"]')):w+='[href="'+dn(s)+'"]';var b=w;switch(l){case"style":b=yc(s);break;case"script":b=vc(s)}li.has(b)||(s=h({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),li.set(b,s),m.querySelector(w)!==null||l==="style"&&m.querySelector(xd(b))||l==="script"&&m.querySelector(Cd(b))||(l=m.createElement("link"),Qn(l,"link",s),Jt(l),m.head.appendChild(l)))}}function UN(s,l){Bo.m(s,l);var f=gc;if(f&&s){var m=l&&typeof l.as=="string"?l.as:"script",w='link[rel="modulepreload"][as="'+dn(m)+'"][href="'+dn(s)+'"]',b=w;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=vc(s)}if(!li.has(b)&&(s=h({rel:"modulepreload",href:s},l),li.set(b,s),f.querySelector(w)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Cd(b)))return}m=f.createElement("link"),Qn(m,"link",s),Jt(m),f.head.appendChild(m)}}}function zN(s,l,f){Bo.S(s,l,f);var m=gc;if(m&&s){var w=gr(m).hoistableStyles,b=yc(s);l=l||"default";var N=w.get(b);if(!N){var L={loading:0,preload:null};if(N=m.querySelector(xd(b)))L.loading=5;else{s=h({rel:"stylesheet",href:s,"data-precedence":l},f),(f=li.get(b))&&H0(s,f);var G=N=m.createElement("link");Jt(G),Qn(G,"link",s),G._p=new Promise(function(J,le){G.onload=J,G.onerror=le}),G.addEventListener("load",function(){L.loading|=1}),G.addEventListener("error",function(){L.loading|=2}),L.loading|=4,ym(N,l,m)}N={type:"stylesheet",instance:N,count:1,state:L},w.set(b,N)}}}function HN(s,l){Bo.X(s,l);var f=gc;if(f&&s){var m=gr(f).hoistableScripts,w=vc(s),b=m.get(w);b||(b=f.querySelector(Cd(w)),b||(s=h({src:s,async:!0},l),(l=li.get(w))&&G0(s,l),b=f.createElement("script"),Jt(b),Qn(b,"link",s),f.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},m.set(w,b))}}function GN(s,l){Bo.M(s,l);var f=gc;if(f&&s){var m=gr(f).hoistableScripts,w=vc(s),b=m.get(w);b||(b=f.querySelector(Cd(w)),b||(s=h({src:s,async:!0,type:"module"},l),(l=li.get(w))&&G0(s,l),b=f.createElement("script"),Jt(b),Qn(b,"link",s),f.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},m.set(w,b))}}function g4(s,l,f,m){var w=(w=ge.current)?gm(w):null;if(!w)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=yc(f.href),f=gr(w).hoistableStyles,m=f.get(l),m||(m={type:"style",instance:null,count:0,state:null},f.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=yc(f.href);var b=gr(w).hoistableStyles,N=b.get(s);if(N||(w=w.ownerDocument||w,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,N),(b=w.querySelector(xd(s)))&&!b._p&&(N.instance=b,N.state.loading=5),li.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},li.set(s,f),b||qN(w,s,f,N.state))),l&&m===null)throw Error(r(528,""));return N}if(l&&m!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=vc(f),f=gr(w).hoistableScripts,m=f.get(l),m||(m={type:"script",instance:null,count:0,state:null},f.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function yc(s){return'href="'+dn(s)+'"'}function xd(s){return'link[rel="stylesheet"]['+s+"]"}function y4(s){return h({},s,{"data-precedence":s.precedence,precedence:null})}function qN(s,l,f,m){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=s.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),Qn(l,"link",f),Jt(l),s.head.appendChild(l))}function vc(s){return'[src="'+dn(s)+'"]'}function Cd(s){return"script[async]"+s}function v4(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var m=s.querySelector('style[data-href~="'+dn(f.href)+'"]');if(m)return l.instance=m,Jt(m),m;var w=h({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),Jt(m),Qn(m,"style",w),ym(m,f.precedence,s),l.instance=m;case"stylesheet":w=yc(f.href);var b=s.querySelector(xd(w));if(b)return l.state.loading|=4,l.instance=b,Jt(b),b;m=y4(f),(w=li.get(w))&&H0(m,w),b=(s.ownerDocument||s).createElement("link"),Jt(b);var N=b;return N._p=new Promise(function(L,G){N.onload=L,N.onerror=G}),Qn(b,"link",m),l.state.loading|=4,ym(b,f.precedence,s),l.instance=b;case"script":return b=vc(f.src),(w=s.querySelector(Cd(b)))?(l.instance=w,Jt(w),w):(m=f,(w=li.get(b))&&(m=h({},f),G0(m,w)),s=s.ownerDocument||s,w=s.createElement("script"),Jt(w),Qn(w,"link",m),s.head.appendChild(w),l.instance=w);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,ym(m,f.precedence,s));return l.instance}function ym(s,l,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=m.length?m[m.length-1]:null,b=w,N=0;N<m.length;N++){var L=m[N];if(L.dataset.precedence===l)b=L;else if(b!==w)break}b?b.parentNode.insertBefore(s,b.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function H0(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function G0(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var vm=null;function w4(s,l,f){if(vm===null){var m=new Map,w=vm=new Map;w.set(f,m)}else w=vm,m=w.get(f),m||(m=new Map,w.set(f,m));if(m.has(s))return m;for(m.set(s,null),f=f.getElementsByTagName(s),w=0;w<f.length;w++){var b=f[w];if(!(b[Ea]||b[_n]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var N=b.getAttribute(l)||"";N=s+N;var L=m.get(N);L?L.push(b):m.set(N,[b])}}return m}function _4(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function WN(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function b4(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Id=null;function $N(){}function XN(s,l,f){if(Id===null)throw Error(r(475));var m=Id;if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var w=yc(f.href),b=s.querySelector(xd(w));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(m.count++,m=wm.bind(m),s.then(m,m)),l.state.loading|=4,l.instance=b,Jt(b);return}b=s.ownerDocument||s,f=y4(f),(w=li.get(w))&&H0(f,w),b=b.createElement("link"),Jt(b);var N=b;N._p=new Promise(function(L,G){N.onload=L,N.onerror=G}),Qn(b,"link",f),l.instance=b}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(m.count++,l=wm.bind(m),s.addEventListener("load",l),s.addEventListener("error",l))}}function YN(){if(Id===null)throw Error(r(475));var s=Id;return s.stylesheets&&s.count===0&&q0(s,s.stylesheets),0<s.count?function(l){var f=setTimeout(function(){if(s.stylesheets&&q0(s,s.stylesheets),s.unsuspend){var m=s.unsuspend;s.unsuspend=null,m()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(f)}}:null}function wm(){if(this.count--,this.count===0){if(this.stylesheets)q0(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var _m=null;function q0(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,_m=new Map,l.forEach(KN,s),_m=null,wm.call(s))}function KN(s,l){if(!(l.state.loading&4)){var f=_m.get(s);if(f)var m=f.get(null);else{f=new Map,_m.set(s,f);for(var w=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<w.length;b++){var N=w[b];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(f.set(N.dataset.precedence,N),m=N)}m&&f.set(null,m)}w=l.instance,N=w.getAttribute("data-precedence"),b=f.get(N)||m,b===m&&f.set(null,w),f.set(N,w),this.count++,m=wm.bind(this),w.addEventListener("load",m),w.addEventListener("error",m),b?b.parentNode.insertBefore(w,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(w,s.firstChild)),l.state.loading|=4}}var Rd={$$typeof:P,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function QN(s,l,f,m,w,b,N,L){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=po(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=po(0),this.hiddenUpdates=po(null),this.identifierPrefix=m,this.onUncaughtError=w,this.onCaughtError=b,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function E4(s,l,f,m,w,b,N,L,G,J,le,fe){return s=new QN(s,l,f,N,L,G,J,fe),l=1,b===!0&&(l|=24),b=Br(3,null,null,l),s.current=b,b.stateNode=s,l=xg(),l.refCount++,s.pooledCache=l,l.refCount++,b.memoizedState={element:m,isDehydrated:f,cache:l},Ng(b),s}function A4(s){return s?(s=Yl,s):Yl}function T4(s,l,f,m,w,b){w=A4(w),m.context===null?m.context=w:m.pendingContext=w,m=ys(l),m.payload={element:f},b=b===void 0?null:b,b!==null&&(m.callback=b),f=vs(s,m,l),f!==null&&(Gr(f,s,l),od(f,s,l))}function S4(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function W0(s,l){S4(s,l),(s=s.alternate)&&S4(s,l)}function x4(s){if(s.tag===13){var l=Xl(s,67108864);l!==null&&Gr(l,s,67108864),W0(s,67108864)}}var bm=!0;function ZN(s,l,f,m){var w=Q.T;Q.T=null;var b=me.p;try{me.p=2,$0(s,l,f,m)}finally{me.p=b,Q.T=w}}function JN(s,l,f,m){var w=Q.T;Q.T=null;var b=me.p;try{me.p=8,$0(s,l,f,m)}finally{me.p=b,Q.T=w}}function $0(s,l,f,m){if(bm){var w=X0(m);if(w===null)M0(s,l,m,Em,f),I4(s,m);else if(t9(w,s,l,f,m))m.stopPropagation();else if(I4(s,m),l&4&&-1<e9.indexOf(s)){for(;w!==null;){var b=Vi(w);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var N=bi(b.pendingLanes);if(N!==0){var L=b;for(L.pendingLanes|=2,L.entangledLanes|=2;N;){var G=1<<31-lr(N);L.entanglements[1]|=G,N&=~G}Zi(b),(vt&6)===0&&(om=Wn()+500,Ed(0))}}break;case 13:L=Xl(b,2),L!==null&&Gr(L,b,2),am(),W0(b,2)}if(b=X0(m),b===null&&M0(s,l,m,Em,f),b===w)break;w=b}w!==null&&m.stopPropagation()}else M0(s,l,m,null,f)}}function X0(s){return s=Jr(s),Y0(s)}var Em=null;function Y0(s){if(Em=null,s=yo(s),s!==null){var l=o(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=a(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Em=s,null}function C4(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mo()){case as:return 2;case Cl:return 8;case ya:case J1:return 32;case Il:return 268435456;default:return 32}default:return 32}}var K0=!1,Os=null,Ds=null,Ps=null,Nd=new Map,Od=new Map,Ms=[],e9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function I4(s,l){switch(s){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":Nd.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Od.delete(l.pointerId)}}function Dd(s,l,f,m,w,b){return s===null||s.nativeEvent!==b?(s={blockedOn:l,domEventName:f,eventSystemFlags:m,nativeEvent:b,targetContainers:[w]},l!==null&&(l=Vi(l),l!==null&&x4(l)),s):(s.eventSystemFlags|=m,l=s.targetContainers,w!==null&&l.indexOf(w)===-1&&l.push(w),s)}function t9(s,l,f,m,w){switch(l){case"focusin":return Os=Dd(Os,s,l,f,m,w),!0;case"dragenter":return Ds=Dd(Ds,s,l,f,m,w),!0;case"mouseover":return Ps=Dd(Ps,s,l,f,m,w),!0;case"pointerover":var b=w.pointerId;return Nd.set(b,Dd(Nd.get(b)||null,s,l,f,m,w)),!0;case"gotpointercapture":return b=w.pointerId,Od.set(b,Dd(Od.get(b)||null,s,l,f,m,w)),!0}return!1}function R4(s){var l=yo(s.target);if(l!==null){var f=o(l);if(f!==null){if(l=f.tag,l===13){if(l=a(f),l!==null){s.blockedOn=l,ah(s.priority,function(){if(f.tag===13){var m=Hr();m=ls(m);var w=Xl(f,m);w!==null&&Gr(w,f,m),W0(f,m)}});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Am(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=X0(s.nativeEvent);if(f===null){f=s.nativeEvent;var m=new f.constructor(f.type,f);bo=m,f.target.dispatchEvent(m),bo=null}else return l=Vi(f),l!==null&&x4(l),s.blockedOn=f,!1;l.shift()}return!0}function N4(s,l,f){Am(s)&&f.delete(l)}function n9(){K0=!1,Os!==null&&Am(Os)&&(Os=null),Ds!==null&&Am(Ds)&&(Ds=null),Ps!==null&&Am(Ps)&&(Ps=null),Nd.forEach(N4),Od.forEach(N4)}function Tm(s,l){s.blockedOn===l&&(s.blockedOn=null,K0||(K0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,n9)))}var Sm=null;function O4(s){Sm!==s&&(Sm=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Sm===s&&(Sm=null);for(var l=0;l<s.length;l+=3){var f=s[l],m=s[l+1],w=s[l+2];if(typeof m!="function"){if(Y0(m||f)===null)continue;break}var b=Vi(f);b!==null&&(s.splice(l,3),l-=3,Yg(b,{pending:!0,data:w,method:f.method,action:m},m,w))}}))}function Pd(s){function l(G){return Tm(G,s)}Os!==null&&Tm(Os,s),Ds!==null&&Tm(Ds,s),Ps!==null&&Tm(Ps,s),Nd.forEach(l),Od.forEach(l);for(var f=0;f<Ms.length;f++){var m=Ms[f];m.blockedOn===s&&(m.blockedOn=null)}for(;0<Ms.length&&(f=Ms[0],f.blockedOn===null);)R4(f),f.blockedOn===null&&Ms.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var w=f[m],b=f[m+1],N=w[un]||null;if(typeof b=="function")N||O4(f);else if(N){var L=null;if(b&&b.hasAttribute("formAction")){if(w=b,N=b[un]||null)L=N.formAction;else if(Y0(w)!==null)continue}else L=N.action;typeof L=="function"?f[m+1]=L:(f.splice(m,3),m-=3),O4(f)}}}function Q0(s){this._internalRoot=s}xm.prototype.render=Q0.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,m=Hr();T4(f,m,s,l,null,null)},xm.prototype.unmount=Q0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;T4(s.current,2,null,s,null,null),am(),l[Qr]=null}};function xm(s){this._internalRoot=s}xm.prototype.unstable_scheduleHydration=function(s){if(s){var l=cs();s={blockedOn:null,target:s,priority:l};for(var f=0;f<Ms.length&&l!==0&&l<Ms[f].priority;f++);Ms.splice(f,0,s),f===0&&R4(s)}};var D4=e.version;if(D4!=="19.1.0")throw Error(r(527,D4,"19.1.0"));me.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=u(l),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var r9={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cm.isDisabled&&Cm.supportsFiber)try{$t=Cm.inject(r9),yt=Cm}catch{}}return kd.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,m="",w=Xb,b=Yb,N=Kb,L=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(L=l.unstable_transitionCallbacks)),l=E4(s,1,!1,null,null,f,m,w,b,N,L,null),s[Qr]=l.current,P0(s),new Q0(l)},kd.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var m=!1,w="",b=Xb,N=Yb,L=Kb,G=null,J=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onUncaughtError!==void 0&&(b=f.onUncaughtError),f.onCaughtError!==void 0&&(N=f.onCaughtError),f.onRecoverableError!==void 0&&(L=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(G=f.unstable_transitionCallbacks),f.formState!==void 0&&(J=f.formState)),l=E4(s,1,!0,l,f??null,m,w,b,N,L,G,J),l.context=A4(null),f=l.current,m=Hr(),m=ls(m),w=ys(m),w.callback=null,vs(f,w,m),f=m,l.current.lanes=f,go(l,f),Zi(l),s[Qr]=l.current,P0(s),new xm(l)},kd.version="19.1.0",kd}var z4;function h9(){if(z4)return ey.exports;z4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ey.exports=f9(),ey.exports}var m9=h9(),Ld={},H4;function p9(){if(H4)return Ld;H4=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.parse=a,Ld.serialize=d;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function a(g,_){const E=new o,A=g.length;if(A<2)return E;const S=(_==null?void 0:_.decode)||h;let x=0;do{const O=g.indexOf("=",x);if(O===-1)break;const P=g.indexOf(";",x),D=P===-1?A:P;if(O>D){x=g.lastIndexOf(";",O-1)+1;continue}const j=c(g,x,O),H=u(g,O,j),M=g.slice(j,H);if(E[M]===void 0){let R=c(g,O+1,D),k=u(g,D,R);const U=S(g.slice(R,k));E[M]=U}x=D+1}while(x<A);return E}function c(g,_,E){do{const A=g.charCodeAt(_);if(A!==32&&A!==9)return _}while(++_<E);return E}function u(g,_,E){for(;_>E;){const A=g.charCodeAt(--_);if(A!==32&&A!==9)return _+1}return E}function d(g,_,E){const A=(E==null?void 0:E.encode)||encodeURIComponent;if(!n.test(g))throw new TypeError(`argument name is invalid: ${g}`);const S=A(_);if(!e.test(S))throw new TypeError(`argument val is invalid: ${_}`);let x=g+"="+S;if(!E)return x;if(E.maxAge!==void 0){if(!Number.isInteger(E.maxAge))throw new TypeError(`option maxAge is invalid: ${E.maxAge}`);x+="; Max-Age="+E.maxAge}if(E.domain){if(!t.test(E.domain))throw new TypeError(`option domain is invalid: ${E.domain}`);x+="; Domain="+E.domain}if(E.path){if(!r.test(E.path))throw new TypeError(`option path is invalid: ${E.path}`);x+="; Path="+E.path}if(E.expires){if(!p(E.expires)||!Number.isFinite(E.expires.valueOf()))throw new TypeError(`option expires is invalid: ${E.expires}`);x+="; Expires="+E.expires.toUTCString()}if(E.httpOnly&&(x+="; HttpOnly"),E.secure&&(x+="; Secure"),E.partitioned&&(x+="; Partitioned"),E.priority)switch(typeof E.priority=="string"?E.priority.toLowerCase():void 0){case"low":x+="; Priority=Low";break;case"medium":x+="; Priority=Medium";break;case"high":x+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${E.priority}`)}if(E.sameSite)switch(typeof E.sameSite=="string"?E.sameSite.toLowerCase():E.sameSite){case!0:case"strict":x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"none":x+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${E.sameSite}`)}return x}function h(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return i.call(g)==="[object Date]"}return Ld}p9();var G4="popstate";function g9(n={}){function e(r,i){let{pathname:o,search:a,hash:c}=r.location;return r2("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:ff(i)}return v9(e,t,null,n)}function Ft(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function gi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function y9(){return Math.random().toString(36).substring(2,10)}function q4(n,e){return{usr:n.state,key:n.key,idx:e}}function r2(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?su(e):e,state:t,key:e&&e.key||r||y9()}}function ff({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function su(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function v9(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,c="POP",u=null,d=h();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function h(){return(a.state||{idx:null}).idx}function p(){c="POP";let S=h(),x=S==null?null:S-d;d=S,u&&u({action:c,location:A.location,delta:x})}function g(S,x){c="PUSH";let O=r2(A.location,S,x);d=h()+1;let P=q4(O,d),D=A.createHref(O);try{a.pushState(P,"",D)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(D)}o&&u&&u({action:c,location:A.location,delta:1})}function _(S,x){c="REPLACE";let O=r2(A.location,S,x);d=h();let P=q4(O,d),D=A.createHref(O);a.replaceState(P,"",D),o&&u&&u({action:c,location:A.location,delta:0})}function E(S){return w9(S)}let A={get action(){return c},get location(){return n(i,a)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(G4,p),u=S,()=>{i.removeEventListener(G4,p),u=null}},createHref(S){return e(i,S)},createURL:E,encodeLocation(S){let x=E(S);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:_,go(S){return a.go(S)}};return A}function w9(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ft(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:ff(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function r6(n,e,t="/"){return _9(n,e,t,!1)}function _9(n,e,t,r){let i=typeof e=="string"?su(e):e,o=Xo(i.pathname||"/",t);if(o==null)return null;let a=i6(n);b9(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=D9(o);c=N9(a[u],d,r)}return c}function i6(n,e=[],t=[],r=""){let i=(o,a,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(Ft(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let d=Ho([r,u.relativePath]),h=t.concat(u);o.children&&o.children.length>0&&(Ft(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),i6(o.children,e,h,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:I9(d,o.index),routesMeta:h})};return n.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,a);else for(let u of o6(o.path))i(o,a,u)}),e}function o6(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=o6(r.join("/")),c=[];return c.push(...a.map(u=>u===""?o:[o,u].join("/"))),i&&c.push(...a),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function b9(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:R9(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var E9=/^:[\w-]+$/,A9=3,T9=2,S9=1,x9=10,C9=-2,W4=n=>n==="*";function I9(n,e){let t=n.split("/"),r=t.length;return t.some(W4)&&(r+=C9),e&&(r+=T9),t.filter(i=>!W4(i)).reduce((i,o)=>i+(E9.test(o)?A9:o===""?S9:x9),r)}function R9(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function N9(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=o==="/"?e:e.slice(o.length)||"/",p=Ap({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),g=u.route;if(!p&&d&&t&&!r[r.length-1].route.index&&(p=Ap({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Ho([o,p.pathname]),pathnameBase:L9(Ho([o,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(o=Ho([o,p.pathnameBase]))}return a}function Ap(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=O9(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:p},g)=>{if(h==="*"){let E=c[g]||"";a=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const _=c[g];return p&&!_?d[h]=void 0:d[h]=(_||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:n}}function O9(n,e=!1,t=!0){gi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function D9(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Xo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function P9(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?su(n):n;return{pathname:t?t.startsWith("/")?t:M9(t,e):e,search:j9(r),hash:V9(i)}}function M9(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function iy(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function k9(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function gv(n){let e=k9(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function yv(n,e,t,r=!1){let i;typeof n=="string"?i=su(n):(i={...n},Ft(!i.pathname||!i.pathname.includes("?"),iy("?","pathname","search",i)),Ft(!i.pathname||!i.pathname.includes("#"),iy("#","pathname","hash",i)),Ft(!i.search||!i.search.includes("#"),iy("#","search","hash",i)));let o=n===""||i.pathname==="",a=o?"/":i.pathname,c;if(a==null)c=t;else{let p=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}c=p>=0?e[p]:"/"}let u=P9(i,c),d=a&&a!=="/"&&a.endsWith("/"),h=(o||a===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Ho=n=>n.join("/").replace(/\/\/+/g,"/"),L9=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),j9=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,V9=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function B9(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var s6=["POST","PUT","PATCH","DELETE"];new Set(s6);var F9=["GET",...s6];new Set(F9);var au=C.createContext(null);au.displayName="DataRouter";var l1=C.createContext(null);l1.displayName="DataRouterState";var a6=C.createContext({isTransitioning:!1});a6.displayName="ViewTransition";var U9=C.createContext(new Map);U9.displayName="Fetchers";var z9=C.createContext(null);z9.displayName="Await";var ki=C.createContext(null);ki.displayName="Navigation";var Pf=C.createContext(null);Pf.displayName="Location";var wi=C.createContext({outlet:null,matches:[],isDataRoute:!1});wi.displayName="Route";var vv=C.createContext(null);vv.displayName="RouteError";function H9(n,{relative:e}={}){Ft(lu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=C.useContext(ki),{hash:i,pathname:o,search:a}=Mf(n,{relative:e}),c=o;return t!=="/"&&(c=o==="/"?t:Ho([t,o])),r.createHref({pathname:c,search:a,hash:i})}function lu(){return C.useContext(Pf)!=null}function Pr(){return Ft(lu(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Pf).location}var l6="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function c6(n){C.useContext(ki).static||C.useLayoutEffect(n)}function _i(){let{isDataRoute:n}=C.useContext(wi);return n?o7():G9()}function G9(){Ft(lu(),"useNavigate() may be used only in the context of a <Router> component.");let n=C.useContext(au),{basename:e,navigator:t}=C.useContext(ki),{matches:r}=C.useContext(wi),{pathname:i}=Pr(),o=JSON.stringify(gv(r)),a=C.useRef(!1);return c6(()=>{a.current=!0}),C.useCallback((u,d={})=>{if(gi(a.current,l6),!a.current)return;if(typeof u=="number"){t.go(u);return}let h=yv(u,JSON.parse(o),i,d.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ho([e,h.pathname])),(d.replace?t.replace:t.push)(h,d.state,d)},[e,t,o,i,n])}var q9=C.createContext(null);function W9(n){let e=C.useContext(wi).outlet;return e&&C.createElement(q9.Provider,{value:n},e)}function $9(){let{matches:n}=C.useContext(wi),e=n[n.length-1];return e?e.params:{}}function Mf(n,{relative:e}={}){let{matches:t}=C.useContext(wi),{pathname:r}=Pr(),i=JSON.stringify(gv(t));return C.useMemo(()=>yv(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function X9(n,e){return u6(n,e)}function u6(n,e,t,r){var x;Ft(lu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=C.useContext(ki),{matches:o}=C.useContext(wi),a=o[o.length-1],c=a?a.params:{},u=a?a.pathname:"/",d=a?a.pathnameBase:"/",h=a&&a.route;{let O=h&&h.path||"";d6(u,!h||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let p=Pr(),g;if(e){let O=typeof e=="string"?su(e):e;Ft(d==="/"||((x=O.pathname)==null?void 0:x.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${O.pathname}" was given in the \`location\` prop.`),g=O}else g=p;let _=g.pathname||"/",E=_;if(d!=="/"){let O=d.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(O.length).join("/")}let A=r6(n,{pathname:E});gi(h||A!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),gi(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=J9(A&&A.map(O=>Object.assign({},O,{params:Object.assign({},c,O.params),pathname:Ho([d,i.encodeLocation?i.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?d:Ho([d,i.encodeLocation?i.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),o,t,r);return e&&S?C.createElement(Pf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},S):S}function Y9(){let n=i7(),e=B9(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:o},"ErrorBoundary")," or"," ",C.createElement("code",{style:o},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:i},t):null,a)}var K9=C.createElement(Y9,null),Q9=class extends C.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?C.createElement(wi.Provider,{value:this.props.routeContext},C.createElement(vv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Z9({routeContext:n,match:e,children:t}){let r=C.useContext(au);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(wi.Provider,{value:n},t)}function J9(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,o=t==null?void 0:t.errors;if(o!=null){let u=i.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);Ft(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let a=!1,c=-1;if(t)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:p}=t,g=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((u,d,h)=>{let p,g=!1,_=null,E=null;t&&(p=o&&d.route.id?o[d.route.id]:void 0,_=d.route.errorElement||K9,a&&(c<0&&h===0?(d6("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,E=null):c===h&&(g=!0,E=d.route.hydrateFallbackElement||null)));let A=e.concat(i.slice(0,h+1)),S=()=>{let x;return p?x=_:g?x=E:d.route.Component?x=C.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=u,C.createElement(Z9,{match:d,routeContext:{outlet:u,matches:A,isDataRoute:t!=null},children:x})};return t&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?C.createElement(Q9,{location:t.location,revalidation:t.revalidation,component:_,error:p,children:S(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):S()},null)}function wv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function e7(n){let e=C.useContext(au);return Ft(e,wv(n)),e}function t7(n){let e=C.useContext(l1);return Ft(e,wv(n)),e}function n7(n){let e=C.useContext(wi);return Ft(e,wv(n)),e}function _v(n){let e=n7(n),t=e.matches[e.matches.length-1];return Ft(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function r7(){return _v("useRouteId")}function i7(){var r;let n=C.useContext(vv),e=t7("useRouteError"),t=_v("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function o7(){let{router:n}=e7("useNavigate"),e=_v("useNavigate"),t=C.useRef(!1);return c6(()=>{t.current=!0}),C.useCallback(async(i,o={})=>{gi(t.current,l6),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var $4={};function d6(n,e,t){!e&&!$4[n]&&($4[n]=!0,gi(!1,t))}C.memo(s7);function s7({routes:n,future:e,state:t}){return u6(n,void 0,t,e)}function Tp({to:n,replace:e,state:t,relative:r}){Ft(lu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=C.useContext(ki);gi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=C.useContext(wi),{pathname:a}=Pr(),c=_i(),u=yv(n,gv(o),a,r==="path"),d=JSON.stringify(u);return C.useEffect(()=>{c(JSON.parse(d),{replace:e,state:t,relative:r})},[c,d,r,e,t]),null}function f6(n){return W9(n.context)}function Kt(n){Ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function a7({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1}){Ft(!lu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),c=C.useMemo(()=>({basename:a,navigator:i,static:o,future:{}}),[a,i,o]);typeof t=="string"&&(t=su(t));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:g="default"}=t,_=C.useMemo(()=>{let E=Xo(u,a);return E==null?null:{location:{pathname:E,search:d,hash:h,state:p,key:g},navigationType:r}},[a,u,d,h,p,g,r]);return gi(_!=null,`<Router basename="${a}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:C.createElement(ki.Provider,{value:c},C.createElement(Pf.Provider,{children:e,value:_}))}function h6({children:n,location:e}){return X9(i2(n),e)}function i2(n,e=[]){let t=[];return C.Children.forEach(n,(r,i)=>{if(!C.isValidElement(r))return;let o=[...e,i];if(r.type===C.Fragment){t.push.apply(t,i2(r.props.children,o));return}Ft(r.type===Kt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ft(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=i2(r.props.children,o)),t.push(a)}),t}var np="get",rp="application/x-www-form-urlencoded";function c1(n){return n!=null&&typeof n.tagName=="string"}function l7(n){return c1(n)&&n.tagName.toLowerCase()==="button"}function c7(n){return c1(n)&&n.tagName.toLowerCase()==="form"}function u7(n){return c1(n)&&n.tagName.toLowerCase()==="input"}function d7(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function f7(n,e){return n.button===0&&(!e||e==="_self")&&!d7(n)}function o2(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function h7(n,e){let t=o2(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(o=>{t.append(i,o)})}),t}var Im=null;function m7(){if(Im===null)try{new FormData(document.createElement("form"),0),Im=!1}catch{Im=!0}return Im}var p7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function oy(n){return n!=null&&!p7.has(n)?(gi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rp}"`),null):n}function g7(n,e){let t,r,i,o,a;if(c7(n)){let c=n.getAttribute("action");r=c?Xo(c,e):null,t=n.getAttribute("method")||np,i=oy(n.getAttribute("enctype"))||rp,o=new FormData(n)}else if(l7(n)||u7(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||c.getAttribute("action");if(r=u?Xo(u,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||np,i=oy(n.getAttribute("formenctype"))||oy(c.getAttribute("enctype"))||rp,o=new FormData(c,n),!m7()){let{name:d,type:h,value:p}=n;if(h==="image"){let g=d?`${d}.`:"";o.append(`${g}x`,"0"),o.append(`${g}y`,"0")}else d&&o.append(d,p)}}else{if(c1(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=np,r=null,i=rp,a=n}return o&&i==="text/plain"&&(a=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:a}}function bv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function y7(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function v7(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function w7(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let a=await y7(o,t);return a.links?a.links():[]}return[]}));return A7(r.flat(1).filter(v7).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function X4(n,e,t,r,i,o){let a=(u,d)=>t[d]?u.route.id!==t[d].route.id:!0,c=(u,d)=>{var h;return t[d].pathname!==u.pathname||((h=t[d].route.path)==null?void 0:h.endsWith("*"))&&t[d].params["*"]!==u.params["*"]};return o==="assets"?e.filter((u,d)=>a(u,d)||c(u,d)):o==="data"?e.filter((u,d)=>{var p;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(a(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function _7(n,e,{includeHydrateFallback:t}={}){return b7(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function b7(n){return[...new Set(n)]}function E7(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function A7(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let o=JSON.stringify(E7(i));return t.has(o)||(t.add(o),r.push({key:o,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var T7=new Set([100,101,204,205]);function S7(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Xo(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function m6(){let n=C.useContext(au);return bv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function x7(){let n=C.useContext(l1);return bv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ev=C.createContext(void 0);Ev.displayName="FrameworkContext";function p6(){let n=C.useContext(Ev);return bv(n,"You must render this element inside a <HydratedRouter> element"),n}function C7(n,e){let t=C.useContext(Ev),[r,i]=C.useState(!1),[o,a]=C.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,g=C.useRef(null);C.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let A=x=>{x.forEach(O=>{a(O.isIntersecting)})},S=new IntersectionObserver(A,{threshold:.5});return g.current&&S.observe(g.current),()=>{S.disconnect()}}},[n]),C.useEffect(()=>{if(r){let A=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(A)}}},[r]);let _=()=>{i(!0)},E=()=>{i(!1),a(!1)};return t?n!=="intent"?[o,g,{}]:[o,g,{onFocus:jd(c,_),onBlur:jd(u,E),onMouseEnter:jd(d,_),onMouseLeave:jd(h,E),onTouchStart:jd(p,_)}]:[!1,g,{}]}function jd(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function I7({page:n,...e}){let{router:t}=m6(),r=C.useMemo(()=>r6(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?C.createElement(N7,{page:n,matches:r,...e}):null}function R7(n){let{manifest:e,routeModules:t}=p6(),[r,i]=C.useState([]);return C.useEffect(()=>{let o=!1;return w7(n,e,t).then(a=>{o||i(a)}),()=>{o=!0}},[n,e,t]),r}function N7({page:n,matches:e,...t}){let r=Pr(),{manifest:i,routeModules:o}=p6(),{basename:a}=m6(),{loaderData:c,matches:u}=x7(),d=C.useMemo(()=>X4(n,e,u,i,r,"data"),[n,e,u,i,r]),h=C.useMemo(()=>X4(n,e,u,i,r,"assets"),[n,e,u,i,r]),p=C.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let E=new Set,A=!1;if(e.forEach(x=>{var P;let O=i.routes[x.route.id];!O||!O.hasLoader||(!d.some(D=>D.route.id===x.route.id)&&x.route.id in c&&((P=o[x.route.id])!=null&&P.shouldRevalidate)||O.hasClientLoader?A=!0:E.add(x.route.id))}),E.size===0)return[];let S=S7(n,a);return A&&E.size>0&&S.searchParams.set("_routes",e.filter(x=>E.has(x.route.id)).map(x=>x.route.id).join(",")),[S.pathname+S.search]},[a,c,r,i,d,e,n,o]),g=C.useMemo(()=>_7(h,i),[h,i]),_=R7(h);return C.createElement(C.Fragment,null,p.map(E=>C.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...t})),g.map(E=>C.createElement("link",{key:E,rel:"modulepreload",href:E,...t})),_.map(({key:E,link:A})=>C.createElement("link",{key:E,...A})))}function O7(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var g6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{g6&&(window.__reactRouterVersion="7.6.1")}catch{}function D7({basename:n,children:e,window:t}){let r=C.useRef();r.current==null&&(r.current=g9({window:t,v5Compat:!0}));let i=r.current,[o,a]=C.useState({action:i.action,location:i.location}),c=C.useCallback(u=>{C.startTransition(()=>a(u))},[a]);return C.useLayoutEffect(()=>i.listen(c),[i,c]),C.createElement(a7,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:i})}var y6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mi=C.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:a,state:c,target:u,to:d,preventScrollReset:h,viewTransition:p,...g},_){let{basename:E}=C.useContext(ki),A=typeof d=="string"&&y6.test(d),S,x=!1;if(typeof d=="string"&&A&&(S=d,g6))try{let k=new URL(window.location.href),U=d.startsWith("//")?new URL(k.protocol+d):new URL(d),z=Xo(U.pathname,E);U.origin===k.origin&&z!=null?d=z+U.search+U.hash:x=!0}catch{gi(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=H9(d,{relative:i}),[P,D,j]=C7(r,g),H=L7(d,{replace:a,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:p});function M(k){e&&e(k),k.defaultPrevented||H(k)}let R=C.createElement("a",{...g,...j,href:S||O,onClick:x||o?e:M,ref:O7(_,D),target:u,"data-discover":!A&&t==="render"?"true":void 0});return P&&!A?C.createElement(C.Fragment,null,R,C.createElement(I7,{page:O})):R});mi.displayName="Link";var P7=C.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:a,viewTransition:c,children:u,...d},h){let p=Mf(a,{relative:d.relative}),g=Pr(),_=C.useContext(l1),{navigator:E,basename:A}=C.useContext(ki),S=_!=null&&U7(p)&&c===!0,x=E.encodeLocation?E.encodeLocation(p).pathname:p.pathname,O=g.pathname,P=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;t||(O=O.toLowerCase(),P=P?P.toLowerCase():null,x=x.toLowerCase()),P&&A&&(P=Xo(P,A)||P);const D=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let j=O===x||!i&&O.startsWith(x)&&O.charAt(D)==="/",H=P!=null&&(P===x||!i&&P.startsWith(x)&&P.charAt(x.length)==="/"),M={isActive:j,isPending:H,isTransitioning:S},R=j?e:void 0,k;typeof r=="function"?k=r(M):k=[r,j?"active":null,H?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(M):o;return C.createElement(mi,{...d,"aria-current":R,className:k,ref:h,style:U,to:a,viewTransition:c},typeof u=="function"?u(M):u)});P7.displayName="NavLink";var M7=C.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:a=np,action:c,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:p,...g},_)=>{let E=B7(),A=F7(c,{relative:d}),S=a.toLowerCase()==="get"?"get":"post",x=typeof c=="string"&&y6.test(c),O=P=>{if(u&&u(P),P.defaultPrevented)return;P.preventDefault();let D=P.nativeEvent.submitter,j=(D==null?void 0:D.getAttribute("formmethod"))||a;E(D||P.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:i,state:o,relative:d,preventScrollReset:h,viewTransition:p})};return C.createElement("form",{ref:_,method:S,action:A,onSubmit:r?u:O,...g,"data-discover":!x&&n==="render"?"true":void 0})});M7.displayName="Form";function k7(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function v6(n){let e=C.useContext(au);return Ft(e,k7(n)),e}function L7(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:a}={}){let c=_i(),u=Pr(),d=Mf(n,{relative:o});return C.useCallback(h=>{if(f7(h,e)){h.preventDefault();let p=t!==void 0?t:ff(u)===ff(d);c(n,{replace:p,state:r,preventScrollReset:i,relative:o,viewTransition:a})}},[u,c,d,t,r,e,n,i,o,a])}function u1(n){gi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=C.useRef(o2(n)),t=C.useRef(!1),r=Pr(),i=C.useMemo(()=>h7(r.search,t.current?null:e.current),[r.search]),o=_i(),a=C.useCallback((c,u)=>{const d=o2(typeof c=="function"?c(i):c);t.current=!0,o("?"+d,u)},[o,i]);return[i,a]}var j7=0,V7=()=>`__${String(++j7)}__`;function B7(){let{router:n}=v6("useSubmit"),{basename:e}=C.useContext(ki),t=r7();return C.useCallback(async(r,i={})=>{let{action:o,method:a,encType:c,formData:u,body:d}=g7(r,e);if(i.navigate===!1){let h=i.fetcherKey||V7();await n.fetch(h,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||a,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||a,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function F7(n,{relative:e}={}){let{basename:t}=C.useContext(ki),r=C.useContext(wi);Ft(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Mf(n||".",{relative:e})},a=Pr();if(n==null){o.search=a.search;let c=new URLSearchParams(o.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let h=c.toString();o.search=h?`?${h}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Ho([t,o.pathname])),ff(o)}function U7(n,e={}){let t=C.useContext(a6);Ft(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=v6("useViewTransitionState"),i=Mf(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Xo(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=Xo(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ap(i.pathname,a)!=null||Ap(i.pathname,o)!=null}[...T7];var w6=n6();const z7=pv(w6);/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7=()=>{};var Y4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},G7=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],a=n[t++],c=n[t++],u=((i&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},b6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],a=i+1<n.length,c=a?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4;let g=(c&15)<<2|d>>6,_=d&63;u||(_=64,a||(g=64)),r.push(t[h],t[p],t[g],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(_6(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):G7(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||d==null||p==null)throw new q7;const g=o<<2|c>>4;if(r.push(g),d!==64){const _=c<<4&240|d>>2;if(r.push(_),p!==64){const E=d<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class q7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const W7=function(n){const e=_6(n);return b6.encodeByteArray(e,!0)},Sp=function(n){return W7(n).replace(/\./g,"")},E6=function(n){try{return b6.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=()=>$7().__FIREBASE_DEFAULTS__,Y7=()=>{if(typeof process>"u"||typeof Y4>"u")return;const n=Y4.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},K7=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&E6(n[1]);return e&&JSON.parse(e)},d1=()=>{try{return H7()||X7()||Y7()||K7()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},A6=n=>{var e,t;return(t=(e=d1())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Q7=n=>{const e=A6(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},T6=()=>{var n;return(n=d1())===null||n===void 0?void 0:n.config},S6=n=>{var e;return(e=d1())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function x6(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J7(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Sp(JSON.stringify(t)),Sp(JSON.stringify(a)),""].join(".")}const Kd={};function eO(){const n={prod:[],emulator:[]};for(const e of Object.keys(Kd))Kd[e]?n.emulator.push(e):n.prod.push(e);return n}function tO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let K4=!1;function C6(n,e){if(typeof window>"u"||typeof document>"u"||!cu(window.location.host)||Kd[n]===e||Kd[n]||K4)return;Kd[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",o=eO().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{K4=!0,a()},g}function h(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=tO(r),_=t("text"),E=document.getElementById(_)||document.createElement("span"),A=t("learnmore"),S=document.getElementById(A)||document.createElement("a"),x=t("preprendIcon"),O=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const P=g.element;c(P),h(S,A);const D=d();u(O,x),P.append(O,E,S,D),document.body.appendChild(P)}o?(E.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pr())}function rO(){var n;const e=(n=d1())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function sO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aO(){const n=pr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function lO(){return!rO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cO(){try{return typeof indexedDB=="object"}catch{return!1}}function uO(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="FirebaseError";class is extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=dO,Object.setPrototypeOf(this,is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kf.prototype.create)}}class kf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?fO(o,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new is(i,c,r)}}function fO(n,e){return n.replace(hO,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const hO=/\{\$([^}]+)}/g;function mO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function pl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],a=e[i];if(Q4(o)&&Q4(a)){if(!pl(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Q4(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zd(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Hd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function pO(n,e){const t=new gO(n,e);return t.subscribe.bind(t)}class gO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");yO(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=sy),i.error===void 0&&(i.error=sy),i.complete===void 0&&(i.complete=sy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function sy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(n){return n&&n._delegate?n._delegate:n}class gl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Z7;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_O(e))try{this.getOrInitializeService({instanceIdentifier:nl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=nl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nl){return this.instances.has(e)}getOptions(e=nl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wO(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=nl){return this.component?this.component.multipleInstances?e:nl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wO(n){return n===nl?void 0:n}function _O(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new vO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(tt||(tt={}));const EO={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},AO=tt.INFO,TO={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},SO=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=TO[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Av{constructor(e){this.name=e,this._logLevel=AO,this._logHandler=SO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const xO=(n,e)=>e.some(t=>n instanceof t);let Z4,J4;function CO(){return Z4||(Z4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IO(){return J4||(J4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I6=new WeakMap,s2=new WeakMap,R6=new WeakMap,ay=new WeakMap,Tv=new WeakMap;function RO(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(Ks(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&I6.set(t,n)}).catch(()=>{}),Tv.set(e,n),e}function NO(n){if(s2.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});s2.set(n,e)}let a2={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return s2.get(n);if(e==="objectStoreNames")return n.objectStoreNames||R6.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ks(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function OO(n){a2=n(a2)}function DO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ly(this),e,...t);return R6.set(r,e.sort?e.sort():[e]),Ks(r)}:IO().includes(n)?function(...e){return n.apply(ly(this),e),Ks(I6.get(this))}:function(...e){return Ks(n.apply(ly(this),e))}}function PO(n){return typeof n=="function"?DO(n):(n instanceof IDBTransaction&&NO(n),xO(n,CO())?new Proxy(n,a2):n)}function Ks(n){if(n instanceof IDBRequest)return RO(n);if(ay.has(n))return ay.get(n);const e=PO(n);return e!==n&&(ay.set(n,e),Tv.set(e,n)),e}const ly=n=>Tv.get(n);function MO(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(n,e),c=Ks(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Ks(a.result),u.oldVersion,u.newVersion,Ks(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const kO=["get","getKey","getAll","getAllKeys","count"],LO=["put","add","delete","clear"],cy=new Map;function eA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cy.get(e))return cy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=LO.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||kO.includes(t)))return;const o=async function(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&u.done]))[0]};return cy.set(e,o),o}OO(n=>({...n,get:(e,t,r)=>eA(e,t)||n.get(e,t,r),has:(e,t)=>!!eA(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VO(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function VO(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const l2="@firebase/app",tA="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=new Av("@firebase/app"),BO="@firebase/app-compat",FO="@firebase/analytics-compat",UO="@firebase/analytics",zO="@firebase/app-check-compat",HO="@firebase/app-check",GO="@firebase/auth",qO="@firebase/auth-compat",WO="@firebase/database",$O="@firebase/data-connect",XO="@firebase/database-compat",YO="@firebase/functions",KO="@firebase/functions-compat",QO="@firebase/installations",ZO="@firebase/installations-compat",JO="@firebase/messaging",eD="@firebase/messaging-compat",tD="@firebase/performance",nD="@firebase/performance-compat",rD="@firebase/remote-config",iD="@firebase/remote-config-compat",oD="@firebase/storage",sD="@firebase/storage-compat",aD="@firebase/firestore",lD="@firebase/ai",cD="@firebase/firestore-compat",uD="firebase",dD="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="[DEFAULT]",fD={[l2]:"fire-core",[BO]:"fire-core-compat",[UO]:"fire-analytics",[FO]:"fire-analytics-compat",[HO]:"fire-app-check",[zO]:"fire-app-check-compat",[GO]:"fire-auth",[qO]:"fire-auth-compat",[WO]:"fire-rtdb",[$O]:"fire-data-connect",[XO]:"fire-rtdb-compat",[YO]:"fire-fn",[KO]:"fire-fn-compat",[QO]:"fire-iid",[ZO]:"fire-iid-compat",[JO]:"fire-fcm",[eD]:"fire-fcm-compat",[tD]:"fire-perf",[nD]:"fire-perf-compat",[rD]:"fire-rc",[iD]:"fire-rc-compat",[oD]:"fire-gcs",[sD]:"fire-gcs-compat",[aD]:"fire-fst",[cD]:"fire-fst-compat",[lD]:"fire-vertex","fire-js":"fire-js",[uD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp=new Map,hD=new Map,u2=new Map;function nA(n,e){try{n.container.addComponent(e)}catch(t){Yo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Gc(n){const e=n.name;if(u2.has(e))return Yo.debug(`There were multiple attempts to register component ${e}.`),!1;u2.set(e,n);for(const t of xp.values())nA(t,n);for(const t of hD.values())nA(t,n);return!0}function Sv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qs=new kf("app","Firebase",mD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=dD;function N6(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:c2,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Qs.create("bad-app-name",{appName:String(i)});if(t||(t=T6()),!t)throw Qs.create("no-options");const o=xp.get(i);if(o){if(pl(t,o.options)&&pl(r,o.config))return o;throw Qs.create("duplicate-app",{appName:i})}const a=new bO(i);for(const u of u2.values())a.addComponent(u);const c=new pD(t,r,a);return xp.set(i,c),c}function O6(n=c2){const e=xp.get(n);if(!e&&n===c2&&T6())return N6();if(!e)throw Qs.create("no-app",{appName:n});return e}function Zs(n,e,t){var r;let i=(r=fD[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yo.warn(c.join(" "));return}Gc(new gl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="firebase-heartbeat-database",yD=1,hf="firebase-heartbeat-store";let uy=null;function D6(){return uy||(uy=MO(gD,yD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(hf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qs.create("idb-open",{originalErrorMessage:n.message})})),uy}async function vD(n){try{const t=(await D6()).transaction(hf),r=await t.objectStore(hf).get(P6(n));return await t.done,r}catch(e){if(e instanceof is)Yo.warn(e.message);else{const t=Qs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yo.warn(t.message)}}}async function rA(n,e){try{const r=(await D6()).transaction(hf,"readwrite");await r.objectStore(hf).put(e,P6(n)),await r.done}catch(t){if(t instanceof is)Yo.warn(t.message);else{const r=Qs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Yo.warn(r.message)}}}function P6(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=1024,_D=30;class bD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=iA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>_D){const a=TD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Yo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=iA(),{heartbeatsToSend:r,unsentEntries:i}=ED(this._heartbeatsCache.heartbeats),o=Sp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Yo.warn(t),""}}}function iA(){return new Date().toISOString().substring(0,10)}function ED(n,e=wD){const t=[];let r=n.slice();for(const i of n){const o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),oA(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),oA(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class AD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cO()?uO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await vD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return rA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return rA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function oA(n){return Sp(JSON.stringify({version:2,heartbeats:n})).length}function TD(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(n){Gc(new gl("platform-logger",e=>new jO(e),"PRIVATE")),Gc(new gl("heartbeat",e=>new bD(e),"PRIVATE")),Zs(l2,tA,n),Zs(l2,tA,"esm2017"),Zs("fire-js","")}SD("");var xD="firebase",CD="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zs(xD,CD,"app");var sA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Js,M6;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,R){function k(){}k.prototype=R.prototype,M.D=R.prototype,M.prototype=new k,M.prototype.constructor=M,M.C=function(U,z,q){for(var F=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)F[Ce-2]=arguments[Ce];return R.prototype[z].apply(U,F)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,R,k){k||(k=0);var U=Array(16);if(typeof R=="string")for(var z=0;16>z;++z)U[z]=R.charCodeAt(k++)|R.charCodeAt(k++)<<8|R.charCodeAt(k++)<<16|R.charCodeAt(k++)<<24;else for(z=0;16>z;++z)U[z]=R[k++]|R[k++]<<8|R[k++]<<16|R[k++]<<24;R=M.g[0],k=M.g[1],z=M.g[2];var q=M.g[3],F=R+(q^k&(z^q))+U[0]+3614090360&4294967295;R=k+(F<<7&4294967295|F>>>25),F=q+(z^R&(k^z))+U[1]+3905402710&4294967295,q=R+(F<<12&4294967295|F>>>20),F=z+(k^q&(R^k))+U[2]+606105819&4294967295,z=q+(F<<17&4294967295|F>>>15),F=k+(R^z&(q^R))+U[3]+3250441966&4294967295,k=z+(F<<22&4294967295|F>>>10),F=R+(q^k&(z^q))+U[4]+4118548399&4294967295,R=k+(F<<7&4294967295|F>>>25),F=q+(z^R&(k^z))+U[5]+1200080426&4294967295,q=R+(F<<12&4294967295|F>>>20),F=z+(k^q&(R^k))+U[6]+2821735955&4294967295,z=q+(F<<17&4294967295|F>>>15),F=k+(R^z&(q^R))+U[7]+4249261313&4294967295,k=z+(F<<22&4294967295|F>>>10),F=R+(q^k&(z^q))+U[8]+1770035416&4294967295,R=k+(F<<7&4294967295|F>>>25),F=q+(z^R&(k^z))+U[9]+2336552879&4294967295,q=R+(F<<12&4294967295|F>>>20),F=z+(k^q&(R^k))+U[10]+4294925233&4294967295,z=q+(F<<17&4294967295|F>>>15),F=k+(R^z&(q^R))+U[11]+2304563134&4294967295,k=z+(F<<22&4294967295|F>>>10),F=R+(q^k&(z^q))+U[12]+1804603682&4294967295,R=k+(F<<7&4294967295|F>>>25),F=q+(z^R&(k^z))+U[13]+4254626195&4294967295,q=R+(F<<12&4294967295|F>>>20),F=z+(k^q&(R^k))+U[14]+2792965006&4294967295,z=q+(F<<17&4294967295|F>>>15),F=k+(R^z&(q^R))+U[15]+1236535329&4294967295,k=z+(F<<22&4294967295|F>>>10),F=R+(z^q&(k^z))+U[1]+4129170786&4294967295,R=k+(F<<5&4294967295|F>>>27),F=q+(k^z&(R^k))+U[6]+3225465664&4294967295,q=R+(F<<9&4294967295|F>>>23),F=z+(R^k&(q^R))+U[11]+643717713&4294967295,z=q+(F<<14&4294967295|F>>>18),F=k+(q^R&(z^q))+U[0]+3921069994&4294967295,k=z+(F<<20&4294967295|F>>>12),F=R+(z^q&(k^z))+U[5]+3593408605&4294967295,R=k+(F<<5&4294967295|F>>>27),F=q+(k^z&(R^k))+U[10]+38016083&4294967295,q=R+(F<<9&4294967295|F>>>23),F=z+(R^k&(q^R))+U[15]+3634488961&4294967295,z=q+(F<<14&4294967295|F>>>18),F=k+(q^R&(z^q))+U[4]+3889429448&4294967295,k=z+(F<<20&4294967295|F>>>12),F=R+(z^q&(k^z))+U[9]+568446438&4294967295,R=k+(F<<5&4294967295|F>>>27),F=q+(k^z&(R^k))+U[14]+3275163606&4294967295,q=R+(F<<9&4294967295|F>>>23),F=z+(R^k&(q^R))+U[3]+4107603335&4294967295,z=q+(F<<14&4294967295|F>>>18),F=k+(q^R&(z^q))+U[8]+1163531501&4294967295,k=z+(F<<20&4294967295|F>>>12),F=R+(z^q&(k^z))+U[13]+2850285829&4294967295,R=k+(F<<5&4294967295|F>>>27),F=q+(k^z&(R^k))+U[2]+4243563512&4294967295,q=R+(F<<9&4294967295|F>>>23),F=z+(R^k&(q^R))+U[7]+1735328473&4294967295,z=q+(F<<14&4294967295|F>>>18),F=k+(q^R&(z^q))+U[12]+2368359562&4294967295,k=z+(F<<20&4294967295|F>>>12),F=R+(k^z^q)+U[5]+4294588738&4294967295,R=k+(F<<4&4294967295|F>>>28),F=q+(R^k^z)+U[8]+2272392833&4294967295,q=R+(F<<11&4294967295|F>>>21),F=z+(q^R^k)+U[11]+1839030562&4294967295,z=q+(F<<16&4294967295|F>>>16),F=k+(z^q^R)+U[14]+4259657740&4294967295,k=z+(F<<23&4294967295|F>>>9),F=R+(k^z^q)+U[1]+2763975236&4294967295,R=k+(F<<4&4294967295|F>>>28),F=q+(R^k^z)+U[4]+1272893353&4294967295,q=R+(F<<11&4294967295|F>>>21),F=z+(q^R^k)+U[7]+4139469664&4294967295,z=q+(F<<16&4294967295|F>>>16),F=k+(z^q^R)+U[10]+3200236656&4294967295,k=z+(F<<23&4294967295|F>>>9),F=R+(k^z^q)+U[13]+681279174&4294967295,R=k+(F<<4&4294967295|F>>>28),F=q+(R^k^z)+U[0]+3936430074&4294967295,q=R+(F<<11&4294967295|F>>>21),F=z+(q^R^k)+U[3]+3572445317&4294967295,z=q+(F<<16&4294967295|F>>>16),F=k+(z^q^R)+U[6]+76029189&4294967295,k=z+(F<<23&4294967295|F>>>9),F=R+(k^z^q)+U[9]+3654602809&4294967295,R=k+(F<<4&4294967295|F>>>28),F=q+(R^k^z)+U[12]+3873151461&4294967295,q=R+(F<<11&4294967295|F>>>21),F=z+(q^R^k)+U[15]+530742520&4294967295,z=q+(F<<16&4294967295|F>>>16),F=k+(z^q^R)+U[2]+3299628645&4294967295,k=z+(F<<23&4294967295|F>>>9),F=R+(z^(k|~q))+U[0]+4096336452&4294967295,R=k+(F<<6&4294967295|F>>>26),F=q+(k^(R|~z))+U[7]+1126891415&4294967295,q=R+(F<<10&4294967295|F>>>22),F=z+(R^(q|~k))+U[14]+2878612391&4294967295,z=q+(F<<15&4294967295|F>>>17),F=k+(q^(z|~R))+U[5]+4237533241&4294967295,k=z+(F<<21&4294967295|F>>>11),F=R+(z^(k|~q))+U[12]+1700485571&4294967295,R=k+(F<<6&4294967295|F>>>26),F=q+(k^(R|~z))+U[3]+2399980690&4294967295,q=R+(F<<10&4294967295|F>>>22),F=z+(R^(q|~k))+U[10]+4293915773&4294967295,z=q+(F<<15&4294967295|F>>>17),F=k+(q^(z|~R))+U[1]+2240044497&4294967295,k=z+(F<<21&4294967295|F>>>11),F=R+(z^(k|~q))+U[8]+1873313359&4294967295,R=k+(F<<6&4294967295|F>>>26),F=q+(k^(R|~z))+U[15]+4264355552&4294967295,q=R+(F<<10&4294967295|F>>>22),F=z+(R^(q|~k))+U[6]+2734768916&4294967295,z=q+(F<<15&4294967295|F>>>17),F=k+(q^(z|~R))+U[13]+1309151649&4294967295,k=z+(F<<21&4294967295|F>>>11),F=R+(z^(k|~q))+U[4]+4149444226&4294967295,R=k+(F<<6&4294967295|F>>>26),F=q+(k^(R|~z))+U[11]+3174756917&4294967295,q=R+(F<<10&4294967295|F>>>22),F=z+(R^(q|~k))+U[2]+718787259&4294967295,z=q+(F<<15&4294967295|F>>>17),F=k+(q^(z|~R))+U[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(z+(F<<21&4294967295|F>>>11))&4294967295,M.g[2]=M.g[2]+z&4294967295,M.g[3]=M.g[3]+q&4294967295}r.prototype.u=function(M,R){R===void 0&&(R=M.length);for(var k=R-this.blockSize,U=this.B,z=this.h,q=0;q<R;){if(z==0)for(;q<=k;)i(this,M,q),q+=this.blockSize;if(typeof M=="string"){for(;q<R;)if(U[z++]=M.charCodeAt(q++),z==this.blockSize){i(this,U),z=0;break}}else for(;q<R;)if(U[z++]=M[q++],z==this.blockSize){i(this,U),z=0;break}}this.h=z,this.o+=R},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;var k=8*this.o;for(R=M.length-8;R<M.length;++R)M[R]=k&255,k/=256;for(this.u(M),M=Array(16),R=k=0;4>R;++R)for(var U=0;32>U;U+=8)M[k++]=this.g[R]>>>U&255;return M};function o(M,R){var k=c;return Object.prototype.hasOwnProperty.call(k,M)?k[M]:k[M]=R(M)}function a(M,R){this.h=R;for(var k=[],U=!0,z=M.length-1;0<=z;z--){var q=M[z]|0;U&&q==R||(k[z]=q,U=!1)}this.g=k}var c={};function u(M){return-128<=M&&128>M?o(M,function(R){return new a([R|0],0>R?-1:0)}):new a([M|0],0>M?-1:0)}function d(M){if(isNaN(M)||!isFinite(M))return p;if(0>M)return S(d(-M));for(var R=[],k=1,U=0;M>=k;U++)R[U]=M/k|0,k*=4294967296;return new a(R,0)}function h(M,R){if(M.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(M.charAt(0)=="-")return S(h(M.substring(1),R));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=d(Math.pow(R,8)),U=p,z=0;z<M.length;z+=8){var q=Math.min(8,M.length-z),F=parseInt(M.substring(z,z+q),R);8>q?(q=d(Math.pow(R,q)),U=U.j(q).add(d(F))):(U=U.j(k),U=U.add(d(F)))}return U}var p=u(0),g=u(1),_=u(16777216);n=a.prototype,n.m=function(){if(A(this))return-S(this).m();for(var M=0,R=1,k=0;k<this.g.length;k++){var U=this.i(k);M+=(0<=U?U:4294967296+U)*R,R*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(E(this))return"0";if(A(this))return"-"+S(this).toString(M);for(var R=d(Math.pow(M,6)),k=this,U="";;){var z=D(k,R).g;k=x(k,z.j(R));var q=((0<k.g.length?k.g[0]:k.h)>>>0).toString(M);if(k=z,E(k))return q+U;for(;6>q.length;)q="0"+q;U=q+U}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function E(M){if(M.h!=0)return!1;for(var R=0;R<M.g.length;R++)if(M.g[R]!=0)return!1;return!0}function A(M){return M.h==-1}n.l=function(M){return M=x(this,M),A(M)?-1:E(M)?0:1};function S(M){for(var R=M.g.length,k=[],U=0;U<R;U++)k[U]=~M.g[U];return new a(k,~M.h).add(g)}n.abs=function(){return A(this)?S(this):this},n.add=function(M){for(var R=Math.max(this.g.length,M.g.length),k=[],U=0,z=0;z<=R;z++){var q=U+(this.i(z)&65535)+(M.i(z)&65535),F=(q>>>16)+(this.i(z)>>>16)+(M.i(z)>>>16);U=F>>>16,q&=65535,F&=65535,k[z]=F<<16|q}return new a(k,k[k.length-1]&-2147483648?-1:0)};function x(M,R){return M.add(S(R))}n.j=function(M){if(E(this)||E(M))return p;if(A(this))return A(M)?S(this).j(S(M)):S(S(this).j(M));if(A(M))return S(this.j(S(M)));if(0>this.l(_)&&0>M.l(_))return d(this.m()*M.m());for(var R=this.g.length+M.g.length,k=[],U=0;U<2*R;U++)k[U]=0;for(U=0;U<this.g.length;U++)for(var z=0;z<M.g.length;z++){var q=this.i(U)>>>16,F=this.i(U)&65535,Ce=M.i(z)>>>16,Ee=M.i(z)&65535;k[2*U+2*z]+=F*Ee,O(k,2*U+2*z),k[2*U+2*z+1]+=q*Ee,O(k,2*U+2*z+1),k[2*U+2*z+1]+=F*Ce,O(k,2*U+2*z+1),k[2*U+2*z+2]+=q*Ce,O(k,2*U+2*z+2)}for(U=0;U<R;U++)k[U]=k[2*U+1]<<16|k[2*U];for(U=R;U<2*R;U++)k[U]=0;return new a(k,0)};function O(M,R){for(;(M[R]&65535)!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function P(M,R){this.g=M,this.h=R}function D(M,R){if(E(R))throw Error("division by zero");if(E(M))return new P(p,p);if(A(M))return R=D(S(M),R),new P(S(R.g),S(R.h));if(A(R))return R=D(M,S(R)),new P(S(R.g),R.h);if(30<M.g.length){if(A(M)||A(R))throw Error("slowDivide_ only works with positive integers.");for(var k=g,U=R;0>=U.l(M);)k=j(k),U=j(U);var z=H(k,1),q=H(U,1);for(U=H(U,2),k=H(k,2);!E(U);){var F=q.add(U);0>=F.l(M)&&(z=z.add(k),q=F),U=H(U,1),k=H(k,1)}return R=x(M,z.j(R)),new P(z,R)}for(z=p;0<=M.l(R);){for(k=Math.max(1,Math.floor(M.m()/R.m())),U=Math.ceil(Math.log(k)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),q=d(k),F=q.j(R);A(F)||0<F.l(M);)k-=U,q=d(k),F=q.j(R);E(q)&&(q=g),z=z.add(q),M=x(M,F)}return new P(z,M)}n.A=function(M){return D(this,M).h},n.and=function(M){for(var R=Math.max(this.g.length,M.g.length),k=[],U=0;U<R;U++)k[U]=this.i(U)&M.i(U);return new a(k,this.h&M.h)},n.or=function(M){for(var R=Math.max(this.g.length,M.g.length),k=[],U=0;U<R;U++)k[U]=this.i(U)|M.i(U);return new a(k,this.h|M.h)},n.xor=function(M){for(var R=Math.max(this.g.length,M.g.length),k=[],U=0;U<R;U++)k[U]=this.i(U)^M.i(U);return new a(k,this.h^M.h)};function j(M){for(var R=M.g.length+1,k=[],U=0;U<R;U++)k[U]=M.i(U)<<1|M.i(U-1)>>>31;return new a(k,M.h)}function H(M,R){var k=R>>5;R%=32;for(var U=M.g.length-k,z=[],q=0;q<U;q++)z[q]=0<R?M.i(q+k)>>>R|M.i(q+k+1)<<32-R:M.i(q+k);return new a(z,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,M6=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,Js=a}).apply(typeof sA<"u"?sA:typeof self<"u"?self:typeof window<"u"?window:{});var Rm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var k6,Gd,L6,ip,d2,j6,V6,B6;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,T,I){return v==Array.prototype||v==Object.prototype||(v[T]=I.value),v};function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rm=="object"&&Rm];for(var T=0;T<v.length;++T){var I=v[T];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=t(this);function i(v,T){if(T)e:{var I=r;v=v.split(".");for(var V=0;V<v.length-1;V++){var K=v[V];if(!(K in I))break e;I=I[K]}v=v[v.length-1],V=I[v],T=T(V),T!=V&&T!=null&&e(I,v,{configurable:!0,writable:!0,value:T})}}function o(v,T){v instanceof String&&(v+="");var I=0,V=!1,K={next:function(){if(!V&&I<v.length){var ie=I++;return{value:T(ie,v[ie]),done:!1}}return V=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}i("Array.prototype.values",function(v){return v||function(){return o(this,function(T,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(v){var T=typeof v;return T=T!="object"?T:v?Array.isArray(v)?"array":T:"null",T=="array"||T=="object"&&typeof v.length=="number"}function d(v){var T=typeof v;return T=="object"&&v!=null||T=="function"}function h(v,T,I){return v.call.apply(v.bind,arguments)}function p(v,T,I){if(!v)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,V),v.apply(T,K)}}return function(){return v.apply(T,arguments)}}function g(v,T,I){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function _(v,T){var I=Array.prototype.slice.call(arguments,1);return function(){var V=I.slice();return V.push.apply(V,arguments),v.apply(this,V)}}function E(v,T){function I(){}I.prototype=T.prototype,v.aa=T.prototype,v.prototype=new I,v.prototype.constructor=v,v.Qb=function(V,K,ie){for(var ye=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)ye[rt-2]=arguments[rt];return T.prototype[K].apply(V,ye)}}function A(v){const T=v.length;if(0<T){const I=Array(T);for(let V=0;V<T;V++)I[V]=v[V];return I}return[]}function S(v,T){for(let I=1;I<arguments.length;I++){const V=arguments[I];if(u(V)){const K=v.length||0,ie=V.length||0;v.length=K+ie;for(let ye=0;ye<ie;ye++)v[K+ye]=V[ye]}else v.push(V)}}class x{constructor(T,I){this.i=T,this.j=I,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function O(v){return/^[\s\xa0]*$/.test(v)}function P(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function D(v){return D[" "](v),v}D[" "]=function(){};var j=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function H(v,T,I){for(const V in v)T.call(I,v[V],V,v)}function M(v,T){for(const I in v)T.call(void 0,v[I],I,v)}function R(v){const T={};for(const I in v)T[I]=v[I];return T}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(v,T){let I,V;for(let K=1;K<arguments.length;K++){V=arguments[K];for(I in V)v[I]=V[I];for(let ie=0;ie<k.length;ie++)I=k[ie],Object.prototype.hasOwnProperty.call(V,I)&&(v[I]=V[I])}}function z(v){var T=1;v=v.split(":");const I=[];for(;0<T&&v.length;)I.push(v.shift()),T--;return v.length&&I.push(v.join(":")),I}function q(v){c.setTimeout(()=>{throw v},0)}function F(){var v=De;let T=null;return v.g&&(T=v.g,v.g=v.g.next,v.g||(v.h=null),T.next=null),T}class Ce{constructor(){this.h=this.g=null}add(T,I){const V=Ee.get();V.set(T,I),this.h?this.h.next=V:this.g=V,this.h=V}}var Ee=new x(()=>new Q,v=>v.reset());class Q{constructor(){this.next=this.g=this.h=null}set(T,I){this.h=T,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let me,ue=!1,De=new Ce,W=()=>{const v=c.Promise.resolve(void 0);me=()=>{v.then(Y)}};var Y=()=>{for(var v;v=F();){try{v.h.call(v.g)}catch(I){q(I)}var T=Ee;T.j(v),100>T.h&&(T.h++,v.next=T.g,T.g=v)}ue=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(v,T){this.type=v,this.g=this.target=T,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,T=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const I=()=>{};c.addEventListener("test",I,T),c.removeEventListener("test",I,T)}catch{}return v}();function pe(v,T){if(te.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var I=this.type=v.type,V=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=T,T=v.relatedTarget){if(j){e:{try{D(T.nodeName);var K=!0;break e}catch{}K=!1}K||(T=null)}}else I=="mouseover"?T=v.fromElement:I=="mouseout"&&(T=v.toElement);this.relatedTarget=T,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:ge[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&pe.aa.h.call(this)}}E(pe,te);var ge={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Zt(v,T,I,V,K){this.listener=v,this.proxy=null,this.src=T,this.type=I,this.capture=!!V,this.ha=K,this.key=++$e,this.da=this.fa=!1}function mt(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Ie(v){this.src=v,this.g={},this.h=0}Ie.prototype.add=function(v,T,I,V,K){var ie=v.toString();v=this.g[ie],v||(v=this.g[ie]=[],this.h++);var ye=xe(v,T,V,K);return-1<ye?(T=v[ye],I||(T.fa=!1)):(T=new Zt(T,this.src,ie,!!V,K),T.fa=I,v.push(T)),T};function Le(v,T){var I=T.type;if(I in v.g){var V=v.g[I],K=Array.prototype.indexOf.call(V,T,void 0),ie;(ie=0<=K)&&Array.prototype.splice.call(V,K,1),ie&&(mt(T),v.g[I].length==0&&(delete v.g[I],v.h--))}}function xe(v,T,I,V){for(var K=0;K<v.length;++K){var ie=v[K];if(!ie.da&&ie.listener==T&&ie.capture==!!I&&ie.ha==V)return K}return-1}var bt="closure_lm_"+(1e6*Math.random()|0),cn={};function Tr(v,T,I,V,K){if(Array.isArray(T)){for(var ie=0;ie<T.length;ie++)Tr(v,T[ie],I,V,K);return null}return I=oh(I),v&&v[ke]?v.K(T,I,d(V)?!!V.capture:!1,K):Wn(v,T,I,!1,V,K)}function Wn(v,T,I,V,K,ie){if(!T)throw Error("Invalid event type");var ye=d(K)?!!K.capture:!!K,rt=Il(v);if(rt||(v[bt]=rt=new Ie(v)),I=rt.add(T,I,V,ye,ie),I.proxy)return I;if(V=mo(),I.proxy=V,V.src=v,V.listener=I,v.addEventListener)se||(K=ye),K===void 0&&(K=!1),v.addEventListener(T.toString(),V,K);else if(v.attachEvent)v.attachEvent(ya(T.toString()),V);else if(v.addListener&&v.removeListener)v.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return I}function mo(){function v(I){return T.call(v.src,v.listener,I)}const T=J1;return v}function as(v,T,I,V,K){if(Array.isArray(T))for(var ie=0;ie<T.length;ie++)as(v,T[ie],I,V,K);else V=d(V)?!!V.capture:!!V,I=oh(I),v&&v[ke]?(v=v.i,T=String(T).toString(),T in v.g&&(ie=v.g[T],I=xe(ie,I,V,K),-1<I&&(mt(ie[I]),Array.prototype.splice.call(ie,I,1),ie.length==0&&(delete v.g[T],v.h--)))):v&&(v=Il(v))&&(T=v.g[T.toString()],v=-1,T&&(v=xe(T,I,V,K)),(I=-1<v?T[v]:null)&&Cl(I))}function Cl(v){if(typeof v!="number"&&v&&!v.da){var T=v.src;if(T&&T[ke])Le(T.i,v);else{var I=v.type,V=v.proxy;T.removeEventListener?T.removeEventListener(I,V,v.capture):T.detachEvent?T.detachEvent(ya(I),V):T.addListener&&T.removeListener&&T.removeListener(V),(I=Il(T))?(Le(I,v),I.h==0&&(I.src=null,T[bt]=null)):mt(v)}}}function ya(v){return v in cn?cn[v]:cn[v]="on"+v}function J1(v,T){if(v.da)v=!0;else{T=new pe(T,this);var I=v.listener,V=v.ha||v.src;v.fa&&Cl(v),v=I.call(V,T)}return v}function Il(v){return v=v[bt],v instanceof Ie?v:null}var Iu="__closure_events_fn_"+(1e9*Math.random()>>>0);function oh(v){return typeof v=="function"?v:(v[Iu]||(v[Iu]=function(T){return v.handleEvent(T)}),v[Iu])}function $t(){oe.call(this),this.i=new Ie(this),this.M=this,this.F=null}E($t,oe),$t.prototype[ke]=!0,$t.prototype.removeEventListener=function(v,T,I,V){as(this,v,T,I,V)};function yt(v,T){var I,V=v.F;if(V)for(I=[];V;V=V.F)I.push(V);if(v=v.M,V=T.type||T,typeof T=="string")T=new te(T,v);else if(T instanceof te)T.target=T.target||v;else{var K=T;T=new te(V,v),U(T,K)}if(K=!0,I)for(var ie=I.length-1;0<=ie;ie--){var ye=T.g=I[ie];K=Lr(ye,V,!0,T)&&K}if(ye=T.g=v,K=Lr(ye,V,!0,T)&&K,K=Lr(ye,V,!1,T)&&K,I)for(ie=0;ie<I.length;ie++)ye=T.g=I[ie],K=Lr(ye,V,!1,T)&&K}$t.prototype.N=function(){if($t.aa.N.call(this),this.i){var v=this.i,T;for(T in v.g){for(var I=v.g[T],V=0;V<I.length;V++)mt(I[V]);delete v.g[T],v.h--}}this.F=null},$t.prototype.K=function(v,T,I,V){return this.i.add(String(v),T,!1,I,V)},$t.prototype.L=function(v,T,I,V){return this.i.add(String(v),T,!0,I,V)};function Lr(v,T,I,V){if(T=v.i.g[String(T)],!T)return!0;T=T.concat();for(var K=!0,ie=0;ie<T.length;++ie){var ye=T[ie];if(ye&&!ye.da&&ye.capture==I){var rt=ye.listener,bn=ye.ha||ye.src;ye.fa&&Le(v.i,ye),K=rt.call(bn,V)!==!1&&K}}return K&&!V.defaultPrevented}function lr(v,T,I){if(typeof v=="function")I&&(v=g(v,I));else if(v&&typeof v.handleEvent=="function")v=g(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:c.setTimeout(v,T||0)}function sh(v){v.g=lr(()=>{v.g=null,v.i&&(v.i=!1,sh(v))},v.l);const T=v.h;v.h=null,v.m.apply(null,T)}class eg extends oe{constructor(T,I){super(),this.m=T,this.l=I,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:sh(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function va(v){oe.call(this),this.h=v,this.g={}}E(va,oe);var wa=[];function _a(v){H(v.g,function(T,I){this.g.hasOwnProperty(I)&&Cl(T)},v),v.g={}}va.prototype.N=function(){va.aa.N.call(this),_a(this)},va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bi=c.JSON.stringify,Rl=c.JSON.parse,ba=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function Ru(){}Ru.prototype.h=null;function Nu(v){return v.h||(v.h=v.i())}function Ou(){}var po={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function go(){te.call(this,"d")}E(go,te);function Du(){te.call(this,"c")}E(Du,te);var ji={},Pu=null;function ls(){return Pu=Pu||new $t}ji.La="serverreachability";function Nl(v){te.call(this,ji.La,v)}E(Nl,te);function cs(v){const T=ls();yt(T,new Nl(T))}ji.STAT_EVENT="statevent";function ah(v,T){te.call(this,ji.STAT_EVENT,v),this.stat=T}E(ah,te);function Lt(v){const T=ls();yt(T,new ah(T,v))}ji.Ma="timingevent";function _n(v,T){te.call(this,ji.Ma,v),this.size=T}E(_n,te);function un(v,T){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},T)}function Qr(){this.g=!0}Qr.prototype.xa=function(){this.g=!1};function Mu(v,T,I,V,K,ie){v.info(function(){if(v.g)if(ie)for(var ye="",rt=ie.split("&"),bn=0;bn<rt.length;bn++){var it=rt[bn].split("=");if(1<it.length){var kn=it[0];it=it[1];var En=kn.split("_");ye=2<=En.length&&En[1]=="type"?ye+(kn+"="+it+"&"):ye+(kn+"=redacted&")}}else ye=null;else ye=ie;return"XMLHTTP REQ ("+V+") [attempt "+K+"]: "+T+`
`+I+`
`+ye})}function tg(v,T,I,V,K,ie,ye){v.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+K+"]: "+T+`
`+I+`
`+ie+" "+ye})}function us(v,T,I,V){v.info(function(){return"XMLHTTP TEXT ("+T+"): "+Ea(v,I)+(V?" "+V:"")})}function lh(v,T){v.info(function(){return"TIMEOUT: "+T})}Qr.prototype.info=function(){};function Ea(v,T){if(!v.g)return T;if(!T)return null;try{var I=JSON.parse(T);if(I){for(v=0;v<I.length;v++)if(Array.isArray(I[v])){var V=I[v];if(!(2>V.length)){var K=V[1];if(Array.isArray(K)&&!(1>K.length)){var ie=K[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var ye=1;ye<K.length;ye++)K[ye]=""}}}}return bi(I)}catch{return T}}var ds={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vi;function Bi(){}E(Bi,Ru),Bi.prototype.g=function(){return new XMLHttpRequest},Bi.prototype.i=function(){return{}},Vi=new Bi;function gr(v,T,I,V){this.j=v,this.i=T,this.l=I,this.R=V||1,this.U=new va(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jt}function Jt(){this.i=null,this.g="",this.h=!1}var ku={},Ol={};function Ei(v,T,I){v.L=1,v.v=Ca(jr(T)),v.m=I,v.P=!0,vo(v,null)}function vo(v,T){v.F=Date.now(),Aa(v),v.A=jr(v.v);var I=v.A,V=v.R;Array.isArray(V)||(V=[String(V)]),Uu(I.i,"t",V),v.C=0,I=v.j.J,v.h=new Jt,v.g=Th(v.j,I?T:null,!v.m),0<v.O&&(v.M=new eg(g(v.Y,v,v.g),v.O)),T=v.U,I=v.g,V=v.ca;var K="readystatechange";Array.isArray(K)||(K&&(wa[0]=K.toString()),K=wa);for(var ie=0;ie<K.length;ie++){var ye=Tr(I,K[ie],V||T.handleEvent,!1,T.h||T);if(!ye)break;T.g[ye.key]=ye}T=v.H?R(v.H):{},v.m?(v.u||(v.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,T)):(v.u="GET",v.g.ea(v.A,v.u,null,T)),cs(),Mu(v.i,v.u,v.A,v.l,v.R,v.m)}gr.prototype.ca=function(v){v=v.target;const T=this.M;T&&ti(v)==3?T.j():this.Y(v)},gr.prototype.Y=function(v){try{if(v==this.g)e:{const En=ti(this.g);var T=this.g.Ba();const xo=this.g.Z();if(!(3>En)&&(En!=3||this.g&&(this.h.h||this.g.oa()||gh(this.g)))){this.J||En!=4||T==7||(T==8||0>=xo?cs(3):cs(2)),fs(this);var I=this.g.Z();this.X=I;t:if(ch(this)){var V=gh(this.g);v="";var K=V.length,ie=ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$n(this),Fi(this);var ye="";break t}this.h.i=new c.TextDecoder}for(T=0;T<K;T++)this.h.h=!0,v+=this.h.i.decode(V[T],{stream:!(ie&&T==K-1)});V.length=0,this.h.g+=v,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=I==200,tg(this.i,this.u,this.A,this.l,this.R,En,I),this.o){if(this.T&&!this.K){t:{if(this.g){var rt,bn=this.g;if((rt=bn.g?bn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(rt)){var it=rt;break t}}it=null}if(I=it)us(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ta(this,I);else{this.o=!1,this.s=3,Lt(12),$n(this),Fi(this);break e}}if(this.P){I=!0;let Xn;for(;!this.J&&this.C<ye.length;)if(Xn=uh(this,ye),Xn==Ol){En==4&&(this.s=4,Lt(14),I=!1),us(this.i,this.l,null,"[Incomplete Response]");break}else if(Xn==ku){this.s=4,Lt(15),us(this.i,this.l,ye,"[Invalid Chunk]"),I=!1;break}else us(this.i,this.l,Xn,null),Ta(this,Xn);if(ch(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),En!=4||ye.length!=0||this.h.h||(this.s=1,Lt(16),I=!1),this.o=this.o&&I,!I)us(this.i,this.l,ye,"[Invalid Chunked Response]"),$n(this),Fi(this);else if(0<ye.length&&!this.W){this.W=!0;var kn=this.j;kn.g==this&&kn.ba&&!kn.M&&(kn.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),ka(kn),kn.M=!0,Lt(11))}}else us(this.i,this.l,ye,null),Ta(this,ye);En==4&&$n(this),this.o&&!this.J&&(En==4?bh(this.j,this):(this.o=!1,Aa(this)))}else sg(this.g),I==400&&0<ye.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),$n(this),Fi(this)}}}catch{}finally{}};function ch(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function uh(v,T){var I=v.C,V=T.indexOf(`
`,I);return V==-1?Ol:(I=Number(T.substring(I,V)),isNaN(I)?ku:(V+=1,V+I>T.length?Ol:(T=T.slice(V,V+I),v.C=V+I,T)))}gr.prototype.cancel=function(){this.J=!0,$n(this)};function Aa(v){v.S=Date.now()+v.I,dh(v,v.I)}function dh(v,T){if(v.B!=null)throw Error("WatchDog timer not null");v.B=un(g(v.ba,v),T)}function fs(v){v.B&&(c.clearTimeout(v.B),v.B=null)}gr.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(lh(this.i,this.A),this.L!=2&&(cs(),Lt(17)),$n(this),this.s=2,Fi(this)):dh(this,this.S-v)};function Fi(v){v.j.G==0||v.J||bh(v.j,v)}function $n(v){fs(v);var T=v.M;T&&typeof T.ma=="function"&&T.ma(),v.M=null,_a(v.U),v.g&&(T=v.g,v.g=null,T.abort(),T.ma())}function Ta(v,T){try{var I=v.j;if(I.G!=0&&(I.g==v||Lu(I.h,v))){if(!v.K&&Lu(I.h,v)&&I.G==3){try{var V=I.Da.g.parse(T)}catch{V=null}if(Array.isArray(V)&&V.length==3){var K=V;if(K[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<v.F)Hl(I),Ul(I);else break e;Wu(I),Lt(18)}}else I.za=K[1],0<I.za-I.T&&37500>K[2]&&I.F&&I.v==0&&!I.C&&(I.C=un(g(I.Za,I),6e3));if(1>=Pl(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else So(I,11)}else if((v.K||I.g==v)&&Hl(I),!O(T))for(K=I.Da.g.parse(T),T=0;T<K.length;T++){let it=K[T];if(I.T=it[0],it=it[1],I.G==2)if(it[0]=="c"){I.K=it[1],I.ia=it[2];const kn=it[3];kn!=null&&(I.la=kn,I.j.info("VER="+I.la));const En=it[4];En!=null&&(I.Aa=En,I.j.info("SVER="+I.Aa));const xo=it[5];xo!=null&&typeof xo=="number"&&0<xo&&(V=1.5*xo,I.L=V,I.j.info("backChannelRequestTimeoutMs_="+V)),V=I;const Xn=v.g;if(Xn){const $i=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($i){var ie=V.h;ie.g||$i.indexOf("spdy")==-1&&$i.indexOf("quic")==-1&&$i.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Ml(ie,ie.h),ie.h=null))}if(V.D){const Xu=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xu&&(V.ya=Xu,Et(V.I,V.D,Xu))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-v.F,I.j.info("Handshake RTT: "+I.R+"ms")),V=I;var ye=v;if(V.qa=Ah(V,V.J?V.ia:null,V.W),ye.K){yr(V.h,ye);var rt=ye,bn=V.L;bn&&(rt.I=bn),rt.B&&(fs(rt),Aa(rt)),V.g=ye}else wh(V);0<I.i.length&&zl(I)}else it[0]!="stop"&&it[0]!="close"||So(I,7);else I.G==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?So(I,7):Gu(I):it[0]!="noop"&&I.l&&I.l.ta(it),I.v=0)}}cs(4)}catch{}}var fh=class{constructor(v,T){this.g=v,this.map=T}};function wo(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dl(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function Pl(v){return v.h?1:v.g?v.g.size:0}function Lu(v,T){return v.h?v.h==T:v.g?v.g.has(T):!1}function Ml(v,T){v.g?v.g.add(T):v.h=T}function yr(v,T){v.h&&v.h==T?v.h=null:v.g&&v.g.has(T)&&v.g.delete(T)}wo.prototype.cancel=function(){if(this.i=ju(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function ju(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let T=v.i;for(const I of v.g.values())T=T.concat(I.D);return T}return A(v.i)}function ng(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(u(v)){for(var T=[],I=v.length,V=0;V<I;V++)T.push(v[V]);return T}T=[],I=0;for(V in v)T[I++]=v[V];return T}function kl(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(u(v)||typeof v=="string"){var T=[];v=v.length;for(var I=0;I<v;I++)T.push(I);return T}T=[],I=0;for(const V in v)T[I++]=V;return T}}}function Vu(v,T){if(v.forEach&&typeof v.forEach=="function")v.forEach(T,void 0);else if(u(v)||typeof v=="string")Array.prototype.forEach.call(v,T,void 0);else for(var I=kl(v),V=ng(v),K=V.length,ie=0;ie<K;ie++)T.call(void 0,V[ie],I&&I[ie],v)}var Sa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rg(v,T){if(v){v=v.split("&");for(var I=0;I<v.length;I++){var V=v[I].indexOf("="),K=null;if(0<=V){var ie=v[I].substring(0,V);K=v[I].substring(V+1)}else ie=v[I];T(ie,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function dn(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof dn){this.h=v.h,xa(this,v.j),this.o=v.o,this.g=v.g,hs(this,v.s),this.l=v.l;var T=v.i,I=new bo;I.i=T.i,T.g&&(I.g=new Map(T.g),I.h=T.h),_o(this,I),this.m=v.m}else v&&(T=String(v).match(Sa))?(this.h=!1,xa(this,T[1]||"",!0),this.o=Zr(T[2]||""),this.g=Zr(T[3]||"",!0),hs(this,T[4]),this.l=Zr(T[5]||"",!0),_o(this,T[6]||"",!0),this.m=Zr(T[7]||"")):(this.h=!1,this.i=new bo(null,this.h))}dn.prototype.toString=function(){var v=[],T=this.j;T&&v.push(Ia(T,Bu,!0),":");var I=this.g;return(I||T=="file")&&(v.push("//"),(T=this.o)&&v.push(Ia(T,Bu,!0),"@"),v.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&v.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&v.push("/"),v.push(Ia(I,I.charAt(0)=="/"?ig:Fu,!0))),(I=this.i.toString())&&v.push("?",I),(I=this.m)&&v.push("#",Ia(I,Ll)),v.join("")};function jr(v){return new dn(v)}function xa(v,T,I){v.j=I?Zr(T,!0):T,v.j&&(v.j=v.j.replace(/:$/,""))}function hs(v,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);v.s=T}else v.s=null}function _o(v,T,I){T instanceof bo?(v.i=T,mh(v.i,v.h)):(I||(T=Ia(T,og)),v.i=new bo(T,v.h))}function Et(v,T,I){v.i.set(T,I)}function Ca(v){return Et(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Zr(v,T){return v?T?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Ia(v,T,I){return typeof v=="string"?(v=encodeURI(v).replace(T,hh),I&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function hh(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Bu=/[#\/\?@]/g,Fu=/[#\?:]/g,ig=/[#\?]/g,og=/[#\?@]/g,Ll=/#/g;function bo(v,T){this.h=this.g=null,this.i=v||null,this.j=!!T}function Jr(v){v.g||(v.g=new Map,v.h=0,v.i&&rg(v.i,function(T,I){v.add(decodeURIComponent(T.replace(/\+/g," ")),I)}))}n=bo.prototype,n.add=function(v,T){Jr(this),this.i=null,v=Ui(this,v);var I=this.g.get(v);return I||this.g.set(v,I=[]),I.push(T),this.h+=1,this};function Eo(v,T){Jr(v),T=Ui(v,T),v.g.has(T)&&(v.i=null,v.h-=v.g.get(T).length,v.g.delete(T))}function Ao(v,T){return Jr(v),T=Ui(v,T),v.g.has(T)}n.forEach=function(v,T){Jr(this),this.g.forEach(function(I,V){I.forEach(function(K){v.call(T,K,V,this)},this)},this)},n.na=function(){Jr(this);const v=Array.from(this.g.values()),T=Array.from(this.g.keys()),I=[];for(let V=0;V<T.length;V++){const K=v[V];for(let ie=0;ie<K.length;ie++)I.push(T[V])}return I},n.V=function(v){Jr(this);let T=[];if(typeof v=="string")Ao(this,v)&&(T=T.concat(this.g.get(Ui(this,v))));else{v=Array.from(this.g.values());for(let I=0;I<v.length;I++)T=T.concat(v[I])}return T},n.set=function(v,T){return Jr(this),this.i=null,v=Ui(this,v),Ao(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[T]),this.h+=1,this},n.get=function(v,T){return v?(v=this.V(v),0<v.length?String(v[0]):T):T};function Uu(v,T,I){Eo(v,T),0<I.length&&(v.i=null,v.g.set(Ui(v,T),A(I)),v.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],T=Array.from(this.g.keys());for(var I=0;I<T.length;I++){var V=T[I];const ie=encodeURIComponent(String(V)),ye=this.V(V);for(V=0;V<ye.length;V++){var K=ie;ye[V]!==""&&(K+="="+encodeURIComponent(String(ye[V]))),v.push(K)}}return this.i=v.join("&")};function Ui(v,T){return T=String(T),v.j&&(T=T.toLowerCase()),T}function mh(v,T){T&&!v.j&&(Jr(v),v.i=null,v.g.forEach(function(I,V){var K=V.toLowerCase();V!=K&&(Eo(this,V),Uu(this,K,I))},v)),v.j=T}function Ra(v,T){const I=new Qr;if(c.Image){const V=new Image;V.onload=_(ei,I,"TestLoadImage: loaded",!0,T,V),V.onerror=_(ei,I,"TestLoadImage: error",!1,T,V),V.onabort=_(ei,I,"TestLoadImage: abort",!1,T,V),V.ontimeout=_(ei,I,"TestLoadImage: timeout",!1,T,V),c.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=v}else T(!1)}function Ai(v,T){const I=new Qr,V=new AbortController,K=setTimeout(()=>{V.abort(),ei(I,"TestPingServer: timeout",!1,T)},1e4);fetch(v,{signal:V.signal}).then(ie=>{clearTimeout(K),ie.ok?ei(I,"TestPingServer: ok",!0,T):ei(I,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(K),ei(I,"TestPingServer: error",!1,T)})}function ei(v,T,I,V,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),V(I)}catch{}}function Na(){this.g=new ba}function zi(v,T,I){const V=I||"";try{Vu(v,function(K,ie){let ye=K;d(K)&&(ye=bi(K)),T.push(V+ie+"="+encodeURIComponent(ye))})}catch(K){throw T.push(V+"type="+encodeURIComponent("_badmap")),K}}function ms(v){this.l=v.Ub||null,this.j=v.eb||!1}E(ms,Ru),ms.prototype.g=function(){return new To(this.l,this.j)},ms.prototype.i=function(v){return function(){return v}}({});function To(v,T){$t.call(this),this.D=v,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(To,$t),n=To.prototype,n.open=function(v,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=T,this.readyState=1,Gi(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(T.body=v),(this.D||c).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hi(this)),this.readyState=0},n.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Gi(this)),this.g&&(this.readyState=3,Gi(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zu(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function zu(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}n.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var T=v.value?v.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!v.done}))&&(this.response=this.responseText+=T)}v.done?Hi(this):Gi(this),this.readyState==3&&zu(this)}},n.Ra=function(v){this.g&&(this.response=this.responseText=v,Hi(this))},n.Qa=function(v){this.g&&(this.response=v,Hi(this))},n.ga=function(){this.g&&Hi(this)};function Hi(v){v.readyState=4,v.l=null,v.j=null,v.v=null,Gi(v)}n.setRequestHeader=function(v,T){this.u.append(v,T)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],T=this.h.entries();for(var I=T.next();!I.done;)I=I.value,v.push(I[0]+": "+I[1]),I=T.next();return v.join(`\r
`)};function Gi(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(To.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Hu(v){let T="";return H(v,function(I,V){T+=V,T+=":",T+=I,T+=`\r
`}),T}function Mn(v,T,I){e:{for(V in I){var V=!1;break e}V=!0}V||(I=Hu(I),typeof v=="string"?I!=null&&encodeURIComponent(String(I)):Et(v,T,I))}function pt(v){$t.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(pt,$t);var jl=/^https?$/i,Oa=["POST","PUT"];n=pt.prototype,n.Ha=function(v){this.J=v},n.ea=function(v,T,I,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);T=T?T.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vi.g(),this.v=this.o?Nu(this.o):Nu(Vi),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(T,String(v),!0),this.B=!1}catch(ie){ph(this,ie);return}if(v=I||"",I=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var K in V)I.set(K,V[K]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const ie of V.keys())I.set(ie,V.get(ie));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(I.keys()).find(ie=>ie.toLowerCase()=="content-type"),K=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Oa,T,void 0))||V||K||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,ye]of I)this.g.setRequestHeader(ie,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Da(this),this.u=!0,this.g.send(v),this.u=!1}catch(ie){ph(this,ie)}};function ph(v,T){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=T,v.m=5,Vl(v),qi(v)}function Vl(v){v.A||(v.A=!0,yt(v,"complete"),yt(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,yt(this,"complete"),yt(this,"abort"),qi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qi(this,!0)),pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Bl(this):this.bb())},n.bb=function(){Bl(this)};function Bl(v){if(v.h&&typeof a<"u"&&(!v.v[1]||ti(v)!=4||v.Z()!=2)){if(v.u&&ti(v)==4)lr(v.Ea,0,v);else if(yt(v,"readystatechange"),ti(v)==4){v.h=!1;try{const ye=v.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var I;if(!(I=T)){var V;if(V=ye===0){var K=String(v.D).match(Sa)[1]||null;!K&&c.self&&c.self.location&&(K=c.self.location.protocol.slice(0,-1)),V=!jl.test(K?K.toLowerCase():"")}I=V}if(I)yt(v,"complete"),yt(v,"success");else{v.m=6;try{var ie=2<ti(v)?v.g.statusText:""}catch{ie=""}v.l=ie+" ["+v.Z()+"]",Vl(v)}}finally{qi(v)}}}}function qi(v,T){if(v.g){Da(v);const I=v.g,V=v.v[0]?()=>{}:null;v.g=null,v.v=null,T||yt(v,"ready");try{I.onreadystatechange=V}catch{}}}function Da(v){v.I&&(c.clearTimeout(v.I),v.I=null)}n.isActive=function(){return!!this.g};function ti(v){return v.g?v.g.readyState:0}n.Z=function(){try{return 2<ti(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(v){if(this.g){var T=this.g.responseText;return v&&T.indexOf(v)==0&&(T=T.substring(v.length)),Rl(T)}};function gh(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function sg(v){const T={};v=(v.g&&2<=ti(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<v.length;V++){if(O(v[V]))continue;var I=z(v[V]);const K=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ie=T[K]||[];T[K]=ie,ie.push(I)}M(T,function(V){return V.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pa(v,T,I){return I&&I.internalChannelParams&&I.internalChannelParams[v]||T}function Fl(v){this.Aa=0,this.i=[],this.j=new Qr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pa("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pa("baseRetryDelayMs",5e3,v),this.cb=Pa("retryDelaySeedMs",1e4,v),this.Wa=Pa("forwardChannelMaxRetries",2,v),this.wa=Pa("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new wo(v&&v.concurrentRequestLimit),this.Da=new Na,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Fl.prototype,n.la=8,n.G=1,n.connect=function(v,T,I,V){Lt(0),this.W=v,this.H=T||{},I&&V!==void 0&&(this.H.OSID=I,this.H.OAID=V),this.F=this.X,this.I=Ah(this,null,this.W),zl(this)};function Gu(v){if(yh(v),v.G==3){var T=v.U++,I=jr(v.I);if(Et(I,"SID",v.K),Et(I,"RID",T),Et(I,"TYPE","terminate"),Ma(v,I),T=new gr(v,v.j,T),T.L=2,T.v=Ca(jr(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(T.v.toString(),"")}catch{}!I&&c.Image&&(new Image().src=T.v,I=!0),I||(T.g=Th(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Aa(T)}Eh(v)}function Ul(v){v.g&&(ka(v),v.g.cancel(),v.g=null)}function yh(v){Ul(v),v.u&&(c.clearTimeout(v.u),v.u=null),Hl(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function zl(v){if(!Dl(v.h)&&!v.s){v.s=!0;var T=v.Ga;me||W(),ue||(me(),ue=!0),De.add(T,v),v.B=0}}function ag(v,T){return Pl(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=T.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=un(g(v.Ga,v,T),$u(v,v.B)),v.B++,!0)}n.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const K=new gr(this,this.j,v);let ie=this.o;if(this.S&&(ie?(ie=R(ie),U(ie,this.S)):ie=this.S),this.m!==null||this.O||(K.H=ie,ie=null),this.P)e:{for(var T=0,I=0;I<this.i.length;I++){t:{var V=this.i[I];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(T+=V,4096<T){T=I;break e}if(T===4096||I===this.i.length-1){T=I+1;break e}}T=1e3}else T=1e3;T=vh(this,K,T),I=jr(this.I),Et(I,"RID",v),Et(I,"CVER",22),this.D&&Et(I,"X-HTTP-Session-Id",this.D),Ma(this,I),ie&&(this.O?T="headers="+encodeURIComponent(String(Hu(ie)))+"&"+T:this.m&&Mn(I,this.m,ie)),Ml(this.h,K),this.Ua&&Et(I,"TYPE","init"),this.P?(Et(I,"$req",T),Et(I,"SID","null"),K.T=!0,Ei(K,I,null)):Ei(K,I,T),this.G=2}}else this.G==3&&(v?qu(this,v):this.i.length==0||Dl(this.h)||qu(this))};function qu(v,T){var I;T?I=T.l:I=v.U++;const V=jr(v.I);Et(V,"SID",v.K),Et(V,"RID",I),Et(V,"AID",v.T),Ma(v,V),v.m&&v.o&&Mn(V,v.m,v.o),I=new gr(v,v.j,I,v.B+1),v.m===null&&(I.H=v.o),T&&(v.i=T.D.concat(v.i)),T=vh(v,I,1e3),I.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),Ml(v.h,I),Ei(I,V,T)}function Ma(v,T){v.H&&H(v.H,function(I,V){Et(T,V,I)}),v.l&&Vu({},function(I,V){Et(T,V,I)})}function vh(v,T,I){I=Math.min(v.i.length,I);var V=v.l?g(v.l.Na,v.l,v):null;e:{var K=v.i;let ie=-1;for(;;){const ye=["count="+I];ie==-1?0<I?(ie=K[0].g,ye.push("ofs="+ie)):ie=0:ye.push("ofs="+ie);let rt=!0;for(let bn=0;bn<I;bn++){let it=K[bn].g;const kn=K[bn].map;if(it-=ie,0>it)ie=Math.max(0,K[bn].g-100),rt=!1;else try{zi(kn,ye,"req"+it+"_")}catch{V&&V(kn)}}if(rt){V=ye.join("&");break e}}}return v=v.i.splice(0,I),T.D=v,V}function wh(v){if(!v.g&&!v.u){v.Y=1;var T=v.Fa;me||W(),ue||(me(),ue=!0),De.add(T,v),v.v=0}}function Wu(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=un(g(v.Fa,v),$u(v,v.v)),v.v++,!0)}n.Fa=function(){if(this.u=null,_h(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=un(g(this.ab,this),v)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),Ul(this),_h(this))};function ka(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function _h(v){v.g=new gr(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var T=jr(v.qa);Et(T,"RID","rpc"),Et(T,"SID",v.K),Et(T,"AID",v.T),Et(T,"CI",v.F?"0":"1"),!v.F&&v.ja&&Et(T,"TO",v.ja),Et(T,"TYPE","xmlhttp"),Ma(v,T),v.m&&v.o&&Mn(T,v.m,v.o),v.L&&(v.g.I=v.L);var I=v.g;v=v.ia,I.L=1,I.v=Ca(jr(T)),I.m=null,I.P=!0,vo(I,v)}n.Za=function(){this.C!=null&&(this.C=null,Ul(this),Wu(this),Lt(19))};function Hl(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function bh(v,T){var I=null;if(v.g==T){Hl(v),ka(v),v.g=null;var V=2}else if(Lu(v.h,T))I=T.D,yr(v.h,T),V=1;else return;if(v.G!=0){if(T.o)if(V==1){I=T.m?T.m.length:0,T=Date.now()-T.F;var K=v.B;V=ls(),yt(V,new _n(V,I)),zl(v)}else wh(v);else if(K=T.s,K==3||K==0&&0<T.X||!(V==1&&ag(v,T)||V==2&&Wu(v)))switch(I&&0<I.length&&(T=v.h,T.i=T.i.concat(I)),K){case 1:So(v,5);break;case 4:So(v,10);break;case 3:So(v,6);break;default:So(v,2)}}}function $u(v,T){let I=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(I*=2),I*T}function So(v,T){if(v.j.info("Error code "+T),T==2){var I=g(v.fb,v),V=v.Xa;const K=!V;V=new dn(V||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||xa(V,"https"),Ca(V),K?Ra(V.toString(),I):Ai(V.toString(),I)}else Lt(2);v.G=0,v.l&&v.l.sa(T),Eh(v),yh(v)}n.fb=function(v){v?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Eh(v){if(v.G=0,v.ka=[],v.l){const T=ju(v.h);(T.length!=0||v.i.length!=0)&&(S(v.ka,T),S(v.ka,v.i),v.h.i.length=0,A(v.i),v.i.length=0),v.l.ra()}}function Ah(v,T,I){var V=I instanceof dn?jr(I):new dn(I);if(V.g!="")T&&(V.g=T+"."+V.g),hs(V,V.s);else{var K=c.location;V=K.protocol,T=T?T+"."+K.hostname:K.hostname,K=+K.port;var ie=new dn(null);V&&xa(ie,V),T&&(ie.g=T),K&&hs(ie,K),I&&(ie.l=I),V=ie}return I=v.D,T=v.ya,I&&T&&Et(V,I,T),Et(V,"VER",v.la),Ma(v,V),V}function Th(v,T,I){if(T&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=v.Ca&&!v.pa?new pt(new ms({eb:I})):new pt(v.pa),T.Ha(v.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sh(){}n=Sh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Gl(){}Gl.prototype.g=function(v,T){return new vr(v,T)};function vr(v,T){$t.call(this),this.g=new Fl(T),this.l=v,this.h=T&&T.messageUrlParams||null,v=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(v?v["X-WebChannel-Content-Type"]=T.messageContentType:v={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(v?v["X-WebChannel-Client-Profile"]=T.va:v={"X-WebChannel-Client-Profile":T.va}),this.g.S=v,(v=T&&T.Sb)&&!O(v)&&(this.g.m=v),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!O(T)&&(this.g.D=T,v=this.h,v!==null&&T in v&&(v=this.h,T in v&&delete v[T])),this.j=new Wi(this)}E(vr,$t),vr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vr.prototype.close=function(){Gu(this.g)},vr.prototype.o=function(v){var T=this.g;if(typeof v=="string"){var I={};I.__data__=v,v=I}else this.u&&(I={},I.__data__=bi(v),v=I);T.i.push(new fh(T.Ya++,v)),T.G==3&&zl(T)},vr.prototype.N=function(){this.g.l=null,delete this.j,Gu(this.g),delete this.g,vr.aa.N.call(this)};function xh(v){go.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var T=v.__sm__;if(T){e:{for(const I in T){v=I;break e}v=void 0}(this.i=v)&&(v=this.i,T=T!==null&&v in T?T[v]:void 0),this.data=T}else this.data=v}E(xh,go);function Ch(){Du.call(this),this.status=1}E(Ch,Du);function Wi(v){this.g=v}E(Wi,Sh),Wi.prototype.ua=function(){yt(this.g,"a")},Wi.prototype.ta=function(v){yt(this.g,new xh(v))},Wi.prototype.sa=function(v){yt(this.g,new Ch)},Wi.prototype.ra=function(){yt(this.g,"b")},Gl.prototype.createWebChannel=Gl.prototype.g,vr.prototype.send=vr.prototype.o,vr.prototype.open=vr.prototype.m,vr.prototype.close=vr.prototype.close,B6=function(){return new Gl},V6=function(){return ls()},j6=ji,d2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ds.NO_ERROR=0,ds.TIMEOUT=8,ds.HTTP_ERROR=6,ip=ds,yo.COMPLETE="complete",L6=yo,Ou.EventType=po,po.OPEN="a",po.CLOSE="b",po.ERROR="c",po.MESSAGE="d",$t.prototype.listen=$t.prototype.K,Gd=Ou,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,k6=pt}).apply(typeof Rm<"u"?Rm:typeof self<"u"?self:typeof window<"u"?window:{});const aA="@firebase/firestore",lA="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};hr.UNAUTHENTICATED=new hr(null),hr.GOOGLE_CREDENTIALS=new hr("google-credentials-uid"),hr.FIRST_PARTY=new hr("first-party-uid"),hr.MOCK_USER=new hr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl=new Av("@firebase/firestore");function Tc(){return yl.logLevel}function be(n,...e){if(yl.logLevel<=tt.DEBUG){const t=e.map(xv);yl.debug(`Firestore (${du}): ${n}`,...t)}}function Ko(n,...e){if(yl.logLevel<=tt.ERROR){const t=e.map(xv);yl.error(`Firestore (${du}): ${n}`,...t)}}function Qo(n,...e){if(yl.logLevel<=tt.WARN){const t=e.map(xv);yl.warn(`Firestore (${du}): ${n}`,...t)}}function xv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,F6(n,r,t)}function F6(n,e,t){let r=`FIRESTORE (${du}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ko(r),new Error(r)}function at(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||F6(e,i,r)}function Ge(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends is{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class z6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hr.UNAUTHENTICATED))}shutdown(){}}class ID{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class RD{constructor(e){this.t=e,this.currentUser=hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){at(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let o=new io;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new io,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new io)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string",31837,{l:r}),new U6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new hr(e)}}class ND{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=hr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class OD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ND(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){at(this.o===void 0,3512);const r=o=>{o.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,be("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new cA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(at(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new cA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=PD(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Qe(n,e){return n<e?-1:n>e?1:0}function f2(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Qe(r,i);{const o=H6(),a=MD(o.encode(uA(n,t)),o.encode(uA(e,t)));return a!==0?a:Qe(r,i)}}t+=r>65535?2:1}return Qe(n.length,e.length)}function uA(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function MD(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Qe(n[t],e[t]);return Qe(n.length,e.length)}function qc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="__name__";class Ji{constructor(e,t,r){t===void 0?t=0:t>e.length&&Me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ji.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ji?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Ji.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Qe(e.length,t.length)}static compareSegments(e,t){const r=Ji.isNumericId(e),i=Ji.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Ji.extractNumericId(e).compare(Ji.extractNumericId(t)):f2(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Js.fromString(e.substring(4,e.length-2))}}class It extends Ji{construct(e,t,r){return new It(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new It(t)}static emptyPath(){return new It([])}}const kD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hn extends Ji{construct(e,t,r){return new Hn(e,t,r)}static isValidIdentifier(e){return kD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dA}static keyField(){return new Hn([dA])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new ve(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new ve(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ve(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(o(),i++)}if(o(),a)throw new ve(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hn(t)}static emptyPath(){return new Hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(It.fromString(e))}static fromName(e){return new Oe(It.fromString(e).popFirst(5))}static empty(){return new Oe(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return It.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new It(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(n,e,t){if(!t)throw new ve(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function q6(n,e,t,r){if(e===!0&&r===!0)throw new ve(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fA(n){if(!Oe.isDocumentKey(n))throw new ve(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hA(n){if(Oe.isDocumentKey(n))throw new ve(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function W6(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function h1(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Me(12329,{type:typeof n})}function or(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=h1(n);throw new ve(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(n,e){const t={typeString:n};return e&&(t.value=e),t}function jf(n,e){if(!W6(n))throw new ve(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&a!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new ve(ae.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=-62135596800,pA=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*pA);return new Dt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<mA)throw new ve(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pA}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jf(e,Dt._jsonSchema))return new Dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dt._jsonSchemaVersion="firestore/timestamp/1.0",Dt._jsonSchema={type:vn("string",Dt._jsonSchemaVersion),seconds:vn("number"),nanoseconds:vn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new Dt(0,0))}static max(){return new Fe(new Dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=-1;function LD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Fe.fromTimestamp(r===1e9?new Dt(t+1,0):new Dt(t,r));return new ra(i,Oe.empty(),e)}function jD(n){return new ra(n.readTime,n.key,mf)}class ra{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ra(Fe.min(),Oe.empty(),mf)}static max(){return new ra(Fe.max(),Oe.empty(),mf)}}function VD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Oe.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fu(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==BD)throw n;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let i=0,o=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++o,a&&o===i&&t()},u=>r(u))}),a=!0,o===i&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(i=>i?he.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new he((r,i)=>{const o=e.length,a=new Array(o);let c=0;for(let u=0;u<o;u++){const d=u;t(e[d]).next(h=>{a[d]=h,++c,c===o&&r(a)},h=>i(h))}})}static doWhile(e,t){return new he((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}function UD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}m1.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=-1;function Vf(n){return n==null}function Cp(n){return n===0&&1/n==-1/0}function zD(n){return typeof n=="number"&&Number.isInteger(n)&&!Cp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6="";function HD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gA(e)),e=GD(n.get(t),e);return gA(e)}function GD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case $6:t+="";break;default:t+=o}}return t}function gA(n){return n+$6+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ha(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function X6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,t){this.comparator=e,this.root=t||er.EMPTY}insert(e,t){return new qt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,er.BLACK,null,null))}remove(e){return new qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,er.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nm(this.root,e,this.comparator,!0)}}class Nm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class er{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??er.RED,this.left=i??er.EMPTY,this.right=o??er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new er(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return er.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}er.EMPTY=null,er.RED=!0,er.BLACK=!1;er.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new er(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.comparator=e,this.data=new qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vA(this.data.getIterator())}getIteratorFrom(e){return new vA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Dn(this.comparator);return t.data=e,t}}class vA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.fields=e,e.sort(Hn.comparator)}static empty(){return new $r([])}unionWith(e){let t=new Dn(Hn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $r(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Y6("Invalid base64 string: "+o):o}}(e);return new qn(t)}static fromUint8Array(e){const t=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new qn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qn.EMPTY_BYTE_STRING=new qn("");const qD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ia(n){if(at(!!n,39018),typeof n=="string"){let e=0;const t=qD.exec(n);if(at(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:an(n.seconds),nanos:an(n.nanos)}}function an(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function oa(n){return typeof n=="string"?qn.fromBase64String(n):qn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6="server_timestamp",Q6="__type__",Z6="__previous_value__",J6="__local_write_time__";function Iv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Q6])===null||t===void 0?void 0:t.stringValue)===K6}function p1(n){const e=n.mapValue.fields[Z6];return Iv(e)?p1(e):e}function pf(n){const e=ia(n.mapValue.fields[J6].timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,t,r,i,o,a,c,u,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const Ip="(default)";class Wc{constructor(e,t){this.projectId=e,this.database=t||Ip}static empty(){return new Wc("","")}get isDefaultDatabase(){return this.database===Ip}isEqual(e){return e instanceof Wc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="__type__",$D="__max__",Om={mapValue:{}},tx="__vector__",Rp="value";function sa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Iv(n)?4:YD(n)?9007199254740991:XD(n)?10:11:Me(28295,{value:n})}function uo(n,e){if(n===e)return!0;const t=sa(n);if(t!==sa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pf(n).isEqual(pf(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=ia(i.timestampValue),c=ia(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return oa(i.bytesValue).isEqual(oa(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return an(i.geoPointValue.latitude)===an(o.geoPointValue.latitude)&&an(i.geoPointValue.longitude)===an(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return an(i.integerValue)===an(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=an(i.doubleValue),c=an(o.doubleValue);return a===c?Cp(a)===Cp(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return qc(n.arrayValue.values||[],e.arrayValue.values||[],uo);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},c=o.mapValue.fields||{};if(yA(a)!==yA(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!uo(a[u],c[u])))return!1;return!0}(n,e);default:return Me(52216,{left:n})}}function gf(n,e){return(n.values||[]).find(t=>uo(t,e))!==void 0}function $c(n,e){if(n===e)return 0;const t=sa(n),r=sa(e);if(t!==r)return Qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return function(o,a){const c=an(o.integerValue||o.doubleValue),u=an(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return wA(n.timestampValue,e.timestampValue);case 4:return wA(pf(n),pf(e));case 5:return f2(n.stringValue,e.stringValue);case 6:return function(o,a){const c=oa(o),u=oa(a);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){const c=o.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=Qe(c[d],u[d]);if(h!==0)return h}return Qe(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){const c=Qe(an(o.latitude),an(a.latitude));return c!==0?c:Qe(an(o.longitude),an(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return _A(n.arrayValue,e.arrayValue);case 10:return function(o,a){var c,u,d,h;const p=o.fields||{},g=a.fields||{},_=(c=p[Rp])===null||c===void 0?void 0:c.arrayValue,E=(u=g[Rp])===null||u===void 0?void 0:u.arrayValue,A=Qe(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:_A(_,E)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===Om.mapValue&&a===Om.mapValue)return 0;if(o===Om.mapValue)return 1;if(a===Om.mapValue)return-1;const c=o.fields||{},u=Object.keys(c),d=a.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const g=f2(u[p],h[p]);if(g!==0)return g;const _=$c(c[u[p]],d[h[p]]);if(_!==0)return _}return Qe(u.length,h.length)}(n.mapValue,e.mapValue);default:throw Me(23264,{le:t})}}function wA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=ia(n),r=ia(e),i=Qe(t.seconds,r.seconds);return i!==0?i:Qe(t.nanos,r.nanos)}function _A(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=$c(t[i],r[i]);if(o)return o}return Qe(t.length,r.length)}function Xc(n){return h2(n)}function h2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ia(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return oa(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Oe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=h2(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${h2(t.fields[a])}`;return i+"}"}(n.mapValue):Me(61005,{value:n})}function op(n){switch(sa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=p1(n);return e?16+op(e):16;case 5:return 2*n.stringValue.length;case 6:return oa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+op(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ha(r.fields,(o,a)=>{i+=o.length+op(a)}),i}(n.mapValue);default:throw Me(13486,{value:n})}}function bA(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function m2(n){return!!n&&"integerValue"in n}function Rv(n){return!!n&&"arrayValue"in n}function EA(n){return!!n&&"nullValue"in n}function AA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sp(n){return!!n&&"mapValue"in n}function XD(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[ex])===null||t===void 0?void 0:t.stringValue)===tx}function Qd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ha(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Qd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function YD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===$D}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.value=e}static empty(){return new Er({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!sp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qd(t)}setAll(e){let t=Hn.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=Qd(a):i.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());sp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return uo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];sp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ha(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Er(Qd(this.value))}}function nx(n){const e=[];return ha(n.fields,(t,r)=>{const i=new Hn([t]);if(sp(r)){const o=nx(r.mapValue).fields;if(o.length===0)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new $r(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,t,r,i,o,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new zn(e,0,Fe.min(),Fe.min(),Fe.min(),Er.empty(),0)}static newFoundDocument(e,t,r,i){return new zn(e,1,t,Fe.min(),r,i,0)}static newNoDocument(e,t){return new zn(e,2,t,Fe.min(),Fe.min(),Er.empty(),0)}static newUnknownDocument(e,t){return new zn(e,3,t,Fe.min(),Fe.min(),Er.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Er.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Er.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,t){this.position=e,this.inclusive=t}}function TA(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],a=n.position[i];if(o.field.isKeyField()?r=Oe.comparator(Oe.fromName(a.referenceValue),t.key):r=$c(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function SA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!uo(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t="asc"){this.field=e,this.dir=t}}function KD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{}class gn extends rx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ZD(e,t,r):t==="array-contains"?new tP(e,r):t==="in"?new nP(e,r):t==="not-in"?new rP(e,r):t==="array-contains-any"?new iP(e,r):new gn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new JD(e,r):new eP(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison($c(t,this.value)):t!==null&&sa(this.value)===sa(t)&&this.matchesComparison($c(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mi extends rx{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Mi(e,t)}matches(e){return ix(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function ix(n){return n.op==="and"}function ox(n){return QD(n)&&ix(n)}function QD(n){for(const e of n.filters)if(e instanceof Mi)return!1;return!0}function p2(n){if(n instanceof gn)return n.field.canonicalString()+n.op.toString()+Xc(n.value);if(ox(n))return n.filters.map(e=>p2(e)).join(",");{const e=n.filters.map(t=>p2(t)).join(",");return`${n.op}(${e})`}}function sx(n,e){return n instanceof gn?function(r,i){return i instanceof gn&&r.op===i.op&&r.field.isEqual(i.field)&&uo(r.value,i.value)}(n,e):n instanceof Mi?function(r,i){return i instanceof Mi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,c)=>o&&sx(a,i.filters[c]),!0):!1}(n,e):void Me(19439)}function ax(n){return n instanceof gn?function(t){return`${t.field.canonicalString()} ${t.op} ${Xc(t.value)}`}(n):n instanceof Mi?function(t){return t.op.toString()+" {"+t.getFilters().map(ax).join(" ,")+"}"}(n):"Filter"}class ZD extends gn{constructor(e,t,r){super(e,t,r),this.key=Oe.fromName(r.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class JD extends gn{constructor(e,t){super(e,"in",t),this.keys=lx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class eP extends gn{constructor(e,t){super(e,"not-in",t),this.keys=lx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Oe.fromName(r.referenceValue))}class tP extends gn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rv(t)&&gf(t.arrayValue,this.value)}}class nP extends gn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gf(this.value.arrayValue,t)}}class rP extends gn{constructor(e,t){super(e,"not-in",t)}matches(e){if(gf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gf(this.value.arrayValue,t)}}class iP extends gn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,t=null,r=[],i=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=c,this.Pe=null}}function xA(n,e=null,t=[],r=[],i=null,o=null,a=null){return new oP(n,e,t,r,i,o,a)}function Nv(n){const e=Ge(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>p2(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Vf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xc(r)).join(",")),e.Pe=t}return e.Pe}function Ov(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!KD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!SA(n.startAt,e.startAt)&&SA(n.endAt,e.endAt)}function g2(n){return Oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,t=null,r=[],i=[],o=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function sP(n,e,t,r,i,o,a,c){return new mu(n,e,t,r,i,o,a,c)}function g1(n){return new mu(n)}function CA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function cx(n){return n.collectionGroup!==null}function Zd(n){const e=Ge(n);if(e.Te===null){e.Te=[];const t=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Dn(Hn.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new yf(o,r))}),t.has(Hn.keyField().canonicalString())||e.Te.push(new yf(Hn.keyField(),r))}return e.Te}function oo(n){const e=Ge(n);return e.Ie||(e.Ie=aP(e,Zd(n))),e.Ie}function aP(n,e){if(n.limitType==="F")return xA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new yf(i.field,o)});const t=n.endAt?new Np(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Np(n.startAt.position,n.startAt.inclusive):null;return xA(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function y2(n,e){const t=n.filters.concat([e]);return new mu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Op(n,e,t){return new mu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function y1(n,e){return Ov(oo(n),oo(e))&&n.limitType===e.limitType}function ux(n){return`${Nv(oo(n))}|lt:${n.limitType}`}function Sc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ax(i)).join(", ")}]`),Vf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Xc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Xc(i)).join(",")),`Target(${r})`}(oo(n))}; limitType=${n.limitType})`}function v1(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Oe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Zd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,c,u){const d=TA(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,Zd(r),i)||r.endAt&&!function(a,c,u){const d=TA(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,Zd(r),i))}(n,e)}function lP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dx(n){return(e,t)=>{let r=!1;for(const i of Zd(n)){const o=cP(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function cP(n,e,t){const r=n.field.isKeyField()?Oe.comparator(e.key,t.key):function(o,a,c){const u=a.data.field(o),d=c.data.field(o);return u!==null&&d!==null?$c(u,d):Me(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Me(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return X6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=new qt(Oe.comparator);function Zo(){return uP}const fx=new qt(Oe.comparator);function qd(...n){let e=fx;for(const t of n)e=e.insert(t.key,t);return e}function hx(n){let e=fx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function sl(){return Jd()}function mx(){return Jd()}function Jd(){return new El(n=>n.toString(),(n,e)=>n.isEqual(e))}const dP=new qt(Oe.comparator),fP=new Dn(Oe.comparator);function nt(...n){let e=fP;for(const t of n)e=e.add(t);return e}const hP=new Dn(Qe);function mP(){return hP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cp(e)?"-0":e}}function px(n){return{integerValue:""+n}}function gx(n,e){return zD(e)?px(e):Dv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this._=void 0}}function pP(n,e,t){return n instanceof vf?function(i,o){const a={fields:{[Q6]:{stringValue:K6},[J6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Iv(o)&&(o=p1(o)),o&&(a.fields[Z6]=o),{mapValue:a}}(t,e):n instanceof wf?vx(n,e):n instanceof _f?wx(n,e):function(i,o){const a=yx(i,o),c=IA(a)+IA(i.Ee);return m2(a)&&m2(i.Ee)?px(c):Dv(i.serializer,c)}(n,e)}function gP(n,e,t){return n instanceof wf?vx(n,e):n instanceof _f?wx(n,e):t}function yx(n,e){return n instanceof bf?function(r){return m2(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class vf extends w1{}class wf extends w1{constructor(e){super(),this.elements=e}}function vx(n,e){const t=_x(e);for(const r of n.elements)t.some(i=>uo(i,r))||t.push(r);return{arrayValue:{values:t}}}class _f extends w1{constructor(e){super(),this.elements=e}}function wx(n,e){let t=_x(e);for(const r of n.elements)t=t.filter(i=>!uo(i,r));return{arrayValue:{values:t}}}class bf extends w1{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function IA(n){return an(n.integerValue||n.doubleValue)}function _x(n){return Rv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,t){this.field=e,this.transform=t}}function yP(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof wf&&i instanceof wf||r instanceof _f&&i instanceof _f?qc(r.elements,i.elements,uo):r instanceof bf&&i instanceof bf?uo(r.Ee,i.Ee):r instanceof vf&&i instanceof vf}(n.transform,e.transform)}class vP{constructor(e,t){this.version=e,this.transformResults=t}}class yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ap(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class _1{}function Ex(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ff(n.key,yn.none()):new Bf(n.key,n.data,yn.none());{const t=n.data,r=Er.empty();let i=new Dn(Hn.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new ma(n.key,r,new $r(i.toArray()),yn.none())}}function wP(n,e,t){n instanceof Bf?function(i,o,a){const c=i.value.clone(),u=NA(i.fieldTransforms,o,a.transformResults);c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ma?function(i,o,a){if(!ap(i.precondition,o))return void o.convertToUnknownDocument(a.version);const c=NA(i.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(Ax(i)),u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function ef(n,e,t,r){return n instanceof Bf?function(o,a,c,u){if(!ap(o.precondition,a))return c;const d=o.value.clone(),h=OA(o.fieldTransforms,u,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof ma?function(o,a,c,u){if(!ap(o.precondition,a))return c;const d=OA(o.fieldTransforms,u,a),h=a.data;return h.setAll(Ax(o)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,a,c){return ap(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function _P(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=yx(r.transform,i||null);o!=null&&(t===null&&(t=Er.empty()),t.set(r.field,o))}return t||null}function RA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qc(r,i,(o,a)=>yP(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Bf extends _1{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ma extends _1{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Ax(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function NA(n,e,t){const r=new Map;at(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){const o=n[i],a=o.transform,c=e.data.field(o.field);r.set(o.field,gP(a,c,t[i]))}return r}function OA(n,e,t){const r=new Map;for(const i of n){const o=i.transform,a=t.data.field(i.field);r.set(i.field,pP(o,a,e))}return r}class Ff extends _1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tx extends _1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&wP(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ef(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ef(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=mx();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=t.has(i.key)?null:c;const u=Ex(a,c);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(Fe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nt())}isEqual(e){return this.batchId===e.batchId&&qc(this.mutations,e.mutations,(t,r)=>RA(t,r))&&qc(this.baseMutations,e.baseMutations,(t,r)=>RA(t,r))}}class Pv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){at(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return dP}();const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new Pv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EP=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn,st;function Sx(n){switch(n){case ae.OK:return Me(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Me(15467,{code:n})}}function xx(n){if(n===void 0)return Ko("GRPC error has no .code"),ae.UNKNOWN;switch(n){case mn.OK:return ae.OK;case mn.CANCELLED:return ae.CANCELLED;case mn.UNKNOWN:return ae.UNKNOWN;case mn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case mn.INTERNAL:return ae.INTERNAL;case mn.UNAVAILABLE:return ae.UNAVAILABLE;case mn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case mn.NOT_FOUND:return ae.NOT_FOUND;case mn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case mn.ABORTED:return ae.ABORTED;case mn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case mn.DATA_LOSS:return ae.DATA_LOSS;default:return Me(39323,{code:n})}}(st=mn||(mn={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=new Js([4294967295,4294967295],0);function DA(n){const e=H6().encode(n),t=new M6;return t.update(e),new Uint8Array(t.digest())}function PA(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Js([t,r],0),new Js([i,o],0)]}class Mv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Wd(`Invalid padding: ${t}`);if(r<0)throw new Wd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wd(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Wd(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Js.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Js.fromNumber(r)));return i.compare(TP)===1&&(i=new Js([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=DA(e),[r,i]=PA(t);for(let o=0;o<this.hashCount;o++){const a=this.pe(r,i,o);if(!this.ye(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Mv(o,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.fe===0)return;const t=DA(e),[r,i]=PA(t);for(let o=0;o<this.hashCount;o++){const a=this.pe(r,i,o);this.we(a)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Wd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Uf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new b1(Fe.min(),i,new qt(Qe),Zo(),nt())}}class Uf{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Uf(r,t,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}}class Cx{constructor(e,t){this.targetId=e,this.De=t}}class Ix{constructor(e,t,r=qn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class MA{constructor(){this.ve=0,this.Ce=kA(),this.Fe=qn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=nt(),t=nt(),r=nt();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Me(38017,{changeType:o})}}),new Uf(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=kA()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class SP{constructor(e){this.We=e,this.Ge=new Map,this.ze=Zo(),this.je=Dm(),this.Je=Dm(),this.He=new qt(Qe)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){const t=e.targetId,r=e.De.count,i=this.st(t);if(i){const o=i.target;if(g2(o))if(r===0){const a=new Oe(o.path);this.Xe(t,a,zn.newNoDocument(a,Fe.min()))}else at(r===1,20013,{expectedCount:r});else{const a=this.ot(t);if(a!==r){const c=this._t(e),u=c?this.ut(c,e,a):1;if(u!==0){this.rt(t);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let a,c;try{a=oa(r).toUint8Array()}catch(u){if(u instanceof Y6)return Qo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Mv(a,i,o)}catch(u){return Qo(u instanceof Wd?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const a=this.We.lt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(t,o,null),i++)}),i}Pt(e){const t=new Map;this.Ge.forEach((o,a)=>{const c=this.st(a);if(c){if(o.current&&g2(c.target)){const u=new Oe(c.target.path);this.Tt(u).has(a)||this.It(a,u)||this.Xe(a,u,zn.newNoDocument(u,e))}o.Ne&&(t.set(a,o.Le()),o.ke())}});let r=nt();this.Je.forEach((o,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.st(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ze.forEach((o,a)=>a.setReadTime(e));const i=new b1(e,t,this.He,this.ze,r);return this.ze=Zo(),this.je=Dm(),this.Je=Dm(),this.He=new qt(Qe),i}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new MA,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Dn(Qe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Dn(Qe),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||be("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new MA),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Dm(){return new qt(Oe.comparator)}function kA(){return new qt(Oe.comparator)}const xP={asc:"ASCENDING",desc:"DESCENDING"},CP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IP={and:"AND",or:"OR"};class RP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function v2(n,e){return n.useProto3Json||Vf(e)?e:{value:e}}function Dp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Rx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function NP(n,e){return Dp(n,e.toTimestamp())}function Xr(n){return at(!!n,49232),Fe.fromTimestamp(function(t){const r=ia(t);return new Dt(r.seconds,r.nanos)}(n))}function kv(n,e){return w2(n,e).canonicalString()}function w2(n,e){const t=function(i){return new It(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Nx(n){const e=It.fromString(n);return at(Lx(e),10190,{key:e.toString()}),e}function Pp(n,e){return kv(n.databaseId,e.path)}function tf(n,e){const t=Nx(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(Dx(t))}function Ox(n,e){return kv(n.databaseId,e)}function OP(n){const e=Nx(n);return e.length===4?It.emptyPath():Dx(e)}function _2(n){return new It(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Dx(n){return at(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function LA(n,e,t){return{name:Pp(n,e),fields:t.value.mapValue.fields}}function DP(n,e){return"found"in e?function(r,i){at(!!i.found,43571),i.found.name,i.found.updateTime;const o=tf(r,i.found.name),a=Xr(i.found.updateTime),c=i.found.createTime?Xr(i.found.createTime):Fe.min(),u=new Er({mapValue:{fields:i.found.fields}});return zn.newFoundDocument(o,a,c,u)}(n,e):"missing"in e?function(r,i){at(!!i.missing,3894),at(!!i.readTime,22933);const o=tf(r,i.missing),a=Xr(i.readTime);return zn.newNoDocument(o,a)}(n,e):Me(7234,{result:e})}function PP(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Me(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,h){return d.useProto3Json?(at(h===void 0||typeof h=="string",58123),qn.fromBase64String(h||"")):(at(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),qn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const h=d.code===void 0?ae.UNKNOWN:xx(d.code);return new ve(h,d.message||"")}(a);t=new Ix(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=tf(n,r.document.name),o=Xr(r.document.updateTime),a=r.document.createTime?Xr(r.document.createTime):Fe.min(),c=new Er({mapValue:{fields:r.document.fields}}),u=zn.newFoundDocument(i,o,a,c),d=r.targetIds||[],h=r.removedTargetIds||[];t=new lp(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=tf(n,r.document),o=r.readTime?Xr(r.readTime):Fe.min(),a=zn.newNoDocument(i,o),c=r.removedTargetIds||[];t=new lp([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=tf(n,r.document),o=r.removedTargetIds||[];t=new lp([],o,i,null)}else{if(!("filter"in e))return Me(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,a=new AP(i,o),c=r.targetId;t=new Cx(c,a)}}return t}function Px(n,e){let t;if(e instanceof Bf)t={update:LA(n,e.key,e.value)};else if(e instanceof Ff)t={delete:Pp(n,e.key)};else if(e instanceof ma)t={update:LA(n,e.key,e.data),updateMask:zP(e.fieldMask)};else{if(!(e instanceof Tx))return Me(16599,{Rt:e.type});t={verify:Pp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const c=a.transform;if(c instanceof vf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof wf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof _f)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof bf)return{fieldPath:a.field.canonicalString(),increment:c.Ee};throw Me(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:NP(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Me(27497)}(n,e.precondition)),t}function MP(n,e){return n&&n.length>0?(at(e!==void 0,14353),n.map(t=>function(i,o){let a=i.updateTime?Xr(i.updateTime):Xr(o);return a.isEqual(Fe.min())&&(a=Xr(o)),new vP(a,i.transformResults||[])}(t,e))):[]}function kP(n,e){return{documents:[Ox(n,e.path)]}}function LP(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Ox(n,i);const o=function(d){if(d.length!==0)return kx(Mi.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const a=function(d){if(d.length!==0)return d.map(h=>function(g){return{field:xc(g.field),direction:BP(g.dir)}}(h))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=v2(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:t,parent:i}}function jP(n){let e=OP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){at(r===1,65062);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){const g=Mx(p);return g instanceof Mi&&ox(g)?g.getFilters():[g]}(t.where));let a=[];t.orderBy&&(a=function(p){return p.map(g=>function(E){return new yf(Cc(E.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(t.orderBy));let c=null;t.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,Vf(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(p){const g=!!p.before,_=p.values||[];return new Np(_,g)}(t.startAt));let d=null;return t.endAt&&(d=function(p){const g=!p.before,_=p.values||[];return new Np(_,g)}(t.endAt)),sP(e,i,a,o,c,"F",u,d)}function VP(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Mx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Cc(t.unaryFilter.field);return gn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Cc(t.unaryFilter.field);return gn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Cc(t.unaryFilter.field);return gn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Cc(t.unaryFilter.field);return gn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(n):n.fieldFilter!==void 0?function(t){return gn.create(Cc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Mi.create(t.compositeFilter.filters.map(r=>Mx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(t.compositeFilter.op))}(n):Me(30097,{filter:n})}function BP(n){return xP[n]}function FP(n){return CP[n]}function UP(n){return IP[n]}function xc(n){return{fieldPath:n.canonicalString()}}function Cc(n){return Hn.fromServerFormat(n.fieldPath)}function kx(n){return n instanceof gn?function(t){if(t.op==="=="){if(AA(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NAN"}};if(EA(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(AA(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NOT_NAN"}};if(EA(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xc(t.field),op:FP(t.op),value:t.value}}}(n):n instanceof Mi?function(t){const r=t.getFilters().map(i=>kx(i));return r.length===1?r[0]:{compositeFilter:{op:UP(t.op),filters:r}}}(n):Me(54877,{filter:n})}function zP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Lx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,t,r,i,o=Fe.min(),a=Fe.min(),c=qn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.gt=e}}function GP(n){const e=jP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Op(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.Dn=new WP}addToCollectionParentIndex(e,t){return this.Dn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(ra.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(ra.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class WP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Dn(It.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dn(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jx=41943040;class Rr{static withCacheSize(e){return new Rr(e,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr.DEFAULT_COLLECTION_PERCENTILE=10,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rr.DEFAULT=new Rr(jx,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rr.DISABLED=new Rr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Yc(0)}static ur(){return new Yc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="LruGarbageCollector",$P=1048576;function BA([n,e],[t,r]){const i=Qe(n,t);return i===0?Qe(e,r):i}class XP{constructor(e){this.Tr=e,this.buffer=new Dn(BA),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();BA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class YP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){be(VA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hu(t)?be(VA,"Ignoring IndexedDB error during garbage collection: ",t):await fu(t)}await this.Rr(3e5)})}}class KP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return he.resolve(m1.ue);const r=new XP(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(jA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jA):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,a,c,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,a=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Tc()<=tt.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(c-a)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}}function QP(n,e){return new KP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(){this.changes=new El(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ef(r.mutation,i,$r.empty(),Dt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,nt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=nt()){const i=sl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let a=qd();return o.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=sl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,nt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let o=Zo();const a=Jd(),c=function(){return Jd()}();return t.forEach((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof ma)?o=o.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),ef(h.mutation,d,h.mutation.getFieldMask(),Dt.now())):a.set(d.key,$r.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,h)=>a.set(d,h)),t.forEach((d,h)=>{var p;return c.set(d,new JP(h,(p=a.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,t){const r=Jd();let i=new qt((a,c)=>a-c),o=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=t.get(u);if(d===null)return;let h=r.get(u)||$r.empty();h=c.applyToLocalView(d,h),r.set(u,h);const p=(i.get(c.batchId)||nt()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,p=mx();h.forEach(g=>{if(!o.has(g)){const _=Ex(t.get(g),r.get(g));_!==null&&p.set(g,_),o=o.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return he.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return Oe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):he.resolve(sl());let c=mf,u=o;return a.next(d=>he.forEach(d,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?he.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,nt())).next(h=>({batchId:c,changes:hx(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next(r=>{let i=qd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let a=qd();return this.indexManager.getCollectionParents(e,o).next(c=>he.forEach(c,u=>{const d=function(p,g){return new mu(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(a=>{o.forEach((u,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,zn.newInvalidDocument(h)))});let c=qd();return a.forEach((u,d)=>{const h=o.get(u);h!==void 0&&ef(h.mutation,d,$r.empty(),Dt.now()),v1(t,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return he.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Xr(i.createTime)}}(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:GP(i.bundledQuery),readTime:Xr(i.readTime)}}(t)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(){this.overlays=new qt(Oe.comparator),this.kr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=sl();return he.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=sl(),o=t.length+1,a=new Oe(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new qt((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=o.get(d.largestBatchId);h===null&&(h=sl(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=sl(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=i)););return he.resolve(c)}wt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new EP(t,r));let o=this.kr.get(t);o===void 0&&(o=nt(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){this.sessionToken=qn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(){this.qr=new Dn(Un.Qr),this.$r=new Dn(Un.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Un(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Un(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new Oe(new It([])),r=new Un(t,e),i=new Un(t,e+1),o=[];return this.$r.forEachInRange([r,i],a=>{this.Wr(a),o.push(a.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Oe(new It([])),r=new Un(t,e),i=new Un(t,e+1);let o=nt();return this.$r.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){const t=new Un(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Un{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Oe.comparator(e.key,t.key)||Qe(e.Hr,t.Hr)}static Ur(e,t){return Qe(e.Hr,t.Hr)||Oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Dn(Un.Qr)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new bP(o,t,r,i);this.mutationQueue.push(a);for(const c of i)this.Yr=this.Yr.add(new Un(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return he.resolve(a)}lookupMutationBatch(e,t){return he.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),o=i<0?0:i;return he.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?Cv:this.er-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Un(t,0),i=new Un(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],a=>{const c=this.Zr(a.Hr);o.push(c)}),he.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Qe);return t.forEach(i=>{const o=new Un(i,0),a=new Un(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,a],c=>{r=r.add(c.Hr)})}),he.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Oe.isDocumentKey(o)||(o=o.child(""));const a=new Un(new Oe(o),0);let c=new Dn(Qe);return this.Yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Hr)),!0)},a),he.resolve(this.ei(c))}ei(e){const t=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){at(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return he.forEach(t.mutations,i=>{const o=new Un(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new Un(t,0),i=this.Yr.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.ni=e,this.docs=function(){return new qt(Oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let r=Zo();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():zn.newInvalidDocument(i))}),he.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Zo();const a=t.path,c=new Oe(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||VD(jD(h),r)<=0||(i.has(h.key)||v1(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return he.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Me(9500)}ri(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sM(this)}getSize(e){return he.resolve(this.size)}}class sM extends ZP{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.persistence=e,this.ii=new El(t=>Nv(t),Ov),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.si=0,this.oi=new Lv,this.targetCount=0,this._i=Yc.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),he.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Yc(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.hr(t),he.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.ii.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ii.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),he.waitFor(o).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),he.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t){this.ai={},this.overlays={},this.ui=new m1(0),this.ci=!1,this.ci=!0,this.li=new rM,this.referenceDelegate=e(this),this.hi=new aM(this),this.indexManager=new qP,this.remoteDocumentCache=function(i){return new oM(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new HP(t),this.Ti=new tM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new iM(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){be("MemoryPersistence","Starting transaction:",e);const i=new lM(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return he.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class lM extends FD{constructor(e){super(),this.currentSequenceNumber=e}}class jv{constructor(e){this.persistence=e,this.Ai=new Lv,this.Ri=null}static Vi(e){return new jv(e)}get mi(){if(this.Ri)return this.Ri;throw Me(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.mi,r=>{const i=Oe.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,Fe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return he.or([()=>he.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Mp{constructor(e,t){this.persistence=e,this.gi=new El(r=>HD(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=QP(this,t)}static Vi(e,t){return new Mp(e,t)}Ii(){}di(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return he.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?he.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,a=>this.Sr(e,a,t).next(c=>{c||(r++,o.removeEntry(a,Fe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),he.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=op(e.data.value)),t}Sr(e,t,r){return he.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.gi.get(t);return he.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=nt(),i=nt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Vv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return lO()?8:UD(pr())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ps(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new cM;return this.ws(e,t,a).next(c=>{if(o.result=c,this.Rs)return this.Ss(e,t,a,c.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Tc()<=tt.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",Sc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),he.resolve()):(Tc()<=tt.DEBUG&&be("QueryEngine","Query:",Sc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Tc()<=tt.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",Sc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oo(t))):he.resolve())}ps(e,t){if(CA(t))return he.resolve(null);let r=oo(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Op(t,null,"F"),r=oo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=nt(...o);return this.gs.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(t,c);return this.Ds(t,d,a,u.readTime)?this.ps(e,Op(t,null,"F")):this.vs(e,d,t,u)}))})))}ys(e,t,r,i){return CA(t)||i.isEqual(Fe.min())?he.resolve(null):this.gs.getDocuments(e,r).next(o=>{const a=this.bs(t,o);return this.Ds(t,a,r,i)?he.resolve(null):(Tc()<=tt.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sc(t)),this.vs(e,a,t,LD(i,mf)).next(c=>c))})}bs(e,t){let r=new Dn(dx(e));return t.forEach((i,o)=>{v1(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Tc()<=tt.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",Sc(t)),this.gs.getDocumentsMatchingQuery(e,t,ra.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="LocalStore",dM=3e8;class fM{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new qt(Qe),this.Ms=new El(o=>Nv(o),Ov),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eM(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function hM(n,e,t,r){return new fM(n,e,t,r)}async function Bx(n,e){const t=Ge(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],c=[];let u=nt();for(const d of i){a.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of o){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(d=>({Bs:d,removedBatchIds:a,addedBatchIds:c}))})})}function mM(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(c,u,d,h){const p=d.batch,g=p.keys();let _=he.resolve();return g.forEach(E=>{_=_.next(()=>h.getEntry(u,E)).next(A=>{const S=d.docVersions.get(E);at(S!==null,48541),A.version.compareTo(S)<0&&(p.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),h.addEntry(A)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=nt();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Fx(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function pM(n,e){const t=Ge(n),r=e.snapshotVersion;let i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;const c=[];e.targetChanges.forEach((h,p)=>{const g=i.get(p);if(!g)return;c.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let _=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(qn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(A,S,x){return A.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=dM?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,_,h)&&c.push(t.hi.updateTargetData(o,_))});let u=Zo(),d=nt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(gM(o,a,e.documentUpdates).next(h=>{u=h.Ls,d=h.ks})),!r.isEqual(Fe.min())){const h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return he.waitFor(c).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(t.Fs=i,o))}function gM(n,e,t){let r=nt(),i=nt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let a=Zo();return t.forEach((c,u)=>{const d=o.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Fe.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):be(Bv,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ls:a,ks:i}})}function yM(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Cv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vM(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,he.resolve(i)):t.hi.allocateTargetId(r).next(a=>(i=new Ws(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function b2(n,e,t){const r=Ge(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!hu(a))throw a;be(Bv,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function FA(n,e,t){const r=Ge(n);let i=Fe.min(),o=nt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,h){const p=Ge(u),g=p.Ms.get(h);return g!==void 0?he.resolve(p.Fs.get(g)):p.hi.getTargetData(d,h)}(r,a,oo(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,c.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,t?i:Fe.min(),t?o:nt())).next(c=>(wM(r,lP(e),c),{documents:c,qs:o})))}function wM(n,e,t){let r=n.xs.get(e)||Fe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}class UA{constructor(){this.activeTargetIds=mP()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _M{constructor(){this.Fo=new UA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new UA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="ConnectivityMonitor";class HA{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){be(zA,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){be(zA,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pm=null;function E2(){return Pm===null?Pm=function(){return 268435456+Math.round(2147483648*Math.random())}():Pm++,"0x"+Pm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="RestConnection",EM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AM{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Ip?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){const a=E2(),c=this.Go(e,t.toUriEncodedString());be(dy,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);const{host:d}=new URL(c),h=cu(d);return this.jo(e,c,u,r,h).then(p=>(be(dy,`Received RPC '${e}' ${a}: `,p),p),p=>{throw Qo(dy,`RPC '${e}' ${a} failed with error: `,p,"url: ",c,"request:",r),p})}Jo(e,t,r,i,o,a){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+du}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){const r=EM[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr="WebChannelConnection";class SM extends AM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){const a=E2();return new Promise((c,u)=>{const d=new k6;d.setWithCredentials(!0),d.listenOnce(L6.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ip.NO_ERROR:const p=d.getResponseJson();be(dr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),c(p);break;case ip.TIMEOUT:be(dr,`RPC '${e}' ${a} timed out`),u(new ve(ae.DEADLINE_EXCEEDED,"Request time out"));break;case ip.HTTP_ERROR:const g=d.getStatus();if(be(dr,`RPC '${e}' ${a} failed with status:`,g,"response text:",d.getResponseText()),g>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const E=_==null?void 0:_.error;if(E&&E.status&&E.message){const A=function(x){const O=x.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(O)>=0?O:ae.UNKNOWN}(E.status);u(new ve(A,E.message))}else u(new ve(ae.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new ve(ae.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{c_:e,streamId:a,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{be(dr,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(i);be(dr,`RPC '${e}' ${a} sending request:`,i),d.send(t,"POST",h,r,15)})}P_(e,t,r){const i=E2(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=B6(),c=V6(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const h=o.join("");be(dr,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=a.createWebChannel(h,u);this.T_(p);let g=!1,_=!1;const E=new TM({Ho:S=>{_?be(dr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(g||(be(dr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),be(dr,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},Yo:()=>p.close()}),A=(S,x,O)=>{S.listen(x,P=>{try{O(P)}catch(D){setTimeout(()=>{throw D},0)}})};return A(p,Gd.EventType.OPEN,()=>{_||(be(dr,`RPC '${e}' stream ${i} transport opened.`),E.s_())}),A(p,Gd.EventType.CLOSE,()=>{_||(_=!0,be(dr,`RPC '${e}' stream ${i} transport closed`),E.__(),this.I_(p))}),A(p,Gd.EventType.ERROR,S=>{_||(_=!0,Qo(dr,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),E.__(new ve(ae.UNAVAILABLE,"The operation could not be completed")))}),A(p,Gd.EventType.MESSAGE,S=>{var x;if(!_){const O=S.data[0];at(!!O,16349);const P=O,D=(P==null?void 0:P.error)||((x=P[0])===null||x===void 0?void 0:x.error);if(D){be(dr,`RPC '${e}' stream ${i} received error:`,D);const j=D.status;let H=function(k){const U=mn[k];if(U!==void 0)return xx(U)}(j),M=D.message;H===void 0&&(H=ae.INTERNAL,M="Unknown error status: "+j+" with message "+D.message),_=!0,E.__(new ve(H,M)),p.close()}else be(dr,`RPC '${e}' stream ${i} received:`,O),E.a_(O)}}),A(c,j6.STAT_EVENT,S=>{S.stat===d2.PROXY?be(dr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===d2.NOPROXY&&be(dr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.o_()},0),E}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function fy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(n){return new RP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="PersistentStream";class Ux{constructor(e,t,r,i,o,a,c,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Fv(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Ko(t.toString()),Ko("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{const i=new ve(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return be(GA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(be(GA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xM extends Ux{constructor(e,t,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=PP(this.serializer,e),r=function(o){if(!("targetChange"in o))return Fe.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Fe.min():a.readTime?Xr(a.readTime):Fe.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=_2(this.serializer),t.addTarget=function(o,a){let c;const u=a.target;if(c=g2(u)?{documents:kP(o,u)}:{query:LP(o,u).Vt},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Rx(o,a.resumeToken);const d=v2(o,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(Fe.min())>0){c.readTime=Dp(o,a.snapshotVersion.toTimestamp());const d=v2(o,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=VP(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=_2(this.serializer),t.removeTarget=e,this.k_(t)}}class CM extends Ux{constructor(e,t,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=MP(e.writeResults,e.commitTime),r=Xr(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=_2(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Px(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{}class RM extends IM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ve(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,w2(t,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(ae.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Jo(e,w2(t,r),i,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ve(ae.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class NM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ko(t),this._a=!1):be("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl="RemoteStore";class OM{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{r.enqueueAndForget(async()=>{Al(this)&&(be(vl,"Restarting streams for network reachability change."),await async function(u){const d=Ge(u);d.Ia.add(4),await zf(d),d.Aa.set("Unknown"),d.Ia.delete(4),await A1(d)}(this))})}),this.Aa=new NM(r,i)}}async function A1(n){if(Al(n))for(const e of n.da)await e(!0)}async function zf(n){for(const e of n.da)await e(!1)}function zx(n,e){const t=Ge(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Gv(t)?Hv(t):pu(t).x_()&&zv(t,e))}function Uv(n,e){const t=Ge(n),r=pu(t);t.Ta.delete(e),r.x_()&&Hx(t,e),t.Ta.size===0&&(r.x_()?r.B_():Al(t)&&t.Aa.set("Unknown"))}function zv(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pu(n).H_(e)}function Hx(n,e){n.Ra.$e(e),pu(n).Y_(e)}function Hv(n){n.Ra=new SP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),pu(n).start(),n.Aa.aa()}function Gv(n){return Al(n)&&!pu(n).M_()&&n.Ta.size>0}function Al(n){return Ge(n).Ia.size===0}function Gx(n){n.Ra=void 0}async function DM(n){n.Aa.set("Online")}async function PM(n){n.Ta.forEach((e,t)=>{zv(n,e)})}async function MM(n,e){Gx(n),Gv(n)?(n.Aa.la(e),Hv(n)):n.Aa.set("Unknown")}async function kM(n,e,t){if(n.Aa.set("Online"),e instanceof Ix&&e.state===2&&e.cause)try{await async function(i,o){const a=o.cause;for(const c of o.targetIds)i.Ta.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.Ta.delete(c),i.Ra.removeTarget(c))}(n,e)}catch(r){be(vl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kp(n,r)}else if(e instanceof lp?n.Ra.Ye(e):e instanceof Cx?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Fe.min()))try{const r=await Fx(n.localStore);t.compareTo(r)>=0&&await function(o,a){const c=o.Ra.Pt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=o.Ta.get(d);h&&o.Ta.set(d,h.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(qn.EMPTY_BYTE_STRING,h.snapshotVersion)),Hx(o,u);const p=new Ws(h.target,u,d,h.sequenceNumber);zv(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){be(vl,"Failed to raise snapshot:",r),await kp(n,r)}}async function kp(n,e,t){if(!hu(e))throw e;n.Ia.add(1),await zf(n),n.Aa.set("Offline"),t||(t=()=>Fx(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{be(vl,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await A1(n)})}function qx(n,e){return e().catch(t=>kp(n,t,e))}async function T1(n){const e=Ge(n),t=aa(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Cv;for(;LM(e);)try{const i=await yM(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,jM(e,i)}catch(i){await kp(e,i)}Wx(e)&&$x(e)}function LM(n){return Al(n)&&n.Pa.length<10}function jM(n,e){n.Pa.push(e);const t=aa(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function Wx(n){return Al(n)&&!aa(n).M_()&&n.Pa.length>0}function $x(n){aa(n).start()}async function VM(n){aa(n).na()}async function BM(n){const e=aa(n);for(const t of n.Pa)e.X_(t.mutations)}async function FM(n,e,t){const r=n.Pa.shift(),i=Pv.from(r,e,t);await qx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await T1(n)}async function UM(n,e){e&&aa(n).Z_&&await async function(r,i){if(function(a){return Sx(a)&&a!==ae.ABORTED}(i.code)){const o=r.Pa.shift();aa(r).N_(),await qx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await T1(r)}}(n,e),Wx(n)&&$x(n)}async function qA(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),be(vl,"RemoteStore received new credentials");const r=Al(t);t.Ia.add(3),await zf(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await A1(t)}async function zM(n,e){const t=Ge(n);e?(t.Ia.delete(2),await A1(t)):e||(t.Ia.add(2),await zf(t),t.Aa.set("Unknown"))}function pu(n){return n.Va||(n.Va=function(t,r,i){const o=Ge(t);return o.ia(),new xM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:DM.bind(null,n),e_:PM.bind(null,n),n_:MM.bind(null,n),J_:kM.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Gv(n)?Hv(n):n.Aa.set("Unknown")):(await n.Va.stop(),Gx(n))})),n.Va}function aa(n){return n.ma||(n.ma=function(t,r,i){const o=Ge(t);return o.ia(),new CM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:VM.bind(null,n),n_:UM.bind(null,n),ea:BM.bind(null,n),ta:FM.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await T1(n)):(await n.ma.stop(),n.Pa.length>0&&(be(vl,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const a=Date.now()+r,c=new qv(e,t,a,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wv(n,e){if(Ko("AsyncQueue",`${e}: ${n}`),hu(n))return new ve(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{static emptySet(e){return new jc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Oe.comparator(t.key,r.key):(t,r)=>Oe.comparator(t.key,r.key),this.keyedMap=qd(),this.sortedSet=new qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new jc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.fa=new qt(Oe.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Me(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Kc{constructor(e,t,r,i,o,a,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new Kc(e,t,jc.emptySet(t),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&y1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class GM{constructor(){this.queries=$A(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const i=Ge(t),o=i.queries;i.queries=$A(),o.forEach((a,c)=>{for(const u of c.wa)u.onError(r)})})(this,new ve(ae.ABORTED,"Firestore shutting down"))}}function $A(){return new El(n=>ux(n),y1)}async function $v(n,e){const t=Ge(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new HM,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await t.onListen(i,!0);break;case 1:o.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const c=Wv(a,`Initialization of query '${Sc(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&Yv(t)}async function Xv(n,e){const t=Ge(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const a=o.wa.indexOf(e);a>=0&&(o.wa.splice(a,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function qM(n,e){const t=Ge(n);let r=!1;for(const i of e){const o=i.query,a=t.queries.get(o);if(a){for(const c of a.wa)c.Ca(i)&&(r=!0);a.ya=i}}r&&Yv(t)}function WM(n,e,t){const r=Ge(n),i=r.queries.get(e);if(i)for(const o of i.wa)o.onError(t);r.queries.delete(e)}function Yv(n){n.Da.forEach(e=>{e.next()})}var A2,XA;(XA=A2||(A2={})).Fa="default",XA.Cache="cache";class Kv{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Kc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Kc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==A2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.key=e}}class Yx{constructor(e){this.key=e}}class $M{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=nt(),this.mutatedKeys=nt(),this.Xa=dx(e),this.eu=new jc(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new WA,i=t?t.eu:this.eu;let o=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const g=i.get(h),_=v1(this.query,p)?p:null,E=!!g&&this.mutatedKeys.has(g.key),A=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;g&&_?g.data.isEqual(_.data)?E!==A&&(r.track({type:3,doc:_}),S=!0):this.iu(g,_)||(r.track({type:2,doc:_}),S=!0,(u&&this.Xa(_,u)>0||d&&this.Xa(_,d)<0)&&(c=!0)):!g&&_?(r.track({type:0,doc:_}),S=!0):g&&!_&&(r.track({type:1,doc:g}),S=!0,(u||d)&&(c=!0)),S&&(_?(a=a.add(_),o=A?o.add(h):o.delete(h)):(a=a.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:a,ru:r,Ds:c,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((h,p)=>function(_,E){const A=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{At:S})}};return A(_)-A(E)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;const c=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,d=u!==this.Ya;return this.Ya=u,a.length!==0||d?{snapshot:new Kc(this.query,e.eu,o,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new WA,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=nt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Yx(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Xx(r))}),t}uu(e){this.Ha=e.qs,this.Za=nt();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Kc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Qv="SyncEngine";class XM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class YM{constructor(e){this.key=e,this.lu=!1}}class KM{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new El(c=>ux(c),y1),this.Tu=new Map,this.Iu=new Set,this.du=new qt(Oe.comparator),this.Eu=new Map,this.Au=new Lv,this.Ru={},this.Vu=new Map,this.mu=Yc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function QM(n,e,t=!0){const r=tC(n);let i;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await Kx(r,e,t,!0),i}async function ZM(n,e){const t=tC(n);await Kx(t,e,!0,!1)}async function Kx(n,e,t,r){const i=await vM(n.localStore,oo(e)),o=i.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await JM(n,e,o,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&zx(n.remoteStore,i),c}async function JM(n,e,t,r,i){n.gu=(p,g,_)=>async function(A,S,x,O){let P=S.view.nu(x);P.Ds&&(P=await FA(A.localStore,S.query,!1).then(({documents:M})=>S.view.nu(M,P)));const D=O&&O.targetChanges.get(S.targetId),j=O&&O.targetMismatches.get(S.targetId)!=null,H=S.view.applyChanges(P,A.isPrimaryClient,D,j);return KA(A,S.targetId,H._u),H.snapshot}(n,p,g,_);const o=await FA(n.localStore,e,!0),a=new $M(e,o.qs),c=a.nu(o.documents),u=Uf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=a.applyChanges(c,n.isPrimaryClient,u);KA(n,t,d._u);const h=new XM(e,t,a);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),d.snapshot}async function ek(n,e,t){const r=Ge(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(a=>!y1(a,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await b2(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Uv(r.remoteStore,i.targetId),T2(r,i.targetId)}).catch(fu)):(T2(r,i.targetId),await b2(r.localStore,i.targetId,!0))}async function tk(n,e){const t=Ge(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Uv(t.remoteStore,r.targetId))}async function nk(n,e,t){const r=ck(n);try{const i=await function(a,c){const u=Ge(a),d=Dt.now(),h=c.reduce((_,E)=>_.add(E.key),nt());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=Zo(),A=nt();return u.Os.getEntries(_,h).next(S=>{E=S,E.forEach((x,O)=>{O.isValidDocument()||(A=A.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,E)).next(S=>{p=S;const x=[];for(const O of c){const P=_P(O,p.get(O.key).overlayedDocument);P!=null&&x.push(new ma(O.key,P,nx(P.value.mapValue),yn.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,x,c)}).next(S=>{g=S;const x=S.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(_,S.batchId,x)})}).then(()=>({batchId:g.batchId,changes:hx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,u){let d=a.Ru[a.currentUser.toKey()];d||(d=new qt(Qe)),d=d.insert(c,u),a.Ru[a.currentUser.toKey()]=d}(r,i.batchId,t),await Hf(r,i.changes),await T1(r.remoteStore)}catch(i){const o=Wv(i,"Failed to persist write");t.reject(o)}}async function Qx(n,e){const t=Ge(n);try{const r=await pM(t.localStore,e);e.targetChanges.forEach((i,o)=>{const a=t.Eu.get(o);a&&(at(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.lu=!0:i.modifiedDocuments.size>0?at(a.lu,14607):i.removedDocuments.size>0&&(at(a.lu,42227),a.lu=!1))}),await Hf(t,r,e)}catch(r){await fu(r)}}function YA(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Pu.forEach((o,a)=>{const c=a.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){const u=Ge(a);u.onlineState=c;let d=!1;u.queries.forEach((h,p)=>{for(const g of p.wa)g.va(c)&&(d=!0)}),d&&Yv(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rk(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),o=i&&i.key;if(o){let a=new qt(Oe.comparator);a=a.insert(o,zn.newNoDocument(o,Fe.min()));const c=nt().add(o),u=new b1(Fe.min(),new Map,new qt(Qe),a,c);await Qx(r,u),r.du=r.du.remove(o),r.Eu.delete(e),Zv(r)}else await b2(r.localStore,e,!1).then(()=>T2(r,e,t)).catch(fu)}async function ik(n,e){const t=Ge(n),r=e.batch.batchId;try{const i=await mM(t.localStore,e);Jx(t,r,null),Zx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Hf(t,i)}catch(i){await fu(i)}}async function ok(n,e,t){const r=Ge(n);try{const i=await function(a,c){const u=Ge(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(at(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);Jx(r,e,t),Zx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Hf(r,i)}catch(i){await fu(i)}}function Zx(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function Jx(n,e,t){const r=Ge(n);let i=r.Ru[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function T2(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||eC(n,r)})}function eC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Uv(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Zv(n))}function KA(n,e,t){for(const r of t)r instanceof Xx?(n.Au.addReference(r.key,e),sk(n,r)):r instanceof Yx?(be(Qv,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||eC(n,r.key)):Me(19791,{yu:r})}function sk(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(be(Qv,"New document in limbo: "+t),n.Iu.add(r),Zv(n))}function Zv(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Oe(It.fromString(e)),r=n.mu.next();n.Eu.set(r,new YM(t)),n.du=n.du.insert(t,r),zx(n.remoteStore,new Ws(oo(g1(t.path)),r,"TargetPurposeLimboResolution",m1.ue))}}async function Hf(n,e,t){const r=Ge(n),i=[],o=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{a.push(r.gu(u,e,t).then(d=>{var h;if((d||t)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=t==null?void 0:t.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){i.push(d);const p=Vv.Es(u.targetId,d);o.push(p)}}))}),await Promise.all(a),r.hu.J_(i),await async function(u,d){const h=Ge(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>he.forEach(d,g=>he.forEach(g.Is,_=>h.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>he.forEach(g.ds,_=>h.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!hu(p))throw p;be(Bv,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const _=h.Fs.get(g),E=_.snapshotVersion,A=_.withLastLimboFreeSnapshotVersion(E);h.Fs=h.Fs.insert(g,A)}}}(r.localStore,o))}async function ak(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){be(Qv,"User change. New user:",e.toKey());const r=await Bx(t.localStore,e);t.currentUser=e,function(o,a){o.Vu.forEach(c=>{c.forEach(u=>{u.reject(new ve(ae.CANCELLED,a))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hf(t,r.Bs)}}function lk(n,e){const t=Ge(n),r=t.Eu.get(e);if(r&&r.lu)return nt().add(r.key);{let i=nt();const o=t.Tu.get(e);if(!o)return i;for(const a of o){const c=t.Pu.get(a);i=i.unionWith(c.view.tu)}return i}}function tC(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rk.bind(null,e),e.hu.J_=qM.bind(null,e.eventManager),e.hu.pu=WM.bind(null,e.eventManager),e}function ck(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ik.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ok.bind(null,e),e}class Lp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=E1(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return hM(this.persistence,new uM,e.initialUser,this.serializer)}Du(e){return new Vx(jv.Vi,this.serializer)}bu(e){return new _M}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lp.provider={build:()=>new Lp};class uk extends Lp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){at(this.persistence.referenceDelegate instanceof Mp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new YP(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Rr.withCacheSize(this.cacheSizeBytes):Rr.DEFAULT;return new Vx(r=>Mp.Vi(r,t),this.serializer)}}class S2{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>YA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ak.bind(null,this.syncEngine),await zM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GM}()}createDatastore(e){const t=E1(e.databaseInfo.databaseId),r=function(o){return new SM(o)}(e.databaseInfo);return function(o,a,c,u){return new RM(o,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,a,c){return new OM(r,i,o,a,c)}(this.localStore,this.datastore,e.asyncQueue,t=>YA(this.syncEngine,t,0),function(){return HA.C()?new HA:new bM}())}createSyncEngine(e,t){return function(i,o,a,c,u,d,h){const p=new KM(i,o,a,c,u,d);return h&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=Ge(i);be(vl,"RemoteStore shutting down."),o.Ia.add(5),await zf(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}S2.provider={build:()=>new S2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ko("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ve(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,o){const a=Ge(i),c={documents:o.map(p=>Pp(a.serializer,p))},u=await a.Jo("BatchGetDocuments",a.serializer.databaseId,It.emptyPath(),c,o.length),d=new Map;u.forEach(p=>{const g=DP(a.serializer,p);d.set(g.key.toString(),g)});const h=[];return o.forEach(p=>{const g=d.get(p.toString());at(!!g,55234,{key:p}),h.push(g)}),h}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ff(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=Oe.fromPath(r);this.mutations.push(new Tx(i,this.precondition(i)))}),await async function(r,i){const o=Ge(r),a={writes:i.map(c=>Px(o.serializer,c))};await o.Wo("Commit",o.serializer.databaseId,It.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Me(50498,{Wu:e.constructor.name});t=Fe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ve(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Fe.min())?yn.exists(!1):yn.updateTime(t):yn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Fe.min()))throw new ve(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yn.updateTime(t)}return yn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new Fv(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new dk(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})})}Ju(e){try{const t=this.updateFunction(e);return!Vf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Sx(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="FirestoreClient";class hk{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=hr.UNAUTHENTICATED,this.clientId=f1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{be(la,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(be(la,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Wv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hy(n,e){n.asyncQueue.verifyOperationInProgress(),be(la,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Bx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Qo("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{be("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Qo("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function QA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await mk(n);be(la,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>qA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>qA(e.remoteStore,i)),n._onlineComponents=e}async function mk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){be(la,"Using user provided OfflineComponentProvider");try{await hy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ae.FAILED_PRECONDITION||i.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Qo("Error using user provided cache. Falling back to memory cache: "+t),await hy(n,new Lp)}}else be(la,"Using default OfflineComponentProvider"),await hy(n,new uk(void 0));return n._offlineComponents}async function ew(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(be(la,"Using user provided OnlineComponentProvider"),await QA(n,n._uninitializedComponentsProvider._online)):(be(la,"Using default OnlineComponentProvider"),await QA(n,new S2))),n._onlineComponents}function pk(n){return ew(n).then(e=>e.syncEngine)}function gk(n){return ew(n).then(e=>e.datastore)}async function jp(n){const e=await ew(n),t=e.eventManager;return t.onListen=QM.bind(null,e.syncEngine),t.onUnlisten=ek.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tk.bind(null,e.syncEngine),t}function yk(n,e,t={}){const r=new io;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,c,u,d){const h=new Jv({next:g=>{h.Ou(),a.enqueueAndForget(()=>Xv(o,p));const _=g.docs.has(c);!_&&g.fromCache?d.reject(new ve(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?d.reject(new ve(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Kv(g1(c.path),h,{includeMetadataChanges:!0,ka:!0});return $v(o,p)}(await jp(n),n.asyncQueue,e,t,r)),r.promise}function vk(n,e,t={}){const r=new io;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,c,u,d){const h=new Jv({next:g=>{h.Ou(),a.enqueueAndForget(()=>Xv(o,p)),g.fromCache&&u.source==="server"?d.reject(new ve(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Kv(c,h,{includeMetadataChanges:!0,ka:!0});return $v(o,p)}(await jp(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="firestore.googleapis.com",JA=!0;class eT{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rC,this.ssl=JA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:JA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$P)throw new ve(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class S1{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new z6;switch(r.type){case"firstParty":return new OD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=ZA.get(t);r&&(be("ComponentProvider","Removing Datastore"),ZA.delete(t),r.terminate())}(this),Promise.resolve()}}function iC(n,e,t,r={}){var i;n=or(n,S1);const o=cu(e),a=n._getSettings(),c=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(x6(`https://${u}`),C6("Firestore",!0)),a.host!==rC&&a.host!==u&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},a),{host:u,ssl:o,emulatorOptions:r});if(!pl(d,c)&&(n._setSettings(d),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=hr.MOCK_USER;else{h=J7(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ve(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new hr(g)}n._authCredentials=new ID(new U6(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fo(this.firestore,e,this._query)}}class Vt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(jf(t,Vt._jsonSchema))return new Vt(e,r||null,new Oe(It.fromString(t.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:vn("string",Vt._jsonSchemaVersion),referencePath:vn("string")};class Go extends fo{constructor(e,t,r){super(e,t,g1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new Oe(e))}withConverter(e){return new Go(this.firestore,e,this._path)}}function Pt(n,e,...t){if(n=Ut(n),G6("collection","path",e),n instanceof S1){const r=It.fromString(e,...t);return hA(r),new Go(n,null,r)}{if(!(n instanceof Vt||n instanceof Go))throw new ve(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(It.fromString(e,...t));return hA(r),new Go(n.firestore,null,r)}}function sr(n,e,...t){if(n=Ut(n),arguments.length===1&&(e=f1.newId()),G6("doc","path",e),n instanceof S1){const r=It.fromString(e,...t);return fA(r),new Vt(n,null,new Oe(r))}{if(!(n instanceof Vt||n instanceof Go))throw new ve(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(It.fromString(e,...t));return fA(r),new Vt(n.firestore,n instanceof Go?n.converter:null,new Oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="AsyncQueue";class nT{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Fv(this,"async_queue_retry"),this.oc=()=>{const r=fy();r&&be(tT,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=fy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=fy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new io;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!hu(e))throw e;be(tT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ko("INTERNAL UNHANDLED ERROR: ",rT(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const i=qv.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Me(47125,{hc:rT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function rT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}class yi extends S1{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new nT,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nT(e),this._firestoreClient=void 0,await e}}}function oC(n,e){const t=typeof n=="object"?n:O6(),r=typeof n=="string"?n:Ip,i=Sv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=Q7("firestore");o&&iC(i,...o)}return i}function Tl(n){if(n._terminated)throw new ve(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||wk(n),n._firestoreClient}function wk(n){var e,t,r;const i=n._freezeSettings(),o=function(c,u,d,h){return new WD(c,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,nC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new hk(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Or(qn.fromBase64String(e))}catch(t){throw new ve(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Or(qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Or._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jf(e,Or._jsonSchema))return Or.fromBase64String(e.bytes)}}Or._jsonSchemaVersion="firestore/bytes/1.0",Or._jsonSchema={type:vn("string",Or._jsonSchemaVersion),bytes:vn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(e){if(jf(e,Oi._jsonSchema))return new Oi(e.latitude,e.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:vn("string",Oi._jsonSchemaVersion),latitude:vn("number"),longitude:vn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jf(e,Di._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Di(e.vectorValues);throw new ve(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Di._jsonSchemaVersion="firestore/vectorValue/1.0",Di._jsonSchema={type:vn("string",Di._jsonSchemaVersion),vectorValues:vn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=/^__.*__$/;class bk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ma(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bf(e,this.data,t,this.fieldTransforms)}}class sC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ma(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ec:n})}}class tw{constructor(e,t,r,i,o,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new tw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Vp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(aC(this.Ec)&&_k.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Ek{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||E1(e)}Dc(e,t,r,i=!1){return new tw({Ec:e,methodName:t,bc:r,path:Hn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yu(n){const e=n._freezeSettings(),t=E1(n._databaseId);return new Ek(n._databaseId,!!e.ignoreUndefinedProperties,t)}function x1(n,e,t,r,i,o={}){const a=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);sw("Data must be an object, but it was:",a,r);const c=lC(r,a);let u,d;if(o.merge)u=new $r(a.fieldMask),d=a.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const g=x2(e,p,t);if(!a.contains(g))throw new ve(ae.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);uC(h,g)||h.push(g)}u=new $r(h),d=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=a.fieldTransforms;return new bk(new Er(c),u,d)}class C1 extends gu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof C1}}class nw extends gu{_toFieldTransform(e){return new bx(e.path,new vf)}isEqual(e){return e instanceof nw}}class rw extends gu{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){const t=new bf(e.serializer,gx(e.serializer,this.Cc));return new bx(e.path,t)}isEqual(e){return e instanceof rw&&this.Cc===e.Cc}}function iw(n,e,t,r){const i=n.Dc(1,e,t);sw("Data must be an object, but it was:",i,r);const o=[],a=Er.empty();ha(r,(u,d)=>{const h=aw(e,u,t);d=Ut(d);const p=i.gc(h);if(d instanceof C1)o.push(h);else{const g=Gf(d,p);g!=null&&(o.push(h),a.set(h,g))}});const c=new $r(o);return new sC(a,c,i.fieldTransforms)}function ow(n,e,t,r,i,o){const a=n.Dc(1,e,t),c=[x2(e,r,t)],u=[i];if(o.length%2!=0)throw new ve(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)c.push(x2(e,o[g])),u.push(o[g+1]);const d=[],h=Er.empty();for(let g=c.length-1;g>=0;--g)if(!uC(d,c[g])){const _=c[g];let E=u[g];E=Ut(E);const A=a.gc(_);if(E instanceof C1)d.push(_);else{const S=Gf(E,A);S!=null&&(d.push(_),h.set(_,S))}}const p=new $r(d);return new sC(h,p,a.fieldTransforms)}function Ak(n,e,t,r=!1){return Gf(t,n.Dc(r?4:3,e))}function Gf(n,e){if(cC(n=Ut(n)))return sw("Unsupported field value:",e,n),lC(n,e);if(n instanceof gu)return function(r,i){if(!aC(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const o=[];let a=0;for(const c of r){let u=Gf(c,i.yc(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Dt.fromDate(r);return{timestampValue:Dp(i.serializer,o)}}if(r instanceof Dt){const o=new Dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dp(i.serializer,o)}}if(r instanceof Oi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Or)return{bytesValue:Rx(i.serializer,r._byteString)};if(r instanceof Vt){const o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:kv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Di)return function(a,c){return{mapValue:{fields:{[ex]:{stringValue:tx},[Rp]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw c.wc("VectorValues must only contain numeric values.");return Dv(c.serializer,d)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${h1(r)}`)}(n,e)}function lC(n,e){const t={};return X6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(n,(r,i)=>{const o=Gf(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function cC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Dt||n instanceof Oi||n instanceof Or||n instanceof Vt||n instanceof gu||n instanceof Di)}function sw(n,e,t){if(!cC(t)||!W6(t)){const r=h1(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function x2(n,e,t){if((e=Ut(e))instanceof Sl)return e._internalPath;if(typeof e=="string")return aw(n,e);throw Vp("Field path arguments must be of type string or ",n,!1,void 0,t)}const Tk=new RegExp("[~\\*/\\[\\]]");function aw(n,e,t){if(e.search(Tk)>=0)throw Vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sl(...e.split("."))._internalPath}catch{throw Vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vp(n,e,t,r,i){const o=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new ve(ae.INVALID_ARGUMENT,c+n+u)}function uC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Sk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(I1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Sk extends Bp{data(){return super.data()}}function I1(n,e){return typeof e=="string"?aw(n,e):e instanceof Sl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lw{}class R1 extends lw{}function Gn(n,e,...t){let r=[];e instanceof lw&&r.push(e),r=r.concat(t),function(o){const a=o.filter(u=>u instanceof N1).length,c=o.filter(u=>u instanceof qf).length;if(a>1||a>0&&c>0)throw new ve(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class qf extends R1{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new qf(e,t,r)}_apply(e){const t=this._parse(e);return fC(e._query,t),new fo(e.firestore,e.converter,y2(e._query,t))}_parse(e){const t=yu(e.firestore);return function(o,a,c,u,d,h,p){let g;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ve(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){sT(p,h);const E=[];for(const A of p)E.push(oT(u,o,A));g={arrayValue:{values:E}}}else g=oT(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||sT(p,h),g=Ak(c,a,p,h==="in"||h==="not-in");return gn.create(d,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Mt(n,e,t){const r=e,i=I1("where",n);return qf._create(i,r,t)}class N1 extends lw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new N1(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Mi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let a=i;const c=o.getFlattenedFilters();for(const u of c)fC(a,u),a=y2(a,u)}(e._query,t),new fo(e.firestore,e.converter,y2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class O1 extends R1{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new O1(e,t)}_apply(e){const t=function(i,o,a){if(i.startAt!==null)throw new ve(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ve(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yf(o,a)}(e._query,this._field,this._direction);return new fo(e.firestore,e.converter,function(i,o){const a=i.explicitOrderBy.concat([o]);return new mu(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function ca(n,e="asc"){const t=e,r=I1("orderBy",n);return O1._create(r,t)}class D1 extends R1{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new D1(e,t,r)}_apply(e){return new fo(e.firestore,e.converter,Op(e._query,this._limit,this._limitType))}}function cw(n){return D1._create("limit",n,"F")}function oT(n,e,t){if(typeof(t=Ut(t))=="string"){if(t==="")throw new ve(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cx(e)&&t.indexOf("/")!==-1)throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(It.fromString(t));if(!Oe.isDocumentKey(r))throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bA(n,new Oe(r))}if(t instanceof Vt)return bA(n,t._key);throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${h1(t)}.`)}function sT(n,e){if(!Array.isArray(n)||n.length===0)throw new ve(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fC(n,e){const t=function(i,o){for(const a of i)for(const c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ve(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class uw{convertValue(e,t="none"){switch(sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return an(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ha(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Rp].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>an(a.doubleValue));return new Di(o)}convertGeoPoint(e){return new Oi(an(e.latitude),an(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=p1(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(pf(e));default:return null}}convertTimestamp(e){const t=ia(e);return new Dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=It.fromString(e);at(Lx(r),9688,{name:e});const i=new Wc(r.get(1),r.get(3)),o=new Oe(r.popFirst(5));return i.isEqual(t)||Ko(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class xk extends uw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Or(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}}class al{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qo extends Bp{constructor(e,t,r,i,o,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(I1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=qo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}qo._jsonSchemaVersion="firestore/documentSnapshot/1.0",qo._jsonSchema={type:vn("string",qo._jsonSchemaVersion),bundleSource:vn("string","DocumentSnapshot"),bundleName:vn("string"),bundle:vn("string")};class nf extends qo{data(e={}){return super.data(e)}}class ea{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new al(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new nf(this._firestore,this._userDataWriter,r.key,r,new al(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{const u=new nf(i._firestore,i._userDataWriter,c.doc.key,c.doc,new al(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const u=new nf(i._firestore,i._userDataWriter,c.doc.key,c.doc,new al(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),h=a.indexOf(c.doc.key)),{type:Ck(c.type),doc:u,oldIndex:d,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ea._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=f1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ck(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(n){n=or(n,Vt);const e=or(n.firestore,yi);return yk(Tl(e),n._key).then(t=>hC(e,n,t))}ea._jsonSchemaVersion="firestore/querySnapshot/1.0",ea._jsonSchema={type:vn("string",ea._jsonSchemaVersion),bundleSource:vn("string","QuerySnapshot"),bundleName:vn("string"),bundle:vn("string")};class M1 extends uw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Or(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}}function Jo(n){n=or(n,fo);const e=or(n.firestore,yi),t=Tl(e),r=new M1(e);return dC(n._query),vk(t,n._query).then(i=>new ea(e,r,n,i))}function Fp(n,e,t){n=or(n,Vt);const r=or(n.firestore,yi),i=P1(n.converter,e,t);return vu(r,[x1(yu(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,yn.none())])}function k1(n,e,t,...r){n=or(n,Vt);const i=or(n.firestore,yi),o=yu(i);let a;return a=typeof(e=Ut(e))=="string"||e instanceof Sl?ow(o,"updateDoc",n._key,e,t,r):iw(o,"updateDoc",n._key,e),vu(i,[a.toMutation(n._key,yn.exists(!0))])}function dw(n){return vu(or(n.firestore,yi),[new Ff(n._key,yn.none())])}function Qc(n,e){const t=or(n.firestore,yi),r=sr(n),i=P1(n.converter,e);return vu(t,[x1(yu(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,yn.exists(!1))]).then(()=>r)}function hi(n,...e){var t,r,i;n=Ut(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||iT(e[a])||(o=e[a++]);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(iT(e[a])){const p=e[a];e[a]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[a+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[a+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,d,h;if(n instanceof Vt)d=or(n.firestore,yi),h=g1(n._key.path),u={next:p=>{e[a]&&e[a](hC(d,n,p))},error:e[a+1],complete:e[a+2]};else{const p=or(n,fo);d=or(p.firestore,yi),h=p._query;const g=new M1(d);u={next:_=>{e[a]&&e[a](new ea(d,g,p,_))},error:e[a+1],complete:e[a+2]},dC(n._query)}return function(g,_,E,A){const S=new Jv(A),x=new Kv(_,S,E);return g.asyncQueue.enqueueAndForget(async()=>$v(await jp(g),x)),()=>{S.Ou(),g.asyncQueue.enqueueAndForget(async()=>Xv(await jp(g),x))}}(Tl(d),h,c,u)}function vu(n,e){return function(r,i){const o=new io;return r.asyncQueue.enqueueAndForget(async()=>nk(await pk(r),i,o)),o.promise}(Tl(n),e)}function hC(n,e,t){const r=t.docs.get(e._key),i=new M1(n);return new qo(n,i,e._key,r,new al(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yu(e)}set(e,t,r){this._verifyNotCommitted();const i=$s(e,this._firestore),o=P1(i.converter,t,r),a=x1(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,yn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=$s(e,this._firestore);let a;return a=typeof(t=Ut(t))=="string"||t instanceof Sl?ow(this._dataReader,"WriteBatch.update",o._key,t,r,i):iw(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(a.toMutation(o._key,yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$s(e,this._firestore);return this._mutations=this._mutations.concat(new Ff(t._key,yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $s(n,e){if((n=Ut(n)).firestore!==e)throw new ve(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yu(e)}get(e){const t=$s(e,this._firestore),r=new xk(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return Me(24041);const o=i[0];if(o.isFoundDocument())return new Bp(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Bp(this._firestore,r,t._key,null,t.converter);throw Me(18433,{doc:o})})}set(e,t,r){const i=$s(e,this._firestore),o=P1(i.converter,t,r),a=x1(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,a),this}update(e,t,r,...i){const o=$s(e,this._firestore);let a;return a=typeof(t=Ut(t))=="string"||t instanceof Sl?ow(this._dataReader,"Transaction.update",o._key,t,r,i):iw(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,a),this}delete(e){const t=$s(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC extends Rk{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=$s(e,this._firestore),r=new M1(this._firestore);return super.get(e).then(i=>new qo(this._firestore,r,t._key,i._document,new al(!1,!1),t.converter))}}function gC(n,e,t){n=or(n,yi);const r=Object.assign(Object.assign({},Ik),t);return function(o){if(o.maxAttempts<1)throw new ve(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,a,c){const u=new io;return o.asyncQueue.enqueueAndForget(async()=>{const d=await gk(o);new fk(o.asyncQueue,d,c,a,u).zu()}),u.promise}(Tl(n),i=>e(new pC(n,i)),r)}function ar(){return new nw("serverTimestamp")}function yC(n){return new rw("increment",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(n){return Tl(n=or(n,yi)),new mC(n,e=>vu(n,e))}(function(e,t=!0){(function(i){du=i})(uu),Gc(new gl("firestore",(r,{instanceIdentifier:i,options:o})=>{const a=r.getProvider("app").getImmediate(),c=new yi(new RD(r.getProvider("auth-internal")),new DD(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ve(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wc(d.options.projectId,h)}(a,i),a);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Zs(aA,lA,e),Zs(aA,lA,"esm2017")})();const Nk=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:uw,Bytes:Or,CollectionReference:Go,DocumentReference:Vt,DocumentSnapshot:qo,FieldPath:Sl,FieldValue:gu,Firestore:yi,FirestoreError:ve,GeoPoint:Oi,Query:fo,QueryCompositeFilterConstraint:N1,QueryConstraint:R1,QueryDocumentSnapshot:nf,QueryFieldFilterConstraint:qf,QueryLimitConstraint:D1,QueryOrderByConstraint:O1,QuerySnapshot:ea,SnapshotMetadata:al,Timestamp:Dt,Transaction:pC,VectorValue:Di,WriteBatch:mC,_AutoId:f1,_ByteString:qn,_DatabaseId:Wc,_DocumentKey:Oe,_EmptyAuthCredentialsProvider:z6,_FieldPath:Hn,_cast:or,_logWarn:Qo,_validateIsNotUsedTogether:q6,addDoc:Qc,collection:Pt,connectFirestoreEmulator:iC,deleteDoc:dw,doc:sr,ensureFirestoreConfigured:Tl,executeWrite:vu,getDoc:xl,getDocs:Jo,getFirestore:oC,increment:yC,limit:cw,onSnapshot:hi,orderBy:ca,query:Gn,runTransaction:gC,serverTimestamp:ar,setDoc:Fp,updateDoc:k1,where:Mt,writeBatch:vC},Symbol.toStringTag,{value:"Module"}));var to=function(){return to=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},to.apply(this,arguments)};function Wf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Ok(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function wC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Dk=wC,_C=new kf("auth","Firebase",wC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up=new Av("@firebase/auth");function Pk(n,...e){Up.logLevel<=tt.WARN&&Up.warn(`Auth (${uu}): ${n}`,...e)}function cp(n,...e){Up.logLevel<=tt.ERROR&&Up.error(`Auth (${uu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(n,...e){throw hw(n,...e)}function Pi(n,...e){return hw(n,...e)}function fw(n,e,t){const r=Object.assign(Object.assign({},Dk()),{[e]:t});return new kf("auth","Firebase",r).create(e,{appName:n.name})}function Wo(n){return fw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mk(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&vi(n,"argument-error"),fw(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hw(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return _C.create(n,...e)}function Pe(n,e,...t){if(!n)throw hw(e,...t)}function Uo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw cp(e),new Error(e)}function es(n,e){n||Uo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function kk(){return aT()==="http:"||aT()==="https:"}function aT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kk()||oO()||"connection"in navigator)?navigator.onLine:!0}function jk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t){this.shortDelay=e,this.longDelay=t,es(t>e,"Short delay should be less than long delay!"),this.isMobile=nO()||sO()}get(){return Lk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(n,e){es(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Uo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Uo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Uo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Fk=new $f(3e4,6e4);function os(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ho(n,e,t,r,i={}){return EC(n,i,async()=>{let o={},a={};r&&(e==="GET"?a=r:o={body:JSON.stringify(r)});const c=Lf(Object.assign({key:n.config.apiKey},a)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:e,headers:u},o);return iO()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&cu(n.emulatorConfig.host)&&(d.credentials="include"),bC.fetch()(await AC(n,n.config.apiHost,t,c),d)})}async function EC(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Vk),e);try{const i=new zk(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Mm(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const c=o.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mm(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Mm(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw Mm(n,"user-disabled",a);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw fw(n,h,d);vi(n,h)}}catch(i){if(i instanceof is)throw i;vi(n,"network-request-failed",{message:String(i)})}}async function Xf(n,e,t,r,i={}){const o=await ho(n,e,t,r,i);return"mfaPendingCredential"in o&&vi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function AC(n,e,t,r){const i=`${e}${t}?${r}`,o=n,a=o.config.emulator?mw(n.config,i):`${n.config.apiScheme}://${i}`;return Bk.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}function Uk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Pi(this.auth,"network-request-failed")),Fk.get())})}}function Mm(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Pi(n,e,r);return i.customData._tokenResponse=t,i}function lT(n){return n!==void 0&&n.enterprise!==void 0}class Hk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Uk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Gk(n,e){return ho(n,"GET","/v2/recaptchaConfig",os(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(n,e){return ho(n,"POST","/v1/accounts:delete",e)}async function zp(n,e){return ho(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Wk(n,e=!1){const t=Ut(n),r=await t.getIdToken(e),i=pw(r);Pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:rf(my(i.auth_time)),issuedAtTime:rf(my(i.iat)),expirationTime:rf(my(i.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function my(n){return Number(n)*1e3}function pw(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return cp("JWT malformed, contained fewer than 3 sections"),null;try{const i=E6(t);return i?JSON.parse(i):(cp("Failed to decode base64 JWT payload"),null)}catch(i){return cp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function cT(n){const e=pw(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof is&&$k(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function $k({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rf(this.lastLoginAt),this.creationTime=rf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hp(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Zc(n,zp(t,{idToken:r}));Pe(i==null?void 0:i.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?TC(o.providerUserInfo):[],c=Kk(n.providerData,a),u=n.isAnonymous,d=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),h=u?d:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new I2(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function Yk(n){const e=Ut(n);await Hp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Kk(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function TC(n){return n.map(e=>{var{providerId:t}=e,r=Wf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(n,e){const t=await EC(n,{},async()=>{const r=Lf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=await AC(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return n.emulatorConfig&&cu(n.emulatorConfig.host)&&(u.credentials="include"),bC.fetch()(a,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Zk(n,e){return ho(n,"POST","/v2/accounts:revokeToken",os(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=cT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await Qk(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new Vc;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(Pe(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vc,this.toJSON())}_performRefresh(){return Uo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ni{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Wf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new I2(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Zc(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Wk(this,e)}reload(){return Yk(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ni(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Hp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wr(this.auth.app))return Promise.reject(Wo(this.auth));const e=await this.getIdToken();return await Zc(this,qk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,a,c,u,d,h;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,_=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,E=(a=t.photoURL)!==null&&a!==void 0?a:void 0,A=(c=t.tenantId)!==null&&c!==void 0?c:void 0,S=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,x=(d=t.createdAt)!==null&&d!==void 0?d:void 0,O=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:P,emailVerified:D,isAnonymous:j,providerData:H,stsTokenManager:M}=t;Pe(P&&M,e,"internal-error");const R=Vc.fromJSON(this.name,M);Pe(typeof P=="string",e,"internal-error"),Ls(p,e.name),Ls(g,e.name),Pe(typeof D=="boolean",e,"internal-error"),Pe(typeof j=="boolean",e,"internal-error"),Ls(_,e.name),Ls(E,e.name),Ls(A,e.name),Ls(S,e.name),Ls(x,e.name),Ls(O,e.name);const k=new Ni({uid:P,auth:e,email:g,emailVerified:D,displayName:p,isAnonymous:j,photoURL:E,phoneNumber:_,tenantId:A,stsTokenManager:R,createdAt:x,lastLoginAt:O});return H&&Array.isArray(H)&&(k.providerData=H.map(U=>Object.assign({},U))),S&&(k._redirectEventId=S),k}static async _fromIdTokenResponse(e,t,r=!1){const i=new Vc;i.updateFromServerResponse(t);const o=new Ni({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Hp(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Pe(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?TC(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),c=new Vc;c.updateFromIdToken(r);const u=new Ni({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new I2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=new Map;function zo(n){es(n instanceof Function,"Expected a class definition");let e=uT.get(n);return e?(es(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,uT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}SC.type="NONE";const dT=SC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(n,e,t){return`firebase:${n}:${e}:${t}`}class Bc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=up(this.userKey,i.apiKey,o),this.fullPersistenceKey=up("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await zp(this.auth,{idToken:e}).catch(()=>{});return t?Ni._fromGetAccountInfoResponse(this.auth,t,e):null}return Ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Bc(zo(dT),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||zo(dT);const a=up(r,e.config.apiKey,e.name);let c=null;for(const d of t)try{const h=await d._get(a);if(h){let p;if(typeof h=="string"){const g=await zp(e,{idToken:h}).catch(()=>{});if(!g)break;p=await Ni._fromGetAccountInfoResponse(e,g,h)}else p=Ni._fromJSON(e,h);d!==o&&(c=p),o=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Bc(o,e,r):(o=u[0],c&&await o._set(a,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==o)try{await d._remove(a)}catch{}})),new Bc(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OC(e))return"Blackberry";if(DC(e))return"Webos";if(CC(e))return"Safari";if((e.includes("chrome/")||IC(e))&&!e.includes("edge/"))return"Chrome";if(NC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xC(n=pr()){return/firefox\//i.test(n)}function CC(n=pr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IC(n=pr()){return/crios\//i.test(n)}function RC(n=pr()){return/iemobile/i.test(n)}function NC(n=pr()){return/android/i.test(n)}function OC(n=pr()){return/blackberry/i.test(n)}function DC(n=pr()){return/webos/i.test(n)}function gw(n=pr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Jk(n=pr()){var e;return gw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function eL(){return aO()&&document.documentMode===10}function PC(n=pr()){return gw(n)||NC(n)||DC(n)||OC(n)||/windows phone/i.test(n)||RC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(n,e=[]){let t;switch(n){case"Browser":t=fT(pr());break;case"Worker":t=`${fT(pr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${uu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((a,c)=>{try{const u=e(o);a(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(n,e={}){return ho(n,"GET","/v2/passwordPolicy",os(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=6;class iL{constructor(e){var t,r,i,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:rL,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hT(this),this.idTokenSubscription=new hT(this),this.beforeStateQueue=new tL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_C,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zo(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Bc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await zp(this,{idToken:e}),r=await Ni._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Wr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hp(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wr(this.app))return Promise.reject(Wo(this));const t=e?Ut(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wr(this.app)?Promise.reject(Wo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wr(this.app)?Promise.reject(Wo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nL(this),t=new iL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new kf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Zk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zo(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await Bc.create(this,[zo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(c,this,"internal-error"),c.then(()=>{a||o(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,i);return()=>{a=!0,u()}}else{const u=e.addObserver(t);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Wr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Pk(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function pa(n){return Ut(n)}class hT{constructor(e){this.auth=e,this.observer=null,this.addObserver=pO(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sL(n){L1=n}function kC(n){return L1.loadJS(n)}function aL(){return L1.recaptchaEnterpriseScript}function lL(){return L1.gapiScript}function cL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class uL{constructor(){this.enterprise=new dL}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class dL{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const fL="recaptcha-enterprise",LC="NO_RECAPTCHA";class hL{constructor(e){this.type=fL,this.auth=pa(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,c)=>{Gk(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new Hk(u);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function i(o,a,c){const u=window.grecaptcha;lT(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(d=>{a(d)}).catch(()=>{a(LC)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new uL().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{r(this.auth).then(c=>{if(!t&&lT(window.grecaptcha))i(c,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=aL();u.length!==0&&(u+=c),kC(u).then(()=>{i(c,o,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function mT(n,e,t,r=!1,i=!1){const o=new hL(n);let a;if(i)a=LC;else try{a=await o.verify(t)}catch{a=await o.verify(t,!0)}const c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function R2(n,e,t,r,i){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await mT(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await mT(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(n,e){const t=Sv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(pl(o,e??{}))return i;vi(i,"already-initialized")}return t.initialize({options:e})}function pL(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(zo);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function gL(n,e,t){const r=pa(n);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=jC(e),{host:a,port:c}=yL(e),u=c===null?"":`:${c}`,d={url:`${o}//${a}${u}/`},h=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(pl(d,r.config.emulator)&&pl(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,cu(a)?(x6(`${o}//${a}${u}`),C6("Auth",!0)):vL()}function jC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function yL(n){const e=jC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:pT(r.substr(o.length+1))}}else{const[o,a]=r.split(":");return{host:o,port:pT(a)}}}function pT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function vL(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Uo("not implemented")}_getIdTokenResponse(e){return Uo("not implemented")}_linkToIdToken(e,t){return Uo("not implemented")}_getReauthenticationResolver(e){return Uo("not implemented")}}async function wL(n,e){return ho(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L(n,e){return Xf(n,"POST","/v1/accounts:signInWithPassword",os(n,e))}async function bL(n,e){return ho(n,"POST","/v1/accounts:sendOobCode",os(n,e))}async function EL(n,e){return bL(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AL(n,e){return Xf(n,"POST","/v1/accounts:signInWithEmailLink",os(n,e))}async function TL(n,e){return Xf(n,"POST","/v1/accounts:signInWithEmailLink",os(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends yw{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Ef(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ef(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return R2(e,t,"signInWithPassword",_L);case"emailLink":return AL(e,{email:this._email,oobCode:this._password});default:vi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return R2(e,r,"signUpPassword",wL);case"emailLink":return TL(e,{idToken:t,email:this._email,oobCode:this._password});default:vi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(n,e){return Xf(n,"POST","/v1/accounts:signInWithIdp",os(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL="http://localhost";class wl extends yw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Wf(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new wl(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Fc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Fc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Fc(e,t)}buildRequest(){const e={requestUri:SL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Lf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CL(n){const e=zd(Hd(n)).link,t=e?zd(Hd(e)).deep_link_id:null,r=zd(Hd(n)).deep_link_id;return(r?zd(Hd(r)).link:null)||r||t||e||n}class vw{constructor(e){var t,r,i,o,a,c;const u=zd(Hd(e)),d=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=xL((i=u.mode)!==null&&i!==void 0?i:null);Pe(d&&h&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=u.lang)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=CL(e);try{return new vw(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this.providerId=wu.PROVIDER_ID}static credential(e,t){return Ef._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=vw.parseLink(t);return Pe(r,"argument-error"),Ef._fromEmailAndCode(e,r.code,r.tenantId)}}wu.PROVIDER_ID="password";wu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf extends ww{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends Yf{constructor(){super("facebook.com")}static credential(e){return wl._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Yf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wl._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return no.credential(t,r)}catch{return null}}}no.GOOGLE_SIGN_IN_METHOD="google.com";no.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends Yf{constructor(){super("github.com")}static credential(e){return wl._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.GITHUB_SIGN_IN_METHOD="github.com";Gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Yf{constructor(){super("twitter.com")}static credential(e,t){return wl._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return qs.credential(t,r)}catch{return null}}}qs.TWITTER_SIGN_IN_METHOD="twitter.com";qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IL(n,e){return Xf(n,"POST","/v1/accounts:signUp",os(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Ni._fromIdTokenResponse(e,r,i),a=gT(r);return new _l({user:o,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=gT(r);return new _l({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function gT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp extends is{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Gp.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Gp(e,t,r,i)}}function VC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Gp._fromErrorAndOperation(n,o,e,r):o})}async function RL(n,e,t=!1){const r=await Zc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _l._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL(n,e,t=!1){const{auth:r}=n;if(Wr(r.app))return Promise.reject(Wo(r));const i="reauthenticate";try{const o=await Zc(n,VC(r,i,e,n),t);Pe(o.idToken,r,"internal-error");const a=pw(o.idToken);Pe(a,r,"internal-error");const{sub:c}=a;return Pe(n.uid===c,r,"user-mismatch"),_l._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&vi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BC(n,e,t=!1){if(Wr(n.app))return Promise.reject(Wo(n));const r="signIn",i=await VC(n,r,e),o=await _l._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function OL(n,e){return BC(pa(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(n,e,t){var r;Pe(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),Pe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Pe(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Pe(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Pe(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FC(n){const e=pa(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PL(n,e,t){if(Wr(n.app))return Promise.reject(Wo(n));const r=pa(n),a=await R2(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",IL).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&FC(n),u}),c=await _l._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function ML(n,e,t){return Wr(n.app)?Promise.reject(Wo(n)):OL(Ut(n),wu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&FC(n),r})}async function UC(n,e){const t=Ut(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&DL(t.auth,i,e);const{email:o}=await EL(t.auth,i);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kL(n,e){return ho(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Ut(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Zc(r,kL(r.auth,o));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function jL(n,e,t,r){return Ut(n).onIdTokenChanged(e,t,r)}function VL(n,e,t){return Ut(n).beforeAuthStateChanged(e,t)}function BL(n,e,t,r){return Ut(n).onAuthStateChanged(e,t,r)}function FL(n){return Ut(n).signOut()}const qp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qp,"1"),this.storage.removeItem(qp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=1e3,zL=10;class HC extends zC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);eL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,zL):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},UL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}HC.type="LOCAL";const HL=HC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC extends zC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}GC.type="SESSION";const qC=GC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new j1(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async d=>d(t.origin,o)),u=await GL(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}j1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((c,u)=>{const d=_w("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(){return window}function WL(n){so().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(){return typeof so().WorkerGlobalScope<"u"&&typeof so().importScripts=="function"}async function $L(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XL(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function YL(){return WC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="firebaseLocalStorageDb",KL=1,Wp="firebaseLocalStorage",XC="fbase_key";class Kf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function V1(n,e){return n.transaction([Wp],e?"readwrite":"readonly").objectStore(Wp)}function QL(){const n=indexedDB.deleteDatabase($C);return new Kf(n).toPromise()}function N2(){const n=indexedDB.open($C,KL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Wp,{keyPath:XC})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Wp)?e(r):(r.close(),await QL(),e(await N2()))})})}async function yT(n,e,t){const r=V1(n,!0).put({[XC]:e,value:t});return new Kf(r).toPromise()}async function ZL(n,e){const t=V1(n,!1).get(e),r=await new Kf(t).toPromise();return r===void 0?null:r.value}function vT(n,e){const t=V1(n,!0).delete(e);return new Kf(t).toPromise()}const JL=800,ej=3;class YC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await N2(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>ej)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=j1._getInstance(YL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await $L(),!this.activeServiceWorker)return;this.sender=new qL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await N2();return await yT(e,qp,"1"),await vT(e,qp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>yT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>ZL(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>vT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=V1(i,!1).getAll();return new Kf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YC.type="LOCAL";const tj=YC;new $f(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(n,e){return e?zo(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw extends yw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nj(n){return BC(n.auth,new bw(n),n.bypassAuthState)}function rj(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),NL(t,new bw(n),n.bypassAuthState)}async function ij(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),RL(t,new bw(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nj;case"linkViaPopup":case"linkViaRedirect":return ij;case"reauthViaPopup":case"reauthViaRedirect":return rj;default:vi(this.auth,"internal-error")}}resolve(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=new $f(2e3,1e4);async function sj(n,e,t){if(Wr(n.app))return Promise.reject(Pi(n,"operation-not-supported-in-this-environment"));const r=pa(n);Mk(n,e,ww);const i=KC(r,t);return new ll(r,"signInViaPopup",e,i).executeNotNull()}class ll extends QC{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,ll.currentPopupAction&&ll.currentPopupAction.cancel(),ll.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){es(this.filter.length===1,"Popup operations only handle one event");const e=_w();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ll.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oj.get())};e()}}ll.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj="pendingRedirect",dp=new Map;class lj extends QC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=dp.get(this.auth._key());if(!e){try{const r=await cj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}dp.set(this.auth._key(),e)}return this.bypassAuthState||dp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cj(n,e){const t=fj(e),r=dj(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function uj(n,e){dp.set(n._key(),e)}function dj(n){return zo(n._redirectPersistence)}function fj(n){return up(aj,n.config.apiKey,n.name)}async function hj(n,e,t=!1){if(Wr(n.app))return Promise.reject(Wo(n));const r=pa(n),i=KC(r,e),a=await new lj(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=10*60*1e3;class pj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ZC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Pi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mj&&this.cachedEventUids.clear(),this.cachedEventUids.has(wT(e))}saveEventToCache(e){this.cachedEventUids.add(wT(e)),this.lastProcessedEventTime=Date.now()}}function wT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ZC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yj(n,e={}){return ho(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wj=/^https?/;async function _j(n){if(n.config.emulator)return;const{authorizedDomains:e}=await yj(n);for(const t of e)try{if(bj(t))return}catch{}vi(n,"unauthorized-domain")}function bj(n){const e=C2(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!wj.test(t))return!1;if(vj.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=new $f(3e4,6e4);function _T(){const n=so().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Aj(n){return new Promise((e,t)=>{var r,i,o;function a(){_T(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_T(),t(Pi(n,"network-request-failed"))},timeout:Ej.get()})}if(!((i=(r=so().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=so().gapi)===null||o===void 0)&&o.load)a();else{const c=cL("iframefcb");return so()[c]=()=>{gapi.load?a():t(Pi(n,"network-request-failed"))},kC(`${lL()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw fp=null,e})}let fp=null;function Tj(n){return fp=fp||Aj(n),fp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=new $f(5e3,15e3),xj="__/auth/iframe",Cj="emulator/auth/iframe",Ij={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nj(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?mw(e,Cj):`https://${n.config.authDomain}/${xj}`,r={apiKey:e.apiKey,appName:n.name,v:uu},i=Rj.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Lf(r).slice(1)}`}async function Oj(n){const e=await Tj(n),t=so().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:Nj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ij,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const a=Pi(n,"network-request-failed"),c=so().setTimeout(()=>{o(a)},Sj.get());function u(){so().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Pj=500,Mj=600,kj="_blank",Lj="http://localhost";class bT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jj(n,e,t,r=Pj,i=Mj){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},Dj),{width:r.toString(),height:i.toString(),top:o,left:a}),d=pr().toLowerCase();t&&(c=IC(d)?kj:t),xC(d)&&(e=e||Lj,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[_,E])=>`${g}${_}=${E},`,"");if(Jk(d)&&c!=="_self")return Vj(e||"",c),new bT(null);const p=window.open(e||"",c,h);Pe(p,n,"popup-blocked");try{p.focus()}catch{}return new bT(p)}function Vj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj="__/auth/handler",Fj="emulator/auth/handler",Uj=encodeURIComponent("fac");async function ET(n,e,t,r,i,o){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:uu,eventId:i};if(e instanceof ww){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",mO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))a[h]=p}if(e instanceof Yf){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(a.scopes=h.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await n._getAppCheckToken(),d=u?`#${Uj}=${encodeURIComponent(u)}`:"";return`${zj(n)}?${Lf(c).slice(1)}${d}`}function zj({config:n}){return n.emulator?mw(n,Fj):`https://${n.authDomain}/${Bj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="webStorageSupport";class Hj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qC,this._completeRedirectFn=hj,this._overrideRedirectResult=uj}async _openPopup(e,t,r,i){var o;es((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await ET(e,t,r,C2(),i);return jj(e,a,_w())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await ET(e,t,r,C2(),i);return WL(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(es(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Oj(e),r=new pj(e);return t.register("authEvent",i=>(Pe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(py,{type:py},i=>{var o;const a=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[py];a!==void 0&&t(!!a),vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_j(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return PC()||CC()||gw()}}const Gj=Hj;var AT="@firebase/auth",TT="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $j(n){Gc(new gl("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Pe(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MC(n)},d=new oL(r,i,o,u);return pL(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Gc(new gl("auth-internal",e=>{const t=pa(e.getProvider("auth").getImmediate());return(r=>new qj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zs(AT,TT,Wj(n)),Zs(AT,TT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=5*60,Yj=S6("authIdTokenMaxAge")||Xj;let ST=null;const Kj=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Yj)return;const i=t==null?void 0:t.token;ST!==i&&(ST=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Qj(n=O6()){const e=Sv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=mL(n,{popupRedirectResolver:Gj,persistence:[tj,HL,qC]}),r=S6("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const a=Kj(o.toString());VL(t,a,()=>a(t.currentUser)),jL(t,c=>a(c))}}const i=A6("auth");return i&&gL(t,`http://${i}`),t}function Zj(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}sL({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Pi("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Zj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$j("Browser");/*! Capacitor: https://capacitorjs.com/ - MIT License */var Jc;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(Jc||(Jc={}));class gy extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const Jj=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},eV=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},r=t.Plugins=t.Plugins||{},i=()=>e!==null?e.name:Jj(n),o=()=>i()!=="web",a=p=>{const g=d.get(p);return!!(g!=null&&g.platforms.has(i())||c(p))},c=p=>{var g;return(g=t.PluginHeaders)===null||g===void 0?void 0:g.find(_=>_.name===p)},u=p=>n.console.error(p),d=new Map,h=(p,g={})=>{const _=d.get(p);if(_)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),_.proxy;const E=i(),A=c(p);let S;const x=async()=>(!S&&E in g?S=typeof g[E]=="function"?S=await g[E]():S=g[E]:e!==null&&!S&&"web"in g&&(S=typeof g.web=="function"?S=await g.web():S=g.web),S),O=(R,k)=>{var U,z;if(A){const q=A==null?void 0:A.methods.find(F=>k===F.name);if(q)return q.rtype==="promise"?F=>t.nativePromise(p,k.toString(),F):(F,Ce)=>t.nativeCallback(p,k.toString(),F,Ce);if(R)return(U=R[k])===null||U===void 0?void 0:U.bind(R)}else{if(R)return(z=R[k])===null||z===void 0?void 0:z.bind(R);throw new gy(`"${p}" plugin is not implemented on ${E}`,Jc.Unimplemented)}},P=R=>{let k;const U=(...z)=>{const q=x().then(F=>{const Ce=O(F,R);if(Ce){const Ee=Ce(...z);return k=Ee==null?void 0:Ee.remove,Ee}else throw new gy(`"${p}.${R}()" is not implemented on ${E}`,Jc.Unimplemented)});return R==="addListener"&&(q.remove=async()=>k()),q};return U.toString=()=>`${R.toString()}() { [capacitor code] }`,Object.defineProperty(U,"name",{value:R,writable:!1,configurable:!1}),U},D=P("addListener"),j=P("removeListener"),H=(R,k)=>{const U=D({eventName:R},k),z=async()=>{const F=await U;j({eventName:R,callbackId:F},k)},q=new Promise(F=>U.then(()=>F({remove:z})));return q.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await z()},q},M=new Proxy({},{get(R,k){switch(k){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return A?H:D;case"removeListener":return j;default:return P(k)}}});return r[p]=M,d.set(p,{name:p,proxy:M,platforms:new Set([...Object.keys(g),...A?[E]:[]])}),M};return t.convertFileSrc||(t.convertFileSrc=p=>p),t.getPlatform=i,t.handleError=u,t.isNativePlatform=o,t.isPluginAvailable=a,t.registerPlugin=h,t.Exception=gy,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},tV=n=>n.Capacitor=eV(n),$p=tV(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),JC=$p.registerPlugin;class eI{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,t);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const i=this.listeners[e];if(!i){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(t),this.retainedEventArguments[e]=o}return}i.forEach(o=>o(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new $p.Exception(e,Jc.Unimplemented)}unavailable(e="not available"){return new $p.Exception(e,Jc.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const i=r.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const xT=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),CT=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class nV extends eI{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=CT(i).trim(),o=CT(o).trim(),t[i]=o}),t}async setCookie(e){try{const t=xT(e.key),r=xT(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${i}; path=${o}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}JC("CapacitorCookies",{web:()=>new nV});const rV=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>t(i),r.readAsDataURL(n)}),iV=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,o,a)=>(i[o]=n[e[a]],i),{})},oV=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[o,a]=i;let c,u;return Array.isArray(a)?(u="",a.forEach(d=>{c=e?encodeURIComponent(d):d,u+=`${o}=${c}&`}),u.slice(0,-1)):(c=e?encodeURIComponent(a):a,u=`${o}=${c}`),`${r}&${u}`},"").substr(1):null,sV=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),i=iV(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[a,c]of Object.entries(n.data||{}))o.set(a,c);t.body=o.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const o=new FormData;if(n.data instanceof FormData)n.data.forEach((c,u)=>{o.append(u,c)});else for(const c of Object.keys(n.data))o.append(c,n.data[c]);t.body=o;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(i.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class aV extends eI{async request(e){const t=sV(e,e.webFetchExtra),r=oV(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,o=await fetch(i,t),a=o.headers.get("content-type")||"";let{responseType:c="text"}=o.ok?e:{};a.includes("application/json")&&(c="json");let u,d;switch(c){case"arraybuffer":case"blob":d=await o.blob(),u=await rV(d);break;case"json":u=await o.json();break;case"document":case"text":default:u=await o.text()}const h={};return o.headers.forEach((p,g)=>{h[g]=p}),{data:u,headers:h,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}JC("CapacitorHttp",{web:()=>new aV});console.log("Environment variables:",{VITE_FIREBASE_API_KEY:"***",VITE_FIREBASE_AUTH_DOMAIN:"***",VITE_FIREBASE_PROJECT_ID:"***"});const lV={apiKey:"AIzaSyBLgV_3Xw3emSPij5h7AKvLOzDe_5nIe_0",authDomain:"billo-692b3.firebaseapp.com",projectId:"billo-692b3",storageBucket:"billo-692b3.firebasestorage.app",messagingSenderId:"207924147567",appId:"1:207924147567:web:2b2a27cc4e87374f7fe49a",...$p.isNativePlatform()?{}:{}},tI=N6(lV),We=oC(tI),ta=Qj(tI),nI=new no;nI.setCustomParameters({prompt:"select_account"});nI.addScope("https://www.googleapis.com/auth/spreadsheets.readonly");const Ew=new no;Ew.addScope("email");Ew.addScope("profile");const eo={CUSTOMER:"customer",WAITER:"waiter",ADMIN:"admin"},cV=async(n=eo.CUSTOMER)=>{try{const t=(await sj(ta,Ew)).user;return await Aw(t,n),{success:!0,user:{uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,role:n}}}catch(e){return console.error("Google sign-in error:",e),{success:!1,error:e.message}}},uV=async(n,e,t=eo.CUSTOMER)=>{try{const o=(await ML(ta,n,e||"defaultPassword")).user,a=await B1(o.uid);return{success:!0,user:{uid:o.uid,email:o.email,phone:e,displayName:o.displayName||(a==null?void 0:a.displayName),photoURL:o.photoURL,role:(a==null?void 0:a.role)||t}}}catch(r){return console.error("Email sign-in error:",r),{success:!1,error:r.message}}},rI=async(n,e,t,r=eo.CUSTOMER)=>{try{console.log("Starting account creation for:",n);const a=(await PL(ta,n,e||"defaultPassword")).user;console.log("User created with UID:",a.uid);try{console.log("Updating profile with display name:",t),await LL(a,{displayName:t}),console.log("Profile updated successfully")}catch(c){console.error("Error updating profile:",c)}try{console.log("Sending email verification..."),await UC(a,{url:`${window.location.origin}/restaurant`,handleCodeInApp:!0}),console.log("Verification email sent successfully")}catch(c){console.error("Error sending verification email:",c)}try{console.log("Creating user profile in Firestore..."),await Aw(a,r,!1,t),console.log("User profile created in Firestore")}catch(c){console.error("Error creating user profile in Firestore:",c)}return{success:!0,user:{uid:a.uid,email:a.email,phone:e,emailVerified:a.emailVerified,displayName:t,photoURL:a.photoURL,role:r},message:"Account created successfully! "+(a.emailVerified?"Your email has been verified.":"Please check your email to verify your account. If you don't see it, please check your spam folder.")}}catch(i){return console.error("Account creation error:",i),{success:!1,error:i.message}}},dV=async()=>{try{return await FL(ta),{success:!0}}catch(n){return console.error("Sign-out error:",n),{success:!1,error:n.message}}},Aw=async(n,e,t=!1,r=null)=>{try{const i=sr(We,"users",n.uid),o=await xl(i),a={uid:n.uid,email:n.email,phone:n.phone||null,displayName:r||n.displayName||(t?"Anonymous User":"User"),photoURL:n.photoURL,role:e,isAnonymous:t,lastLoginAt:ar(),updatedAt:ar()};return o.exists()?await Fp(i,a,{merge:!0}):(a.createdAt=ar(),await Fp(i,a)),a}catch(i){throw console.error("Error creating user profile:",i),i}},B1=async n=>{try{console.log("Getting user profile for UID:",n);const e=sr(We,"users",n),t=await xl(e);if(t.exists()){const r=t.data();return console.log("Retrieved user data:",{...r,uid:t.id}),{...r,uid:t.id}}else return console.log("No user profile found for UID:",n),null}catch(e){return console.error("Error getting user profile:",e),null}},fV=n=>BL(ta,async e=>{if(e){const t=await B1(e.uid);n({uid:e.uid,email:e.email,phone:e.phone||(t==null?void 0:t.phone)||null,displayName:e.displayName||(t==null?void 0:t.displayName),photoURL:e.photoURL,role:(t==null?void 0:t.role)||eo.CUSTOMER,isAnonymous:e.isAnonymous||(t==null?void 0:t.isAnonymous)||!1})}else n(null)}),iI=C.createContext();function ss(){return C.useContext(iI)}function hV({children:n}){const[e,t]=C.useState(null),[r,i]=C.useState(!0),o=async p=>{if(!p)return t(null),i(!1),null;try{const g=await B1(p.uid),_={uid:p.uid,email:p.email,emailVerified:p.emailVerified,displayName:p.displayName||(g==null?void 0:g.displayName),photoURL:p.photoURL,role:(g==null?void 0:g.role)||eo.CUSTOMER,isAdmin:(g==null?void 0:g.role)===eo.ADMIN,requiresVerification:!p.emailVerified&&(g==null?void 0:g.role)===eo.ADMIN};return t(_),_}catch(g){console.error("Error updating user profile:",g);const _={uid:p.uid,email:p.email,displayName:p.displayName,photoURL:p.photoURL,role:eo.CUSTOMER,isAdmin:!1};return t(_),_}finally{i(!1)}};C.useEffect(()=>{console.log("Setting up auth state listener...");const p=fV(async g=>{if(console.log("Auth state changed. User:",g?g.email:"No user"),g){console.log("User found, updating profile...");try{await o(g),console.log("User profile updated")}catch(_){console.error("Error updating user profile:",_),t(null)}}else console.log("No user, resetting state"),t(null);i(!1)});return()=>{console.log("Cleaning up auth state listener"),p()}},[]);const a=async(p,g,_,E=eo.CUSTOMER)=>{try{const A=await rI(p,g,_,E);return A.success&&await o(ta.currentUser),A}catch(A){return console.error("Signup error:",A),{success:!1,error:A.message}}},c=async(p,g)=>{try{const _=await uV(p,g);return _.success&&await o(ta.currentUser),_}catch(_){return console.error("Login error:",_),{success:!1,error:_.message}}},u=async(p=eo.CUSTOMER)=>{try{const g=await cV(p);return g.success&&await o(ta.currentUser),g}catch(g){return console.error("Google sign-in error:",g),{success:!1,error:g.message}}},d=async()=>{try{return await dV(),t(null),{success:!0}}catch(p){return console.error("Logout error:",p),{success:!1,error:p.message}}},h={currentUser:e,isAuthenticated:!!e,isAdmin:(e==null?void 0:e.isAdmin)||!1,loading:r,signup:a,login:c,loginWithGoogle:u,logout:d,updateUserProfile:o};return y.jsx(iI.Provider,{value:h,children:!r&&n})}/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),IT=n=>{const e=pV(n);return e.charAt(0).toUpperCase()+e.slice(1)},oI=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),gV=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=C.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:a,...c},u)=>C.createElement("svg",{ref:u,...yV,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:oI("lucide",i),...!o&&!gV(c)&&{"aria-hidden":"true"},...c},[...a.map(([d,h])=>C.createElement(d,h)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(n,e)=>{const t=C.forwardRef(({className:r,...i},o)=>C.createElement(vV,{ref:o,iconNode:e,className:oI(`lucide-${mV(IT(n))}`,`lucide-${n}`,r),...i}));return t.displayName=IT(n),t};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Xp=Xe("arrow-left",wV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],bV=Xe("bug",_V);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],AV=Xe("chart-column",EV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],SV=Xe("check",TV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$o=Xe("circle-alert",xV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],yy=Xe("circle-check-big",CV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],O2=Xe("clipboard-list",IV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Yp=Xe("clock",RV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],OV=Xe("code",NV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],sI=Xe("copy",DV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Tw=Xe("credit-card",PV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]],kV=Xe("delete",MV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],aI=Xe("dollar-sign",LV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],VV=Xe("download",jV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FV=Xe("file-text",BV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],zV=Xe("github",UV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],lI=Xe("globe",HV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],qV=Xe("image",GV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],$V=Xe("info",WV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Xs=Xe("loader-circle",XV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],KV=Xe("log-in",YV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],ZV=Xe("log-out",QV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],eB=Xe("mail",JV);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Uc=Xe("plus",tB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],eu=Xe("qr-code",nB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],iB=Xe("receipt",rB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],F1=Xe("refresh-cw",oB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],aB=Xe("rotate-cw",sB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cB=Xe("settings",lB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"9",y2:"21",key:"1ib60c"}],["line",{x1:"15",x2:"15",y1:"9",y2:"21",key:"1n26ft"}]],dB=Xe("sheet",uB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],hB=Xe("shopping-bag",fB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Sw=Xe("smartphone",mB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],RT=Xe("square-pen",pB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],xw=Xe("trash-2",gB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Kp=Xe("user",yB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],zc=Xe("users",vB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],cI=Xe("utensils",wB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bB=Xe("wifi-off",_B);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],AB=Xe("wifi",EB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],uI=Xe("x",TB),SB="modulepreload",xB=function(n){return"/"+n},NT={},dI=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let a=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=a(t.map(d=>{if(d=xB(d),d in NT)return;NT[d]=!0;const h=d.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":SB,h||(g.as="script"),g.crossOrigin="",g.href=d,u&&g.setAttribute("nonce",u),document.head.appendChild(g),h)return new Promise((_,E)=>{g.addEventListener("load",_),g.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},CB={create:n=>({name:n.name||"",pin:n.pin||"",restaurantId:n.restaurantId||"",role:"waiter",createdAt:null,updatedAt:null}),validate:n=>{const e=[];return n.name||e.push("Waiter name is required"),(!n.pin||!/^\d{4}$/.test(n.pin))&&e.push("A 4-digit PIN is required"),n.restaurantId||e.push("Restaurant ID is required"),{isValid:e.length===0,errors:e}}},D2={CATEGORIES:{FOOD:"food",DRINKS:"drinks",APPETIZERS:"appetizers",DESSERTS:"desserts",SPECIALS:"specials"},create:n=>({name:n.name||"",description:n.description||"",price:parseFloat(n.price)||0,category:n.category||D2.CATEGORIES.FOOD,available:n.available!==!1,imageUrl:n.imageUrl||"",allergens:n.allergens||[],preparationTime:parseInt(n.preparationTime)||0,restaurantId:n.restaurantId||"",createdAt:null,updatedAt:null}),validate:n=>{const e=[];return n.name||e.push("Item name is required"),n.price<=0&&e.push("Price must be greater than 0"),Object.values(D2.CATEGORIES).includes(n.category)||e.push("Invalid category"),n.restaurantId||e.push("Restaurant ID is required"),{isValid:e.length===0,errors:e}}},Af="tabs",IB="orders",U1="restaurants",ua="waiters",Cw="menuItems",RB=(n,e)=>{if(!n)return()=>{};const t=Gn(Pt(We,Af),Mt("restaurantId","==",n),ca("createdAt","desc"));return hi(t,r=>{const i=[];r.forEach(o=>{i.push({id:o.id,...o.data()})}),e(i)})},NB=async n=>{const e=sr(We,U1,n.restaurantId),t=Pt(We,Af),r=n.createdBy==="customer";if(!r&&(!n.waiterName||!n.waiterId))throw new Error("Waiter assignment is required for manual tab creation.");try{const i=await gC(We,async c=>{var A;const u=await c.get(e);if(!u.exists())throw new Error("Restaurant not found!");const d=u.data();let h=d.dailyTabCounter||0;const p=(A=d.lastTabReset)==null?void 0:A.toDate(),g=new Date;!p||p.toDateString()!==g.toDateString()?h=1:h++;const _=sr(t),E=r?"inactive":"active";return c.set(_,{...n,status:E,total:0,orderCount:0,createdAt:ar(),updatedAt:ar(),referenceNumber:String(h),waiterName:r?"":n.waiterName||"",waiterId:r?"":n.waiterId||""}),c.update(e,{dailyTabCounter:h,lastTabReset:g}),{id:_.id}}),o=sr(We,Af,i.id),a=await xl(o);if(a.exists())return{id:a.id,...a.data()};throw new Error("Could not retrieve newly created tab after transaction.")}catch(i){throw console.error("Error creating tab in transaction:",i),i}},OB=(n,e)=>{const t=sr(We,Af,n);return hi(t,r=>{r.exists()&&e({id:r.id,...r.data()})})},DB=(n,e)=>{const t=Gn(Pt(We,IB),Mt("tabId","==",n),ca("createdAt","asc"));return hi(t,r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));e(i)})},OT=(n,e)=>{if(!n)return console.error("subscribeToActiveTabs: restaurantId is required"),e([]),()=>{};console.log(`[subscribeToActiveTabs] Setting up listener for active tabs in restaurant: ${n}`);const t=Gn(Pt(We,Af),Mt("restaurantId","==",n),Mt("status","==","active"),ca("createdAt","desc"));return hi(t,r=>{console.log(`[subscribeToActiveTabs] Received ${r.size} active tabs`);const i=r.docs.map(o=>({id:o.id,...o.data()}));e(i)},r=>{console.error("[subscribeToActiveTabs] Error:",r),console.error("Error in subscribeToActiveTabs:",r),e([])})},PB=async n=>{try{const e={...n,createdAt:ar(),updatedAt:ar(),isActive:!0,dailyTabCounter:0,lastTabReset:ar()};return{id:(await Qc(Pt(We,U1),e)).id,...e}}catch(e){throw console.error("Error creating restaurant:",e),new Error("Failed to create restaurant")}},P2=async n=>{try{const e=Gn(Pt(We,U1),Mt("ownerId","==",n),cw(1)),t=await Jo(e);if(t.empty)return null;const r=t.docs[0];return{id:r.id,...r.data()}}catch(e){throw console.error("Error getting restaurant by owner:",e),e}},fI=async n=>{try{const e=sr(We,U1,n),t=await xl(e);return t.exists()?{id:t.id,...t.data()}:null}catch(e){throw console.error("Error getting restaurant by ID:",e),e}},DT=async()=>{try{console.log("Testing Firestore connection...");const n=sr(We,"connectionTest","test");return await Fp(n,{timestamp:new Date().toISOString()},{merge:!0}),console.log("Firestore connection successful"),!0}catch(n){return console.error("Firestore connection test failed:",n),!1}},hI=async()=>{try{console.log("[checkWaitersCollection] Fetching all waiters...");const n=Pt(We,ua),e=await Jo(n),t=[];return e.forEach(r=>{console.log(`[checkWaitersCollection] Found waiter ${r.id}:`,r.data()),t.push({id:r.id,...r.data()})}),console.log(`[checkWaitersCollection] Returning ${t.length} waiters`),t}catch(n){throw console.error("[checkWaitersCollection] Error:",n),n}},MB=async(n,e)=>{try{if(!n||e===void 0||e===null)return console.error("Missing required parameters for getWaiterByPin"),null;const t=e.toString();console.log(`Looking for waiter with PIN: ${t} (type: ${typeof t})`);const r=Gn(Pt(We,ua),Mt("restaurantId","==",n),Mt("pin","==",t),cw(1)),i=await Jo(r);if(i.empty){console.log("No waiter found with the provided PIN");const a=Gn(Pt(We,ua),Mt("restaurantId","==",n)),c=await Jo(a);return console.log("All waiters in this restaurant:"),c.forEach(u=>{console.log(`- ${u.data().name}: PIN='${u.data().pin}' (type: ${typeof u.data().pin})`)}),null}const o=i.docs[0];return{id:o.id,...o.data()}}catch(t){throw console.error("Error getting waiter by PIN:",t),t}},PT=async n=>{try{if(!n)return console.error("No waiter ID provided"),null;const e=sr(We,ua,n),t=await xl(e);return t.exists()?{id:t.id,...t.data()}:(console.log("No waiter found with ID:",n),null)}catch(e){throw console.error("Error getting waiter by ID:",e),e}},kB=async n=>{if(console.log(`[getWaiters] Starting to fetch waiters for restaurant: ${n}`),!n)throw console.error("[getWaiters] No restaurantId provided"),new Error("Restaurant ID is required to fetch waiters");try{console.log(`[getWaiters] Querying waiters for restaurant: ${n}`);const e=Gn(Pt(We,ua),Mt("restaurantId","==",n),ca("name")),t=await Jo(e);return console.log(`[getWaiters] Found ${t.docs.length} waiters for restaurant ${n}`),t.docs.map(i=>{const o=i.data();return console.log(`[getWaiters] Waiter ${i.id}:`,o),{id:i.id,...o}})}catch(e){console.error("[getWaiters] Error in main query:",e);try{console.log("[getWaiters] Falling back to client-side filtering");const t=await hI();console.log(`[getWaiters] Found ${t.length} total waiters in collection`);const r=t.filter(i=>i.restaurantId===n);return console.log(`[getWaiters] Filtered to ${r.length} waiters for restaurant ${n}`),r}catch(t){throw console.error("[getWaiters] Error in fallback query:",t),new Error(`Failed to load waiters: ${t.message}`)}}},LB=async n=>{try{const e={...CB.create(n),createdAt:ar(),updatedAt:ar()};return{id:(await Qc(Pt(We,ua),e)).id,...e}}catch(e){throw console.error("Error creating waiter:",e),e}},jB=(n,e)=>{console.log("subscribeToWaiters called with restaurantId:",n);try{const t=Gn(Pt(We,ua),Mt("restaurantId","==",n),ca("name","asc"));return console.log("Query created, setting up snapshot listener..."),hi(t,r=>{console.log("Received waiters snapshot with",r.size,"documents");const i=r.docs.map(o=>({id:o.id,...o.data()}));console.log("Mapped waiters:",i),e(i)},r=>{console.error("Error in waiters snapshot listener:",r),e([])})}catch(t){throw console.error("Error in subscribeToWaiters:",t),e([]),t}},VB=async n=>{try{await dw(sr(We,ua,n))}catch(e){throw console.error("Error deleting waiter:",e),e}},BB=async n=>{try{console.log("Creating menu item with data:",n);const e={...D2.create(n),createdAt:ar(),updatedAt:ar()};console.log("Processed menu item data:",e);const t=await Qc(Pt(We,Cw),e);return console.log("Menu item created with ID:",t.id),{id:t.id,...e}}catch(e){throw console.error("Error creating menu item:",e),e}},FB=async(n,e)=>{try{console.log("Updating menu item:",n,"with data:",e);const t=sr(We,Cw,n),r={...e,updatedAt:ar()};console.log("Final update data with timestamp:",r),await k1(t,r),console.log("Menu item updated successfully");const i=await xl(t);return i.exists()?{id:i.id,...i.data()}:null}catch(t){throw console.error("Error in updateMenuItem:",{error:t,itemId:n,itemData:e,errorMessage:t.message,errorStack:t.stack}),t}},UB=async n=>{try{await dw(sr(We,Cw,n))}catch(e){throw console.error("Error deleting menu item:",e),e}};function MT(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function zB(...n){return e=>{let t=!1;const r=n.map(i=>{const o=MT(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():MT(n[i],null)}}}}function Kr(...n){return C.useCallback(zB(...n),n)}function Tf(n){const e=HB(n),t=C.forwardRef((r,i)=>{const{children:o,...a}=r,c=C.Children.toArray(o),u=c.find(qB);if(u){const d=u.props.children,h=c.map(p=>p===u?C.Children.count(d)>1?C.Children.only(null):C.isValidElement(d)?d.props.children:null:p);return y.jsx(e,{...a,ref:i,children:C.isValidElement(d)?C.cloneElement(d,void 0,h):null})}return y.jsx(e,{...a,ref:i,children:o})});return t.displayName=`${n}.Slot`,t}var mI=Tf("Slot");function HB(n){const e=C.forwardRef((t,r)=>{const{children:i,...o}=t,a=C.isValidElement(i)?$B(i):void 0,c=Kr(a,r);if(C.isValidElement(i)){const u=WB(o,i.props);return i.type!==C.Fragment&&(u.ref=c),C.cloneElement(i,u)}return C.Children.count(i)>1?C.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var GB=Symbol("radix.slottable");function qB(n){return C.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===GB}function WB(n,e){const t={...e};for(const r in e){const i=n[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?t[r]=(...c)=>{const u=o(...c);return i(...c),u}:i&&(t[r]=i):r==="style"?t[r]={...i,...o}:r==="className"&&(t[r]=[i,o].filter(Boolean).join(" "))}return{...n,...t}}function $B(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function pI(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=pI(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function gI(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=pI(n))&&(r&&(r+=" "),r+=e);return r}const kT=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,LT=gI,Iw=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return LT(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:o}=e,a=Object.keys(i).map(d=>{const h=t==null?void 0:t[d],p=o==null?void 0:o[d];if(h===null)return null;const g=kT(h)||kT(p);return i[d][g]}),c=t&&Object.entries(t).reduce((d,h)=>{let[p,g]=h;return g===void 0||(d[p]=g),d},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:p,className:g,..._}=h;return Object.entries(_).every(E=>{let[A,S]=E;return Array.isArray(S)?S.includes({...o,...c}[A]):{...o,...c}[A]===S})?[...d,p,g]:d},[]);return LT(n,a,u,t==null?void 0:t.class,t==null?void 0:t.className)},Rw="-",XB=n=>{const e=KB(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:a=>{const c=a.split(Rw);return c[0]===""&&c.length!==1&&c.shift(),yI(c,e)||YB(a)},getConflictingClassGroupIds:(a,c)=>{const u=t[a]||[];return c&&r[a]?[...u,...r[a]]:u}}},yI=(n,e)=>{var a;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?yI(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=n.join(Rw);return(a=e.validators.find(({validator:c})=>c(o)))==null?void 0:a.classGroupId},jT=/^\[(.+)\]$/,YB=n=>{if(jT.test(n)){const e=jT.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},KB=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)M2(t[i],r,i,e);return r},M2=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const o=i===""?e:VT(e,i);o.classGroupId=t;return}if(typeof i=="function"){if(QB(i)){M2(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([o,a])=>{M2(a,VT(e,o),t,r)})})},VT=(n,e)=>{let t=n;return e.split(Rw).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},QB=n=>n.isThemeGetter,ZB=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(o,a)=>{t.set(o,a),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let a=t.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set(o,a){t.has(o)?t.set(o,a):i(o,a)}}},k2="!",L2=":",JB=L2.length,eF=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const o=[];let a=0,c=0,u=0,d;for(let E=0;E<i.length;E++){let A=i[E];if(a===0&&c===0){if(A===L2){o.push(i.slice(u,E)),u=E+JB;continue}if(A==="/"){d=E;continue}}A==="["?a++:A==="]"?a--:A==="("?c++:A===")"&&c--}const h=o.length===0?i:i.substring(u),p=tF(h),g=p!==h,_=d&&d>u?d-u:void 0;return{modifiers:o,hasImportantModifier:g,baseClassName:p,maybePostfixModifierPosition:_}};if(e){const i=e+L2,o=r;r=a=>a.startsWith(i)?o(a.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=o=>t({className:o,parseClassName:i})}return r},tF=n=>n.endsWith(k2)?n.substring(0,n.length-1):n.startsWith(k2)?n.substring(1):n,nF=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(a=>{a[0]==="["||e[a]?(i.push(...o.sort(),a),o=[]):o.push(a)}),i.push(...o.sort()),i}},rF=n=>({cache:ZB(n.cacheSize),parseClassName:eF(n),sortModifiers:nF(n),...XB(n)}),iF=/\s+/,oF=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,a=[],c=n.trim().split(iF);let u="";for(let d=c.length-1;d>=0;d-=1){const h=c[d],{isExternal:p,modifiers:g,hasImportantModifier:_,baseClassName:E,maybePostfixModifierPosition:A}=t(h);if(p){u=h+(u.length>0?" "+u:u);continue}let S=!!A,x=r(S?E.substring(0,A):E);if(!x){if(!S){u=h+(u.length>0?" "+u:u);continue}if(x=r(E),!x){u=h+(u.length>0?" "+u:u);continue}S=!1}const O=o(g).join(":"),P=_?O+k2:O,D=P+x;if(a.includes(D))continue;a.push(D);const j=i(x,S);for(let H=0;H<j.length;++H){const M=j[H];a.push(P+M)}u=h+(u.length>0?" "+u:u)}return u};function sF(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=vI(e))&&(r&&(r+=" "),r+=t);return r}const vI=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=vI(n[r]))&&(t&&(t+=" "),t+=e);return t};function aF(n,...e){let t,r,i,o=a;function a(u){const d=e.reduce((h,p)=>p(h),n());return t=rF(d),r=t.cache.get,i=t.cache.set,o=c,c(u)}function c(u){const d=r(u);if(d)return d;const h=oF(u,t);return i(u,h),h}return function(){return o(sF.apply(null,arguments))}}const Sn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},wI=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,_I=/^\((?:(\w[\w-]*):)?(.+)\)$/i,lF=/^\d+\/\d+$/,cF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,fF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wc=n=>lF.test(n),Ke=n=>!!n&&!Number.isNaN(Number(n)),js=n=>!!n&&Number.isInteger(Number(n)),vy=n=>n.endsWith("%")&&Ke(n.slice(0,-1)),Fo=n=>cF.test(n),mF=()=>!0,pF=n=>uF.test(n)&&!dF.test(n),bI=()=>!1,gF=n=>fF.test(n),yF=n=>hF.test(n),vF=n=>!Te(n)&&!Se(n),wF=n=>_u(n,TI,bI),Te=n=>wI.test(n),Qa=n=>_u(n,SI,pF),wy=n=>_u(n,TF,Ke),BT=n=>_u(n,EI,bI),_F=n=>_u(n,AI,yF),km=n=>_u(n,xI,gF),Se=n=>_I.test(n),Vd=n=>bu(n,SI),bF=n=>bu(n,SF),FT=n=>bu(n,EI),EF=n=>bu(n,TI),AF=n=>bu(n,AI),Lm=n=>bu(n,xI,!0),_u=(n,e,t)=>{const r=wI.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},bu=(n,e,t=!1)=>{const r=_I.exec(n);return r?r[1]?e(r[1]):t:!1},EI=n=>n==="position"||n==="percentage",AI=n=>n==="image"||n==="url",TI=n=>n==="length"||n==="size"||n==="bg-size",SI=n=>n==="length",TF=n=>n==="number",SF=n=>n==="family-name",xI=n=>n==="shadow",xF=()=>{const n=Sn("color"),e=Sn("font"),t=Sn("text"),r=Sn("font-weight"),i=Sn("tracking"),o=Sn("leading"),a=Sn("breakpoint"),c=Sn("container"),u=Sn("spacing"),d=Sn("radius"),h=Sn("shadow"),p=Sn("inset-shadow"),g=Sn("text-shadow"),_=Sn("drop-shadow"),E=Sn("blur"),A=Sn("perspective"),S=Sn("aspect"),x=Sn("ease"),O=Sn("animate"),P=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...D(),Se,Te],H=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],R=()=>[Se,Te,u],k=()=>[wc,"full","auto",...R()],U=()=>[js,"none","subgrid",Se,Te],z=()=>["auto",{span:["full",js,Se,Te]},js,Se,Te],q=()=>[js,"auto",Se,Te],F=()=>["auto","min","max","fr",Se,Te],Ce=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ee=()=>["start","end","center","stretch","center-safe","end-safe"],Q=()=>["auto",...R()],me=()=>[wc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],ue=()=>[n,Se,Te],De=()=>[...D(),FT,BT,{position:[Se,Te]}],W=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Y=()=>["auto","cover","contain",EF,wF,{size:[Se,Te]}],oe=()=>[vy,Vd,Qa],te=()=>["","none","full",d,Se,Te],se=()=>["",Ke,Vd,Qa],pe=()=>["solid","dashed","dotted","double"],ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ke=()=>[Ke,vy,FT,BT],$e=()=>["","none",E,Se,Te],Zt=()=>["none",Ke,Se,Te],mt=()=>["none",Ke,Se,Te],Ie=()=>[Ke,Se,Te],Le=()=>[wc,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Fo],breakpoint:[Fo],color:[mF],container:[Fo],"drop-shadow":[Fo],ease:["in","out","in-out"],font:[vF],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Fo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Fo],shadow:[Fo],spacing:["px",Ke],text:[Fo],"text-shadow":[Fo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",wc,Te,Se,S]}],container:["container"],columns:[{columns:[Ke,Te,Se,c]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:H()}],"overflow-x":[{"overflow-x":H()}],"overflow-y":[{"overflow-y":H()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[js,"auto",Se,Te]}],basis:[{basis:[wc,"full","auto",c,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ke,wc,"auto","initial","none",Te]}],grow:[{grow:["",Ke,Se,Te]}],shrink:[{shrink:["",Ke,Se,Te]}],order:[{order:[js,"first","last","none",Se,Te]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:z()}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:z()}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":F()}],"auto-rows":[{"auto-rows":F()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...Ce(),"normal"]}],"justify-items":[{"justify-items":[...Ee(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ee()]}],"align-content":[{content:["normal",...Ce()]}],"align-items":[{items:[...Ee(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ee(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ce()}],"place-items":[{"place-items":[...Ee(),"baseline"]}],"place-self":[{"place-self":["auto",...Ee()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:Q()}],mx:[{mx:Q()}],my:[{my:Q()}],ms:[{ms:Q()}],me:[{me:Q()}],mt:[{mt:Q()}],mr:[{mr:Q()}],mb:[{mb:Q()}],ml:[{ml:Q()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:me()}],w:[{w:[c,"screen",...me()]}],"min-w":[{"min-w":[c,"screen","none",...me()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[a]},...me()]}],h:[{h:["screen","lh",...me()]}],"min-h":[{"min-h":["screen","lh","none",...me()]}],"max-h":[{"max-h":["screen","lh",...me()]}],"font-size":[{text:["base",t,Vd,Qa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Se,wy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",vy,Te]}],"font-family":[{font:[bF,Te,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Se,Te]}],"line-clamp":[{"line-clamp":[Ke,"none",Se,wy]}],leading:[{leading:[o,...R()]}],"list-image":[{"list-image":["none",Se,Te]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Se,Te]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ue()}],"text-color":[{text:ue()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ke,"from-font","auto",Se,Qa]}],"text-decoration-color":[{decoration:ue()}],"underline-offset":[{"underline-offset":[Ke,"auto",Se,Te]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Se,Te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Se,Te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:De()}],"bg-repeat":[{bg:W()}],"bg-size":[{bg:Y()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},js,Se,Te],radial:["",Se,Te],conic:[js,Se,Te]},AF,_F]}],"bg-color":[{bg:ue()}],"gradient-from-pos":[{from:oe()}],"gradient-via-pos":[{via:oe()}],"gradient-to-pos":[{to:oe()}],"gradient-from":[{from:ue()}],"gradient-via":[{via:ue()}],"gradient-to":[{to:ue()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:se()}],"border-w-x":[{"border-x":se()}],"border-w-y":[{"border-y":se()}],"border-w-s":[{"border-s":se()}],"border-w-e":[{"border-e":se()}],"border-w-t":[{"border-t":se()}],"border-w-r":[{"border-r":se()}],"border-w-b":[{"border-b":se()}],"border-w-l":[{"border-l":se()}],"divide-x":[{"divide-x":se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pe(),"hidden","none"]}],"divide-style":[{divide:[...pe(),"hidden","none"]}],"border-color":[{border:ue()}],"border-color-x":[{"border-x":ue()}],"border-color-y":[{"border-y":ue()}],"border-color-s":[{"border-s":ue()}],"border-color-e":[{"border-e":ue()}],"border-color-t":[{"border-t":ue()}],"border-color-r":[{"border-r":ue()}],"border-color-b":[{"border-b":ue()}],"border-color-l":[{"border-l":ue()}],"divide-color":[{divide:ue()}],"outline-style":[{outline:[...pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ke,Se,Te]}],"outline-w":[{outline:["",Ke,Vd,Qa]}],"outline-color":[{outline:ue()}],shadow:[{shadow:["","none",h,Lm,km]}],"shadow-color":[{shadow:ue()}],"inset-shadow":[{"inset-shadow":["none",p,Lm,km]}],"inset-shadow-color":[{"inset-shadow":ue()}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ue()}],"ring-offset-w":[{"ring-offset":[Ke,Qa]}],"ring-offset-color":[{"ring-offset":ue()}],"inset-ring-w":[{"inset-ring":se()}],"inset-ring-color":[{"inset-ring":ue()}],"text-shadow":[{"text-shadow":["none",g,Lm,km]}],"text-shadow-color":[{"text-shadow":ue()}],opacity:[{opacity:[Ke,Se,Te]}],"mix-blend":[{"mix-blend":[...ge(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ge()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ke]}],"mask-image-linear-from-pos":[{"mask-linear-from":ke()}],"mask-image-linear-to-pos":[{"mask-linear-to":ke()}],"mask-image-linear-from-color":[{"mask-linear-from":ue()}],"mask-image-linear-to-color":[{"mask-linear-to":ue()}],"mask-image-t-from-pos":[{"mask-t-from":ke()}],"mask-image-t-to-pos":[{"mask-t-to":ke()}],"mask-image-t-from-color":[{"mask-t-from":ue()}],"mask-image-t-to-color":[{"mask-t-to":ue()}],"mask-image-r-from-pos":[{"mask-r-from":ke()}],"mask-image-r-to-pos":[{"mask-r-to":ke()}],"mask-image-r-from-color":[{"mask-r-from":ue()}],"mask-image-r-to-color":[{"mask-r-to":ue()}],"mask-image-b-from-pos":[{"mask-b-from":ke()}],"mask-image-b-to-pos":[{"mask-b-to":ke()}],"mask-image-b-from-color":[{"mask-b-from":ue()}],"mask-image-b-to-color":[{"mask-b-to":ue()}],"mask-image-l-from-pos":[{"mask-l-from":ke()}],"mask-image-l-to-pos":[{"mask-l-to":ke()}],"mask-image-l-from-color":[{"mask-l-from":ue()}],"mask-image-l-to-color":[{"mask-l-to":ue()}],"mask-image-x-from-pos":[{"mask-x-from":ke()}],"mask-image-x-to-pos":[{"mask-x-to":ke()}],"mask-image-x-from-color":[{"mask-x-from":ue()}],"mask-image-x-to-color":[{"mask-x-to":ue()}],"mask-image-y-from-pos":[{"mask-y-from":ke()}],"mask-image-y-to-pos":[{"mask-y-to":ke()}],"mask-image-y-from-color":[{"mask-y-from":ue()}],"mask-image-y-to-color":[{"mask-y-to":ue()}],"mask-image-radial":[{"mask-radial":[Se,Te]}],"mask-image-radial-from-pos":[{"mask-radial-from":ke()}],"mask-image-radial-to-pos":[{"mask-radial-to":ke()}],"mask-image-radial-from-color":[{"mask-radial-from":ue()}],"mask-image-radial-to-color":[{"mask-radial-to":ue()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":D()}],"mask-image-conic-pos":[{"mask-conic":[Ke]}],"mask-image-conic-from-pos":[{"mask-conic-from":ke()}],"mask-image-conic-to-pos":[{"mask-conic-to":ke()}],"mask-image-conic-from-color":[{"mask-conic-from":ue()}],"mask-image-conic-to-color":[{"mask-conic-to":ue()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:De()}],"mask-repeat":[{mask:W()}],"mask-size":[{mask:Y()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Se,Te]}],filter:[{filter:["","none",Se,Te]}],blur:[{blur:$e()}],brightness:[{brightness:[Ke,Se,Te]}],contrast:[{contrast:[Ke,Se,Te]}],"drop-shadow":[{"drop-shadow":["","none",_,Lm,km]}],"drop-shadow-color":[{"drop-shadow":ue()}],grayscale:[{grayscale:["",Ke,Se,Te]}],"hue-rotate":[{"hue-rotate":[Ke,Se,Te]}],invert:[{invert:["",Ke,Se,Te]}],saturate:[{saturate:[Ke,Se,Te]}],sepia:[{sepia:["",Ke,Se,Te]}],"backdrop-filter":[{"backdrop-filter":["","none",Se,Te]}],"backdrop-blur":[{"backdrop-blur":$e()}],"backdrop-brightness":[{"backdrop-brightness":[Ke,Se,Te]}],"backdrop-contrast":[{"backdrop-contrast":[Ke,Se,Te]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ke,Se,Te]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ke,Se,Te]}],"backdrop-invert":[{"backdrop-invert":["",Ke,Se,Te]}],"backdrop-opacity":[{"backdrop-opacity":[Ke,Se,Te]}],"backdrop-saturate":[{"backdrop-saturate":[Ke,Se,Te]}],"backdrop-sepia":[{"backdrop-sepia":["",Ke,Se,Te]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Se,Te]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ke,"initial",Se,Te]}],ease:[{ease:["linear","initial",x,Se,Te]}],delay:[{delay:[Ke,Se,Te]}],animate:[{animate:["none",O,Se,Te]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,Se,Te]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:Zt()}],"rotate-x":[{"rotate-x":Zt()}],"rotate-y":[{"rotate-y":Zt()}],"rotate-z":[{"rotate-z":Zt()}],scale:[{scale:mt()}],"scale-x":[{"scale-x":mt()}],"scale-y":[{"scale-y":mt()}],"scale-z":[{"scale-z":mt()}],"scale-3d":["scale-3d"],skew:[{skew:Ie()}],"skew-x":[{"skew-x":Ie()}],"skew-y":[{"skew-y":Ie()}],transform:[{transform:[Se,Te,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:ue()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ue()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Se,Te]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Se,Te]}],fill:[{fill:["none",...ue()]}],"stroke-w":[{stroke:[Ke,Vd,Qa,wy]}],stroke:[{stroke:["none",...ue()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},CF=aF(xF);function Wt(...n){return CF(gI(n))}const IF=Iw("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function _e({className:n,variant:e,size:t,asChild:r=!1,...i}){const o=r?mI:"button";return y.jsx(o,{"data-slot":"button",className:Wt(IF({variant:e,size:t,className:n})),...i})}function ct({className:n,...e}){return y.jsx("div",{"data-slot":"card",className:Wt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",n),...e})}function Rn({className:n,...e}){return y.jsx("div",{"data-slot":"card-header",className:Wt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),...e})}function Nn({className:n,...e}){return y.jsx("div",{"data-slot":"card-title",className:Wt("leading-none font-semibold",n),...e})}function tr({className:n,...e}){return y.jsx("div",{"data-slot":"card-description",className:Wt("text-muted-foreground text-sm",n),...e})}function Ct({className:n,...e}){return y.jsx("div",{"data-slot":"card-content",className:Wt("px-6",n),...e})}const RF=Iw("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function CI({className:n,variant:e,asChild:t=!1,...r}){const i=t?mI:"span";return y.jsx(i,{"data-slot":"badge",className:Wt(RF({variant:e}),n),...r})}var NF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],wn=NF.reduce((n,e)=>{const t=Tf(`Primitive.${e}`),r=C.forwardRef((i,o)=>{const{asChild:a,...c}=i,u=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(u,{...c,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function OF(n,e){n&&w6.flushSync(()=>n.dispatchEvent(e))}var DF="Separator",UT="horizontal",PF=["horizontal","vertical"],II=C.forwardRef((n,e)=>{const{decorative:t,orientation:r=UT,...i}=n,o=MF(r)?r:UT,c=t?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return y.jsx(wn.div,{"data-orientation":o,...c,...i,ref:e})});II.displayName=DF;function MF(n){return PF.includes(n)}var kF=II;function LF({className:n,orientation:e="horizontal",decorative:t=!0,...r}){return y.jsx(kF,{"data-slot":"separator-root",decorative:t,orientation:e,className:Wt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...r})}const RI=C.createContext({});function jF(n){const e=C.useRef(null);return e.current===null&&(e.current=n()),e.current}const Nw=typeof window<"u",VF=Nw?C.useLayoutEffect:C.useEffect,Ow=C.createContext(null);function Dw(n,e){n.indexOf(e)===-1&&n.push(e)}function Pw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ts=(n,e,t)=>t>e?e:t<n?n:t;let Mw=()=>{};const ns={},NI=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function OI(n){return typeof n=="object"&&n!==null}const DI=n=>/^0[^.\s]+$/u.test(n);function kw(n){let e;return()=>(e===void 0&&(e=n()),e)}const pi=n=>n,BF=(n,e)=>t=>e(n(t)),Qf=(...n)=>n.reduce(BF),Sf=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class Lw{constructor(){this.subscriptions=[]}add(e){return Dw(this.subscriptions,e),()=>Pw(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let o=0;o<i;o++){const a=this.subscriptions[o];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ao=n=>n*1e3,lo=n=>n/1e3;function PI(n,e){return e?n*(1e3/e):0}const MI=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,FF=1e-7,UF=12;function zF(n,e,t,r,i){let o,a,c=0;do a=e+(t-e)/2,o=MI(a,r,i)-n,o>0?t=a:e=a;while(Math.abs(o)>FF&&++c<UF);return a}function Zf(n,e,t,r){if(n===e&&t===r)return pi;const i=o=>zF(o,0,1,n,t);return o=>o===0||o===1?o:MI(i(o),e,r)}const kI=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,LI=n=>e=>1-n(1-e),jI=Zf(.33,1.53,.69,.99),jw=LI(jI),VI=kI(jw),BI=n=>(n*=2)<1?.5*jw(n):.5*(2-Math.pow(2,-10*(n-1))),Vw=n=>1-Math.sin(Math.acos(n)),FI=LI(Vw),UI=kI(Vw),HF=Zf(.42,0,1,1),GF=Zf(0,0,.58,1),zI=Zf(.42,0,.58,1),qF=n=>Array.isArray(n)&&typeof n[0]!="number",HI=n=>Array.isArray(n)&&typeof n[0]=="number",WF={linear:pi,easeIn:HF,easeInOut:zI,easeOut:GF,circIn:Vw,circInOut:UI,circOut:FI,backIn:jw,backInOut:VI,backOut:jI,anticipate:BI},$F=n=>typeof n=="string",zT=n=>{if(HI(n)){Mw(n.length===4);const[e,t,r,i]=n;return Zf(e,t,r,i)}else if($F(n))return WF[n];return n},jm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],HT={value:null};function XF(n,e){let t=new Set,r=new Set,i=!1,o=!1;const a=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},u=0;function d(p){a.has(p)&&(h.schedule(p),n()),u++,p(c)}const h={schedule:(p,g=!1,_=!1)=>{const A=_&&i?t:r;return g&&a.add(p),A.has(p)||A.add(p),p},cancel:p=>{r.delete(p),a.delete(p)},process:p=>{if(c=p,i){o=!0;return}i=!0,[t,r]=[r,t],t.forEach(d),e&&HT.value&&HT.value.frameloop[e].push(u),u=0,t.clear(),i=!1,o&&(o=!1,h.process(p))}};return h}const YF=40;function GI(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,a=jm.reduce((P,D)=>(P[D]=XF(o,e?D:void 0),P),{}),{setup:c,read:u,resolveKeyframes:d,preUpdate:h,update:p,preRender:g,render:_,postRender:E}=a,A=()=>{const P=ns.useManualTiming?i.timestamp:performance.now();t=!1,ns.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(P-i.timestamp,YF),1)),i.timestamp=P,i.isProcessing=!0,c.process(i),u.process(i),d.process(i),h.process(i),p.process(i),g.process(i),_.process(i),E.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(A))},S=()=>{t=!0,r=!0,i.isProcessing||n(A)};return{schedule:jm.reduce((P,D)=>{const j=a[D];return P[D]=(H,M=!1,R=!1)=>(t||S(),j.schedule(H,M,R)),P},{}),cancel:P=>{for(let D=0;D<jm.length;D++)a[jm[D]].cancel(P)},state:i,steps:a}}const{schedule:Gt,cancel:da,state:Jn,steps:_y}=GI(typeof requestAnimationFrame<"u"?requestAnimationFrame:pi,!0);let hp;function KF(){hp=void 0}const Dr={now:()=>(hp===void 0&&Dr.set(Jn.isProcessing||ns.useManualTiming?Jn.timestamp:performance.now()),hp),set:n=>{hp=n,queueMicrotask(KF)}},qI=n=>e=>typeof e=="string"&&e.startsWith(n),Bw=qI("--"),QF=qI("var(--"),Fw=n=>QF(n)?ZF.test(n.split("/*")[0].trim()):!1,ZF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Eu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},xf={...Eu,transform:n=>ts(0,1,n)},Vm={...Eu,default:1},of=n=>Math.round(n*1e5)/1e5,Uw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function JF(n){return n==null}const eU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,zw=(n,e)=>t=>!!(typeof t=="string"&&eU.test(t)&&t.startsWith(n)||e&&!JF(t)&&Object.prototype.hasOwnProperty.call(t,e)),WI=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,o,a,c]=r.match(Uw);return{[n]:parseFloat(i),[e]:parseFloat(o),[t]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},tU=n=>ts(0,255,n),by={...Eu,transform:n=>Math.round(tU(n))},cl={test:zw("rgb","red"),parse:WI("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+by.transform(n)+", "+by.transform(e)+", "+by.transform(t)+", "+of(xf.transform(r))+")"};function nU(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const j2={test:zw("#"),parse:nU,transform:cl.transform},Jf=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Us=Jf("deg"),co=Jf("%"),ze=Jf("px"),rU=Jf("vh"),iU=Jf("vw"),GT={...co,parse:n=>co.parse(n)/100,transform:n=>co.transform(n*100)},Ic={test:zw("hsl","hue"),parse:WI("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+co.transform(of(e))+", "+co.transform(of(t))+", "+of(xf.transform(r))+")"},fr={test:n=>cl.test(n)||j2.test(n)||Ic.test(n),parse:n=>cl.test(n)?cl.parse(n):Ic.test(n)?Ic.parse(n):j2.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?cl.transform(n):Ic.transform(n)},oU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function sU(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Uw))==null?void 0:e.length)||0)+(((t=n.match(oU))==null?void 0:t.length)||0)>0}const $I="number",XI="color",aU="var",lU="var(",qT="${}",cU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Cf(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let o=0;const c=e.replace(cU,u=>(fr.test(u)?(r.color.push(o),i.push(XI),t.push(fr.parse(u))):u.startsWith(lU)?(r.var.push(o),i.push(aU),t.push(u)):(r.number.push(o),i.push($I),t.push(parseFloat(u))),++o,qT)).split(qT);return{values:t,split:c,indexes:r,types:i}}function YI(n){return Cf(n).values}function KI(n){const{split:e,types:t}=Cf(n),r=e.length;return i=>{let o="";for(let a=0;a<r;a++)if(o+=e[a],i[a]!==void 0){const c=t[a];c===$I?o+=of(i[a]):c===XI?o+=fr.transform(i[a]):o+=i[a]}return o}}const uU=n=>typeof n=="number"?0:n;function dU(n){const e=YI(n);return KI(n)(e.map(uU))}const fa={test:sU,parse:YI,createTransformer:KI,getAnimatableNone:dU};function Ey(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function fU({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,o=0,a=0;if(!e)i=o=a=t;else{const c=t<.5?t*(1+e):t+e-t*e,u=2*t-c;i=Ey(u,c,n+1/3),o=Ey(u,c,n),a=Ey(u,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function Qp(n,e){return t=>t>0?e:n}const Ht=(n,e,t)=>n+(e-n)*t,Ay=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},hU=[j2,cl,Ic],mU=n=>hU.find(e=>e.test(n));function WT(n){const e=mU(n);if(!e)return!1;let t=e.parse(n);return e===Ic&&(t=fU(t)),t}const $T=(n,e)=>{const t=WT(n),r=WT(e);if(!t||!r)return Qp(n,e);const i={...t};return o=>(i.red=Ay(t.red,r.red,o),i.green=Ay(t.green,r.green,o),i.blue=Ay(t.blue,r.blue,o),i.alpha=Ht(t.alpha,r.alpha,o),cl.transform(i))},V2=new Set(["none","hidden"]);function pU(n,e){return V2.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function gU(n,e){return t=>Ht(n,e,t)}function Hw(n){return typeof n=="number"?gU:typeof n=="string"?Fw(n)?Qp:fr.test(n)?$T:wU:Array.isArray(n)?QI:typeof n=="object"?fr.test(n)?$T:yU:Qp}function QI(n,e){const t=[...n],r=t.length,i=n.map((o,a)=>Hw(o)(o,e[a]));return o=>{for(let a=0;a<r;a++)t[a]=i[a](o);return t}}function yU(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=Hw(n[i])(n[i],e[i]));return i=>{for(const o in r)t[o]=r[o](i);return t}}function vU(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=n.indexes[o][r[o]],c=n.values[a]??0;t[i]=c,r[o]++}return t}const wU=(n,e)=>{const t=fa.createTransformer(e),r=Cf(n),i=Cf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?V2.has(n)&&!i.values.length||V2.has(e)&&!r.values.length?pU(n,e):Qf(QI(vU(r,i),i.values),t):Qp(n,e)};function ZI(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Ht(n,e,t):Hw(n)(n,e)}const _U=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Gt.update(e,t),stop:()=>da(e),now:()=>Jn.isProcessing?Jn.timestamp:Dr.now()}},JI=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let o=0;o<i;o++)r+=n(o/(i-1))+", ";return`linear(${r.substring(0,r.length-2)})`},Zp=2e4;function Gw(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Zp;)e+=t,r=n.next(e);return e>=Zp?1/0:e}function bU(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(Gw(r),Zp);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:lo(i)}}const EU=5;function e8(n,e,t){const r=Math.max(e-EU,0);return PI(t-n(r),e-r)}const Qt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},XT=.001;function AU({duration:n=Qt.duration,bounce:e=Qt.bounce,velocity:t=Qt.velocity,mass:r=Qt.mass}){let i,o,a=1-e;a=ts(Qt.minDamping,Qt.maxDamping,a),n=ts(Qt.minDuration,Qt.maxDuration,lo(n)),a<1?(i=d=>{const h=d*a,p=h*n,g=h-t,_=B2(d,a),E=Math.exp(-p);return XT-g/_*E},o=d=>{const p=d*a*n,g=p*t+t,_=Math.pow(a,2)*Math.pow(d,2)*n,E=Math.exp(-p),A=B2(Math.pow(d,2),a);return(-i(d)+XT>0?-1:1)*((g-_)*E)/A}):(i=d=>{const h=Math.exp(-d*n),p=(d-t)*n+1;return-.001+h*p},o=d=>{const h=Math.exp(-d*n),p=(t-d)*(n*n);return h*p});const c=5/n,u=SU(i,o,c);if(n=ao(n),isNaN(u))return{stiffness:Qt.stiffness,damping:Qt.damping,duration:n};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:a*2*Math.sqrt(r*d),duration:n}}}const TU=12;function SU(n,e,t){let r=t;for(let i=1;i<TU;i++)r=r-n(r)/e(r);return r}function B2(n,e){return n*Math.sqrt(1-e*e)}const xU=["duration","bounce"],CU=["stiffness","damping","mass"];function YT(n,e){return e.some(t=>n[t]!==void 0)}function IU(n){let e={velocity:Qt.velocity,stiffness:Qt.stiffness,damping:Qt.damping,mass:Qt.mass,isResolvedFromDuration:!1,...n};if(!YT(n,CU)&&YT(n,xU))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,o=2*ts(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Qt.mass,stiffness:i,damping:o}}else{const t=AU(n);e={...e,...t,mass:Qt.mass},e.isResolvedFromDuration=!0}return e}function Jp(n=Qt.visualDuration,e=Qt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const o=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],c={done:!1,value:o},{stiffness:u,damping:d,mass:h,duration:p,velocity:g,isResolvedFromDuration:_}=IU({...t,velocity:-lo(t.velocity||0)}),E=g||0,A=d/(2*Math.sqrt(u*h)),S=a-o,x=lo(Math.sqrt(u/h)),O=Math.abs(S)<5;r||(r=O?Qt.restSpeed.granular:Qt.restSpeed.default),i||(i=O?Qt.restDelta.granular:Qt.restDelta.default);let P;if(A<1){const j=B2(x,A);P=H=>{const M=Math.exp(-A*x*H);return a-M*((E+A*x*S)/j*Math.sin(j*H)+S*Math.cos(j*H))}}else if(A===1)P=j=>a-Math.exp(-x*j)*(S+(E+x*S)*j);else{const j=x*Math.sqrt(A*A-1);P=H=>{const M=Math.exp(-A*x*H),R=Math.min(j*H,300);return a-M*((E+A*x*S)*Math.sinh(R)+j*S*Math.cosh(R))/j}}const D={calculatedDuration:_&&p||null,next:j=>{const H=P(j);if(_)c.done=j>=p;else{let M=j===0?E:0;A<1&&(M=j===0?ao(E):e8(P,j,H));const R=Math.abs(M)<=r,k=Math.abs(a-H)<=i;c.done=R&&k}return c.value=c.done?a:H,c},toString:()=>{const j=Math.min(Gw(D),Zp),H=JI(M=>D.next(j*M).value,j,30);return j+"ms "+H},toTransition:()=>{}};return D}Jp.applyToOptions=n=>{const e=bU(n,100,Jp);return n.ease=e.ease,n.duration=ao(e.duration),n.type="keyframes",n};function F2({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:c,max:u,restDelta:d=.5,restSpeed:h}){const p=n[0],g={done:!1,value:p},_=R=>c!==void 0&&R<c||u!==void 0&&R>u,E=R=>c===void 0?u:u===void 0||Math.abs(c-R)<Math.abs(u-R)?c:u;let A=t*e;const S=p+A,x=a===void 0?S:a(S);x!==S&&(A=x-p);const O=R=>-A*Math.exp(-R/r),P=R=>x+O(R),D=R=>{const k=O(R),U=P(R);g.done=Math.abs(k)<=d,g.value=g.done?x:U};let j,H;const M=R=>{_(g.value)&&(j=R,H=Jp({keyframes:[g.value,E(g.value)],velocity:e8(P,R,g.value),damping:i,stiffness:o,restDelta:d,restSpeed:h}))};return M(0),{calculatedDuration:null,next:R=>{let k=!1;return!H&&j===void 0&&(k=!0,D(R),M(R)),j!==void 0&&R>=j?H.next(R-j):(!k&&D(R),g)}}}function RU(n,e,t){const r=[],i=t||ns.mix||ZI,o=n.length-1;for(let a=0;a<o;a++){let c=i(n[a],n[a+1]);if(e){const u=Array.isArray(e)?e[a]||pi:e;c=Qf(u,c)}r.push(c)}return r}function NU(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const o=n.length;if(Mw(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=RU(e,r,i),u=c.length,d=h=>{if(a&&h<n[0])return e[0];let p=0;if(u>1)for(;p<n.length-2&&!(h<n[p+1]);p++);const g=Sf(n[p],n[p+1],h);return c[p](g)};return t?h=>d(ts(n[0],n[o-1],h)):d}function OU(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Sf(0,e,r);n.push(Ht(t,1,i))}}function DU(n){const e=[0];return OU(e,n.length-1),e}function PU(n,e){return n.map(t=>t*e)}function MU(n,e){return n.map(()=>e||zI).splice(0,n.length-1)}function sf({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=qF(r)?r.map(zT):zT(r),o={done:!1,value:e[0]},a=PU(t&&t.length===e.length?t:DU(e),n),c=NU(a,e,{ease:Array.isArray(i)?i:MU(e,i)});return{calculatedDuration:n,next:u=>(o.value=c(u),o.done=u>=n,o)}}const kU=n=>n!==null;function qw(n,{repeat:e,repeatType:t="loop"},r,i=1){const o=n.filter(kU),c=i<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!c||r===void 0?o[c]:r}const LU={decay:F2,inertia:F2,tween:sf,keyframes:sf,spring:Jp};function t8(n){typeof n.type=="string"&&(n.type=LU[n.type])}class Ww{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const jU=n=>n/100;class $w extends Ww{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:t}=this.options;t&&t.updatedAt!==Dr.now()&&this.tick(Dr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;t8(e);const{type:t=sf,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:a=0}=e;let{keyframes:c}=e;const u=t||sf;u!==sf&&typeof c[0]!="number"&&(this.mixKeyframes=Qf(jU,ZI(c[0],c[1])),c=[0,100]);const d=u({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-a})),d.calculatedDuration===null&&(d.calculatedDuration=Gw(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:g,repeatDelay:_,type:E,onUpdate:A,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const x=this.currentTime-d*(this.playbackSpeed>=0?1:-1),O=this.playbackSpeed>=0?x<0:x>i;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let P=this.currentTime,D=r;if(p){const R=Math.min(this.currentTime,i)/c;let k=Math.floor(R),U=R%1;!U&&R>=1&&(U=1),U===1&&k--,k=Math.min(k,p+1),!!(k%2)&&(g==="reverse"?(U=1-U,_&&(U-=_/c)):g==="mirror"&&(D=a)),P=ts(0,1,U)*c}const j=O?{done:!1,value:h[0]}:D.next(P);o&&(j.value=o(j.value));let{done:H}=j;!O&&u!==null&&(H=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return M&&E!==F2&&(j.value=qw(h,this.options,S,this.speed)),A&&A(j.value),M&&this.finish(),j}then(e,t){return this.finished.then(e,t)}get duration(){return lo(this.calculatedDuration)}get time(){return lo(this.currentTime)}set time(e){var t;e=ao(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Dr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=lo(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:e=_U,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(o=(i=this.options).onPlay)==null||o.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Dr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function VU(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const ul=n=>n*180/Math.PI,U2=n=>{const e=ul(Math.atan2(n[1],n[0]));return z2(e)},BU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:U2,rotateZ:U2,skewX:n=>ul(Math.atan(n[1])),skewY:n=>ul(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},z2=n=>(n=n%360,n<0&&(n+=360),n),KT=U2,QT=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),ZT=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),FU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:QT,scaleY:ZT,scale:n=>(QT(n)+ZT(n))/2,rotateX:n=>z2(ul(Math.atan2(n[6],n[5]))),rotateY:n=>z2(ul(Math.atan2(-n[2],n[0]))),rotateZ:KT,rotate:KT,skewX:n=>ul(Math.atan(n[4])),skewY:n=>ul(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function H2(n){return n.includes("scale")?1:0}function G2(n,e){if(!n||n==="none")return H2(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=FU,i=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=BU,i=c}if(!i)return H2(e);const o=r[e],a=i[1].split(",").map(zU);return typeof o=="function"?o(a):a[o]}const UU=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return G2(t,e)};function zU(n){return parseFloat(n.trim())}const Au=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Tu=new Set(Au),JT=n=>n===Eu||n===ze,HU=new Set(["x","y","z"]),GU=Au.filter(n=>!HU.has(n));function qU(n){const e=[];return GU.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const fl={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>G2(e,"x"),y:(n,{transform:e})=>G2(e,"y")};fl.translateX=fl.x;fl.translateY=fl.y;const hl=new Set;let q2=!1,W2=!1,$2=!1;function n8(){if(W2){const n=Array.from(hl).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=qU(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([o,a])=>{var c;(c=r.getValue(o))==null||c.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}W2=!1,q2=!1,hl.forEach(n=>n.complete($2)),hl.clear()}function r8(){hl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(W2=!0)})}function WU(){$2=!0,r8(),n8(),$2=!1}class Xw{constructor(e,t,r,i,o,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(hl.add(this),q2||(q2=!0,Gt.read(r8),Gt.resolveKeyframes(n8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const c=r.readValue(t,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}VU(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),hl.delete(this)}cancel(){this.state==="scheduled"&&(hl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const $U=n=>n.startsWith("--");function XU(n,e,t){$U(e)?n.style.setProperty(e,t):n.style[e]=t}const YU=kw(()=>window.ScrollTimeline!==void 0),KU={};function QU(n,e){const t=kw(n);return()=>KU[e]??t()}const i8=QU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$d=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,e3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$d([0,.65,.55,1]),circOut:$d([.55,0,1,.45]),backIn:$d([.31,.01,.66,-.59]),backOut:$d([.33,1.53,.69,.99])};function o8(n,e){if(n)return typeof n=="function"?i8()?JI(n,e):"ease-out":HI(n)?$d(n):Array.isArray(n)?n.map(t=>o8(t,e)||e3.easeOut):e3[n]}function ZU(n,e,t,{delay:r=0,duration:i=300,repeat:o=0,repeatType:a="loop",ease:c="easeOut",times:u}={},d=void 0){const h={[e]:t};u&&(h.offset=u);const p=o8(c,i);Array.isArray(p)&&(h.easing=p);const g={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"};return d&&(g.pseudoElement=d),n.animate(h,g)}function s8(n){return typeof n=="function"&&"applyToOptions"in n}function JU({type:n,...e}){return s8(n)&&i8()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class ez extends Ww{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!o,this.allowFlatten=a,this.options=e,Mw(typeof e.type!="string");const d=JU(e);this.animation=ZU(t,r,i,d,o),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const h=qw(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(h):XU(t,r,h),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return lo(Number(e))}get time(){return lo(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ao(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&YU()?(this.animation.timeline=e,pi):t(this)}}const a8={anticipate:BI,backInOut:VI,circInOut:UI};function tz(n){return n in a8}function nz(n){typeof n.ease=="string"&&tz(n.ease)&&(n.ease=a8[n.ease])}const t3=10;class rz extends ez{constructor(e){nz(e),t8(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:o,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new $w({...a,autoplay:!1}),u=ao(this.finishedTime??this.time);t.setWithVelocity(c.sample(u-t3).value,c.sample(u).value,t3),c.stop()}}const n3=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(fa.test(n)||n==="0")&&!n.startsWith("url("));function iz(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function oz(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],a=n3(i,e),c=n3(o,e);return!a||!c?!1:iz(n)||(t==="spring"||s8(t))&&r}function l8(n){return OI(n)&&"offsetHeight"in n}const sz=new Set(["opacity","clipPath","filter","transform"]),az=kw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function lz(n){var d;const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:o,type:a}=n;if(!l8((d=e==null?void 0:e.owner)==null?void 0:d.current))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return az()&&t&&sz.has(t)&&(t!=="transform"||!u)&&!c&&!r&&i!=="mirror"&&o!==0&&a!=="inertia"}const cz=40;class uz extends Ww{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",keyframes:c,name:u,motionValue:d,element:h,...p}){var E;super(),this.stop=()=>{var A,S;this._animation&&(this._animation.stop(),(A=this.stopTimeline)==null||A.call(this)),(S=this.keyframeResolver)==null||S.cancel()},this.createdAt=Dr.now();const g={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:o,repeatType:a,name:u,motionValue:d,element:h,...p},_=(h==null?void 0:h.KeyframeResolver)||Xw;this.keyframeResolver=new _(c,(A,S,x)=>this.onKeyframesResolved(A,S,g,!x),u,d,h),(E=this.keyframeResolver)==null||E.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:o,type:a,velocity:c,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Dr.now(),oz(e,o,a,c)||((ns.instantAnimations||!u)&&(h==null||h(qw(e,r,t))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>cz?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},_=!d&&lz(g)?new rz({...g,element:g.motionValue.owner.current}):new $w(g);_.finished.then(()=>this.notifyFinished()).catch(pi),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),WU()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const dz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function fz(n){const e=dz.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function c8(n,e,t=1){const[r,i]=fz(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const a=o.trim();return NI(a)?parseFloat(a):a}return Fw(i)?c8(i,e,t+1):i}function Yw(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const u8=new Set(["width","height","top","left","right","bottom",...Au]),hz={test:n=>n==="auto",parse:n=>n},d8=n=>e=>e.test(n),f8=[Eu,ze,co,Us,iU,rU,hz],r3=n=>f8.find(d8(n));function mz(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||DI(n):!0}const pz=new Set(["brightness","contrast","saturate","opacity"]);function gz(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Uw)||[];if(!r)return n;const i=t.replace(r,"");let o=pz.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+i+")"}const yz=/\b([a-z-]*)\(.*?\)/gu,X2={...fa,getAnimatableNone:n=>{const e=n.match(yz);return e?e.map(gz).join(" "):n}},i3={...Eu,transform:Math.round},vz={rotate:Us,rotateX:Us,rotateY:Us,rotateZ:Us,scale:Vm,scaleX:Vm,scaleY:Vm,scaleZ:Vm,skew:Us,skewX:Us,skewY:Us,distance:ze,translateX:ze,translateY:ze,translateZ:ze,x:ze,y:ze,z:ze,perspective:ze,transformPerspective:ze,opacity:xf,originX:GT,originY:GT,originZ:ze},Kw={borderWidth:ze,borderTopWidth:ze,borderRightWidth:ze,borderBottomWidth:ze,borderLeftWidth:ze,borderRadius:ze,radius:ze,borderTopLeftRadius:ze,borderTopRightRadius:ze,borderBottomRightRadius:ze,borderBottomLeftRadius:ze,width:ze,maxWidth:ze,height:ze,maxHeight:ze,top:ze,right:ze,bottom:ze,left:ze,padding:ze,paddingTop:ze,paddingRight:ze,paddingBottom:ze,paddingLeft:ze,margin:ze,marginTop:ze,marginRight:ze,marginBottom:ze,marginLeft:ze,backgroundPositionX:ze,backgroundPositionY:ze,...vz,zIndex:i3,fillOpacity:xf,strokeOpacity:xf,numOctaves:i3},wz={...Kw,color:fr,backgroundColor:fr,outlineColor:fr,fill:fr,stroke:fr,borderColor:fr,borderTopColor:fr,borderRightColor:fr,borderBottomColor:fr,borderLeftColor:fr,filter:X2,WebkitFilter:X2},h8=n=>wz[n];function m8(n,e){let t=h8(n);return t!==X2&&(t=fa),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const _z=new Set(["auto","none","0"]);function bz(n,e,t){let r=0,i;for(;r<n.length&&!i;){const o=n[r];typeof o=="string"&&!_z.has(o)&&Cf(o).values.length&&(i=n[r]),r++}if(i&&t)for(const o of e)n[o]=m8(t,i)}class Ez extends Xw{constructor(e,t,r,i,o){super(e,t,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),Fw(d))){const h=c8(d,t.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!u8.has(r)||e.length!==2)return;const[i,o]=e,a=r3(i),c=r3(o);if(a!==c)if(JT(a)&&JT(c))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else fl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||mz(e[i]))&&r.push(i);r.length&&bz(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=fl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var c;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=fl[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function Az(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=(t==null?void 0:t[n])??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const p8=(n,e)=>e&&typeof n=="number"?e.transform(n):n,o3=30,Tz=n=>!isNaN(parseFloat(n));class Sz{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var a,c;const o=Dr.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty();i&&((c=this.events.renderRequest)==null||c.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Dr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Tz(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Lw);const r=this.events[e].add(t);return e==="change"?()=>{r(),Gt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Dr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>o3)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,o3);return PI(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tu(n,e){return new Sz(n,e)}const{schedule:Qw}=GI(queueMicrotask,!1),Ii={x:!1,y:!1};function g8(){return Ii.x||Ii.y}function xz(n){return n==="x"||n==="y"?Ii[n]?null:(Ii[n]=!0,()=>{Ii[n]=!1}):Ii.x||Ii.y?null:(Ii.x=Ii.y=!0,()=>{Ii.x=Ii.y=!1})}function y8(n,e){const t=Az(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function s3(n){return!(n.pointerType==="touch"||g8())}function Cz(n,e,t={}){const[r,i,o]=y8(n,t),a=c=>{if(!s3(c))return;const{target:u}=c,d=e(u,c);if(typeof d!="function"||!u)return;const h=p=>{s3(p)&&(d(p),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(c=>{c.addEventListener("pointerenter",a,i)}),o}const v8=(n,e)=>e?n===e?!0:v8(n,e.parentElement):!1,Zw=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Iz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Rz(n){return Iz.has(n.tagName)||n.tabIndex!==-1}const mp=new WeakSet;function a3(n){return e=>{e.key==="Enter"&&n(e)}}function Ty(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Nz=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=a3(()=>{if(mp.has(t))return;Ty(t,"down");const i=a3(()=>{Ty(t,"up")}),o=()=>Ty(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function l3(n){return Zw(n)&&!g8()}function Oz(n,e,t={}){const[r,i,o]=y8(n,t),a=c=>{const u=c.currentTarget;if(!l3(c))return;mp.add(u);const d=e(u,c),h=(_,E)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),mp.has(u)&&mp.delete(u),l3(_)&&typeof d=="function"&&d(_,{success:E})},p=_=>{h(_,u===window||u===document||t.useGlobalTarget||v8(u,_.target))},g=_=>{h(_,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return r.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",a,i),l8(c)&&(c.addEventListener("focus",d=>Nz(d,i)),!Rz(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function w8(n){return OI(n)&&"ownerSVGElement"in n}function Dz(n){return w8(n)&&n.tagName==="svg"}const mr=n=>!!(n&&n.getVelocity),Pz=[...f8,fr,fa],Mz=n=>Pz.find(d8(n)),_8=C.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function kz(n=!0){const e=C.useContext(Ow);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,o=C.useId();C.useEffect(()=>{if(n)return i(o)},[n]);const a=C.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,a]:[!0]}const b8=C.createContext({strict:!1}),c3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},nu={};for(const n in c3)nu[n]={isEnabled:e=>c3[n].some(t=>!!e[t])};function Lz(n){for(const e in n)nu[e]={...nu[e],...n[e]}}const jz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function e1(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||jz.has(n)}let E8=n=>!e1(n);function Vz(n){n&&(E8=e=>e.startsWith("on")?!e1(e):n(e))}try{Vz(require("@emotion/is-prop-valid").default)}catch{}function Bz(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(E8(i)||t===!0&&e1(i)||!e&&!e1(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function Fz(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const z1=C.createContext({});function H1(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function If(n){return typeof n=="string"||Array.isArray(n)}const Jw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],e_=["initial",...Jw];function G1(n){return H1(n.animate)||e_.some(e=>If(n[e]))}function A8(n){return!!(G1(n)||n.variants)}function Uz(n,e){if(G1(n)){const{initial:t,animate:r}=n;return{initial:t===!1||If(t)?t:void 0,animate:If(r)?r:void 0}}return n.inherit!==!1?e:{}}function zz(n){const{initial:e,animate:t}=Uz(n,C.useContext(z1));return C.useMemo(()=>({initial:e,animate:t}),[u3(e),u3(t)])}function u3(n){return Array.isArray(n)?n.join(" "):n}const Hz=Symbol.for("motionComponentSymbol");function Rc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Gz(n,e,t){return C.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Rc(t)&&(t.current=r))},[e])}const t_=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),qz="framerAppearId",T8="data-"+t_(qz),S8=C.createContext({});function Wz(n,e,t,r,i){var A,S;const{visualElement:o}=C.useContext(z1),a=C.useContext(b8),c=C.useContext(Ow),u=C.useContext(_8).reducedMotion,d=C.useRef(null);r=r||a.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:o,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,p=C.useContext(S8);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&$z(d.current,t,i,p);const g=C.useRef(!1);C.useInsertionEffect(()=>{h&&g.current&&h.update(t,c)});const _=t[T8],E=C.useRef(!!_&&!((A=window.MotionHandoffIsComplete)!=null&&A.call(window,_))&&((S=window.MotionHasOptimisedAnimation)==null?void 0:S.call(window,_)));return VF(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),Qw.render(h.render),E.current&&h.animationState&&h.animationState.animateChanges())}),C.useEffect(()=>{h&&(!E.current&&h.animationState&&h.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,_)}),E.current=!1))}),h}function $z(n,e,t,r){const{layoutId:i,layout:o,drag:a,dragConstraints:c,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:x8(n.parent)),n.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!a||c&&Rc(c),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function x8(n){if(n)return n.options.allowProjection!==!1?n.projection:x8(n.parent)}function Xz({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&Lz(n);function o(c,u){let d;const h={...C.useContext(_8),...c,layoutId:Yz(c)},{isStatic:p}=h,g=zz(c),_=r(c,p);if(!p&&Nw){Kz();const E=Qz(h);d=E.MeasureLayout,g.visualElement=Wz(i,_,h,e,E.ProjectionNode)}return y.jsxs(z1.Provider,{value:g,children:[d&&g.visualElement?y.jsx(d,{visualElement:g.visualElement,...h}):null,t(i,c,Gz(_,g.visualElement,u),_,p,g.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const a=C.forwardRef(o);return a[Hz]=i,a}function Yz({layoutId:n}){const e=C.useContext(RI).id;return e&&n!==void 0?e+"-"+n:n}function Kz(n,e){C.useContext(b8).strict}function Qz(n){const{drag:e,layout:t}=nu;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Rf={};function Zz(n){for(const e in n)Rf[e]=n[e],Bw(e)&&(Rf[e].isCSSVariable=!0)}function C8(n,{layout:e,layoutId:t}){return Tu.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Rf[n]||n==="opacity")}const Jz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},eH=Au.length;function tH(n,e,t){let r="",i=!0;for(let o=0;o<eH;o++){const a=Au[o],c=n[a];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(a.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||t){const d=p8(c,Kw[a]);if(!u){i=!1;const h=Jz[a]||a;r+=`${h}(${d}) `}t&&(e[a]=d)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function n_(n,e,t){const{style:r,vars:i,transformOrigin:o}=n;let a=!1,c=!1;for(const u in e){const d=e[u];if(Tu.has(u)){a=!0;continue}else if(Bw(u)){i[u]=d;continue}else{const h=p8(d,Kw[u]);u.startsWith("origin")?(c=!0,o[u]=h):r[u]=h}}if(e.transform||(a||t?r.transform=tH(e,n.transform,t):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:h=0}=o;r.transformOrigin=`${u} ${d} ${h}`}}const r_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function I8(n,e,t){for(const r in e)!mr(e[r])&&!C8(r,t)&&(n[r]=e[r])}function nH({transformTemplate:n},e){return C.useMemo(()=>{const t=r_();return n_(t,e,n),Object.assign({},t.vars,t.style)},[e])}function rH(n,e){const t=n.style||{},r={};return I8(r,t,n),Object.assign(r,nH(n,e)),r}function iH(n,e){const t={},r=rH(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const oH={offset:"stroke-dashoffset",array:"stroke-dasharray"},sH={offset:"strokeDashoffset",array:"strokeDasharray"};function aH(n,e,t=1,r=0,i=!0){n.pathLength=1;const o=i?oH:sH;n[o.offset]=ze.transform(-r);const a=ze.transform(e),c=ze.transform(t);n[o.array]=`${a} ${c}`}function R8(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:a=0,...c},u,d,h){if(n_(n,c,d),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:g}=n;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),r!==void 0&&(p.scale=r),i!==void 0&&aH(p,i,o,a,!1)}const N8=()=>({...r_(),attrs:{}}),O8=n=>typeof n=="string"&&n.toLowerCase()==="svg";function lH(n,e,t,r){const i=C.useMemo(()=>{const o=N8();return R8(o,e,O8(r),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};I8(o,n.style,n),i.style={...o,...i.style}}return i}const cH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function i_(n){return typeof n!="string"||n.includes("-")?!1:!!(cH.indexOf(n)>-1||/[A-Z]/u.test(n))}function uH(n=!1){return(t,r,i,{latestValues:o},a)=>{const u=(i_(t)?lH:iH)(r,o,a,t),d=Bz(r,typeof t=="string",n),h=t!==C.Fragment?{...d,...u,ref:i}:{},{children:p}=r,g=C.useMemo(()=>mr(p)?p.get():p,[p]);return C.createElement(t,{...h,children:g})}}function d3(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function o_(n,e,t,r){if(typeof e=="function"){const[i,o]=d3(r);e=e(t!==void 0?t:n.custom,i,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,o]=d3(r);e=e(t!==void 0?t:n.custom,i,o)}return e}function pp(n){return mr(n)?n.get():n}function dH({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:fH(t,r,i,n),renderState:e()}}const D8=n=>(e,t)=>{const r=C.useContext(z1),i=C.useContext(Ow),o=()=>dH(n,e,r,i);return t?o():jF(o)};function fH(n,e,t,r){const i={},o=r(n,{});for(const g in o)i[g]=pp(o[g]);let{initial:a,animate:c}=n;const u=G1(n),d=A8(n);e&&d&&!u&&n.inherit!==!1&&(a===void 0&&(a=e.initial),c===void 0&&(c=e.animate));let h=t?t.initial===!1:!1;h=h||a===!1;const p=h?c:a;if(p&&typeof p!="boolean"&&!H1(p)){const g=Array.isArray(p)?p:[p];for(let _=0;_<g.length;_++){const E=o_(n,g[_]);if(E){const{transitionEnd:A,transition:S,...x}=E;for(const O in x){let P=x[O];if(Array.isArray(P)){const D=h?P.length-1:0;P=P[D]}P!==null&&(i[O]=P)}for(const O in A)i[O]=A[O]}}}return i}function s_(n,e,t){var o;const{style:r}=n,i={};for(const a in r)(mr(r[a])||e.style&&mr(e.style[a])||C8(a,n)||((o=t==null?void 0:t.getValue(a))==null?void 0:o.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const hH={useVisualState:D8({scrapeMotionValuesFromProps:s_,createRenderState:r_})};function P8(n,e,t){const r=s_(n,e,t);for(const i in n)if(mr(n[i])||mr(e[i])){const o=Au.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=n[i]}return r}const mH={useVisualState:D8({scrapeMotionValuesFromProps:P8,createRenderState:N8})};function pH(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...i_(r)?mH:hH,preloadedFeatures:n,useRender:uH(i),createVisualElement:e,Component:r};return Xz(a)}}function Nf(n,e,t){const r=n.getProps();return o_(r,e,t!==void 0?t:r.custom,n)}const Y2=n=>Array.isArray(n);function gH(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,tu(t))}function yH(n){return Y2(n)?n[n.length-1]||0:n}function vH(n,e){const t=Nf(n,e);let{transitionEnd:r={},transition:i={},...o}=t||{};o={...o,...r};for(const a in o){const c=yH(o[a]);gH(n,a,c)}}function wH(n){return!!(mr(n)&&n.add)}function K2(n,e){const t=n.getValue("willChange");if(wH(t))return t.add(e);if(!t&&ns.WillChange){const r=new ns.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function M8(n){return n.props[T8]}const _H=n=>n!==null;function bH(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(_H),o=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[o]}const EH={type:"spring",stiffness:500,damping:25,restSpeed:10},AH=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),TH={type:"keyframes",duration:.8},SH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xH=(n,{keyframes:e})=>e.length>2?TH:Tu.has(n)?n.startsWith("scale")?AH(e[1]):EH:SH;function CH({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:c,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const a_=(n,e,t,r={},i,o)=>a=>{const c=Yw(r,n)||{},u=c.delay||r.delay||0;let{elapsed:d=0}=r;d=d-ao(u);const h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:g=>{e.set(g),c.onUpdate&&c.onUpdate(g)},onComplete:()=>{a(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:o?void 0:i};CH(c)||Object.assign(h,xH(n,h)),h.duration&&(h.duration=ao(h.duration)),h.repeatDelay&&(h.repeatDelay=ao(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(p=!0)),(ns.instantAnimations||ns.skipAnimations)&&(p=!0,h.duration=0,h.delay=0),h.allowFlatten=!c.type&&!c.ease,p&&!o&&e.get()!==void 0){const g=bH(h.keyframes,c);if(g!==void 0){Gt.update(()=>{h.onUpdate(g),h.onComplete()});return}}return c.isSync?new $w(h):new uz(h)};function IH({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function k8(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:a,...c}=e;r&&(o=r);const u=[],d=i&&n.animationState&&n.animationState.getState()[i];for(const h in c){const p=n.getValue(h,n.latestValues[h]??null),g=c[h];if(g===void 0||d&&IH(d,h))continue;const _={delay:t,...Yw(o||{},h)},E=p.get();if(E!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===E&&!_.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const x=M8(n);if(x){const O=window.MotionHandoffAnimation(x,h,Gt);O!==null&&(_.startTime=O,A=!0)}}K2(n,h),p.start(a_(h,p,g,n.shouldReduceMotion&&u8.has(h)?{type:!1}:_,n,A));const S=p.animation;S&&u.push(S)}return a&&Promise.all(u).then(()=>{Gt.update(()=>{a&&vH(n,a)})}),u}function Q2(n,e,t={}){var u;const r=Nf(n,e,t.type==="exit"?(u=n.presenceContext)==null?void 0:u.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const o=r?()=>Promise.all(k8(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:g}=i;return RH(n,e,h+d,p,g,t)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,h]=c==="beforeChildren"?[o,a]:[a,o];return d().then(()=>h())}else return Promise.all([o(),a(t.delay)])}function RH(n,e,t=0,r=0,i=1,o){const a=[],c=(n.variantChildren.size-1)*r,u=i===1?(d=0)=>d*r:(d=0)=>c-d*r;return Array.from(n.variantChildren).sort(NH).forEach((d,h)=>{d.notify("AnimationStart",e),a.push(Q2(d,e,{...o,delay:t+u(h)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(a)}function NH(n,e){return n.sortNodePosition(e)}function OH(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>Q2(n,o,t));r=Promise.all(i)}else if(typeof e=="string")r=Q2(n,e,t);else{const i=typeof e=="function"?Nf(n,e,t.custom):e;r=Promise.all(k8(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function L8(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const DH=e_.length;function j8(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?j8(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<DH;t++){const r=e_[t],i=n.props[r];(If(i)||i===!1)&&(e[r]=i)}return e}const PH=[...Jw].reverse(),MH=Jw.length;function kH(n){return e=>Promise.all(e.map(({animation:t,options:r})=>OH(n,t,r)))}function LH(n){let e=kH(n),t=f3(),r=!0;const i=u=>(d,h)=>{var g;const p=Nf(n,h,u==="exit"?(g=n.presenceContext)==null?void 0:g.custom:void 0);if(p){const{transition:_,transitionEnd:E,...A}=p;d={...d,...A,...E}}return d};function o(u){e=u(n)}function a(u){const{props:d}=n,h=j8(n.parent)||{},p=[],g=new Set;let _={},E=1/0;for(let S=0;S<MH;S++){const x=PH[S],O=t[x],P=d[x]!==void 0?d[x]:h[x],D=If(P),j=x===u?O.isActive:null;j===!1&&(E=S);let H=P===h[x]&&P!==d[x]&&D;if(H&&r&&n.manuallyAnimateOnMount&&(H=!1),O.protectedKeys={..._},!O.isActive&&j===null||!P&&!O.prevProp||H1(P)||typeof P=="boolean")continue;const M=jH(O.prevProp,P);let R=M||x===u&&O.isActive&&!H&&D||S>E&&D,k=!1;const U=Array.isArray(P)?P:[P];let z=U.reduce(i(x),{});j===!1&&(z={});const{prevResolvedValues:q={}}=O,F={...q,...z},Ce=me=>{R=!0,g.has(me)&&(k=!0,g.delete(me)),O.needsAnimating[me]=!0;const ue=n.getValue(me);ue&&(ue.liveStyle=!1)};for(const me in F){const ue=z[me],De=q[me];if(_.hasOwnProperty(me))continue;let W=!1;Y2(ue)&&Y2(De)?W=!L8(ue,De):W=ue!==De,W?ue!=null?Ce(me):g.add(me):ue!==void 0&&g.has(me)?Ce(me):O.protectedKeys[me]=!0}O.prevProp=P,O.prevResolvedValues=z,O.isActive&&(_={..._,...z}),r&&n.blockInitialAnimation&&(R=!1),R&&(!(H&&M)||k)&&p.push(...U.map(me=>({animation:me,options:{type:x}})))}if(g.size){const S={};if(typeof d.initial!="boolean"){const x=Nf(n,Array.isArray(d.initial)?d.initial[0]:d.initial);x&&x.transition&&(S.transition=x.transition)}g.forEach(x=>{const O=n.getBaseTarget(x),P=n.getValue(x);P&&(P.liveStyle=!0),S[x]=O??null}),p.push({animation:S})}let A=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(A=!1),r=!1,A?e(p):Promise.resolve()}function c(u,d){var p;if(t[u].isActive===d)return Promise.resolve();(p=n.variantChildren)==null||p.forEach(g=>{var _;return(_=g.animationState)==null?void 0:_.setActive(u,d)}),t[u].isActive=d;const h=a(u);for(const g in t)t[g].protectedKeys={};return h}return{animateChanges:a,setActive:c,setAnimateFunction:o,getState:()=>t,reset:()=>{t=f3(),r=!0}}}function jH(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!L8(e,n):!1}function Za(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function f3(){return{animate:Za(!0),whileInView:Za(),whileHover:Za(),whileTap:Za(),whileDrag:Za(),whileFocus:Za(),exit:Za()}}class ga{constructor(e){this.isMounted=!1,this.node=e}update(){}}class VH extends ga{constructor(e){super(e),e.animationState||(e.animationState=LH(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();H1(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let BH=0;class FH extends ga{constructor(){super(...arguments),this.id=BH++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const UH={animation:{Feature:VH},exit:{Feature:FH}};function Of(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function eh(n){return{point:{x:n.pageX,y:n.pageY}}}const zH=n=>e=>Zw(e)&&n(e,eh(e));function af(n,e,t,r){return Of(n,e,zH(t),r)}function V8({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function HH({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function GH(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}const B8=1e-4,qH=1-B8,WH=1+B8,F8=.01,$H=0-F8,XH=0+F8;function Ar(n){return n.max-n.min}function YH(n,e,t){return Math.abs(n-e)<=t}function h3(n,e,t,r=.5){n.origin=r,n.originPoint=Ht(e.min,e.max,n.origin),n.scale=Ar(t)/Ar(e),n.translate=Ht(t.min,t.max,n.origin)-n.originPoint,(n.scale>=qH&&n.scale<=WH||isNaN(n.scale))&&(n.scale=1),(n.translate>=$H&&n.translate<=XH||isNaN(n.translate))&&(n.translate=0)}function lf(n,e,t,r){h3(n.x,e.x,t.x,r?r.originX:void 0),h3(n.y,e.y,t.y,r?r.originY:void 0)}function m3(n,e,t){n.min=t.min+e.min,n.max=n.min+Ar(e)}function KH(n,e,t){m3(n.x,e.x,t.x),m3(n.y,e.y,t.y)}function p3(n,e,t){n.min=e.min-t.min,n.max=n.min+Ar(e)}function cf(n,e,t){p3(n.x,e.x,t.x),p3(n.y,e.y,t.y)}const g3=()=>({translate:0,scale:1,origin:0,originPoint:0}),Nc=()=>({x:g3(),y:g3()}),y3=()=>({min:0,max:0}),on=()=>({x:y3(),y:y3()});function ui(n){return[n("x"),n("y")]}function Sy(n){return n===void 0||n===1}function Z2({scale:n,scaleX:e,scaleY:t}){return!Sy(n)||!Sy(e)||!Sy(t)}function rl(n){return Z2(n)||U8(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function U8(n){return v3(n.x)||v3(n.y)}function v3(n){return n&&n!=="0%"}function t1(n,e,t){const r=n-t,i=e*r;return t+i}function w3(n,e,t,r,i){return i!==void 0&&(n=t1(n,i,r)),t1(n,t,r)+e}function J2(n,e=0,t=1,r,i){n.min=w3(n.min,e,t,r,i),n.max=w3(n.max,e,t,r,i)}function z8(n,{x:e,y:t}){J2(n.x,e.translate,e.scale,e.originPoint),J2(n.y,t.translate,t.scale,t.originPoint)}const _3=.999999999999,b3=1.0000000000001;function QH(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let o,a;for(let c=0;c<i;c++){o=t[c],a=o.projectionDelta;const{visualElement:u}=o.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Dc(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,z8(n,a)),r&&rl(o.latestValues)&&Dc(n,o.latestValues))}e.x<b3&&e.x>_3&&(e.x=1),e.y<b3&&e.y>_3&&(e.y=1)}function Oc(n,e){n.min=n.min+e,n.max=n.max+e}function E3(n,e,t,r,i=.5){const o=Ht(n.min,n.max,i);J2(n,e,t,o,r)}function Dc(n,e){E3(n.x,e.x,e.scaleX,e.scale,e.originX),E3(n.y,e.y,e.scaleY,e.scale,e.originY)}function H8(n,e){return V8(GH(n.getBoundingClientRect(),e))}function ZH(n,e,t){const r=H8(n,t),{scroll:i}=e;return i&&(Oc(r.x,i.offset.x),Oc(r.y,i.offset.y)),r}const G8=({current:n})=>n?n.ownerDocument.defaultView:null,A3=(n,e)=>Math.abs(n-e);function JH(n,e){const t=A3(n.x,e.x),r=A3(n.y,e.y);return Math.sqrt(t**2+r**2)}class q8{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Cy(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,_=JH(p.offset,{x:0,y:0})>=3;if(!g&&!_)return;const{point:E}=p,{timestamp:A}=Jn;this.history.push({...E,timestamp:A});const{onStart:S,onMove:x}=this.handlers;g||(S&&S(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=xy(g,this.transformPagePoint),Gt.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:_,onSessionEnd:E,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Cy(p.type==="pointercancel"?this.lastMoveEventInfo:xy(g,this.transformPagePoint),this.history);this.startEvent&&_&&_(p,S),E&&E(p,S)},!Zw(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=eh(e),c=xy(a,this.transformPagePoint),{point:u}=c,{timestamp:d}=Jn;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=t;h&&h(e,Cy(c,this.history)),this.removeListeners=Qf(af(this.contextWindow,"pointermove",this.handlePointerMove),af(this.contextWindow,"pointerup",this.handlePointerUp),af(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),da(this.updatePoint)}}function xy(n,e){return e?{point:e(n.point)}:n}function T3(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Cy({point:n},e){return{point:n,delta:T3(n,W8(e)),offset:T3(n,eG(e)),velocity:tG(e,.1)}}function eG(n){return n[0]}function W8(n){return n[n.length-1]}function tG(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=W8(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>ao(e)));)t--;if(!r)return{x:0,y:0};const o=lo(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function nG(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Ht(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Ht(t,n,r.max):Math.min(n,t)),n}function S3(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function rG(n,{top:e,left:t,bottom:r,right:i}){return{x:S3(n.x,t,i),y:S3(n.y,e,r)}}function x3(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function iG(n,e){return{x:x3(n.x,e.x),y:x3(n.y,e.y)}}function oG(n,e){let t=.5;const r=Ar(n),i=Ar(e);return i>r?t=Sf(e.min,e.max-r,n.min):r>i&&(t=Sf(n.min,n.max-i,e.min)),ts(0,1,t)}function sG(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const ev=.35;function aG(n=ev){return n===!1?n=0:n===!0&&(n=ev),{x:C3(n,"left","right"),y:C3(n,"top","bottom")}}function C3(n,e,t){return{min:I3(n,e),max:I3(n,t)}}function I3(n,e){return typeof n=="number"?n:n[e]||0}const lG=new WeakMap;class cG{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=on(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(eh(h).point)},o=(h,p)=>{const{drag:g,dragPropagation:_,onDragStart:E}=this.getProps();if(g&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xz(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ui(S=>{let x=this.getAxisMotionValue(S).get()||0;if(co.test(x)){const{projection:O}=this.visualElement;if(O&&O.layout){const P=O.layout.layoutBox[S];P&&(x=Ar(P)*(parseFloat(x)/100))}}this.originPoint[S]=x}),E&&Gt.postRender(()=>E(h,p)),K2(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},a=(h,p)=>{const{dragPropagation:g,dragDirectionLock:_,onDirectionLock:E,onDrag:A}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:S}=p;if(_&&this.currentDirection===null){this.currentDirection=uG(S),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",p.point,S),this.updateAxis("y",p.point,S),this.visualElement.render(),A&&A(h,p)},c=(h,p)=>this.stop(h,p),u=()=>ui(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)==null?void 0:p.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new q8(e,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:G8(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Gt.postRender(()=>o(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Bm(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=nG(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;e&&Rc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=rG(r.layoutBox,e):this.constraints=!1,this.elastic=aG(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ui(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=sG(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Rc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=ZH(r,i.root,this.visualElement.getTransformPagePoint());let a=iG(i.layout.layoutBox,o);if(t){const c=t(HH(a));this.hasMutatedConstraints=!!c,c&&(a=V8(c))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},d=ui(h=>{if(!Bm(h,t,this.currentDirection))return;let p=u&&u[h]||{};a&&(p={min:0,max:0});const g=i?200:1e6,_=i?40:1e7,E={type:"inertia",velocity:r?e[h]:0,bounceStiffness:g,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...o,...p};return this.startAxisValueAnimation(h,E)});return Promise.all(d).then(c)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return K2(this.visualElement,e),r.start(a_(e,r,0,t,this.visualElement,!1))}stopAnimation(){ui(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ui(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ui(t=>{const{drag:r}=this.getProps();if(!Bm(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:c}=i.layout.layoutBox[t];o.set(e[t]-Ht(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Rc(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ui(a=>{const c=this.getAxisMotionValue(a);if(c&&this.constraints!==!1){const u=c.get();i[a]=oG({min:u,max:u},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ui(a=>{if(!Bm(a,e,null))return;const c=this.getAxisMotionValue(a),{min:u,max:d}=this.constraints[a];c.set(Ht(u,d,i[a]))})}addListeners(){if(!this.visualElement.current)return;lG.set(this.visualElement,this);const e=this.visualElement.current,t=af(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Rc(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Gt.read(r);const a=Of(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(ui(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())});return()=>{a(),t(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:a=ev,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:a,dragMomentum:c}}}function Bm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function uG(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class dG extends ga{constructor(e){super(e),this.removeGroupControls=pi,this.removeListeners=pi,this.controls=new cG(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pi}unmount(){this.removeGroupControls(),this.removeListeners()}}const R3=n=>(e,t)=>{n&&Gt.postRender(()=>n(e,t))};class fG extends ga{constructor(){super(...arguments),this.removePointerDownListener=pi}onPointerDown(e){this.session=new q8(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:G8(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:R3(e),onStart:R3(t),onMove:r,onEnd:(o,a)=>{delete this.session,i&&Gt.postRender(()=>i(o,a))}}}mount(){this.removePointerDownListener=af(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const gp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function N3(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Bd={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ze.test(n))n=parseFloat(n);else return n;const t=N3(n,e.target.x),r=N3(n,e.target.y);return`${t}% ${r}%`}},hG={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=fa.parse(n);if(i.length>5)return r;const o=fa.createTransformer(n),a=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,u=t.y.scale*e.y;i[0+a]/=c,i[1+a]/=u;const d=Ht(c,u,.5);return typeof i[2+a]=="number"&&(i[2+a]/=d),typeof i[3+a]=="number"&&(i[3+a]/=d),o(i)}};class mG extends C.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;Zz(pG),o&&(t.group&&t.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),gp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:o}=this.props,{projection:a}=r;return a&&(a.isPresent=o,i||e.layoutDependency!==t||t===void 0||e.isPresent!==o?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Gt.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Qw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function $8(n){const[e,t]=kz(),r=C.useContext(RI);return y.jsx(mG,{...n,layoutGroup:r,switchLayoutGroup:C.useContext(S8),isPresent:e,safeToRemove:t})}const pG={borderRadius:{...Bd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bd,borderTopRightRadius:Bd,borderBottomLeftRadius:Bd,borderBottomRightRadius:Bd,boxShadow:hG};function gG(n,e,t){const r=mr(n)?n:tu(n);return r.start(a_("",r,e,t)),r.animation}const yG=(n,e)=>n.depth-e.depth;class vG{constructor(){this.children=[],this.isDirty=!1}add(e){Dw(this.children,e),this.isDirty=!0}remove(e){Pw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(yG),this.isDirty=!1,this.children.forEach(e)}}function wG(n,e){const t=Dr.now(),r=({timestamp:i})=>{const o=i-t;o>=e&&(da(r),n(o-e))};return Gt.setup(r,!0),()=>da(r)}const X8=["TopLeft","TopRight","BottomLeft","BottomRight"],_G=X8.length,O3=n=>typeof n=="string"?parseFloat(n):n,D3=n=>typeof n=="number"||ze.test(n);function bG(n,e,t,r,i,o){i?(n.opacity=Ht(0,t.opacity??1,EG(r)),n.opacityExit=Ht(e.opacity??1,0,AG(r))):o&&(n.opacity=Ht(e.opacity??1,t.opacity??1,r));for(let a=0;a<_G;a++){const c=`border${X8[a]}Radius`;let u=P3(e,c),d=P3(t,c);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||D3(u)===D3(d)?(n[c]=Math.max(Ht(O3(u),O3(d),r),0),(co.test(d)||co.test(u))&&(n[c]+="%")):n[c]=d}(e.rotate||t.rotate)&&(n.rotate=Ht(e.rotate||0,t.rotate||0,r))}function P3(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const EG=Y8(0,.5,FI),AG=Y8(.5,.95,pi);function Y8(n,e,t){return r=>r<n?0:r>e?1:t(Sf(n,e,r))}function M3(n,e){n.min=e.min,n.max=e.max}function ci(n,e){M3(n.x,e.x),M3(n.y,e.y)}function k3(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function L3(n,e,t,r,i){return n-=e,n=t1(n,1/t,r),i!==void 0&&(n=t1(n,1/i,r)),n}function TG(n,e=0,t=1,r=.5,i,o=n,a=n){if(co.test(e)&&(e=parseFloat(e),e=Ht(a.min,a.max,e/100)-a.min),typeof e!="number")return;let c=Ht(o.min,o.max,r);n===o&&(c-=e),n.min=L3(n.min,e,t,c,i),n.max=L3(n.max,e,t,c,i)}function j3(n,e,[t,r,i],o,a){TG(n,e[t],e[r],e[i],e.scale,o,a)}const SG=["x","scaleX","originX"],xG=["y","scaleY","originY"];function V3(n,e,t,r){j3(n.x,e,SG,t?t.x:void 0,r?r.x:void 0),j3(n.y,e,xG,t?t.y:void 0,r?r.y:void 0)}function B3(n){return n.translate===0&&n.scale===1}function K8(n){return B3(n.x)&&B3(n.y)}function F3(n,e){return n.min===e.min&&n.max===e.max}function CG(n,e){return F3(n.x,e.x)&&F3(n.y,e.y)}function U3(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function Q8(n,e){return U3(n.x,e.x)&&U3(n.y,e.y)}function z3(n){return Ar(n.x)/Ar(n.y)}function H3(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class IG{constructor(){this.members=[]}add(e){Dw(this.members,e),e.scheduleRender()}remove(e){if(Pw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function RG(n,e,t){let r="";const i=n.x.translate/e.x,o=n.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((i||o||a)&&(r=`translate3d(${i}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:g,skewX:_,skewY:E}=t;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),_&&(r+=`skewX(${_}deg) `),E&&(r+=`skewY(${E}deg) `)}const c=n.x.scale*e.x,u=n.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const Iy=["","X","Y","Z"],NG={visibility:"hidden"},OG=1e3;let DG=0;function Ry(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function Z8(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=M8(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Gt,!(i||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&Z8(r)}function J8({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},c=e==null?void 0:e()){this.id=DG++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(kG),this.nodes.forEach(FG),this.nodes.forEach(UG),this.nodes.forEach(LG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new vG)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Lw),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const u=this.eventHandlers.get(a);u&&u.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=w8(a)&&!Dz(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),n){let h;const p=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=wG(p,250),gp.hasAnimatedSinceResize&&(gp.hasAnimatedSinceResize=!1,this.nodes.forEach(q3))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||d.getDefaultTransition()||WG,{onLayoutAnimationStart:A,onLayoutAnimationComplete:S}=d.getProps(),x=!this.targetLayout||!Q8(this.targetLayout,_),O=!p&&g;if(this.options.layoutRoot||this.resumeFrom||O||p&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...Yw(E,"layout"),onPlay:A,onComplete:S};(d.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(h,O)}else p||q3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),da(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zG),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Z8(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(G3);return}this.isUpdating||this.nodes.forEach(VG),this.isUpdating=!1,this.nodes.forEach(BG),this.nodes.forEach(PG),this.nodes.forEach(MG),this.clearAllSnapshots();const c=Dr.now();Jn.delta=ts(0,1e3/60,c-Jn.timestamp),Jn.timestamp=c,Jn.isProcessing=!0,_y.update.process(Jn),_y.preRender.process(Jn),_y.render.process(Jn),Jn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Qw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(jG),this.sharedNodes.forEach(HG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ar(this.snapshot.measuredBox.x)&&!Ar(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=on(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!K8(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;a&&this.instance&&(c||rl(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return a&&(u=this.removeTransform(u)),$G(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:a}=this.options;if(!a)return on();const c=a.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(XG))){const{scroll:h}=this.root;h&&(Oc(c.x,h.offset.x),Oc(c.y,h.offset.y))}return c}removeElementScroll(a){var u;const c=on();if(ci(c,a),(u=this.scroll)!=null&&u.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:p,options:g}=h;h!==this.root&&p&&g.layoutScroll&&(p.wasRoot&&ci(c,a),Oc(c.x,p.offset.x),Oc(c.y,p.offset.y))}return c}applyTransform(a,c=!1){const u=on();ci(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];!c&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Dc(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),rl(h.latestValues)&&Dc(u,h.latestValues)}return rl(this.latestValues)&&Dc(u,this.latestValues),u}removeTransform(a){const c=on();ci(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!rl(d.latestValues))continue;Z2(d.latestValues)&&d.updateSnapshot();const h=on(),p=d.measurePageBox();ci(h,p),V3(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return rl(this.latestValues)&&V3(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var g;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Jn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=on(),this.relativeTargetOrigin=on(),cf(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),ci(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=on(),this.targetWithTransforms=on()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),KH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ci(this.target,this.layout.layoutBox),z8(this.target,this.targetDelta)):ci(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=on(),this.relativeTargetOrigin=on(),cf(this.relativeTargetOrigin,this.target,_.target),ci(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Z2(this.parent.latestValues)||U8(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var E;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Jn.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;ci(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;QH(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=on());const{target:_}=a;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(k3(this.prevProjectionDelta.x,this.projectionDelta.x),k3(this.prevProjectionDelta.y,this.projectionDelta.y)),lf(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!H3(this.projectionDelta.x,this.prevProjectionDelta.x)||!H3(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Nc(),this.projectionDelta=Nc(),this.projectionDeltaWithTransform=Nc()}setAnimationOrigin(a,c=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},p=Nc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const g=on(),_=u?u.source:void 0,E=this.layout?this.layout.source:void 0,A=_!==E,S=this.getStack(),x=!S||S.members.length<=1,O=!!(A&&!x&&this.options.crossfade===!0&&!this.path.some(qG));this.animationProgress=0;let P;this.mixTargetDelta=D=>{const j=D/1e3;W3(p.x,a.x,j),W3(p.y,a.y,j),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cf(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),GG(this.relativeTarget,this.relativeTargetOrigin,g,j),P&&CG(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=on()),ci(P,this.relativeTarget)),A&&(this.animationValues=h,bG(h,d,this.latestValues,j,O,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var c,u,d;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(d=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||d.stop(),this.pendingAnimation&&(da(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gt.update(()=>{gp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=tu(0)),this.currentAnimation=gG(this.motionValue,[0,1e3],{...a,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),a.onUpdate&&a.onUpdate(h)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(OG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:u,layout:d,latestValues:h}=a;if(!(!c||!u||!d)){if(this!==a&&this.layout&&d&&eR(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||on();const p=Ar(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+p;const g=Ar(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+g}ci(c,u),Dc(c,h),lf(this.projectionDeltaWithTransform,this.layoutCorrected,c,h)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new IG),this.sharedNodes.get(a).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var c;const{layoutId:a}=this.options;return a?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:a}=this.options;return a?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const d={};u.z&&Ry("z",a,d,this.animationValues);for(let h=0;h<Iy.length;h++)Ry(`rotate${Iy[h]}`,a,d,this.animationValues),Ry(`skew${Iy[h]}`,a,d,this.animationValues);a.render();for(const h in d)a.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return NG;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=pp(a==null?void 0:a.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=pp(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!rl(this.latestValues)&&(_.transform=u?u({},""):"none",this.hasProjected=!1),_}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=RG(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:p,y:g}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,d.animationValues?c.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const _ in Rf){if(h[_]===void 0)continue;const{correct:E,applyTo:A,isCSSVariable:S}=Rf[_],x=c.transform==="none"?h[_]:E(h[_],d);if(A){const O=A.length;for(let P=0;P<O;P++)c[A[P]]=x}else S?this.options.visualElement.renderState.vars[_]=x:c[_]=x}return this.options.layoutId&&(c.pointerEvents=d===this?pp(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var c;return(c=a.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(G3),this.root.sharedNodes.clear()}}}function PG(n){n.updateLayout()}function MG(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:o}=n.options,a=e.source!==n.layout.source;o==="size"?ui(p=>{const g=a?e.measuredBox[p]:e.layoutBox[p],_=Ar(g);g.min=r[p].min,g.max=g.min+_}):eR(o,e.layoutBox,r)&&ui(p=>{const g=a?e.measuredBox[p]:e.layoutBox[p],_=Ar(r[p]);g.max=g.min+_,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+_)});const c=Nc();lf(c,r,e.layoutBox);const u=Nc();a?lf(u,n.applyTransform(i,!0),e.measuredBox):lf(u,r,e.layoutBox);const d=!K8(c);let h=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:_}=p;if(g&&_){const E=on();cf(E,e.layoutBox,g.layoutBox);const A=on();cf(A,r,_.layoutBox),Q8(E,A)||(h=!0),p.options.layoutRoot&&(n.relativeTarget=A,n.relativeTargetOrigin=E,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:u,layoutDelta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function kG(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function LG(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function jG(n){n.clearSnapshot()}function G3(n){n.clearMeasurements()}function VG(n){n.isLayoutDirty=!1}function BG(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function q3(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function FG(n){n.resolveTargetDelta()}function UG(n){n.calcProjection()}function zG(n){n.resetSkewAndRotation()}function HG(n){n.removeLeadSnapshot()}function W3(n,e,t){n.translate=Ht(e.translate,0,t),n.scale=Ht(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function $3(n,e,t,r){n.min=Ht(e.min,t.min,r),n.max=Ht(e.max,t.max,r)}function GG(n,e,t,r){$3(n.x,e.x,t.x,r),$3(n.y,e.y,t.y,r)}function qG(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const WG={duration:.45,ease:[.4,0,.1,1]},X3=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Y3=X3("applewebkit/")&&!X3("chrome/")?Math.round:pi;function K3(n){n.min=Y3(n.min),n.max=Y3(n.max)}function $G(n){K3(n.x),K3(n.y)}function eR(n,e,t){return n==="position"||n==="preserve-aspect"&&!YH(z3(e),z3(t),.2)}function XG(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const YG=J8({attachResizeListener:(n,e)=>Of(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ny={current:void 0},tR=J8({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Ny.current){const n=new YG({});n.mount(window),n.setOptions({layoutScroll:!0}),Ny.current=n}return Ny.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),KG={pan:{Feature:fG},drag:{Feature:dG,ProjectionNode:tR,MeasureLayout:$8}};function Q3(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,o=r[i];o&&Gt.postRender(()=>o(e,eh(e)))}class QG extends ga{mount(){const{current:e}=this.node;e&&(this.unmount=Cz(e,(t,r)=>(Q3(this.node,r,"Start"),i=>Q3(this.node,i,"End"))))}unmount(){}}class ZG extends ga{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qf(Of(this.node.current,"focus",()=>this.onFocus()),Of(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Z3(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),o=r[i];o&&Gt.postRender(()=>o(e,eh(e)))}class JG extends ga{mount(){const{current:e}=this.node;e&&(this.unmount=Oz(e,(t,r)=>(Z3(this.node,r,"Start"),(i,{success:o})=>Z3(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const tv=new WeakMap,Oy=new WeakMap,eq=n=>{const e=tv.get(n.target);e&&e(n)},tq=n=>{n.forEach(eq)};function nq({root:n,...e}){const t=n||document;Oy.has(t)||Oy.set(t,{});const r=Oy.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(tq,{root:n,...e})),r[i]}function rq(n,e,t){const r=nq(e);return tv.set(n,t),r.observe(n),()=>{tv.delete(n),r.unobserve(n)}}const iq={some:0,all:1};class oq extends ga{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:o}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:iq[i]},c=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),g=d?h:p;g&&g(u)};return rq(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(sq(e,t))&&this.startObserver()}unmount(){}}function sq({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const aq={inView:{Feature:oq},tap:{Feature:JG},focus:{Feature:ZG},hover:{Feature:QG}},lq={layout:{ProjectionNode:tR,MeasureLayout:$8}},nv={current:null},nR={current:!1};function cq(){if(nR.current=!0,!!Nw)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>nv.current=n.matches;n.addListener(e),e()}else nv.current=!1}const uq=new WeakMap;function dq(n,e,t){for(const r in e){const i=e[r],o=t[r];if(mr(i))n.addValue(r,i);else if(mr(o))n.addValue(r,tu(i,{owner:n}));else if(o!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,tu(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const J3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fq{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Dr.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Gt.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=a;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=G1(t),this.isVariantNode=A8(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(t,{},this);for(const g in p){const _=p[g];u[g]!==void 0&&mr(_)&&_.set(u[g],!1)}}mount(e){this.current=e,uq.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),nR.current||cq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:nv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),da(this.notifyUpdate),da(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Tu.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Gt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),o(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in nu){const t=nu[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):on()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<J3.length;r++){const i=J3[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,a=e[o];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=dq(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=tu(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(NI(r)||DI(r))?r=parseFloat(r):!Mz(r)&&fa.test(t)&&(r=m8(e,t)),this.setBaseTarget(e,mr(r)?r.get():r)),mr(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var o;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const a=o_(this.props,t,(o=this.presenceContext)==null?void 0:o.custom);a&&(r=a[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!mr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Lw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class rR extends fq{constructor(){super(...arguments),this.KeyframeResolver=Ez}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function iR(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const o in t)n.style.setProperty(o,t[o])}function hq(n){return window.getComputedStyle(n)}class mq extends rR{constructor(){super(...arguments),this.type="html",this.renderInstance=iR}readValueFromInstance(e,t){var r;if(Tu.has(t))return(r=this.projection)!=null&&r.isProjecting?H2(t):UU(e,t);{const i=hq(e),o=(Bw(t)?i.getPropertyValue(t):i[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return H8(e,t)}build(e,t,r){n_(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return s_(e,t,r)}}const oR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pq(n,e,t,r){iR(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(oR.has(i)?i:t_(i),e.attrs[i])}class gq extends rR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=on}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Tu.has(t)){const r=h8(t);return r&&r.default||0}return t=oR.has(t)?t:t_(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return P8(e,t,r)}build(e,t,r){R8(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){pq(e,t,r,i)}mount(e){this.isSVGTag=O8(e.tagName),super.mount(e)}}const yq=(n,e)=>i_(n)?new gq(e):new mq(e,{allowProjection:n!==C.Fragment}),vq=pH({...UH,...aq,...KG,...lq},yq),l_=Fz(vq),wq=[{title:"Connect to Restaurant",description:"Scan a QR code to connect to a restaurant and create your personal tab",icon:y.jsx(eu,{className:"w-8 h-8 text-blue-500"}),bgColor:"bg-blue-50",textColor:"text-blue-600",path:"/customer/scan"},{title:"Saved Restaurants",description:"Access your previously saved or visited restaurants for quick reconnection",icon:y.jsx(Tw,{className:"w-8 h-8 text-green-500"}),bgColor:"bg-green-50",textColor:"text-green-600",path:"/customer/saved"},{title:"Easy Billing",description:"View your current tab and make payments with just a few taps",icon:y.jsx(zc,{className:"w-8 h-8 text-purple-500"}),bgColor:"bg-purple-50",textColor:"text-purple-600",path:"/customer/billing"}],_q=()=>{const n=_i();return y.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:y.jsxs("div",{className:"max-w-md mx-auto",children:[y.jsxs("header",{className:"mb-8 text-center",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome Back!"}),y.jsx("p",{className:"text-gray-600",children:"What would you like to do today?"})]}),y.jsx("div",{className:"space-y-4",children:wq.map((e,t)=>y.jsx(l_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1,duration:.3},whileHover:{scale:1.02},whileTap:{scale:.98},children:y.jsxs(ct,{className:`border-0 shadow-sm cursor-pointer transition-all hover:shadow-md ${e.bgColor}`,onClick:()=>n(e.path),children:[y.jsx(Rn,{className:"pb-2",children:y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:`p-2 rounded-lg ${e.bgColor} ${e.textColor}`,children:e.icon}),y.jsx("div",{children:y.jsx(Nn,{className:`text-lg ${e.textColor}`,children:e.title})})]})}),y.jsx(Ct,{children:y.jsx("p",{className:"text-sm text-gray-600",children:e.description})})]})},e.title))}),y.jsx("div",{className:"mt-8 text-center",children:y.jsx(_e,{variant:"outline",className:"w-full",onClick:()=>n("/customer/help"),children:"Need Help?"})})]})})};var Fm,rv,bq=(Fm=function(n,e){return Fm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},Fm(n,e)},function(n,e){function t(){this.constructor=n}Fm(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),Eq=function(n){function e(t){var r,i,o,a=this.constructor,c=n.call(this,t)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1,configurable:!0}),r=c,i=a.prototype,(o=Object.setPrototypeOf)?o(r,i):r.__proto__=i,function(u,d){d===void 0&&(d=u.constructor);var h=Error.captureStackTrace;h&&h(u,d)}(c),c}return bq(e,n),e}(Error),Aq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mr=function(n){function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return Aq(e,n),e.prototype.getKind=function(){return this.constructor.kind},e.kind="Exception",e}(Eq),Tq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Tq(e,n),e.kind="ArgumentException",e}(Mr),Sq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),He=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Sq(e,n),e.kind="IllegalArgumentException",e}(Mr),sR=function(){function n(e){if(this.binarizer=e,e===null)throw new He("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return this.matrix!==null&&this.matrix!==void 0||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var o=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(o))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),xq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),On=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return xq(e,n),e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Mr),Cq=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),Bt=function(){function n(){}return n.arraycopy=function(e,t,r,i,o){for(;o--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),Iq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),c_=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Iq(e,n),e.kind="IndexOutOfBoundsException",e}(Mr),Rq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eS=function(n){function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return Rq(e,n),e.kind="ArrayIndexOutOfBoundsException",e}(c_),Nq=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yr=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var o=t;o<r;o++)e[o]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new He("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new eS(t);if(r>e)throw new eS(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){return Array.from({length:e}).map(function(i){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){return Array.from({length:e}).map(function(i){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var o=Nq(e),a=o.next();!a.done;a=o.next())i=31*i+a.value}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,o=new Int32Array(i);return Bt.arraycopy(e,t,o,0,i),o},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,o=e.length-1;i<=o;){var a=o+i>>1,c=r(t,e[a]);if(c>0)i=a+1;else{if(!(c<0))return a;o=a-1}}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),nr=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return(t=e<<16)!==0&&(r-=16,e=t),(t=e<<8)!==0&&(r-=8,e=t),(t=e<<4)!==0&&(r-=4,e=t),(t=e<<2)!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return!(e>>>16)&&(t+=16,e<<=16),!(e>>>24)&&(t+=8,e<<=8),!(e>>>28)&&(t+=4,e<<=4),!(e>>>30)&&(t+=2,e<<=2),t-=e>>>31},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),ro=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=t??n.makeArray(e))}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>32*this.bits.length){var t=n.makeArray(e);Bt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(31&e))!=0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(31&e)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(31&e)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(31&e))-1);for(var a=r.length;o===0;){if(++i===a)return t;o=r[i]}var c=32*i+nr.numberOfTrailingZeros(o);return c>t?t:c},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(31&e))-1);for(var a=r.length;o===0;){if(++i===a)return t;o=~r[i]}var c=32*i+nr.numberOfTrailingZeros(o);return c>t?t:c},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new He;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,a=r;a<=i;a++){var c=(2<<(a<i?31:31&t))-(1<<(a>r?0:31&e));o[a]|=c}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new He;if(t===e)return!0;t--;for(var i=Math.floor(e/32),o=Math.floor(t/32),a=this.bits,c=i;c<=o;c++){var u=(2<<(c<o?31:31&t))-(1<<(c>i?0:31&e))&4294967295;if((a[c]&u)!==(r?u:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new He("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)==1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new He("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var o=0;o<i;o++){for(var a=0,c=0;c<8;c++)this.get(e)&&(a|=1<<7-c),e++;t[r+o]=a}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,o=0;o<r;o++){var a=i[o];a=(a=(a=(a=(a=a>>1&1431655765|(1431655765&a)<<1)>>2&858993459|(858993459&a)<<2)>>4&252645135|(252645135&a)<<4)>>8&16711935|(16711935&a)<<8)>>16&65535|(65535&a)<<16,e[t-o]=a}if(this.size!==32*r){var c=32*r-this.size,u=e[0]>>>c;for(o=1;o<r;o++){var d=e[o];u|=d<<32-c,e[o-1]=u,u=d>>>c}e[r-1]=u}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Yr.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Yr.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(7&t)==0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n}();(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ASSUME_GS1=7]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(rv||(rv={}));var _t,kt=rv,Oq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),we=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Oq(e,n),e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Mr),Dq=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(_t||(_t={}));var iv,Nr=function(){function n(e,t,r){for(var i,o,a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];this.valueIdentifier=e,this.name=r,this.values=typeof t=="number"?Int32Array.from([t]):t,this.otherEncodingNames=a,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var u=this.values,d=0,h=u.length;d!==h;d++){var p=u[d];n.VALUES_TO_ECI.set(p,this)}try{for(var g=Dq(a),_=g.next();!_.done;_=g.next()){var E=_.value;n.NAME_TO_ECI.set(E,this)}}catch(A){i={error:A}}finally{try{_&&!_.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new we("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new we("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new we("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(_t.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(_t.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(_t.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(_t.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(_t.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(_t.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(_t.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(_t.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(_t.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(_t.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(_t.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(_t.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(_t.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(_t.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(_t.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(_t.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(_t.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(_t.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(_t.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(_t.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(_t.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(_t.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(_t.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(_t.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(_t.Big5,28,"Big5"),n.GB18030=new n(_t.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(_t.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),Pq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yp=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Pq(e,n),e.kind="UnsupportedOperationException",e}(Mr),ml=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Nr?e:Nr.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",o=0,a=e.length;o<a;o++){var c=e[o].toString(16);c.length<2&&(c="0"+c),i+="%"+c}return decodeURIComponent(i)}if(r.equals(Nr.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new yp("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Nr.UTF8)||e.equals(Nr.ISO8859_1)||e.equals(Nr.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))).split(""),r=[],i=0;i<t.length;i++)r.push(t[i].charCodeAt(0));return new Uint8Array(r)},n}(),Fn=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return ml.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(kt.CHARACTER_SET)!==void 0)return t.get(kt.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,a=!0,c=0,u=0,d=0,h=0,p=0,g=0,_=0,E=0,A=0,S=0,x=0,O=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,P=0;P<r&&(i||o||a);P++){var D=255&e[P];a&&(c>0?(128&D)==0?a=!1:c--:(128&D)!=0&&((64&D)==0?a=!1:(c++,(32&D)==0?u++:(c++,(16&D)==0?d++:(c++,(8&D)==0?h++:a=!1))))),i&&(D>127&&D<160?i=!1:D>159&&(D<192||D===215||D===247)&&x++),o&&(p>0?D<64||D===127||D>252?o=!1:p--:D===128||D===160||D>239?o=!1:D>160&&D<224?(g++,E=0,++_>A&&(A=_)):D>127?(p++,_=0,++E>S&&(S=E)):(_=0,E=0))}return a&&c>0&&(a=!1),o&&p>0&&(o=!1),a&&(O||u+d+h>0)?n.UTF8:o&&(n.ASSUME_SHIFT_JIS||A>=3||S>=3)?n.SHIFT_JIS:i&&o?A===2&&g===2||10*x>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:o?n.SHIFT_JIS:a?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function o(c,u,d,h,p,g){if(c==="%%")return"%";if(t[++i]!==void 0){c=h?parseInt(h.substr(1)):void 0;var _,E=p?parseInt(p.substr(1)):void 0;switch(g){case"s":_=t[i];break;case"c":_=t[i][0];break;case"f":_=parseFloat(t[i]).toFixed(c);break;case"p":_=parseFloat(t[i]).toPrecision(c);break;case"e":_=parseFloat(t[i]).toExponential(c);break;case"x":_=parseInt(t[i]).toString(E||16);break;case"d":_=parseFloat(parseInt(t[i],E||10).toPrecision(c)).toFixed(0)}_=typeof _=="object"?JSON.stringify(_):(+_).toString(E);for(var A=parseInt(d),S=d&&d[0]+""=="0"?"0":" ";_.length<A;)_=u!==void 0?_+S:S+_;return _}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,o)},n.getBytes=function(e,t){return ml.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Nr.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Nr.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Nr.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),Nt=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Fn.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)},n}(),rs=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new He("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),o=0;o<t;o++)for(var a=e[o],c=0;c<r;c++)a[c]&&i.set(c,o);return i},n.parseFromString=function(e,t,r){if(e===null)throw new He("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,a=0,c=-1,u=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(o>a){if(c===-1)c=o-a;else if(o-a!==c)throw new He("row lengths do not match");a=o,u++}d++}else if(e.substring(d,d+t.length)===t)d+=t.length,i[o]=!0,o++;else{if(e.substring(d,d+r.length)!==r)throw new He("illegal character encountered: "+e.substring(d));d+=r.length,i[o]=!1,o++}if(o>a){if(c===-1)c=o-a;else if(o-a!==c)throw new He("row lengths do not match");u++}for(var h=new n(c,u),p=0;p<o;p++)i[p]&&h.set(Math.floor(p%c),Math.floor(p/c));return h},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(31&e)&1)!=0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(31&e)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(31&e)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(31&e)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new He("input matrix dimensions do not match");for(var t=new ro(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,a=this.height;o<a;o++)for(var c=o*r,u=e.getRow(o,t).getBitArray(),d=0;d<r;d++)i[c+d]^=u[d]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new He("Left and top must be nonnegative");if(i<1||r<1)throw new He("Height and width must be at least 1");var o=e+r,a=t+i;if(a>this.height||o>this.width)throw new He("The region must fit inside the matrix");for(var c=this.rowSize,u=this.bits,d=t;d<a;d++)for(var h=d*c,p=e;p<o;p++)u[h+Math.floor(p/32)]|=1<<(31&p)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new ro(this.width):t.clear();for(var r=this.rowSize,i=this.bits,o=e*r,a=0;a<r;a++)t.setBulk(32*a,i[o+a]);return t},n.prototype.setRow=function(e,t){Bt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new ro(e),i=new ro(e),o=0,a=Math.floor((t+1)/2);o<a;o++)r=this.getRow(o,r),i=this.getRow(t-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,o=e,a=t,c=-1,u=-1,d=0;d<t;d++)for(var h=0;h<r;h++){var p=i[d*r+h];if(p!==0){if(d<a&&(a=d),d>u&&(u=d),32*h<o){for(var g=0;(p<<31-g&4294967295)==0;)g++;32*h+g<o&&(o=32*h+g)}if(32*h+31>c){for(g=31;!(p>>>g);)g--;32*h+g>c&&(c=32*h+g)}}}return c<o||u<a?null:Int32Array.from([o,a,c-o+1,u-a+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,o=r%e*32,a=t[r],c=0;(a<<31-c&4294967295)==0;)c++;return o+=c,Int32Array.from([o,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=32*Math.floor(r%e),a=t[r],c=31;!(a>>>c);)c--;return o+=c,Int32Array.from([o,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Yr.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+Yr.hashCode(this.bits)},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new Nt,o=0,a=this.height;o<a;o++){for(var c=0,u=this.width;c<u;c++)i.append(this.get(c,o)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),Mq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ce=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Mq(e,n),e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Mr),kq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lq=function(n){function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return kq(e,n),e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new ro(o):r.clear(),this.initArrays(o);for(var a=i.getRow(t,this.luminances),c=this.buckets,u=0;u<o;u++)c[(255&a[u])>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(c);if(o<3)for(u=0;u<o;u++)(255&a[u])<d&&r.set(u);else{var h=255&a[0],p=255&a[1];for(u=1;u<o-1;u++){var g=255&a[u+1];(4*p-h-g)/2<d&&r.set(u),h=p,p=g}}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),o=new rs(r,i);this.initArrays(r);for(var a=this.buckets,c=1;c<5;c++)for(var u=Math.floor(i*c/5),d=t.getRow(u,this.luminances),h=Math.floor(4*r/5),p=Math.floor(r/5);p<h;p++)a[(255&d[p])>>e.LUMINANCE_SHIFT]++;var g=e.estimateBlackPoint(a),_=t.getMatrix();for(c=0;c<i;c++){var E=c*r;for(p=0;p<r;p++)(255&_[E+p])<g&&o.set(p,c)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,o=0,a=0,c=0;c<r;c++)t[c]>a&&(o=c,a=t[c]),t[c]>i&&(i=t[c]);var u=0,d=0;for(c=0;c<r;c++){var h=c-o;(E=t[c]*h*h)>d&&(u=c,d=E)}if(o>u){var p=o;o=u,u=p}if(u-o<=r/16)throw new ce;var g=u-1,_=-1;for(c=u-1;c>o;c--){var E,A=c-o;(E=A*A*(u-c)*(i-t[c]))>_&&(g=c,_=E)}return g<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Cq),jq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aR=function(n){function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return jq(e,n),e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),a=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!=0&&a++;var c=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!=0&&c++;var u=e.calculateBlackPoints(o,a,c,r,i),d=new rs(r,i);e.calculateThresholdForBlock(o,a,c,r,i,u,d),this.matrix=d}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,o,a,c,u){for(var d=a-e.BLOCK_SIZE,h=o-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>d&&(g=d);for(var _=e.cap(p,2,i-3),E=0;E<r;E++){var A=E<<e.BLOCK_SIZE_POWER;A>h&&(A=h);for(var S=e.cap(E,2,r-3),x=0,O=-2;O<=2;O++){var P=c[_+O];x+=P[S-2]+P[S-1]+P[S]+P[S+1]+P[S+2]}var D=x/25;e.thresholdBlock(t,A,g,D,o,u)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,o,a,c){for(var u=0,d=i*a+r;u<e.BLOCK_SIZE;u++,d+=a)for(var h=0;h<e.BLOCK_SIZE;h++)(255&t[d+h])<=o&&c.set(r+h,i+u)},e.calculateBlackPoints=function(t,r,i,o,a){for(var c=a-e.BLOCK_SIZE,u=o-e.BLOCK_SIZE,d=new Array(i),h=0;h<i;h++){d[h]=new Int32Array(r);var p=h<<e.BLOCK_SIZE_POWER;p>c&&(p=c);for(var g=0;g<r;g++){var _=g<<e.BLOCK_SIZE_POWER;_>u&&(_=u);for(var E=0,A=255,S=0,x=0,O=p*o+_;x<e.BLOCK_SIZE;x++,O+=o){for(var P=0;P<e.BLOCK_SIZE;P++){var D=255&t[O+P];E+=D,D<A&&(A=D),D>S&&(S=D)}if(S-A>e.MIN_DYNAMIC_RANGE)for(x++,O+=o;x<e.BLOCK_SIZE;x++,O+=o)for(P=0;P<e.BLOCK_SIZE;P++)E+=255&t[O+P]}var j=E>>2*e.BLOCK_SIZE_POWER;if(S-A<=e.MIN_DYNAMIC_RANGE&&(j=A/2,h>0&&g>0)){var H=(d[h-1][g]+2*d[h][g-1]+d[h-1][g-1])/4;A<H&&(j=H)}d[h][g]=j}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=5*e.BLOCK_SIZE,e.MIN_DYNAMIC_RANGE=24,e}(Lq),th=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new yp("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new yp("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new yp("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Nt,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var a=255&i[o],c=void 0;c=a<64?"#":a<128?"+":a<192?".":" ",t.append(c)}t.append(`
`)}return t.toString()},n}(),Vq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),q1=function(n){function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return Vq(e,n),e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),o=this.getWidth(),a=0;a<o;a++)i[a]=255-(255&i[a]);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(255&t[o]);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,o){return new e(this.delegate.crop(t,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(th),Bq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fq=function(n){function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return Bq(e,n),e.makeBufferFromCanvasImageData=function(t){var r=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(r.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var o=new Uint8ClampedArray(r*i),a=0,c=0,u=t.length;a<u;a+=4,c++){var d=void 0;t[a+3]===0?d=255:d=306*t[a]+601*t[a+1]+117*t[a+2]+512>>10,o[c]=d}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new He("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return n.prototype.crop.call(this,t,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,c=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(o))*a+Math.abs(Math.sin(o))*c),d=Math.ceil(Math.abs(Math.sin(o))*a+Math.abs(Math.cos(o))*c);return r.width=u,r.height=d,i.translate(u/2,d/2),i.rotate(o),i.drawImage(this.canvas,a/-2,c/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new q1(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e}(th),Uq=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),_r=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){var h;d.done?i(d.value):(h=d.value,h instanceof t?h:new t(function(p){p(h)})).then(a,c)}u((r=r.apply(n,[])).next())})},br=function(n,e){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(u){return function(d){return function(h){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(i=2&h[0]?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,r=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||h[0]!==6&&h[0]!==2)){a=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){a.label=h[1];break}if(h[0]===6&&a.label<i[1]){a.label=i[1],i=h;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(h);break}i[2]&&a.ops.pop(),a.trys.pop();continue}h=e.call(n,a)}catch(p){h=[6,p],r=0}finally{t=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([u,d])}}},zq=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Su=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return _r(this,void 0,void 0,function(){var e,t,r,i,o,a,c,u,d,h,p,g;return br(this,function(_){switch(_.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=_.sent(),t=[];try{for(r=zq(e),i=r.next();!i.done;i=r.next())o=i.value,(a=o.kind==="video"?"videoinput":o.kind)==="videoinput"&&(c=o.deviceId||o.id,u=o.label||"Video device "+(t.length+1),d=o.groupId,h={deviceId:c,label:u,kind:a,groupId:d},t.push(h))}catch(E){p={error:E}}finally{try{i&&!i.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return _r(this,void 0,void 0,function(){return br(this,function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,e.sent().map(function(t){return new Uq(t.deviceId,t.label)})]}})})},n.prototype.findDeviceById=function(e){return _r(this,void 0,void 0,function(){var t;return br(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(t=r.sent())?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return _r(this,void 0,void 0,function(){return br(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return _r(this,void 0,void 0,function(){var r;return br(this,function(i){switch(i.label){case 0:return this.reset(),r={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(r,t)];case 1:return[2,i.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return _r(this,void 0,void 0,function(){var r;return br(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return _r(this,void 0,void 0,function(){var r;return br(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=i.sent(),[4,this.decodeOnce(r)];case 2:return[2,i.sent()]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return _r(this,void 0,void 0,function(){return br(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return _r(this,void 0,void 0,function(){var i;return br(this,function(o){switch(o.label){case 0:return i={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(i,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return _r(this,void 0,void 0,function(){var i;return br(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,o.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return _r(this,void 0,void 0,function(){var i;return br(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return _r(this,void 0,void 0,function(){var r;return br(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return _r(this,void 0,void 0,function(){return br(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new sn("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new sn("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new sn("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new sn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new sn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new sn("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);return this.imageElement=t,this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t)},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new sn("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new sn("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new sn("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new sn("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return _r(this,void 0,void 0,function(){return br(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return _r(this,void 0,void 0,function(){return br(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!!e.complete&&e.naturalWidth!==0},n.prototype.prepareImageElement=function(e){var t;return e===void 0&&((t=document.createElement("img")).width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return e||typeof document>"u"||((t=document.createElement("video")).width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(a,c){if(i._stopAsyncDecode)return c(new ce("Video stream has ended before any code could be detected.")),void(i._stopAsyncDecode=void 0);try{a(i.decode(e))}catch(u){if(t&&u instanceof ce||(u instanceof On||u instanceof we)&&r)return setTimeout(o,i._timeBetweenDecodingAttempts,a,c);c(u)}};return new Promise(function(a,c){return o(a,c)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode)r._stopContinuousDecode=void 0;else try{var o=r.decode(e);t(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(a){t(null,a),(a instanceof On||a instanceof we||a instanceof ce)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){var t=this.getCaptureCanvasContext(e);this.drawImageOnCanvas(t,e);var r=this.getCaptureCanvas(e),i=new Fq(r),o=new aR(i);return new sR(o)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t,r,i=document.createElement("canvas");return e!==void 0&&(e instanceof HTMLVideoElement?(t=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(t=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),i.style.width=t+"px",i.style.height=r+"px",i.width=t,i.height=r,i},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(this.videoEndedListener!==void 0&&this.videoElement.removeEventListener("ended",this.videoEndedListener),this.videoPlayingEventListener!==void 0&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),this.videoCanPlayListener!==void 0&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),kr=function(){function n(e,t,r,i,o,a){r===void 0&&(r=t==null?0:8*t.length),a===void 0&&(a=Bt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=a,this.text=e,this.rawBytes=t,this.numBits=r??(t==null?0:8*t.length),this.resultPoints=i,this.format=o,this.resultMetadata=null,this.timestamp=a??Bt.currentTimeMillis()}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Bt.arraycopy(t,0,r,0,t.length),Bt.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}();(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(iv||(iv={}));var ov,Be=iv;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ov||(ov={}));var Zn,rr=ov,W1=function(){function n(e,t,r,i,o,a){o===void 0&&(o=-1),a===void 0&&(a=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=a,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),Xd=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new He;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),uf=function(){function n(e,t){if(t.length===0)throw new He;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Bt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t,r=this.coefficients;if(e===1){t=0;for(var i=0,o=r.length;i!==o;i++){var a=r[i];t=Xd.addOrSubtract(t,a)}return t}t=r[0];var c=r.length,u=this.field;for(i=1;i<c;i++)t=Xd.addOrSubtract(u.multiply(e,t),r[i]);return t},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new He("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),a=r.length-t.length;Bt.arraycopy(r,0,o,0,a);for(var c=a;c<r.length;c++)o[c]=Xd.addOrSubtract(t[c-a],r[c]);return new n(this.field,o)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new He("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,a=new Int32Array(r+o-1),c=this.field,u=0;u<r;u++)for(var d=t[u],h=0;h<o;h++)a[u+h]=Xd.addOrSubtract(a[u+h],c.multiply(d,i[h]));return new n(c,a)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),o=this.coefficients,a=0;a<t;a++)i[a]=r.multiply(o[a],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new He;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),a=this.field,c=0;c<i;c++)o[c]=a.multiply(r[c],t);return new n(a,o)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new He("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new He("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,o=e.getCoefficient(e.getDegree()),a=t.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var c=i.getDegree()-e.getDegree(),u=t.multiply(i.getCoefficient(i.getDegree()),a),d=e.multiplyByMonomial(c,u),h=t.buildMonomial(c,u);r=r.addOrSubtract(h),i=i.addOrSubtract(d)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),Hq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lR=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Hq(e,n),e.kind="ArithmeticException",e}(Mr),Gq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ys=function(n){function e(t,r,i){var o=n.call(this)||this;o.primitive=t,o.size=r,o.generatorBase=i;for(var a=new Int32Array(r),c=1,u=0;u<r;u++)a[u]=c,(c*=2)>=r&&(c^=t,c&=r-1);o.expTable=a;var d=new Int32Array(r);for(u=0;u<r-1;u++)d[a[u]]=u;return o.logTable=d,o.zero=new uf(o,Int32Array.from([0])),o.one=new uf(o,Int32Array.from([1])),o}return Gq(e,n),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new He;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new uf(this,i)},e.prototype.inverse=function(t){if(t===0)throw new lR;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+nr.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Xd),qq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Um=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return qq(e,n),e.kind="ReedSolomonException",e}(Mr),Wq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nh=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Wq(e,n),e.kind="IllegalStateException",e}(Mr),$1=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new uf(r,e),o=new Int32Array(t),a=!0,c=0;c<t;c++){var u=i.evaluateAt(r.exp(c+r.getGeneratorBase()));o[o.length-1-c]=u,u!==0&&(a=!1)}if(!a){var d=new uf(r,o),h=this.runEuclideanAlgorithm(r.buildMonomial(t,1),d,t),p=h[0],g=h[1],_=this.findErrorLocations(p),E=this.findErrorMagnitudes(g,_);for(c=0;c<_.length;c++){var A=e.length-1-r.log(_[c]);if(A<0)throw new Um("Bad error location");e[A]=Ys.addOrSubtract(e[A],E[c])}}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=this.field,a=e,c=t,u=o.getZero(),d=o.getOne();c.getDegree()>=(r/2|0);){var h=a,p=u;if(u=d,(a=c).isZero())throw new Um("r_{i-1} was zero");c=h;for(var g=o.getZero(),_=a.getCoefficient(a.getDegree()),E=o.inverse(_);c.getDegree()>=a.getDegree()&&!c.isZero();){var A=c.getDegree()-a.getDegree(),S=o.multiply(c.getCoefficient(c.getDegree()),E);g=g.addOrSubtract(o.buildMonomial(A,S)),c=c.addOrSubtract(a.multiplyByMonomial(A,S))}if(d=g.multiply(u).addOrSubtract(p),c.getDegree()>=a.getDegree())throw new nh("Division algorithm failed to reduce polynomial?")}var x=d.getCoefficient(0);if(x===0)throw new Um("sigmaTilde(0) was zero");var O=o.inverse(x);return[d.multiplyScalar(O),c.multiplyScalar(O)]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,o=this.field,a=1;a<o.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=o.inverse(a),i++);if(i!==t)throw new Um("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),o=this.field,a=0;a<r;a++){for(var c=o.inverse(t[a]),u=1,d=0;d<r;d++)if(a!==d){var h=o.multiply(t[d],c),p=(1&h)==0?1|h:-2&h;u=o.multiply(u,p)}i[a]=o.multiply(e.evaluateAt(c),o.inverse(u)),o.getGeneratorBase()!==0&&(i[a]=o.multiply(i[a],c))}return i},n}();(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Zn||(Zn={}));var tS=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),o=n.convertBoolArrayToByteArray(i),a=n.getEncodedData(i),c=new W1(o,a,null,null);return c.setNumBits(i.length),c},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Zn.UPPER,i=Zn.UPPER,o="",a=0;a<t;)if(i===Zn.BINARY){if(t-a<5)break;var c=n.readCode(e,a,5);if(a+=5,c===0){if(t-a<11)break;c=n.readCode(e,a,11)+31,a+=11}for(var u=0;u<c;u++){if(t-a<8){a=t;break}var d=n.readCode(e,a,8);o+=Fn.castAsNonUtf8Char(d),a+=8}i=r}else{var h=i===Zn.DIGIT?4:5;if(t-a<h)break;d=n.readCode(e,a,h),a+=h;var p=n.getCharacter(i,d);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(o+=p,i=r)}return o},n.getTable=function(e){switch(e){case"L":return Zn.LOWER;case"P":return Zn.PUNCT;case"M":return Zn.MIXED;case"D":return Zn.DIGIT;case"B":return Zn.BINARY;default:return Zn.UPPER}},n.getCharacter=function(e,t){switch(e){case Zn.UPPER:return n.UPPER_TABLE[t];case Zn.LOWER:return n.LOWER_TABLE[t];case Zn.MIXED:return n.MIXED_TABLE[t];case Zn.PUNCT:return n.PUNCT_TABLE[t];case Zn.DIGIT:return n.DIGIT_TABLE[t];default:throw new nh("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Ys.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Ys.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Ys.AZTEC_DATA_10):(r=12,t=Ys.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new we;for(var a=e.length%r,c=new Int32Array(o),u=0;u<o;u++,a+=r)c[u]=n.readCode(e,a,r);try{new $1(t).decode(c,o-i)}catch(A){throw new we(A)}var d=(1<<r)-1,h=0;for(u=0;u<i;u++){if((_=c[u])===0||_===d)throw new we;_!==1&&_!==d-1||h++}var p=new Array(i*r-h),g=0;for(u=0;u<i;u++){var _;if((_=c[u])===1||_===d-1)p.fill(_>1,g,g+r-1),g+=r-1;else for(var E=r-1;E>=0;--E)p[g++]=(_&1<<E)!=0}return p},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+4*r,o=new Int32Array(i),a=new Array(this.totalBitsInLayer(r,t));if(t)for(var c=0;c<o.length;c++)o[c]=c;else{var u=i+1+2*nr.truncDivision(nr.truncDivision(i,2)-1,15),d=i/2,h=nr.truncDivision(u,2);for(c=0;c<d;c++){var p=c+nr.truncDivision(c,15);o[d-c-1]=h-p-1,o[d+c]=h+p+1}}c=0;for(var g=0;c<r;c++){for(var _=4*(r-c)+(t?9:12),E=2*c,A=i-1-E,S=0;S<_;S++)for(var x=2*S,O=0;O<2;O++)a[g+x+O]=e.get(o[E+O],o[E+S]),a[g+2*_+x+O]=e.get(o[E+S],o[A-O]),a[g+4*_+x+O]=e.get(o[A-O],o[A-S]),a[g+6*_+x+O]=e.get(o[A-S],o[E+O]);g+=8*_}return a},n.readCode=function(e,t,r){for(var i=0,o=t;o<t+r;o++)i<<=1,e[o]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),dt=function(){function n(){}return n.round=function(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var o=e-r,a=t-i;return Math.sqrt(o*o+a*a)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++)t+=e[r];return t},n}(),sv=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Re=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*sv.floatToIntBits(this.x)+sv.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t,r,i,o=this.distance(e[0],e[1]),a=this.distance(e[1],e[2]),c=this.distance(e[0],e[2]);if(a>=o&&a>=c?(r=e[0],t=e[1],i=e[2]):c>=a&&c>=o?(r=e[1],t=e[0],i=e[2]):(r=e[2],t=e[0],i=e[1]),this.crossProductZ(t,r,i)<0){var u=t;t=i,i=u}e[0]=t,e[1]=r,e[2]=i},n.distance=function(e,t){return dt.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,o=t.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},n}(),u_=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),$q=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xq=function(n){function e(t,r,i,o,a){var c=n.call(this,t,r)||this;return c.compact=i,c.nbDatablocks=o,c.nbLayers=a,c}return $q(e,n),e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(u_),av=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ce}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,o=!1,a=!0,c=!1,u=!1,d=!1,h=!1,p=!1,g=this.width,_=this.height;a;){a=!1;for(var E=!0;(E||!u)&&t<g;)(E=this.containsBlackPoint(r,i,t,!1))?(t++,a=!0,u=!0):u||t++;if(t>=g){o=!0;break}for(var A=!0;(A||!d)&&i<_;)(A=this.containsBlackPoint(e,t,i,!0))?(i++,a=!0,d=!0):d||i++;if(i>=_){o=!0;break}for(var S=!0;(S||!h)&&e>=0;)(S=this.containsBlackPoint(r,i,e,!1))?(e--,a=!0,h=!0):h||e--;if(e<0){o=!0;break}for(var x=!0;(x||!p)&&r>=0;)(x=this.containsBlackPoint(e,t,r,!0))?(r--,a=!0,p=!0):p||r--;if(r<0){o=!0;break}a&&(c=!0)}if(!o&&c){for(var O=t-e,P=null,D=1;P===null&&D<O;D++)P=this.getBlackPointOnSegment(e,i-D,e+D,i);if(P==null)throw new ce;var j=null;for(D=1;j===null&&D<O;D++)j=this.getBlackPointOnSegment(e,r+D,e+D,r);if(j==null)throw new ce;var H=null;for(D=1;H===null&&D<O;D++)H=this.getBlackPointOnSegment(t,r+D,t-D,r);if(H==null)throw new ce;var M=null;for(D=1;M===null&&D<O;D++)M=this.getBlackPointOnSegment(t,i-D,t-D,i);if(M==null)throw new ce;return this.centerEdges(M,P,H,j)}throw new ce},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var o=dt.round(dt.distance(e,t,r,i)),a=(r-e)/o,c=(i-t)/o,u=this.image,d=0;d<o;d++){var h=dt.round(e+d*a),p=dt.round(t+d*c);if(u.get(h,p))return new Re(h,p)}return null},n.prototype.centerEdges=function(e,t,r,i){var o=e.getX(),a=e.getY(),c=t.getX(),u=t.getY(),d=r.getX(),h=r.getY(),p=i.getX(),g=i.getY(),_=n.CORR;return o<this.width/2?[new Re(p-_,g+_),new Re(c+_,u+_),new Re(d-_,h-_),new Re(o+_,a-_)]:[new Re(p+_,g+_),new Re(c+_,u-_),new Re(d-_,h+_),new Re(o-_,a-_)]},n.prototype.containsBlackPoint=function(e,t,r,i){var o=this.image;if(i){for(var a=e;a<=t;a++)if(o.get(a,r))return!0}else for(var c=e;c<=t;c++)if(o.get(r,c))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),nS=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),o=!0,a=0;a<t.length&&o;a+=2){var c=Math.floor(t[a]),u=Math.floor(t[a+1]);if(c<-1||c>r||u<-1||u>i)throw new ce;o=!1,c===-1?(t[a]=0,o=!0):c===r&&(t[a]=r-1,o=!0),u===-1?(t[a+1]=0,o=!0):u===i&&(t[a+1]=i-1,o=!0)}for(o=!0,a=t.length-2;a>=0&&o;a-=2){if(c=Math.floor(t[a]),u=Math.floor(t[a+1]),c<-1||c>r||u<-1||u>i)throw new ce;o=!1,c===-1?(t[a]=0,o=!0):c===r&&(t[a]=r-1,o=!0),u===-1?(t[a+1]=0,o=!0):u===i&&(t[a+1]=i-1,o=!0)}},n}(),cR=function(){function n(e,t,r,i,o,a,c,u,d){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=o,this.a32=a,this.a13=c,this.a23=u,this.a33=d}return n.quadrilateralToQuadrilateral=function(e,t,r,i,o,a,c,u,d,h,p,g,_,E,A,S){var x=n.quadrilateralToSquare(e,t,r,i,o,a,c,u);return n.squareToQuadrilateral(d,h,p,g,_,E,A,S).times(x)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,o=this.a13,a=this.a21,c=this.a22,u=this.a23,d=this.a31,h=this.a32,p=this.a33,g=0;g<t;g+=2){var _=e[g],E=e[g+1],A=o*_+u*E+p;e[g]=(r*_+a*E+d)/A,e[g+1]=(i*_+c*E+h)/A}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,o=this.a13,a=this.a21,c=this.a22,u=this.a23,d=this.a31,h=this.a32,p=this.a33,g=e.length,_=0;_<g;_++){var E=e[_],A=t[_],S=o*E+u*A+p;e[_]=(r*E+a*A+d)/S,t[_]=(i*E+c*A+h)/S}},n.squareToQuadrilateral=function(e,t,r,i,o,a,c,u){var d=e-r+o-c,h=t-i+a-u;if(d===0&&h===0)return new n(r-e,o-r,e,i-t,a-i,t,0,0,1);var p=r-o,g=c-o,_=i-a,E=u-a,A=p*E-g*_,S=(d*E-g*h)/A,x=(p*h-d*_)/A;return new n(r-e+S*r,c-e+x*c,e,i-t+S*i,u-t+x*u,t,S,x,1)},n.quadrilateralToSquare=function(e,t,r,i,o,a,c,u){return n.squareToQuadrilateral(e,t,r,i,o,a,c,u).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),Yq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Kq=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Yq(e,n),e.prototype.sampleGrid=function(t,r,i,o,a,c,u,d,h,p,g,_,E,A,S,x,O,P,D){var j=cR.quadrilateralToQuadrilateral(o,a,c,u,d,h,p,g,_,E,A,S,x,O,P,D);return this.sampleGridWithTransform(t,r,i,j)},e.prototype.sampleGridWithTransform=function(t,r,i,o){if(r<=0||i<=0)throw new ce;for(var a=new rs(r,i),c=new Float32Array(2*r),u=0;u<i;u++){for(var d=c.length,h=u+.5,p=0;p<d;p+=2)c[p]=p/2+.5,c[p+1]=h;o.transformPoints(c),nS.checkAndNudgePoints(t,c);try{for(p=0;p<d;p+=2)t.get(Math.floor(c[p]),Math.floor(c[p+1]))&&a.set(p/2,u)}catch{throw new ce}}return a},e}(nS),d_=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new Kq,n}(),Ir=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Re(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),Qq=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),a=this.getMatrixCornerPoints(r);return new Xq(o,a,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!(this.isValidPoint(e[0])&&this.isValidPoint(e[1])&&this.isValidPoint(e[2])&&this.isValidPoint(e[3])))throw new ce;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,o=0;o<4;o++){var a=r[(this.shift+o)%4];this.compact?(i<<=7,i+=a>>1&127):(i<<=10,i+=(a>>2&992)+(a>>1&31))}var c=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=1+(c>>6),this.nbDataBlocks=1+(63&c)):(this.nbLayers=1+(c>>11),this.nbDataBlocks=1+(2047&c))},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(o,a,c){r=(r<<3)+((o>>t-2<<1)+(1&o))}),r=((1&r)<<11)+(r>>1);for(var i=0;i<4;i++)if(nr.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ce},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var o=r-i,a=new Int32Array(r),c=r-1;c>=0;--c)a[c]=15&e,e>>=4;try{new $1(Ys.AZTEC_PARAM).decode(a,o)}catch{throw new ce}var u=0;for(c=0;c<i;c++)u=(u<<4)+a[c];return u},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,o=e,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var c=this.getFirstDifferent(t,a,1,-1),u=this.getFirstDifferent(r,a,1,1),d=this.getFirstDifferent(i,a,-1,1),h=this.getFirstDifferent(o,a,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(h,c)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(c,u,d,h))break}t=c,r=u,i=d,o=h,a=!a}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ce;this.compact=this.nbCenterLayers===5;var g=new Re(t.getX()+.5,t.getY()-.5),_=new Re(r.getX()+.5,r.getY()+.5),E=new Re(i.getX()-.5,i.getY()+.5),A=new Re(o.getX()-.5,o.getY()-.5);return this.expandSquare([g,_,E,A],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{e=(d=new av(this.image).detect())[0],t=d[1],r=d[2],i=d[3]}catch{var o=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new Ir(o+7,a-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ir(o+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Ir(o-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Ir(o-7,a-7),!1,-1,-1).toResultPoint()}var c=dt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),u=dt.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var d;e=(d=new av(this.image,15,c,u).detect())[0],t=d[1],r=d[2],i=d[3]}catch{e=this.getFirstDifferent(new Ir(c+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ir(c+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Ir(c-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Ir(c-7,u-7),!1,-1,-1).toResultPoint()}return c=dt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),u=dt.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Ir(c,u)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,o){var a=d_.getInstance(),c=this.getDimension(),u=c/2-this.nbCenterLayers,d=c/2+this.nbCenterLayers;return a.sampleGrid(e,c,c,u,u,d,u,d,d,u,d,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,o=this.distanceResultPoint(e,t),a=o/r,c=e.getX(),u=e.getY(),d=a*(t.getX()-e.getX())/o,h=a*(t.getY()-e.getY())/o,p=0;p<r;p++)this.image.get(dt.round(c+p*d),dt.round(u+p*h))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){e=new Ir(e.getX()-3,e.getY()+3),t=new Ir(t.getX()-3,t.getY()-3),r=new Ir(r.getX()+3,r.getY()-3),i=new Ir(i.getX()+3,i.getY()+3);var o=this.getColor(i,e);if(o===0)return!1;var a=this.getColor(e,t);return a===o&&(a=this.getColor(t,r))===o&&(a=this.getColor(r,i))===o},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,o=(t.getY()-e.getY())/r,a=0,c=e.getX(),u=e.getY(),d=this.image.get(e.getX(),e.getY()),h=Math.ceil(r),p=0;p<h;p++)c+=i,u+=o,this.image.get(dt.round(c),dt.round(u))!==d&&a++;var g=a/r;return g>.1&&g<.9?0:g<=.1===d?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var o=e.getX()+r,a=e.getY()+i;this.isValid(o,a)&&this.image.get(o,a)===t;)o+=r,a+=i;for(o-=r,a-=i;this.isValid(o,a)&&this.image.get(o,a)===t;)o+=r;for(o-=r;this.isValid(o,a)&&this.image.get(o,a)===t;)a+=i;return new Ir(o,a-=i)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),o=e[0].getX()-e[2].getX(),a=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,d=new Re(c+i*o,u+i*a),h=new Re(c-i*o,u-i*a);return o=e[1].getX()-e[3].getX(),a=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2,[d,new Re(c+i*o,u+i*a),h,new Re(c-i*o,u-i*a)]},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=dt.round(e.getX()),r=dt.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return dt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return dt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(nr.truncDivision(this.nbLayers-4,8)+1)+15},n}(),n1=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new Qq(e.getBlackMatrix()),o=null,a=null;try{o=(c=i.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(t,o),a=new tS().decode(c)}catch(p){r=p}if(a==null)try{var c;o=(c=i.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(t,o),a=new tS().decode(c)}catch(p){throw r??p}var u=new kr(a.getText(),a.getRawBytes(),a.getNumBits(),o,Be.AZTEC,Bt.currentTimeMillis()),d=a.getByteSegments();d!=null&&u.putMetadata(rr.BYTE_SEGMENTS,d);var h=a.getECLevel();return h!=null&&u.putMetadata(rr.ERROR_CORRECTION_LEVEL,h),u},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(kt.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,o,a){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),Zq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){function e(t){return t===void 0&&(t=500),n.call(this,new n1,t)||this}Zq(e,n)})(Su);var ir=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{if(t&&t.get(kt.TRY_HARDER)===!0&&e.isRotateSupported()){var r=e.rotateCounterClockwise(),i=this.doDecode(r,t),o=i.getResultMetadata(),a=270;o!==null&&o.get(rr.ORIENTATION)===!0&&(a+=o.get(rr.ORIENTATION)%360),i.putMetadata(rr.ORIENTATION,a);var c=i.getResultPoints();if(c!==null)for(var u=r.getHeight(),d=0;d<c.length;d++)c[d]=new Re(u-c[d].getY()-1,c[d].getX());return i}throw new ce}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r,i=e.getWidth(),o=e.getHeight(),a=new ro(i),c=t&&t.get(kt.TRY_HARDER)===!0,u=Math.max(1,o>>(c?8:5));r=c?o:15;for(var d=Math.trunc(o/2),h=0;h<r;h++){var p=Math.trunc((h+1)/2),g=d+u*((1&h)==0?p:-p);if(g<0||g>=o)break;try{a=e.getBlackRow(g,a)}catch{continue}for(var _=function(x){if(x===1&&(a.reverse(),t&&t.get(kt.NEED_RESULT_POINT_CALLBACK)===!0)){var O=new Map;t.forEach(function(j,H){return O.set(H,j)}),O.delete(kt.NEED_RESULT_POINT_CALLBACK),t=O}try{var P=E.decodeRow(g,a,t);if(x===1){P.putMetadata(rr.ORIENTATION,180);var D=P.getResultPoints();D!==null&&(D[0]=new Re(i-D[0].getX()-1,D[0].getY()),D[1]=new Re(i-D[1].getX()-1,D[1].getY()))}return{value:P}}catch{}},E=this,A=0;A<2;A++){var S=_(A);if(typeof S=="object")return S.value}}throw new ce},n.recordPattern=function(e,t,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var a=e.getSize();if(t>=a)throw new ce;for(var c=!e.get(t),u=0,d=t;d<a;){if(e.get(d)!==c)r[u]++;else{if(++u===i)break;r[u]=1,c=!c}d++}if(u!==i&&(u!==i-1||d!==a))throw new ce},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,o=e.get(t);t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new ce;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,a=0,c=0;c<i;c++)o+=e[c],a+=t[c];if(o<a)return Number.POSITIVE_INFINITY;var u=o/a;r*=u;for(var d=0,h=0;h<i;h++){var p=e[h],g=t[h]*u,_=p>g?p-g:g-p;if(_>r)return Number.POSITIVE_INFINITY;d+=_}return d/o},n}(),Jq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rS=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Jq(e,n),e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),o=0,a=Int32Array.from([0,0,0,0,0,0]),c=i,u=!1,d=i;d<r;d++)if(t.get(d)!==u)a[o]++;else{if(o===5){for(var h=e.MAX_AVG_VARIANCE,p=-1,g=e.CODE_START_A;g<=e.CODE_START_C;g++){var _=ir.patternMatchVariance(a,e.CODE_PATTERNS[g],e.MAX_INDIVIDUAL_VARIANCE);_<h&&(h=_,p=g)}if(p>=0&&t.isRange(Math.max(0,c-(d-c)/2),c,!1))return Int32Array.from([c,d,p]);c+=a[0]+a[1],(a=a.slice(2,a.length-1))[o-1]=0,a[o]=0,o--}else o++;a[o]=1,u=!u}throw new ce},e.decodeCode=function(t,r,i){ir.recordPattern(t,i,r);for(var o=e.MAX_AVG_VARIANCE,a=-1,c=0;c<e.CODE_PATTERNS.length;c++){var u=e.CODE_PATTERNS[c],d=this.patternMatchVariance(r,u,e.MAX_INDIVIDUAL_VARIANCE);d<o&&(o=d,a=c)}if(a>=0)return a;throw new ce},e.prototype.decodeRow=function(t,r,i){var o,a=i&&i.get(kt.ASSUME_GS1)===!0,c=e.findStartPattern(r),u=c[2],d=0,h=new Uint8Array(20);switch(h[d++]=u,u){case e.CODE_START_A:o=e.CODE_CODE_A;break;case e.CODE_START_B:o=e.CODE_CODE_B;break;case e.CODE_START_C:o=e.CODE_CODE_C;break;default:throw new we}for(var p=!1,g=!1,_="",E=c[0],A=c[1],S=Int32Array.from([0,0,0,0,0,0]),x=0,O=0,P=u,D=0,j=!0,H=!1,M=!1;!p;){var R=g;switch(g=!1,x=O,O=e.decodeCode(r,S,A),h[d++]=O,O!==e.CODE_STOP&&(j=!0),O!==e.CODE_STOP&&(P+=++D*O),E=A,A+=S.reduce(function(me,ue){return me+ue},0),O){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new we}switch(o){case e.CODE_CODE_A:if(O<64)_+=M===H?String.fromCharCode(32+O):String.fromCharCode(32+O+128),M=!1;else if(O<96)_+=M===H?String.fromCharCode(O-64):String.fromCharCode(O+64),M=!1;else switch(O!==e.CODE_STOP&&(j=!1),O){case e.CODE_FNC_1:a&&(_.length===0?_+="]C1":_+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!H&&M?(H=!0,M=!1):H&&M?(H=!1,M=!1):M=!0;break;case e.CODE_SHIFT:g=!0,o=e.CODE_CODE_B;break;case e.CODE_CODE_B:o=e.CODE_CODE_B;break;case e.CODE_CODE_C:o=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0}break;case e.CODE_CODE_B:if(O<96)_+=M===H?String.fromCharCode(32+O):String.fromCharCode(32+O+128),M=!1;else switch(O!==e.CODE_STOP&&(j=!1),O){case e.CODE_FNC_1:a&&(_.length===0?_+="]C1":_+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!H&&M?(H=!0,M=!1):H&&M?(H=!1,M=!1):M=!0;break;case e.CODE_SHIFT:g=!0,o=e.CODE_CODE_A;break;case e.CODE_CODE_A:o=e.CODE_CODE_A;break;case e.CODE_CODE_C:o=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0}break;case e.CODE_CODE_C:if(O<100)O<10&&(_+="0"),_+=O;else switch(O!==e.CODE_STOP&&(j=!1),O){case e.CODE_FNC_1:a&&(_.length===0?_+="]C1":_+="");break;case e.CODE_CODE_A:o=e.CODE_CODE_A;break;case e.CODE_CODE_B:o=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0}}R&&(o=o===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var k=A-E;if(A=r.getNextUnset(A),!r.isRange(A,Math.min(r.getSize(),A+(A-E)/2),!1))throw new ce;if((P-=D*x)%103!==x)throw new On;var U=_.length;if(U===0)throw new ce;U>0&&j&&(_=o===e.CODE_CODE_C?_.substring(0,U-2):_.substring(0,U-1));for(var z=(c[1]+c[0])/2,q=E+k/2,F=h.length,Ce=new Uint8Array(F),Ee=0;Ee<F;Ee++)Ce[Ee]=h[Ee];var Q=[new Re(z,t),new Re(q,t)];return new kr(_,Ce,0,Q,Be.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(ir),eW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Dy=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iS=function(n){function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return eW(e,n),e.prototype.decodeRow=function(t,r,i){var o,a,c,u,d=this.counters;d.fill(0),this.decodeRowResult="";var h,p,g=e.findAsteriskPattern(r,d),_=r.getNextSet(g[1]),E=r.getSize();do{e.recordPattern(r,_,d);var A=e.toNarrowWidePattern(d);if(A<0)throw new ce;h=e.patternToChar(A),this.decodeRowResult+=h,p=_;try{for(var S=(o=void 0,Dy(d)),x=S.next();!x.done;x=S.next())_+=x.value}catch(z){o={error:z}}finally{try{x&&!x.done&&(a=S.return)&&a.call(S)}finally{if(o)throw o.error}}_=r.getNextSet(_)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var O,P=0;try{for(var D=Dy(d),j=D.next();!j.done;j=D.next())P+=j.value}catch(z){c={error:z}}finally{try{j&&!j.done&&(u=D.return)&&u.call(D)}finally{if(c)throw c.error}}if(_!==E&&2*(_-p-P)<P)throw new ce;if(this.usingCheckDigit){for(var H=this.decodeRowResult.length-1,M=0,R=0;R<H;R++)M+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(R));if(this.decodeRowResult.charAt(H)!==e.ALPHABET_STRING.charAt(M%43))throw new On;this.decodeRowResult=this.decodeRowResult.substring(0,H)}if(this.decodeRowResult.length===0)throw new ce;O=this.extendedMode?e.decodeExtended(this.decodeRowResult):this.decodeRowResult;var k=(g[1]+g[0])/2,U=p+P/2;return new kr(O,null,0,[new Re(k,t),new Re(U,t)],Be.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),o=t.getNextSet(0),a=0,c=o,u=!1,d=r.length,h=o;h<i;h++)if(t.get(h)!==u)r[a]++;else{if(a===d-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,c-Math.floor((h-c)/2)),c,!1))return[c,h];c+=r[0]+r[1],r.copyWithin(0,2,2+a-1),r[a-1]=0,r[a]=0,a--}else a++;r[a]=1,u=!u}throw new ce},e.toNarrowWidePattern=function(t){var r,i,o,a=t.length,c=0;do{var u=2147483647;try{for(var d=(r=void 0,Dy(t)),h=d.next();!h.done;h=d.next())(E=h.value)<u&&E>c&&(u=E)}catch(A){r={error:A}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}c=u,o=0;for(var p=0,g=0,_=0;_<a;_++)(E=t[_])>c&&(g|=1<<a-1-_,o++,p+=E);if(o===3){for(_=0;_<a&&o>0;_++){var E;if((E=t[_])>c&&(o--,2*E>=p))return-1}return g}}while(o>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new ce},e.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var a=t.charAt(o);if(a==="+"||a==="$"||a==="%"||a==="/"){var c=t.charAt(o+1),u="\0";switch(a){case"+":if(!(c>="A"&&c<="Z"))throw new we;u=String.fromCharCode(c.charCodeAt(0)+32);break;case"$":if(!(c>="A"&&c<="Z"))throw new we;u=String.fromCharCode(c.charCodeAt(0)-64);break;case"%":if(c>="A"&&c<="E")u=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")u=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")u=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")u="\0";else if(c==="V")u="@";else if(c==="W")u="`";else{if(c!=="X"&&c!=="Y"&&c!=="Z")throw new we;u=""}break;case"/":if(c>="A"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)-32);else{if(c!=="Z")throw new we;u=":"}}i+=u,o++}else i+=a}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(ir),tW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nW=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oS=function(n){function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return tW(e,n),e.prototype.decodeRow=function(t,r,i){var o,a,c=this.decodeStart(r),u=this.decodeEnd(r),d=new Nt;e.decodeMiddle(r,c[1],u[0],d);var h=d.toString(),p=null;i!=null&&(p=i.get(kt.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=h.length,_=!1,E=0;try{for(var A=nW(p),S=A.next();!S.done;S=A.next()){var x=S.value;if(g===x){_=!0;break}x>E&&(E=x)}}catch(P){o={error:P}}finally{try{S&&!S.done&&(a=A.return)&&a.call(A)}finally{if(o)throw o.error}}if(!_&&g>E&&(_=!0),!_)throw new we;var O=[new Re(c[1],t),new Re(u[0],t)];return new kr(h,null,0,O,Be.ITF,new Date().getTime())},e.decodeMiddle=function(t,r,i,o){var a=new Int32Array(10),c=new Int32Array(5),u=new Int32Array(5);for(a.fill(0),c.fill(0),u.fill(0);r<i;){ir.recordPattern(t,r,a);for(var d=0;d<5;d++){var h=2*d;c[d]=a[h],u[d]=a[h+1]}var p=e.decodeDigit(c);o.append(p.toString()),p=this.decodeDigit(u),o.append(p.toString()),a.forEach(function(g){r+=g})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=10*this.narrowLineWidth;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new ce},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new ce;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(a){a instanceof ce&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var o=i.length,a=new Int32Array(o),c=t.getSize(),u=!1,d=0,h=r;a.fill(0);for(var p=r;p<c;p++)if(t.get(p)!==u)a[d]++;else{if(d===o-1){if(ir.patternMatchVariance(a,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[h,p];h+=a[0]+a[1],Bt.arraycopy(a,2,a,0,d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,u=!u}throw new ce},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,a=0;a<o;a++){var c=e.PATTERNS[a],u=ir.patternMatchVariance(t,c,e.MAX_INDIVIDUAL_VARIANCE);u<r?(r=u,i=a):u===r&&(i=-1)}if(i>=0)return i%10;throw new ce},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(ir),rW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ru=function(n){function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return rW(e,n),e.findStartGuardPattern=function(t){for(var r,i=!1,o=0,a=Int32Array.from([0,0,0]);!i;){a=Int32Array.from([0,0,0]);var c=(r=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,a))[0],u=c-((o=r[1])-c);u>=0&&(i=t.isRange(u,c,!1))}return r},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){if((a=t.charAt(o).charCodeAt(0)-48)<0||a>9)throw new we;i+=a}for(i*=3,o=r-2;o>=0;o-=2){var a;if((a=t.charAt(o).charCodeAt(0)-48)<0||a>9)throw new we;i+=a}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,o){return this.findGuardPattern(t,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(t,r,i,o,a){for(var c=t.getSize(),u=0,d=r=i?t.getNextUnset(r):t.getNextSet(r),h=o.length,p=i,g=r;g<c;g++)if(t.get(g)!==p)a[u]++;else{if(u===h-1){if(ir.patternMatchVariance(a,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,g]);d+=a[0]+a[1];for(var _=a.slice(2,a.length-1),E=0;E<u-1;E++)a[E]=_[E];a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,p=!p}throw new ce},e.decodeDigit=function(t,r,i,o){this.recordPattern(t,i,r);for(var a=this.MAX_AVG_VARIANCE,c=-1,u=o.length,d=0;d<u;d++){var h=o[d],p=ir.patternMatchVariance(r,h,e.MAX_INDIVIDUAL_VARIANCE);p<a&&(a=p,c=d)}if(c>=0)return c;throw new ce},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(ir),iW=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oW=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),a=i.toString(),c=n.parseExtensionString(a),u=[new Re((r[0]+r[1])/2,e),new Re(o,e)],d=new kr(a,null,0,u,Be.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&d.putAllMetadata(c),d},n.prototype.decodeMiddle=function(e,t,r){var i,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var c=e.getSize(),u=t[1],d=0,h=0;h<5&&u<c;h++){var p=ru.decodeDigit(e,a,u,ru.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,iW(a)),_=g.next();!_.done;_=g.next())u+=_.value}catch(A){i={error:A}}finally{try{_&&!_.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}p>=10&&(d|=1<<4-h),h!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==5)throw new ce;var E=this.determineCheckDigit(d);if(n.extensionChecksum(r.toString())!==E)throw new ce;return u},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;for(r*=3,i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return(r*=3)%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new ce},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[rr.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}var r=parseInt(e.substring(1)),i=r%100;return t+(r/100).toString()+"."+(i<10?"0"+i:i.toString())},n}(),sW=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aW=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),a=i.toString(),c=n.parseExtensionString(a),u=[new Re((r[0]+r[1])/2,e),new Re(o,e)],d=new kr(a,null,0,u,Be.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&d.putAllMetadata(c),d},n.prototype.decodeMiddle=function(e,t,r){var i,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var c=e.getSize(),u=t[1],d=0,h=0;h<2&&u<c;h++){var p=ru.decodeDigit(e,a,u,ru.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,sW(a)),_=g.next();!_.done;_=g.next())u+=_.value}catch(E){i={error:E}}finally{try{_&&!_.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}p>=10&&(d|=1<<1-h),h!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==2)throw new ce;if(parseInt(r.toString())%4!==d)throw new ce;return u},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[rr.ISSUE_NUMBER,parseInt(e)]])},n}(),lW=function(){function n(){}return n.decodeRow=function(e,t,r){var i=ru.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new oW().decodeRow(e,t,i)}catch{return new aW().decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),cW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cn=function(n){function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(c){return Int32Array.from(c)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),a=0;a<i.length;a++)o[a]=i[i.length-a-1];e.L_AND_G_PATTERNS[r]=o}return t}return cW(e,n),e.prototype.decodeRow=function(t,r,i){var o=e.findStartGuardPattern(r),a=i==null?null:i.get(kt.NEED_RESULT_POINT_CALLBACK);if(a!=null){var c=new Re((o[0]+o[1])/2,t);a.foundPossibleResultPoint(c)}var u=this.decodeMiddle(r,o,this.decodeRowStringBuffer),d=u.rowOffset,h=u.resultString;if(a!=null){var p=new Re(d,t);a.foundPossibleResultPoint(p)}var g=e.decodeEnd(r,d);if(a!=null){var _=new Re((g[0]+g[1])/2,t);a.foundPossibleResultPoint(_)}var E=g[1],A=E+(E-g[0]);if(A>=r.getSize()||!r.isRange(E,A,!1))throw new ce;var S=h.toString();if(S.length<8)throw new we;if(!e.checkChecksum(S))throw new On;var x=(o[1]+o[0])/2,O=(g[1]+g[0])/2,P=this.getBarcodeFormat(),D=[new Re(x,t),new Re(O,t)],j=new kr(S,null,0,D,P,new Date().getTime()),H=0;try{var M=lW.decodeRow(t,r,g[1]);j.putMetadata(rr.UPC_EAN_EXTENSION,M.getText()),j.putAllMetadata(M.getResultMetadata()),j.addResultPoints(M.getResultPoints()),H=M.getText().length}catch{}var R=i==null?null:i.get(kt.ALLOWED_EAN_EXTENSIONS);if(R!=null){var k=!1;for(var U in R)if(H.toString()===U){k=!0;break}if(!k)throw new ce}return P===Be.EAN_13||Be.UPC_A,j},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){if((a=t.charAt(o).charCodeAt(0)-48)<0||a>9)throw new we;i+=a}for(i*=3,o=r-2;o>=0;o-=2){var a;if((a=t.charAt(o).charCodeAt(0)-48)<0||a>9)throw new we;i+=a}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(ru),uW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sS=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lv=function(n){function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return uW(e,n),e.prototype.decodeMiddle=function(t,r,i){var o,a,c,u,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var h=t.getSize(),p=r[1],g=0,_=0;_<6&&p<h;_++){var E=Cn.decodeDigit(t,d,p,Cn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+E%10);try{for(var A=(o=void 0,sS(d)),S=A.next();!S.done;S=A.next())p+=S.value}catch(P){o={error:P}}finally{try{S&&!S.done&&(a=A.return)&&a.call(A)}finally{if(o)throw o.error}}E>=10&&(g|=1<<5-_)}for(i=e.determineFirstDigit(i,g),p=Cn.findGuardPattern(t,p,!0,Cn.MIDDLE_PATTERN,new Int32Array(Cn.MIDDLE_PATTERN.length).fill(0))[1],_=0;_<6&&p<h;_++){E=Cn.decodeDigit(t,d,p,Cn.L_PATTERNS),i+=String.fromCharCode(48+E);try{for(var x=(c=void 0,sS(d)),O=x.next();!O.done;O=x.next())p+=O.value}catch(P){c={error:P}}finally{try{O&&!O.done&&(u=x.return)&&u.call(x)}finally{if(c)throw c.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Be.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t;throw new ce},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Cn),dW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aS=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lS=function(n){function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return dW(e,n),e.prototype.decodeMiddle=function(t,r,i){var o,a,c,u,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var h=t.getSize(),p=r[1],g=0;g<4&&p<h;g++){var _=Cn.decodeDigit(t,d,p,Cn.L_PATTERNS);i+=String.fromCharCode(48+_);try{for(var E=(o=void 0,aS(d)),A=E.next();!A.done;A=E.next())p+=A.value}catch(O){o={error:O}}finally{try{A&&!A.done&&(a=E.return)&&a.call(E)}finally{if(o)throw o.error}}}for(p=Cn.findGuardPattern(t,p,!0,Cn.MIDDLE_PATTERN,new Int32Array(Cn.MIDDLE_PATTERN.length).fill(0))[1],g=0;g<4&&p<h;g++){_=Cn.decodeDigit(t,d,p,Cn.L_PATTERNS),i+=String.fromCharCode(48+_);try{for(var S=(c=void 0,aS(d)),x=S.next();!x.done;x=S.next())p+=x.value}catch(O){c={error:O}}finally{try{x&&!x.done&&(u=S.return)&&u.call(S)}finally{if(c)throw c.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Be.EAN_8},e}(Cn),fW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hW=function(n){function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new lv,t}return fW(e,n),e.prototype.getBarcodeFormat=function(){return Be.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new kr(r.substring(1),null,null,t.getResultPoints(),Be.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}throw new ce},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Cn),mW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pW=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cS=function(n){function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return mW(e,n),e.prototype.decodeMiddle=function(t,r,i){var o,a,c=this.decodeMiddleCounters.map(function(A){return A});c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var u=t.getSize(),d=r[1],h=0,p=0;p<6&&d<u;p++){var g=e.decodeDigit(t,c,d,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var _=(o=void 0,pW(c)),E=_.next();!E.done;E=_.next())d+=E.value}catch(A){o={error:A}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(o)throw o.error}}g>=10&&(h|=1<<5-p)}return e.determineNumSysAndCheckDigit(new Nt(i),h),d},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Cn.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o])return t.insert(0,"0"+i),void t.append("0"+o);throw ce.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Be.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(a){return a.charCodeAt(0)}),i=new Nt;i.append(t.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o)}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Cn),gW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uS=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Py=function(n){function e(t){var r=n.call(this)||this,i=t==null?null:t.get(kt.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(Be.EAN_13)>-1?o.push(new lv):i.indexOf(Be.UPC_A)>-1&&o.push(new hW),i.indexOf(Be.EAN_8)>-1&&o.push(new lS),i.indexOf(Be.UPC_E)>-1&&o.push(new cS)),o.length===0&&(o.push(new lv),o.push(new lS),o.push(new cS)),r.readers=o,r}return gW(e,n),e.prototype.decodeRow=function(t,r,i){var o,a;try{for(var c=uS(this.readers),u=c.next();!u.done;u=c.next()){var d=u.value;try{var h=d.decodeRow(t,r,i),p=h.getBarcodeFormat()===Be.EAN_13&&h.getText().charAt(0)==="0",g=i==null?null:i.get(kt.POSSIBLE_FORMATS),_=g==null||g.includes(Be.UPC_A);if(p&&_){var E=h.getRawBytes(),A=new kr(h.getText().substring(1),E,E.length,h.getResultPoints(),Be.UPC_A);return A.putAllMetadata(h.getResultMetadata()),A}return h}catch{}}}catch(S){o={error:S}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}throw new ce},e.prototype.reset=function(){var t,r;try{for(var i=uS(this.readers),o=i.next();!o.done;o=i.next())o.value.reset()}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(ir),yW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vW=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},il=function(n){function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return yW(e,n),e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(ir.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new ce},e.count=function(t){return dt.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,o=r[0],a=1;a<t.length;a++)r[a]>o&&(o=r[a],i=a);t[i]++},e.decrement=function(t,r){for(var i=0,o=r[0],a=1;a<t.length;a++)r[a]<o&&(o=r[a],i=a);t[i]--},e.isFinderPattern=function(t){var r,i,o=t[0]+t[1],a=o/(o+t[2]+t[3]);if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=vW(t),h=d.next();!h.done;h=d.next()){var p=h.value;p>u&&(u=p),p<c&&(c=p)}}catch(g){r={error:g}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(ir),r1=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),uR=function(){function n(e,t,r,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Re(r,o)),this.resultPoints.push(new Re(i,o))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),wW=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pc=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,o,a=0;try{for(var c=wW(e),u=c.next();!u.done;u=c.next())a+=u.value}catch(x){i={error:x}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}for(var d=0,h=0,p=e.length,g=0;g<p-1;g++){var _=void 0;for(_=1,h|=1<<g;_<e[g];_++,h&=~(1<<g)){var E=n.combins(a-_-1,p-g-2);if(r&&h===0&&a-_-(p-g-1)>=p-g-1&&(E-=n.combins(a-_-(p-g),p-g-2)),p-g-1>1){for(var A=0,S=a-_-(p-g-2);S>t;S--)A+=n.combins(a-_-S-1,p-g-3);E-=A*(p-1-g)}else a-_>t&&E--;d+=E}a-=_}return d},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var o=1,a=1,c=e;c>r;c--)o*=c,a<=i&&(o/=a,a++);for(;a<=i;)o/=a,a++;return o},n}(),_W=function(){function n(){}return n.buildBitArray=function(e){var t=2*e.length-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=new ro(12*t),i=0,o=e[0].getRightChar().getValue(),a=11;a>=0;--a)(o&1<<a)!=0&&r.set(i),i++;for(a=1;a<e.length;++a){for(var c=e[a],u=c.getLeftChar().getValue(),d=11;d>=0;--d)(u&1<<d)!=0&&r.set(i),i++;if(c.getRightChar()!=null){var h=c.getRightChar().getValue();for(d=11;d>=0;--d)(h&1<<d)!=0&&r.set(i),i++}}return r},n}(),Ja=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),f_=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),bW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ci=function(n){function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return bW(e,n),e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(f_),EW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),el=function(n){function e(t,r,i){var o=n.call(this,t)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return EW(e,n),e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(f_),AW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zm=function(n){function e(t,r,i){var o=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new we;return o.firstDigit=r,o.secondDigit=i,o}return AW(e,n),e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(f_),Hm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TW=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,o,a,c,u,d;if(!e)return null;if(e.length<2)throw new ce;var h=e.substring(0,2);try{for(var p=Hm(n.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next())if((j=g.value)[0]===h)return j[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,j[2],e):n.processFixedAI(2,j[1],e)}catch(H){t={error:H}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new ce;var _=e.substring(0,3);try{for(var E=Hm(n.THREE_DIGIT_DATA_LENGTH),A=E.next();!A.done;A=E.next())if((j=A.value)[0]===_)return j[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,j[2],e):n.processFixedAI(3,j[1],e)}catch(H){i={error:H}}finally{try{A&&!A.done&&(o=E.return)&&o.call(E)}finally{if(i)throw i.error}}try{for(var S=Hm(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),x=S.next();!x.done;x=S.next())if((j=x.value)[0]===_)return j[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,j[2],e):n.processFixedAI(4,j[1],e)}catch(H){a={error:H}}finally{try{x&&!x.done&&(c=S.return)&&c.call(S)}finally{if(a)throw a.error}}if(e.length<4)throw new ce;var O=e.substring(0,4);try{for(var P=Hm(n.FOUR_DIGIT_DATA_LENGTH),D=P.next();!D.done;D=P.next()){var j;if((j=D.value)[0]===O)return j[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,j[2],e):n.processFixedAI(4,j[1],e)}}catch(H){u={error:H}}finally{try{D&&!D.done&&(d=P.return)&&d.call(P)}finally{if(u)throw u.error}}throw new ce},n.processFixedAI=function(e,t,r){if(r.length<e)throw new ce;var i=r.substring(0,e);if(r.length<e+t)throw new ce;var o=r.substring(e,e+t),a=r.substring(e+t),c="("+i+")"+o,u=n.parseFieldsInGeneralPurpose(a);return u==null?c:c+u},n.processVariableAI=function(e,t,r){var i,o=r.substring(0,e);i=r.length<e+t?r.length:e+t;var a=r.substring(e,i),c=r.substring(i),u="("+o+")"+a,d=n.parseFieldsInGeneralPurpose(c);return d==null?u:u+d},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),vp=function(){function n(e){this.buffer=new Nt,this.information=e}return n.prototype.decodeAllCodes=function(e,t){for(var r=t,i=null;;){var o=this.decodeGeneralPurposeField(r,i),a=TW.parseFieldsInGeneralPurpose(o.getNewString());if(a!=null&&e.append(a),i=o.isRemaining()?""+o.getRemainingValue():null,r===o.getNewPosition())break;r=o.getNewPosition()}return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return new zm(this.information.getSize(),t===0?zm.FNC1:t-1,zm.FNC1)}var r=this.extractNumericValueFromBitArray(e,7);return new zm(e+7,(r-8)/11,(r-8)%11)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,o=0;o<r;++o)e.get(t+o)&&(i|=1<<r-o-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new el(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new el(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();if(e=this.current.isAlpha()?(t=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(t=this.parseIsoIec646Block()).isFinished():(t=this.parseNumericBlock()).isFinished(),r===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return t=e.isSecondDigitFNC1()?new el(this.current.getPosition(),this.buffer.toString()):new el(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Ja(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1())return t=new el(this.current.getPosition(),this.buffer.toString()),new Ja(!0,t);this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ja(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new el(this.current.getPosition(),this.buffer.toString());return new Ja(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ja(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new el(this.current.getPosition(),this.buffer.toString());return new Ja(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ja(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Ci(e+5,Ci.FNC1);if(t>=5&&t<15)return new Ci(e+5,"0"+(t-5));var r,i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new Ci(e+7,""+(i+1));if(i>=90&&i<116)return new Ci(e+7,""+(i+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:r="!";break;case 233:r='"';break;case 234:r="%";break;case 235:r="&";break;case 236:r="'";break;case 237:r="(";break;case 238:r=")";break;case 239:r="*";break;case 240:r="+";break;case 241:r=",";break;case 242:r="-";break;case 243:r=".";break;case 244:r="/";break;case 245:r=":";break;case 246:r=";";break;case 247:r="<";break;case 248:r="=";break;case 249:r=">";break;case 250:r="?";break;case 251:r="_";break;case 252:r=" ";break;default:throw new we}return new Ci(e+8,r)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Ci(e+5,Ci.FNC1);if(t>=5&&t<15)return new Ci(e+5,"0"+(t-5));var r,i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new Ci(e+6,""+(i+33));switch(i){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new nh("Decoding invalid alphanumeric value: "+i)}return new Ci(e+6,r)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),dR=function(){function n(e){this.information=e,this.generalDecoder=new vp(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),SW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ri=function(n){function e(t){return n.call(this,t)||this}return SW(e,n),e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var o=0;o<4;++o){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);a/100==0&&t.append("0"),a/10==0&&t.append("0"),t.append(a)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,o=0;o<13;o++){var a=t.charAt(o+r).charCodeAt(0)-48;i+=(1&o)==0?3*a:a}(i=10-i%10)===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(dR),xW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),CW=function(n){function e(t){return n.call(this,t)||this}return xW(e,n),e.prototype.parseInformation=function(){var t=new Nt;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Ri),IW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),RW=function(n){function e(t){return n.call(this,t)||this}return IW(e,n),e.prototype.parseInformation=function(){var t=new Nt;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(dR),NW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wp=function(n){function e(t){return n.call(this,t)||this}return NW(e,n),e.prototype.encodeCompressedWeight=function(t,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,o);for(var a=this.checkWeight(o),c=1e5,u=0;u<5;++u)a/c==0&&t.append("0"),c/=10;t.append(a)},e}(Ri),OW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fR=function(n){function e(t){return n.call(this,t)||this}return OW(e,n),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!=e.HEADER_SIZE+wp.GTIN_SIZE+e.WEIGHT_SIZE)throw new ce;var t=new Nt;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+wp.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(wp),DW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PW=function(n){function e(t){return n.call(this,t)||this}return DW(e,n),e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(fR),MW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kW=function(n){function e(t){return n.call(this,t)||this}return MW(e,n),e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(fR),LW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jW=function(n){function e(t){return n.call(this,t)||this}return LW(e,n),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ri.GTIN_SIZE)throw new ce;var t=new Nt;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ri.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ri.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Ri),VW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BW=function(n){function e(t){return n.call(this,t)||this}return VW(e,n),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ri.GTIN_SIZE)throw new ce;var t=new Nt;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ri.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ri.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100==0&&t.append("0"),i/10==0&&t.append("0"),t.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ri.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Ri),FW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vs=function(n){function e(t,r,i){var o=n.call(this,t)||this;return o.dateCode=i,o.firstAIdigits=r,o}return FW(e,n),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!=e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ce;var t=new Nt;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!=38400){t.append("("),t.append(this.dateCode),t.append(")");var o=i%32,a=(i/=32)%12+1,c=i/=12;c/10==0&&t.append("0"),t.append(c),a/10==0&&t.append("0"),t.append(a),o/10==0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(wp),dS=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n&&n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern)},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},n}(),UW=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed},n.prototype.checkEqualitity=function(e,t){var r;if(e&&t)return e.forEach(function(i,o){t.forEach(function(a){i.getLeftChar().getValue()===a.getLeftChar().getValue()&&i.getRightChar().getValue()===a.getRightChar().getValue()&&i.getFinderPatter().getValue()===a.getFinderPatter().getValue()&&(r=!0)})}),r},n}(),zW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bs=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HW=function(n){function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return zW(e,n),e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i,o=!1;!o;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(c){if(c instanceof ce){if(!this.pairs.length)throw new ce;o=!0}}if(this.checkChecksum())return this.pairs;if(i=!!this.rows.length,this.storeRow(t,!1),i){var a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0))!=null)return a}throw new ce},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,o,a=r;a<this.rows.length;a++){var c=this.rows[a];this.pairs.length=0;try{for(var u=(i=void 0,Bs(t)),d=u.next();!d.done;d=u.next()){var h=d.value;this.pairs.push(h.getPairs())}}catch(g){i={error:g}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}if(this.pairs.push(c.getPairs()),e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(c);try{return this.checkRows(p,a+1)}catch(g){console.log(g)}}}throw new ce},e.isValidSequence=function(t){var r,i;try{for(var o=Bs(e.FINDER_PATTERN_SEQUENCES),a=o.next();!a.done;a=o.next()){var c=a.value;if(!(t.length>c.length)){for(var u=!0,d=0;d<t.length;d++)if(t[d].getFinderPattern().getValue()!=c[d]){u=!1;break}if(u)return!0}}}catch(h){r={error:h}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,o=!1,a=!1;i<this.rows.length;){var c=this.rows[i];if(c.getRowNumber()>t){a=c.isEquivalent(this.pairs);break}o=c.isEquivalent(this.pairs),i++}a||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new UW(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,o,a,c,u,d;try{for(var h=Bs(r),p=h.next();!p.done;p=h.next()){var g=p.value;if(g.getPairs().length!==t.length)try{for(var _=(a=void 0,Bs(g.getPairs())),E=_.next();!E.done;E=_.next()){var A=E.value,S=!1;try{for(var x=(u=void 0,Bs(t)),O=x.next();!O.done;O=x.next()){var P=O.value;if(dS.equals(A,P)){S=!0;break}}}catch(D){u={error:D}}finally{try{O&&!O.done&&(d=x.return)&&d.call(x)}finally{if(u)throw u.error}}}}catch(D){a={error:D}}finally{try{E&&!E.done&&(c=_.return)&&c.call(_)}finally{if(a)throw a.error}}}}catch(D){i={error:D}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,o,a,c,u,d;try{for(var h=Bs(r),p=h.next();!p.done;p=h.next()){var g=p.value,_=!0;try{for(var E=(a=void 0,Bs(t)),A=E.next();!A.done;A=E.next()){var S=A.value,x=!1;try{for(var O=(u=void 0,Bs(g.getPairs())),P=O.next();!P.done;P=O.next()){var D=P.value;if(S.equals(D)){x=!0;break}}}catch(j){u={error:j}}finally{try{P&&!P.done&&(d=O.return)&&d.call(O)}finally{if(u)throw u.error}}if(!x){_=!1;break}}}catch(j){a={error:j}}finally{try{A&&!A.done&&(c=E.return)&&c.call(E)}finally{if(a)throw a.error}}if(_)return!0}}catch(j){i={error:j}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=function(c){try{if(c.get(1))return new CW(c);if(!c.get(2))return new RW(c);switch(vp.extractNumericValueFromBitArray(c,1,4)){case 4:return new PW(c);case 5:return new kW(c)}switch(vp.extractNumericValueFromBitArray(c,1,5)){case 12:return new jW(c);case 13:return new BW(c)}switch(vp.extractNumericValueFromBitArray(c,1,7)){case 56:return new Vs(c,"310","11");case 57:return new Vs(c,"320","11");case 58:return new Vs(c,"310","13");case 59:return new Vs(c,"320","13");case 60:return new Vs(c,"310","15");case 61:return new Vs(c,"320","15");case 62:return new Vs(c,"310","17");case 63:return new Vs(c,"320","17")}}catch(u){throw console.log(u),new nh("unknown decoder: "+c)}}(_W.buildBitArray(t)).parseInformation(),i=t[0].getFinderPattern().getResultPoints(),o=t[t.length-1].getFinderPattern().getResultPoints(),a=[i[0],i[1],o[0],o[1]];return new kr(r,null,null,a,Be.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i==null)return!1;for(var o=i.getChecksumPortion(),a=2,c=1;c<this.pairs.size();++c){var u=this.pairs.get(c);o+=u.getLeftChar().getChecksumPortion(),a++;var d=u.getRightChar();d!=null&&(o+=d.getChecksumPortion(),a++)}return 211*(a-4)+(o%=211)==r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var o,a=r.length%2==0;this.startFromEven&&(a=!a);var c=!0,u=-1;do this.findNextPair(t,r,u),(o=this.parseFoundFinderPattern(t,i,a))==null?u=e.getNextSecondBar(t,this.startEnd[0]):c=!1;while(c);var d,h=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ce;try{d=this.decodeDataCharacter(t,o,a,!1)}catch(p){d=null,console.log(p)}return new dS(h,d,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var a,c=t.getSize();i>=0?a=i:this.isEmptyPair(r)?a=0:a=r[r.length-1].getFinderPattern().getStartEnd()[1];var u=r.length%2!=0;this.startFromEven&&(u=!u);for(var d=!1;a<c&&(d=!t.get(a));)a++;for(var h=0,p=a,g=a;g<c;g++)if(t.get(g)!=d)o[h]++;else{if(h==3){if(u&&e.reverseCounters(o),e.isFinderPattern(o))return this.startEnd[0]=p,void(this.startEnd[1]=g);u&&e.reverseCounters(o),p+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,h--}else h++;o[h]=1,d=!d}throw new ce},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var o=t[i];t[i]=t[r-i-1],t[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(t,r,i){var o,a,c;if(i){for(var u=this.startEnd[0]-1;u>=0&&!t.get(u);)u--;u++,o=this.startEnd[0]-u,a=u,c=this.startEnd[1]}else a=this.startEnd[0],o=(c=t.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var d,h=this.getDecodeFinderCounters();Bt.arraycopy(h,0,h,1,h.length-1),h[0]=o;try{d=this.parseFinderValue(h,e.FINDER_PATTERNS)}catch{return null}return new uR(d,[a,c],a,c,r)},e.prototype.decodeDataCharacter=function(t,r,i,o){for(var a=this.getDataCharacterCounters(),c=0;c<a.length;c++)a[c]=0;if(o)e.recordPatternInReverse(t,r.getStartEnd()[0],a);else{e.recordPattern(t,r.getStartEnd()[1],a);for(var u=0,d=a.length-1;u<d;u++,d--){var h=a[u];a[u]=a[d],a[d]=h}}var p=dt.sum(new Int32Array(a))/17,g=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(p-g)/g>.3)throw new ce;var _=this.getOddCounts(),E=this.getEvenCounts(),A=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(u=0;u<a.length;u++){var x=1*a[u]/p,O=x+.5;if(O<1){if(x<.3)throw new ce;O=1}else if(O>8){if(x>8.7)throw new ce;O=8}var P=u/2;(1&u)==0?(_[P]=O,A[P]=x-O):(E[P]=O,S[P]=x-O)}this.adjustOddEvenCounts(17);var D=4*r.getValue()+(i?0:2)+(o?0:1)-1,j=0,H=0;for(u=_.length-1;u>=0;u--){if(e.isNotA1left(r,i,o)){var M=e.WEIGHTS[D][2*u];H+=_[u]*M}j+=_[u]}var R=0;for(u=E.length-1;u>=0;u--)e.isNotA1left(r,i,o)&&(M=e.WEIGHTS[D][2*u+1],R+=E[u]*M);var k=H+R;if((1&j)!=0||j>13||j<4)throw new ce;var U=(13-j)/2,z=e.SYMBOL_WIDEST[U],q=9-z,F=Pc.getRSSvalue(_,z,!0),Ce=Pc.getRSSvalue(E,q,!1),Ee=e.EVEN_TOTAL_SUBSET[U],Q=e.GSUM[U];return new r1(F*Ee+Ce+Q,k)},e.isNotA1left=function(t,r,i){return!(t.getValue()==0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=dt.sum(new Int32Array(this.getOddCounts())),i=dt.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1;r>13?a=!0:r<4&&(o=!0);var c=!1,u=!1;i>13?u=!0:i<4&&(c=!0);var d=r+i-t,h=(1&r)==1,p=(1&i)==0;if(d==1)if(h){if(p)throw new ce;a=!0}else{if(!p)throw new ce;u=!0}else if(d==-1)if(h){if(p)throw new ce;o=!0}else{if(!p)throw new ce;c=!0}else{if(d!=0)throw new ce;if(h){if(!p)throw new ce;r<i?(o=!0,u=!0):(a=!0,c=!0)}else if(p)throw new ce}if(o){if(a)throw new ce;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new ce;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(il),GW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qW=function(n){function e(t,r,i){var o=n.call(this,t,r)||this;return o.count=0,o.finderPattern=i,o}return GW(e,n),e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(r1),WW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),My=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fS=function(n){function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return WW(e,n),e.prototype.decodeRow=function(t,r,i){var o,a,c,u,d=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,d),r.reverse();var h=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,h),r.reverse();try{for(var p=My(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var _=g.value;if(_.getCount()>1)try{for(var E=(c=void 0,My(this.possibleRightPairs)),A=E.next();!A.done;A=E.next()){var S=A.value;if(S.getCount()>1&&e.checkChecksum(_,S))return e.constructResult(_,S)}}catch(x){c={error:x}}finally{try{A&&!A.done&&(u=E.return)&&u.call(E)}finally{if(c)throw c.error}}}}catch(x){o={error:x}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}throw new ce},e.addOrTally=function(t,r){var i,o;if(r!=null){var a=!1;try{for(var c=My(t),u=c.next();!u.done;u=c.next()){var d=u.value;if(d.getValue()===r.getValue()){d.incrementCount(),a=!0;break}}}catch(h){i={error:h}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}a||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),o=new String(i).toString(),a=new Nt,c=13-o.length;c>0;c--)a.append("0");a.append(o);var u=0;for(c=0;c<13;c++){var d=a.charAt(c).charCodeAt(0)-48;u+=(1&c)==0?3*d:d}(u=10-u%10)===10&&(u=0),a.append(u.toString());var h=t.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new kr(a.toString(),null,0,[h[0],h[1],p[0],p[1]],Be.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(t,r,i,o){try{var a=this.findFinderPattern(t,r),c=this.parseFoundFinderPattern(t,i,r,a),u=o==null?null:o.get(kt.NEED_RESULT_POINT_CALLBACK);if(u!=null){var d=(a[0]+a[1])/2;r&&(d=t.getSize()-1-d),u.foundPossibleResultPoint(new Re(d,i))}var h=this.decodeDataCharacter(t,c,!0),p=this.decodeDataCharacter(t,c,!1);return new qW(1597*h.getValue()+p.getValue(),h.getChecksumPortion()+4*p.getChecksumPortion(),c)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var o=this.getDataCharacterCounters(),a=0;a<o.length;a++)o[a]=0;if(i)ir.recordPatternInReverse(t,r.getStartEnd()[0],o);else{ir.recordPattern(t,r.getStartEnd()[1]+1,o);for(var c=0,u=o.length-1;c<u;c++,u--){var d=o[c];o[c]=o[u],o[u]=d}}var h=i?16:15,p=dt.sum(new Int32Array(o))/h,g=this.getOddCounts(),_=this.getEvenCounts(),E=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(c=0;c<o.length;c++){var S=o[c]/p,x=Math.floor(S+.5);x<1?x=1:x>8&&(x=8);var O=Math.floor(c/2);(1&c)==0?(g[O]=x,E[O]=S-x):(_[O]=x,A[O]=S-x)}this.adjustOddEvenCounts(i,h);var P=0,D=0;for(c=g.length-1;c>=0;c--)D*=9,D+=g[c],P+=g[c];var j=0,H=0;for(c=_.length-1;c>=0;c--)j*=9,j+=_[c],H+=_[c];var M=D+3*j;if(i){if((1&P)!=0||P>12||P<4)throw new ce;var R=(12-P)/2,k=9-(Ce=e.OUTSIDE_ODD_WIDEST[R]),U=Pc.getRSSvalue(g,Ce,!1),z=Pc.getRSSvalue(_,k,!0),q=e.OUTSIDE_EVEN_TOTAL_SUBSET[R],F=e.OUTSIDE_GSUM[R];return new r1(U*q+z+F,M)}if((1&H)!=0||H>10||H<4)throw new ce;R=(10-H)/2,k=9-(Ce=e.INSIDE_ODD_WIDEST[R]),U=Pc.getRSSvalue(g,Ce,!0),z=Pc.getRSSvalue(_,k,!1);var Ce,Ee=e.INSIDE_ODD_TOTAL_SUBSET[R];return F=e.INSIDE_GSUM[R],new r1(z*Ee+U+F,M)},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=t.getSize(),a=!1,c=0;c<o&&r!==(a=!t.get(c));)c++;for(var u=0,d=c,h=c;h<o;h++)if(t.get(h)!==a)i[u]++;else{if(u===3){if(il.isFinderPattern(i))return[d,h];d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,u--}else u++;i[u]=1,a=!a}throw new ce},e.prototype.parseFoundFinderPattern=function(t,r,i,o){for(var a=t.get(o[0]),c=o[0]-1;c>=0&&a!==t.get(c);)c--;c++;var u=o[0]-c,d=this.getDecodeFinderCounters(),h=new Int32Array(d.length);Bt.arraycopy(d,0,h,1,d.length-1),h[0]=u;var p=this.parseFinderValue(h,e.FINDER_PATTERNS),g=c,_=o[1];return i&&(g=t.getSize()-1-g,_=t.getSize()-1-_),new uR(p,[c,o[1]],g,_,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=dt.sum(new Int32Array(this.getOddCounts())),o=dt.sum(new Int32Array(this.getEvenCounts())),a=!1,c=!1,u=!1,d=!1;t?(i>12?c=!0:i<4&&(a=!0),o>12?d=!0:o<4&&(u=!0)):(i>11?c=!0:i<5&&(a=!0),o>10?d=!0:o<4&&(u=!0));var h=i+o-r,p=(1&i)==(t?1:0),g=(1&o)==1;if(h===1)if(p){if(g)throw new ce;c=!0}else{if(!g)throw new ce;d=!0}else if(h===-1)if(p){if(g)throw new ce;a=!0}else{if(!g)throw new ce;u=!0}else{if(h!==0)throw new ce;if(p){if(!g)throw new ce;i<o?(a=!0,d=!0):(c=!0,u=!0)}else if(g)throw new ce}if(a){if(c)throw new ce;il.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&il.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(d)throw new ce;il.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&il.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(il),$W=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mc=function(n){function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(kt.POSSIBLE_FORMATS):null,o=t&&t.get(kt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;return i&&((i.includes(Be.EAN_13)||i.includes(Be.UPC_A)||i.includes(Be.EAN_8)||i.includes(Be.UPC_E))&&r.readers.push(new Py(t)),i.includes(Be.CODE_39)&&r.readers.push(new iS(o)),i.includes(Be.CODE_128)&&r.readers.push(new rS),i.includes(Be.ITF)&&r.readers.push(new oS),i.includes(Be.RSS_14)&&r.readers.push(new fS),i.includes(Be.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new HW))),r.readers.length===0&&(r.readers.push(new Py(t)),r.readers.push(new iS),r.readers.push(new Py(t)),r.readers.push(new rS),r.readers.push(new oS),r.readers.push(new fS)),r}return $W(e,n),e.prototype.decodeRow=function(t,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,r,i)}catch{}throw new ce},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(ir),XW=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){function e(t,r){return t===void 0&&(t=500),n.call(this,new Mc(r),t,r)||this}XW(e,n)})(Su);var xn,hS=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gt=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),ht=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),YW=function(){function n(e,t,r,i,o,a){var c,u;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=a;var d=0,h=a.getECCodewords(),p=a.getECBlocks();try{for(var g=hS(p),_=g.next();!_.done;_=g.next()){var E=_.value;d+=E.getCount()*(E.getDataCodewords()+h)}}catch(A){c={error:A}}finally{try{_&&!_.done&&(u=g.return)&&u.call(g)}finally{if(c)throw c.error}}this.totalCodewords=d}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((1&e)!=0||(1&t)!=0)throw new we;try{for(var o=hS(n.VERSIONS),a=o.next();!a.done;a=o.next()){var c=a.value;if(c.symbolSizeRows===e&&c.symbolSizeColumns===t)return c}}catch(u){r={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new we},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new gt(5,new ht(1,3))),new n(2,12,12,10,10,new gt(7,new ht(1,5))),new n(3,14,14,12,12,new gt(10,new ht(1,8))),new n(4,16,16,14,14,new gt(12,new ht(1,12))),new n(5,18,18,16,16,new gt(14,new ht(1,18))),new n(6,20,20,18,18,new gt(18,new ht(1,22))),new n(7,22,22,20,20,new gt(20,new ht(1,30))),new n(8,24,24,22,22,new gt(24,new ht(1,36))),new n(9,26,26,24,24,new gt(28,new ht(1,44))),new n(10,32,32,14,14,new gt(36,new ht(1,62))),new n(11,36,36,16,16,new gt(42,new ht(1,86))),new n(12,40,40,18,18,new gt(48,new ht(1,114))),new n(13,44,44,20,20,new gt(56,new ht(1,144))),new n(14,48,48,22,22,new gt(68,new ht(1,174))),new n(15,52,52,24,24,new gt(42,new ht(2,102))),new n(16,64,64,14,14,new gt(56,new ht(2,140))),new n(17,72,72,16,16,new gt(36,new ht(4,92))),new n(18,80,80,18,18,new gt(48,new ht(4,114))),new n(19,88,88,20,20,new gt(56,new ht(4,144))),new n(20,96,96,22,22,new gt(68,new ht(4,174))),new n(21,104,104,24,24,new gt(56,new ht(6,136))),new n(22,120,120,18,18,new gt(68,new ht(6,175))),new n(23,132,132,20,20,new gt(62,new ht(8,163))),new n(24,144,144,22,22,new gt(62,new ht(8,156),new ht(2,155))),new n(25,8,18,6,16,new gt(7,new ht(1,5))),new n(26,8,32,6,14,new gt(11,new ht(1,10))),new n(27,12,26,10,24,new gt(14,new ht(1,16))),new n(28,12,36,10,16,new gt(18,new ht(1,22))),new n(29,16,36,14,16,new gt(24,new ht(1,32))),new n(30,16,48,14,22,new gt(28,new ht(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),KW=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(1&t)!=0)throw new we;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new rs(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return YW.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),c=!1,u=!1,d=!1,h=!1;do if(r!==o||i!==0||c)if(r!==o-2||i!==0||(3&a)==0||u)if(r!==o+4||i!==2||(7&a)!=0||d)if(r!==o-2||i!==0||(7&a)!=4||h){do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=255&this.readUtah(r,i,o,a)),r-=2,i+=2;while(r>=0&&i<a);r+=1,i+=3;do r>=0&&i<a&&!this.readMappingMatrix.get(i,r)&&(e[t++]=255&this.readUtah(r,i,o,a)),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}else e[t++]=255&this.readCorner4(o,a),r-=2,i+=2,h=!0;else e[t++]=255&this.readCorner3(o,a),r-=2,i+=2,d=!0;else e[t++]=255&this.readCorner2(o,a),r-=2,i+=2,u=!0;else e[t++]=255&this.readCorner1(o,a),r-=2,i+=2,c=!0;while(r<o||i<a);if(t!==this.version.getTotalCodewords())throw new we;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var o=0;return this.readModule(e-2,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t,r,i)&&(o|=1),o<<=1,this.readModule(e,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e,t,r,i)&&(o|=1),o},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new He("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),a=t/i|0,c=r/o|0,u=new rs(c*o,a*i),d=0;d<a;++d)for(var h=d*i,p=0;p<c;++p)for(var g=p*o,_=0;_<i;++_)for(var E=d*(i+2)+1+_,A=h+_,S=0;S<o;++S){var x=p*(o+2)+1+S;if(e.get(x,E)){var O=g+S;u.set(O,A)}}return u},n}(),mS=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},QW=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,o,a,c=t.getECBlocks(),u=0,d=c.getECBlocks();try{for(var h=mS(d),p=h.next();!p.done;p=h.next())u+=(S=p.value).getCount()}catch(F){r={error:F}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}var g=new Array(u),_=0;try{for(var E=mS(d),A=E.next();!A.done;A=E.next())for(var S=A.value,x=0;x<S.getCount();x++){var O=S.getDataCodewords(),P=c.getECCodewords()+O;g[_++]=new n(O,new Uint8Array(P))}}catch(F){o={error:F}}finally{try{A&&!A.done&&(a=E.return)&&a.call(E)}finally{if(o)throw o.error}}var D=g[0].codewords.length-c.getECCodewords(),j=D-1,H=0;for(x=0;x<j;x++)for(var M=0;M<_;M++)g[M].codewords[x]=e[H++];var R=t.getVersionNumber()===24,k=R?8:_;for(M=0;M<k;M++)g[M].codewords[D-1]=e[H++];var U=g[0].codewords.length;for(x=D;x<U;x++)for(M=0;M<_;M++){var z=R?(M+8)%_:M,q=R&&z>7?x-1:x;g[z].codewords[q]=e[H++]}if(H!==e.length)throw new He;return g},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),hR=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new He(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var a=8-r,c=e<a?e:a,u=255>>8-c<<(d=a-c);t=(o[i]&u)>>d,e-=c,(r+=c)===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|255&o[i],i++,e-=8;if(e>0){var d;u=255>>(d=8-e)<<d,t=t<<e|(o[i]&u)>>d,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}();(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(xn||(xn={}));var kc,ZW=function(){function n(){}return n.decode=function(e){var t=new hR(e),r=new Nt,i=new Nt,o=new Array,a=xn.ASCII_ENCODE;do if(a===xn.ASCII_ENCODE)a=this.decodeAsciiSegment(t,r,i);else{switch(a){case xn.C40_ENCODE:this.decodeC40Segment(t,r);break;case xn.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case xn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case xn.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case xn.BASE256_ENCODE:this.decodeBase256Segment(t,r,o);break;default:throw new we}a=xn.ASCII_ENCODE}while(a!==xn.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new W1(e,r.toString(),o.length===0?null:o,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new we;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),xn.ASCII_ENCODE;if(o===129)return xn.PAD_ENCODE;if(o<=229){var a=o-130;a<10&&t.append("0"),t.append(""+a)}else switch(o){case 230:return xn.C40_ENCODE;case 231:return xn.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:case 241:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return xn.ANSIX12_ENCODE;case 239:return xn.TEXT_ENCODE;case 240:return xn.EDIFACT_ENCODE;default:if(o!==254||e.available()!==0)throw new we}}while(e.available()>0);return xn.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),i);for(var c=0;c<3;c++){var u=i[c];switch(o){case 0:if(u<3)o=u+1;else{if(!(u<this.C40_BASIC_SET_CHARS.length))throw new we;var d=this.C40_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),o=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length)d=this.C40_SHIFT2_SET_CHARS[u],r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d);else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new we}o=0;break;case 3:r?(t.append(String.fromCharCode(u+224)),r=!1):t.append(String.fromCharCode(u+96)),o=0;break;default:throw new we}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),i);for(var c=0;c<3;c++){var u=i[c];switch(o){case 0:if(u<3)o=u+1;else{if(!(u<this.TEXT_BASIC_SET_CHARS.length))throw new we;var d=this.TEXT_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),o=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length)d=this.TEXT_SHIFT2_SET_CHARS[u],r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d);else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new we}o=0;break;case 3:if(!(u<this.TEXT_SHIFT3_SET_CHARS.length))throw new we;d=this.TEXT_SHIFT3_SET_CHARS[u],r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d),o=0;break;default:throw new we}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var a=r[o];switch(a){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(a<14)t.append(String.fromCharCode(a+44));else{if(!(a<40))throw new we;t.append(String.fromCharCode(a+51))}}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,o=Math.floor(i/1600);r[0]=o,i-=1600*o,o=Math.floor(i/40),r[1]=o,r[2]=i-40*o},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();return void(o!==8&&e.readBits(o))}(32&i)==0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i,o=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),o++);if((i=a===0?e.available()/8|0:a<250?a:250*(a-249)+this.unrandomize255State(e.readBits(8),o++))<0)throw new we;for(var c=new Uint8Array(i),u=0;u<i;u++){if(e.available()<8)throw new we;c[u]=this.unrandomize255State(e.readBits(8),o++)}r.push(c);try{t.append(ml.decode(c,Fn.ISO88591))}catch(d){throw new nh("Platform does not support required encoding: "+d.message)}},n.unrandomize255State=function(e,t){var r=e-(149*t%255+1);return r>=0?r:r+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),JW=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},e$=function(){function n(){this.rsDecoder=new $1(Ys.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new KW(e),o=i.getVersion(),a=i.readCodewords(),c=QW.getDataBlocks(a,o),u=0;try{for(var d=JW(c),h=d.next();!h.done;h=d.next())u+=h.value.getNumDataCodewords()}catch(O){t={error:O}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}for(var p=new Uint8Array(u),g=c.length,_=0;_<g;_++){var E=c[_],A=E.getCodewords(),S=E.getNumDataCodewords();this.correctErrors(A,S);for(var x=0;x<S;x++)p[x*g+_]=A[x]}return ZW.decode(p)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new On}for(var i=0;i<t;i++)e[i]=r[i]},n}(),t$=function(){function n(e){this.image=e,this.rectangleDetector=new av(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if((t=this.detectSolid2(t))[3]=this.correctTopRight(t),!t[3])throw new ce;var r=(t=this.shiftToModuleCenter(t))[0],i=t[1],o=t[2],a=t[3],c=this.transitionsBetween(r,a)+1,u=this.transitionsBetween(o,a)+1;(1&c)==1&&(c+=1),(1&u)==1&&(u+=1),4*c<7*u&&4*u<7*c&&(c=u=Math.max(c,u));var d=n.sampleGrid(this.image,r,i,o,a,c,u);return new u_(d,[r,i,o,a])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),o=(t.getY()-e.getY())/(r+1);return new Re(e.getX()+i,e.getY()+o)},n.moveAway=function(e,t,r){var i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<r?o-=1:o+=1,new Re(i,o)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],o=e[2],a=this.transitionsBetween(t,r),c=this.transitionsBetween(r,i),u=this.transitionsBetween(i,o),d=this.transitionsBetween(o,t),h=a,p=[o,t,r,i];return h>c&&(h=c,p[0]=t,p[1]=r,p[2]=i,p[3]=o),h>u&&(h=u,p[0]=r,p[1]=i,p[2]=o,p[3]=t),h>d&&(p[0]=i,p[1]=o,p[2]=t,p[3]=r),p},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],a=this.transitionsBetween(t,o),c=n.shiftPoint(r,i,4*(a+1)),u=n.shiftPoint(i,r,4*(a+1));return this.transitionsBetween(c,t)<this.transitionsBetween(u,o)?(e[0]=t,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],a=this.transitionsBetween(t,o),c=this.transitionsBetween(r,o),u=n.shiftPoint(t,r,4*(c+1)),d=n.shiftPoint(i,r,4*(a+1));a=this.transitionsBetween(u,o),c=this.transitionsBetween(d,o);var h=new Re(o.getX()+(i.getX()-r.getX())/(a+1),o.getY()+(i.getY()-r.getY())/(a+1)),p=new Re(o.getX()+(t.getX()-r.getX())/(c+1),o.getY()+(t.getY()-r.getY())/(c+1));return this.isValid(h)?this.isValid(p)?this.transitionsBetween(u,h)+this.transitionsBetween(d,h)>this.transitionsBetween(u,p)+this.transitionsBetween(d,p)?h:p:h:this.isValid(p)?p:null},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],a=this.transitionsBetween(t,o)+1,c=this.transitionsBetween(i,o)+1,u=n.shiftPoint(t,r,4*c),d=n.shiftPoint(i,r,4*a);(1&(a=this.transitionsBetween(u,o)+1))==1&&(a+=1),(1&(c=this.transitionsBetween(d,o)+1))==1&&(c+=1);var h,p,g=(t.getX()+r.getX()+i.getX()+o.getX())/4,_=(t.getY()+r.getY()+i.getY()+o.getY())/4;return t=n.moveAway(t,g,_),r=n.moveAway(r,g,_),i=n.moveAway(i,g,_),o=n.moveAway(o,g,_),u=n.shiftPoint(t,r,4*c),u=n.shiftPoint(u,o,4*a),h=n.shiftPoint(r,t,4*c),h=n.shiftPoint(h,i,4*a),d=n.shiftPoint(i,o,4*c),d=n.shiftPoint(d,r,4*a),p=n.shiftPoint(o,i,4*c),[u,h,d,p=n.shiftPoint(p,t,4*a)]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,o,a,c){return d_.getInstance().sampleGrid(e,a,c,.5,.5,a-.5,.5,a-.5,c-.5,.5,c-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),a=Math.trunc(t.getY()),c=Math.abs(a-i)>Math.abs(o-r);if(c){var u=r;r=i,i=u,u=o,o=a,a=u}for(var d=Math.abs(o-r),h=Math.abs(a-i),p=-d/2,g=i<a?1:-1,_=r<o?1:-1,E=0,A=this.image.get(c?i:r,c?r:i),S=r,x=i;S!==o;S+=_){var O=this.image.get(c?x:S,c?S:x);if(O!==A&&(E++,A=O),(p+=h)>0){if(x===a)break;x+=g,p-=d}}return E},n}(),i1=function(){function n(){this.decoder=new e$}return n.prototype.decode=function(e,t){var r,i;if(t===void 0&&(t=null),t!=null&&t.has(kt.PURE_BARCODE)){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=n.NO_POINTS}else{var a=new t$(e.getBlackMatrix()).detect();r=this.decoder.decode(a.getBits()),i=a.getPoints()}var c=r.getRawBytes(),u=new kr(r.getText(),c,8*c.length,i,Be.DATA_MATRIX,Bt.currentTimeMillis()),d=r.getByteSegments();d!=null&&u.putMetadata(rr.BYTE_SEGMENTS,d);var h=r.getECLevel();return h!=null&&u.putMetadata(rr.ERROR_CORRECTION_LEVEL,h),u},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new ce;var i=this.moduleSize(t,e),o=t[1],a=r[1],c=t[0],u=(r[0]-c+1)/i,d=(a-o+1)/i;if(u<=0||d<=0)throw new ce;var h=i/2;o+=h,c+=h;for(var p=new rs(u,d),g=0;g<d;g++)for(var _=o+g*i,E=0;E<u;E++)e.get(c+E*i,_)&&p.set(E,g);return p},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],o=e[1];i<r&&t.get(i,o);)i++;if(i===r)throw new ce;var a=i-e[0];if(a===0)throw new ce;return a},n.NO_POINTS=[],n}(),n$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){function e(t){return t===void 0&&(t=500),n.call(this,new i1,t)||this}n$(e,n)})(Su),function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"}(kc||(kc={}));var Bn,r$=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new sn(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new He;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(kc.L,"L",1),n.M=new n(kc.M,"M",0),n.Q=new n(kc.Q,"Q",3),n.H=new n(kc.H,"H",2),n}(),i$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mR=function(){function n(e){this.errorCorrectionLevel=r$.forBits(e>>3&3),this.dataMask=7&e}return n.numBitsDiffering=function(e,t){return nr.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,o=Number.MAX_SAFE_INTEGER,a=0;try{for(var c=i$(n.FORMAT_INFO_DECODE_LOOKUP),u=c.next();!u.done;u=c.next()){var d=u.value,h=d[0];if(h===e||h===t)return new n(d[1]);var p=n.numBitsDiffering(e,h);p<o&&(a=d[1],o=p),e!==t&&(p=n.numBitsDiffering(t,h))<o&&(a=d[1],o=p)}}catch(g){r={error:g}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return o<=3?new n(a):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),o$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ee=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var o=o$(i),a=o.next();!a.done;a=o.next())r+=a.value.getCount()}catch(c){e={error:c}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),B=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),s$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_p=function(){function n(e,t){for(var r,i,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var c=0,u=o[0].getECCodewordsPerBlock(),d=o[0].getECBlocks();try{for(var h=s$(d),p=h.next();!p.done;p=h.next()){var g=p.value;c+=g.getCount()*(g.getDataCodewords()+u)}}catch(_){r={error:_}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}this.totalCodewords=c}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!=1)throw new we;try{return this.getVersionForNumber((e-17)/4)}catch{throw new we}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new He;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var o=n.VERSION_DECODE_INFO[i];if(o===e)return n.getVersionForNumber(i+7);var a=mR.numBitsDiffering(e,o);a<t&&(r=i+7,t=a)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new rs(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,a=0;a<r;a++)i===0&&(a===0||a===r-1)||i===r-1&&a===0||t.setRegion(this.alignmentPatternCenters[a]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new ee(7,new B(1,19)),new ee(10,new B(1,16)),new ee(13,new B(1,13)),new ee(17,new B(1,9))),new n(2,Int32Array.from([6,18]),new ee(10,new B(1,34)),new ee(16,new B(1,28)),new ee(22,new B(1,22)),new ee(28,new B(1,16))),new n(3,Int32Array.from([6,22]),new ee(15,new B(1,55)),new ee(26,new B(1,44)),new ee(18,new B(2,17)),new ee(22,new B(2,13))),new n(4,Int32Array.from([6,26]),new ee(20,new B(1,80)),new ee(18,new B(2,32)),new ee(26,new B(2,24)),new ee(16,new B(4,9))),new n(5,Int32Array.from([6,30]),new ee(26,new B(1,108)),new ee(24,new B(2,43)),new ee(18,new B(2,15),new B(2,16)),new ee(22,new B(2,11),new B(2,12))),new n(6,Int32Array.from([6,34]),new ee(18,new B(2,68)),new ee(16,new B(4,27)),new ee(24,new B(4,19)),new ee(28,new B(4,15))),new n(7,Int32Array.from([6,22,38]),new ee(20,new B(2,78)),new ee(18,new B(4,31)),new ee(18,new B(2,14),new B(4,15)),new ee(26,new B(4,13),new B(1,14))),new n(8,Int32Array.from([6,24,42]),new ee(24,new B(2,97)),new ee(22,new B(2,38),new B(2,39)),new ee(22,new B(4,18),new B(2,19)),new ee(26,new B(4,14),new B(2,15))),new n(9,Int32Array.from([6,26,46]),new ee(30,new B(2,116)),new ee(22,new B(3,36),new B(2,37)),new ee(20,new B(4,16),new B(4,17)),new ee(24,new B(4,12),new B(4,13))),new n(10,Int32Array.from([6,28,50]),new ee(18,new B(2,68),new B(2,69)),new ee(26,new B(4,43),new B(1,44)),new ee(24,new B(6,19),new B(2,20)),new ee(28,new B(6,15),new B(2,16))),new n(11,Int32Array.from([6,30,54]),new ee(20,new B(4,81)),new ee(30,new B(1,50),new B(4,51)),new ee(28,new B(4,22),new B(4,23)),new ee(24,new B(3,12),new B(8,13))),new n(12,Int32Array.from([6,32,58]),new ee(24,new B(2,92),new B(2,93)),new ee(22,new B(6,36),new B(2,37)),new ee(26,new B(4,20),new B(6,21)),new ee(28,new B(7,14),new B(4,15))),new n(13,Int32Array.from([6,34,62]),new ee(26,new B(4,107)),new ee(22,new B(8,37),new B(1,38)),new ee(24,new B(8,20),new B(4,21)),new ee(22,new B(12,11),new B(4,12))),new n(14,Int32Array.from([6,26,46,66]),new ee(30,new B(3,115),new B(1,116)),new ee(24,new B(4,40),new B(5,41)),new ee(20,new B(11,16),new B(5,17)),new ee(24,new B(11,12),new B(5,13))),new n(15,Int32Array.from([6,26,48,70]),new ee(22,new B(5,87),new B(1,88)),new ee(24,new B(5,41),new B(5,42)),new ee(30,new B(5,24),new B(7,25)),new ee(24,new B(11,12),new B(7,13))),new n(16,Int32Array.from([6,26,50,74]),new ee(24,new B(5,98),new B(1,99)),new ee(28,new B(7,45),new B(3,46)),new ee(24,new B(15,19),new B(2,20)),new ee(30,new B(3,15),new B(13,16))),new n(17,Int32Array.from([6,30,54,78]),new ee(28,new B(1,107),new B(5,108)),new ee(28,new B(10,46),new B(1,47)),new ee(28,new B(1,22),new B(15,23)),new ee(28,new B(2,14),new B(17,15))),new n(18,Int32Array.from([6,30,56,82]),new ee(30,new B(5,120),new B(1,121)),new ee(26,new B(9,43),new B(4,44)),new ee(28,new B(17,22),new B(1,23)),new ee(28,new B(2,14),new B(19,15))),new n(19,Int32Array.from([6,30,58,86]),new ee(28,new B(3,113),new B(4,114)),new ee(26,new B(3,44),new B(11,45)),new ee(26,new B(17,21),new B(4,22)),new ee(26,new B(9,13),new B(16,14))),new n(20,Int32Array.from([6,34,62,90]),new ee(28,new B(3,107),new B(5,108)),new ee(26,new B(3,41),new B(13,42)),new ee(30,new B(15,24),new B(5,25)),new ee(28,new B(15,15),new B(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new ee(28,new B(4,116),new B(4,117)),new ee(26,new B(17,42)),new ee(28,new B(17,22),new B(6,23)),new ee(30,new B(19,16),new B(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new ee(28,new B(2,111),new B(7,112)),new ee(28,new B(17,46)),new ee(30,new B(7,24),new B(16,25)),new ee(24,new B(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new ee(30,new B(4,121),new B(5,122)),new ee(28,new B(4,47),new B(14,48)),new ee(30,new B(11,24),new B(14,25)),new ee(30,new B(16,15),new B(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new ee(30,new B(6,117),new B(4,118)),new ee(28,new B(6,45),new B(14,46)),new ee(30,new B(11,24),new B(16,25)),new ee(30,new B(30,16),new B(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new ee(26,new B(8,106),new B(4,107)),new ee(28,new B(8,47),new B(13,48)),new ee(30,new B(7,24),new B(22,25)),new ee(30,new B(22,15),new B(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new ee(28,new B(10,114),new B(2,115)),new ee(28,new B(19,46),new B(4,47)),new ee(28,new B(28,22),new B(6,23)),new ee(30,new B(33,16),new B(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new ee(30,new B(8,122),new B(4,123)),new ee(28,new B(22,45),new B(3,46)),new ee(30,new B(8,23),new B(26,24)),new ee(30,new B(12,15),new B(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new ee(30,new B(3,117),new B(10,118)),new ee(28,new B(3,45),new B(23,46)),new ee(30,new B(4,24),new B(31,25)),new ee(30,new B(11,15),new B(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new ee(30,new B(7,116),new B(7,117)),new ee(28,new B(21,45),new B(7,46)),new ee(30,new B(1,23),new B(37,24)),new ee(30,new B(19,15),new B(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new ee(30,new B(5,115),new B(10,116)),new ee(28,new B(19,47),new B(10,48)),new ee(30,new B(15,24),new B(25,25)),new ee(30,new B(23,15),new B(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new ee(30,new B(13,115),new B(3,116)),new ee(28,new B(2,46),new B(29,47)),new ee(30,new B(42,24),new B(1,25)),new ee(30,new B(23,15),new B(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new ee(30,new B(17,115)),new ee(28,new B(10,46),new B(23,47)),new ee(30,new B(10,24),new B(35,25)),new ee(30,new B(19,15),new B(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new ee(30,new B(17,115),new B(1,116)),new ee(28,new B(14,46),new B(21,47)),new ee(30,new B(29,24),new B(19,25)),new ee(30,new B(11,15),new B(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new ee(30,new B(13,115),new B(6,116)),new ee(28,new B(14,46),new B(23,47)),new ee(30,new B(44,24),new B(7,25)),new ee(30,new B(59,16),new B(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new ee(30,new B(12,121),new B(7,122)),new ee(28,new B(12,47),new B(26,48)),new ee(30,new B(39,24),new B(14,25)),new ee(30,new B(22,15),new B(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new ee(30,new B(6,121),new B(14,122)),new ee(28,new B(6,47),new B(34,48)),new ee(30,new B(46,24),new B(10,25)),new ee(30,new B(2,15),new B(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new ee(30,new B(17,122),new B(4,123)),new ee(28,new B(29,46),new B(14,47)),new ee(30,new B(49,24),new B(10,25)),new ee(30,new B(24,15),new B(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new ee(30,new B(4,122),new B(18,123)),new ee(28,new B(13,46),new B(32,47)),new ee(30,new B(48,24),new B(14,25)),new ee(30,new B(42,15),new B(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new ee(30,new B(20,117),new B(4,118)),new ee(28,new B(40,47),new B(7,48)),new ee(30,new B(43,24),new B(22,25)),new ee(30,new B(10,15),new B(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new ee(30,new B(19,118),new B(6,119)),new ee(28,new B(18,47),new B(31,48)),new ee(30,new B(34,24),new B(34,25)),new ee(30,new B(20,15),new B(61,16)))],n}();(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Bn||(Bn={}));var di,pS=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Bn.DATA_MASK_000,new n(Bn.DATA_MASK_000,function(e,t){return(e+t&1)==0})],[Bn.DATA_MASK_001,new n(Bn.DATA_MASK_001,function(e,t){return(1&e)==0})],[Bn.DATA_MASK_010,new n(Bn.DATA_MASK_010,function(e,t){return t%3==0})],[Bn.DATA_MASK_011,new n(Bn.DATA_MASK_011,function(e,t){return(e+t)%3==0})],[Bn.DATA_MASK_100,new n(Bn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)==0})],[Bn.DATA_MASK_101,new n(Bn.DATA_MASK_101,function(e,t){return e*t%6==0})],[Bn.DATA_MASK_110,new n(Bn.DATA_MASK_110,function(e,t){return e*t%6<3})],[Bn.DATA_MASK_111,new n(Bn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)==0})]]),n}(),a$=function(){function n(e){var t=e.getHeight();if(t<21||(3&t)!=1)throw new we;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);var i=this.bitMatrix.getHeight(),o=0,a=i-7;for(r=i-1;r>=a;r--)o=this.copyBit(8,r,o);for(t=i-8;t<i;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=mR.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new we},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return _p.getVersionForNumber(t);for(var r=0,i=e-11,o=5;o>=0;o--)for(var a=e-9;a>=i;a--)r=this.copyBit(a,o,r);var c=_p.decodeVersionInformation(r);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;for(r=0,a=5;a>=0;a--)for(o=e-9;o>=i;o--)r=this.copyBit(a,o,r);if((c=_p.decodeVersionInformation(r))!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new we},n.prototype.copyBit=function(e,t,r){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=pS.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=t.buildFunctionPattern(),a=!0,c=new Uint8Array(t.getTotalCodewords()),u=0,d=0,h=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var _=a?i-1-g:g,E=0;E<2;E++)o.get(p-E,_)||(h++,d<<=1,this.bitMatrix.get(p-E,_)&&(d|=1),h===8&&(c[u++]=d,h=0,d=0));a=!a}if(u!==t.getTotalCodewords())throw new we;return c},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=pS.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),gS=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l$=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,o,a,c;if(e.length!==t.getTotalCodewords())throw new He;var u=t.getECBlocksForLevel(r),d=0,h=u.getECBlocks();try{for(var p=gS(h),g=p.next();!g.done;g=p.next())d+=(x=g.value).getCount()}catch(q){i={error:q}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}var _=new Array(d),E=0;try{for(var A=gS(h),S=A.next();!S.done;S=A.next())for(var x=S.value,O=0;O<x.getCount();O++){var P=x.getDataCodewords(),D=u.getECCodewordsPerBlock()+P;_[E++]=new n(P,new Uint8Array(D))}}catch(q){a={error:q}}finally{try{S&&!S.done&&(c=A.return)&&c.call(A)}finally{if(a)throw a.error}}for(var j=_[0].codewords.length,H=_.length-1;H>=0&&_[H].codewords.length!==j;)H--;H++;var M=j-u.getECCodewordsPerBlock(),R=0;for(O=0;O<M;O++)for(var k=0;k<E;k++)_[k].codewords[O]=e[R++];for(k=H;k<E;k++)_[k].codewords[M]=e[R++];var U=_[0].codewords.length;for(O=M;O<U;O++)for(k=0;k<E;k++){var z=k<H?O:O+1;_[k].codewords[z]=e[R++]}return _},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}();(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(di||(di={}));var xt,Gm,qr=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new He;return t},n.prototype.getCharacterCountBits=function(e){var t,r=e.getVersionNumber();return t=r<=9?0:r<=26?1:2,this.characterCountBitsForVersions[t]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(di.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(di.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(di.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(di.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(di.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(di.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(di.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(di.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(di.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(di.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),c$=function(){function n(){}return n.decode=function(e,t,r,i){var o=new hR(e),a=new Nt,c=new Array,u=-1,d=-1;try{var h=null,p=!1,g=void 0;do{if(o.available()<4)g=qr.TERMINATOR;else{var _=o.readBits(4);g=qr.forBits(_)}switch(g){case qr.TERMINATOR:break;case qr.FNC1_FIRST_POSITION:case qr.FNC1_SECOND_POSITION:p=!0;break;case qr.STRUCTURED_APPEND:if(o.available()<16)throw new we;u=o.readBits(8),d=o.readBits(8);break;case qr.ECI:var E=n.parseECIValue(o);if((h=Nr.getCharacterSetECIByValue(E))===null)throw new we;break;case qr.HANZI:var A=o.readBits(4),S=o.readBits(g.getCharacterCountBits(t));A===n.GB2312_SUBSET&&n.decodeHanziSegment(o,a,S);break;default:var x=o.readBits(g.getCharacterCountBits(t));switch(g){case qr.NUMERIC:n.decodeNumericSegment(o,a,x);break;case qr.ALPHANUMERIC:n.decodeAlphanumericSegment(o,a,x,p);break;case qr.BYTE:n.decodeByteSegment(o,a,x,h,c,i);break;case qr.KANJI:n.decodeKanjiSegment(o,a,x);break;default:throw new we}}}while(g!==qr.TERMINATOR)}catch{throw new we}return new W1(e,a.toString(),c.length===0?null:c,r===null?null:r.toString(),u,d)},n.decodeHanziSegment=function(e,t,r){if(13*r>e.available())throw new we;for(var i=new Uint8Array(2*r),o=0;r>0;){var a=e.readBits(13),c=a/96<<8&4294967295|a%96;c+=c<959?41377:42657,i[o]=c>>8&255,i[o+1]=255&c,o+=2,r--}try{t.append(ml.decode(i,Fn.GB2312))}catch(u){throw new we(u)}},n.decodeKanjiSegment=function(e,t,r){if(13*r>e.available())throw new we;for(var i=new Uint8Array(2*r),o=0;r>0;){var a=e.readBits(13),c=a/192<<8&4294967295|a%192;c+=c<7936?33088:49472,i[o]=c>>8,i[o+1]=c,o+=2,r--}try{t.append(ml.decode(i,Fn.SHIFT_JIS))}catch(u){throw new we(u)}},n.decodeByteSegment=function(e,t,r,i,o,a){if(8*r>e.available())throw new we;for(var c,u=new Uint8Array(r),d=0;d<r;d++)u[d]=e.readBits(8);c=i===null?Fn.guessEncoding(u,a):i.getName();try{t.append(ml.decode(u,c))}catch(h){throw new we(h)}o.push(u)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new we;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var o=t.length();r>1;){if(e.available()<11)throw new we;var a=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(a/45))),t.append(n.toAlphaNumericChar(a%45)),r-=2}if(r===1){if(e.available()<6)throw new we;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var c=o;c<t.length();c++)t.charAt(c)==="%"&&(c<t.length()-1&&t.charAt(c+1)==="%"?t.deleteCharAt(c+1):t.setCharAt(c,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new we;var i=e.readBits(10);if(i>=1e3)throw new we;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new we;var o=e.readBits(7);if(o>=100)throw new we;t.append(n.toAlphaNumericChar(Math.floor(o/10))),t.append(n.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new we;var a=e.readBits(4);if(a>=10)throw new we;t.append(n.toAlphaNumericChar(a))}},n.parseECIValue=function(e){var t=e.readBits(8);if((128&t)==0)return 127&t;if((192&t)==128)return(63&t)<<8&4294967295|e.readBits(8);if((224&t)==192)return(31&t)<<16&4294967295|e.readBits(16);throw new we},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),pR=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(this.mirrored&&e!==null&&!(e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),yS=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u$=function(){function n(){this.rsDecoder=new $1(Ys.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(rs.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new a$(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(a){i=a}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,t);return o.setOther(new pR(!0)),o}catch(a){throw i!==null?i:a}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,o,a,c=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),h=l$.getDataBlocks(d,c,u),p=0;try{for(var g=yS(h),_=g.next();!_.done;_=g.next())p+=(O=_.value).getNumDataCodewords()}catch(H){r={error:H}}finally{try{_&&!_.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var E=new Uint8Array(p),A=0;try{for(var S=yS(h),x=S.next();!x.done;x=S.next()){var O,P=(O=x.value).getCodewords(),D=O.getNumDataCodewords();this.correctErrors(P,D);for(var j=0;j<D;j++)E[A++]=P[j]}}catch(H){o={error:H}}finally{try{x&&!x.done&&(a=S.return)&&a.call(S)}finally{if(o)throw o.error}}return c$.decode(E,c,u,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new On}for(var i=0;i<t;i++)e[i]=r[i]},n}(),d$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),f$=function(n){function e(t,r,i){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o}return d$(e,n),e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){return new e((this.getX()+r)/2,(this.getY()+t)/2,(this.estimatedModuleSize+i)/2)},e}(Re),h$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},m$=function(){function n(e,t,r,i,o,a,c){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=o,this.moduleSize=a,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=e+this.width,i=this.startY+t/2,o=new Int32Array(3),a=this.image,c=0;c<t;c++){var u=i+((1&c)==0?Math.floor((c+1)/2):-Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var d=e;d<r&&!a.get(d,u);)d++;for(var h=0;d<r;){if(a.get(d,u))if(h===1)o[1]++;else if(h===2){var p;if(this.foundPatternCross(o)&&(p=this.handlePossibleCenter(o,u,d))!==null)return p;o[0]=o[2],o[1]=1,o[2]=0,h=1}else o[++h]++;else h===1&&h++,o[h]++;d++}if(this.foundPatternCross(o)&&(p=this.handlePossibleCenter(o,u,r))!==null)return p}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ce},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var o=this.image,a=o.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;for(var u=e;u>=0&&o.get(t,u)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&!o.get(t,u)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<a&&o.get(t,u)&&c[1]<=r;)c[1]++,u++;if(u===a||c[1]>r)return NaN;for(;u<a&&!o.get(t,u)&&c[2]<=r;)c[2]++,u++;if(c[2]>r)return NaN;var d=c[0]+c[1]+c[2];return 5*Math.abs(d-i)>=2*i?NaN:this.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,o,a=e[0]+e[1]+e[2],c=n.centerFromEnd(e,r),u=this.crossCheckVertical(t,c,2*e[1],a);if(!isNaN(u)){var d=(e[0]+e[1]+e[2])/3;try{for(var h=h$(this.possibleCenters),p=h.next();!p.done;p=h.next()){var g=p.value;if(g.aboutEquals(d,u,c))return g.combineEstimate(u,c,d)}}catch(E){i={error:E}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}var _=new f$(c,u,d);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null},n}(),p$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),g$=function(n){function e(t,r,i,o){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a.count=o,o===void 0&&(a.count=1),a}return p$(e,n),e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=this.count+1;return new e((this.count*this.getX()+r)/o,(this.count*this.getY()+t)/o,(this.count*this.estimatedModuleSize+i)/o,o)},e}(Re),y$=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),Fd=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},v$=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(kt.TRY_HARDER)!==void 0,r=e!=null&&e.get(kt.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),a=i.getWidth(),c=Math.floor(3*o/(4*n.MAX_MODULES));(c<n.MIN_SKIP||t)&&(c=n.MIN_SKIP);for(var u=!1,d=new Int32Array(5),h=c-1;h<o&&!u;h+=c){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var p=0,g=0;g<a;g++)if(i.get(g,h))(1&p)==1&&p++,d[p]++;else if((1&p)==0)if(p===4)if(n.foundPatternCross(d)){if(this.handlePossibleCenter(d,h,g,r)!==!0){d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;continue}if(c=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var _=this.findRowSkip();_>d[2]&&(h+=_-d[2]-c,g=a-1)}p=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;else d[++p]++;else d[p]++;n.foundPatternCross(d)&&this.handlePossibleCenter(d,h,a,r)===!0&&(c=d[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}var E=this.selectBestPatterns();return Re.orderBestPatterns(E),new y$(E)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var o=t/7,a=o/2;return Math.abs(o-e[0])<a&&Math.abs(o-e[1])<a&&Math.abs(3*o-e[2])<3*a&&Math.abs(o-e[3])<a&&Math.abs(o-e[4])<a},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var o=this.getCrossCheckStateCount(),a=0,c=this.image;e>=a&&t>=a&&c.get(t-a,e-a);)o[2]++,a++;if(e<a||t<a)return!1;for(;e>=a&&t>=a&&!c.get(t-a,e-a)&&o[1]<=r;)o[1]++,a++;if(e<a||t<a||o[1]>r)return!1;for(;e>=a&&t>=a&&c.get(t-a,e-a)&&o[0]<=r;)o[0]++,a++;if(o[0]>r)return!1;var u=c.getHeight(),d=c.getWidth();for(a=1;e+a<u&&t+a<d&&c.get(t+a,e+a);)o[2]++,a++;if(e+a>=u||t+a>=d)return!1;for(;e+a<u&&t+a<d&&!c.get(t+a,e+a)&&o[3]<r;)o[3]++,a++;if(e+a>=u||t+a>=d||o[3]>=r)return!1;for(;e+a<u&&t+a<d&&c.get(t+a,e+a)&&o[4]<r;)o[4]++,a++;if(o[4]>=r)return!1;var h=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(h-i)<2*i&&n.foundPatternCross(o)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var o=this.image,a=o.getHeight(),c=this.getCrossCheckStateCount(),u=e;u>=0&&o.get(t,u);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!o.get(t,u)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&o.get(t,u)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<a&&o.get(t,u);)c[2]++,u++;if(u===a)return NaN;for(;u<a&&!o.get(t,u)&&c[3]<r;)c[3]++,u++;if(u===a||c[3]>=r)return NaN;for(;u<a&&o.get(t,u)&&c[4]<r;)c[4]++,u++;if(c[4]>=r)return NaN;var d=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(d-i)>=2*i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var o=this.image,a=o.getWidth(),c=this.getCrossCheckStateCount(),u=e;u>=0&&o.get(u,t);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!o.get(u,t)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&o.get(u,t)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<a&&o.get(u,t);)c[2]++,u++;if(u===a)return NaN;for(;u<a&&!o.get(u,t)&&c[3]<r;)c[3]++,u++;if(u===a||c[3]>=r)return NaN;for(;u<a&&o.get(u,t)&&c[4]<r;)c[4]++,u++;if(c[4]>=r)return NaN;var d=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(d-i)>=i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],a=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,Math.floor(a),e[2],o);if(!isNaN(c)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(c),e[2],o),!isNaN(a)&&(!i||this.crossCheckDiagonal(Math.floor(c),Math.floor(a),e[2],o)))){for(var u=o/7,d=!1,h=this.possibleCenters,p=0,g=h.length;p<g;p++){var _=h[p];if(_.aboutEquals(u,c,a)){h[p]=_.combineEstimate(c,a,u),d=!0;break}}if(!d){var E=new g$(a,c,u);h.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t;if(this.possibleCenters.length<=1)return 0;var r=null;try{for(var i=Fd(this.possibleCenters),o=i.next();!o.done;o=i.next()){var a=o.value;if(a.getCount()>=n.CENTER_QUORUM){if(r!=null)return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-a.getX())-Math.abs(r.getY()-a.getY()))/2);r=a}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,o=0,a=0,c=this.possibleCenters.length;try{for(var u=Fd(this.possibleCenters),d=u.next();!d.done;d=u.next())(E=d.value).getCount()>=n.CENTER_QUORUM&&(o++,a+=E.getEstimatedModuleSize())}catch(A){e={error:A}}finally{try{d&&!d.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}if(o<3)return!1;var h=a/c,p=0;try{for(var g=Fd(this.possibleCenters),_=g.next();!_.done;_=g.next()){var E=_.value;p+=Math.abs(E.getEstimatedModuleSize()-h)}}catch(A){r={error:A}}finally{try{_&&!_.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}return p<=.05*a},n.prototype.selectBestPatterns=function(){var e,t,r,i,o=this.possibleCenters.length;if(o<3)throw new ce;var a,c=this.possibleCenters;if(o>3){var u=0,d=0;try{for(var h=Fd(this.possibleCenters),p=h.next();!p.done;p=h.next()){var g=p.value.getEstimatedModuleSize();u+=g,d+=g*g}}catch(P){e={error:P}}finally{try{p&&!p.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}a=u/o;var _=Math.sqrt(d/o-a*a);c.sort(function(P,D){var j=Math.abs(D.getEstimatedModuleSize()-a),H=Math.abs(P.getEstimatedModuleSize()-a);return j<H?-1:j>H?1:0});for(var E=Math.max(.2*a,_),A=0;A<c.length&&c.length>3;A++){var S=c[A];Math.abs(S.getEstimatedModuleSize()-a)>E&&(c.splice(A,1),A--)}}if(c.length>3){u=0;try{for(var x=Fd(c),O=x.next();!O.done;O=x.next())u+=O.value.getEstimatedModuleSize()}catch(P){r={error:P}}finally{try{O&&!O.done&&(i=x.return)&&i.call(x)}finally{if(r)throw r.error}}a=u/c.length,c.sort(function(P,D){if(D.getCount()===P.getCount()){var j=Math.abs(D.getEstimatedModuleSize()-a),H=Math.abs(P.getEstimatedModuleSize()-a);return j<H?1:j>H?-1:0}return D.getCount()-P.getCount()}),c.splice(3)}return[c[0],c[1],c[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),w$=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(kt.NEED_RESULT_POINT_CALLBACK);var t=new v$(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,r,i);if(o<1)throw new ce("No pattern found in proccess finder.");var a=n.computeDimension(t,r,i,o),c=_p.getProvisionalVersionForDimension(a),u=c.getDimensionForVersion()-7,d=null;if(c.getAlignmentPatternCenters().length>0)for(var h=r.getX()-t.getX()+i.getX(),p=r.getY()-t.getY()+i.getY(),g=1-3/u,_=Math.floor(t.getX()+g*(h-t.getX())),E=Math.floor(t.getY()+g*(p-t.getY())),A=4;A<=16;A<<=1)try{d=this.findAlignmentInRegion(o,_,E,A);break}catch(O){if(!(O instanceof ce))throw O}var S=n.createTransform(t,r,i,d,a),x=n.sampleGrid(this.image,S,a);return new u_(x,d===null?[i,t,r]:[i,t,r,d])},n.createTransform=function(e,t,r,i,o){var a,c,u,d,h=o-3.5;return i!==null?(a=i.getX(),c=i.getY(),d=u=h-3):(a=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),u=h,d=h),cR.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,u,d,3.5,h,e.getX(),e.getY(),t.getX(),t.getY(),a,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){return d_.getInstance().sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var o=dt.round(Re.distance(e,t)/i),a=dt.round(Re.distance(e,r)/i),c=Math.floor((o+a)/2)+7;switch(3&c){case 0:c++;break;case 2:c--;break;case 3:throw new ce("Dimensions could be not found.")}return c},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,t,r,i),a=1,c=e-(r-e);c<0?(a=e/(e-c),c=0):c>=this.image.getWidth()&&(a=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);var u=Math.floor(t-(i-t)*a);return a=1,u<0?(a=t/(t-u),u=0):u>=this.image.getHeight()&&(a=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),c=Math.floor(e+(c-e)*a),(o+=this.sizeOfBlackWhiteBlackRun(e,t,c,u))-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var o=Math.abs(i-t)>Math.abs(r-e);if(o){var a=e;e=t,t=a,a=r,r=i,i=a}for(var c=Math.abs(r-e),u=Math.abs(i-t),d=-c/2,h=e<r?1:-1,p=t<i?1:-1,g=0,_=r+h,E=e,A=t;E!==_;E+=h){var S=o?A:E,x=o?E:A;if(g===1===this.image.get(S,x)){if(g===2)return dt.distance(E,A,e,t);g++}if((d+=u)>0){if(A===i)break;A+=p,d-=c}}return g===2?dt.distance(r+h,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var o=Math.floor(i*e),a=Math.max(0,t-o),c=Math.min(this.image.getWidth()-1,t+o);if(c-a<3*e)throw new ce("Alignment top exceeds estimated module size.");var u=Math.max(0,r-o),d=Math.min(this.image.getHeight()-1,r+o);if(d-u<3*e)throw new ce("Alignment bottom exceeds estimated module size.");return new m$(this.image,a,u,c-a,d-u,e,this.resultPointCallback).find()},n}(),o1=function(){function n(){this.decoder=new u$}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(kt.PURE_BARCODE)!==void 0){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,t),i=n.NO_POINTS}else{var a=new w$(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(a.getBits(),t),i=a.getPoints()}r.getOther()instanceof pR&&r.getOther().applyMirroredCorrection(i);var c=new kr(r.getText(),r.getRawBytes(),void 0,i,Be.QR_CODE,void 0),u=r.getByteSegments();u!==null&&c.putMetadata(rr.BYTE_SEGMENTS,u);var d=r.getECLevel();return d!==null&&c.putMetadata(rr.ERROR_CORRECTION_LEVEL,d),r.hasStructuredAppend()&&(c.putMetadata(rr.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),c.putMetadata(rr.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new ce;var i=this.moduleSize(t,e),o=t[1],a=r[1],c=t[0],u=r[0];if(c>=u||o>=a)throw new ce;if(a-o!=u-c&&(u=c+(a-o))>=e.getWidth())throw new ce;var d=Math.round((u-c+1)/i),h=Math.round((a-o+1)/i);if(d<=0||h<=0)throw new ce;if(h!==d)throw new ce;var p=Math.floor(i/2);o+=p;var g=(c+=p)+Math.floor((d-1)*i)-u;if(g>0){if(g>p)throw new ce;c-=g}var _=o+Math.floor((h-1)*i)-a;if(_>0){if(_>p)throw new ce;o-=_}for(var E=new rs(d,h),A=0;A<h;A++)for(var S=o+Math.floor(A*i),x=0;x<d;x++)e.get(c+Math.floor(x*i),S)&&E.set(x,A);return E},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),o=e[0],a=e[1],c=!0,u=0;o<i&&a<r;){if(c!==t.get(o,a)){if(++u==5)break;c=!c}o++,a++}if(o===i||a===r)throw new ce;return(o-e[0])/7},n.NO_POINTS=new Array,n}(),_$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lt=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return dt.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var a=_$(e),c=a.next();!c.done;c=a.next()){var u=c.value;i[o++]=u}}catch(d){t={error:d}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Yr.binarySearch(n.SYMBOL_TABLE,262143&e);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),b$=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),E$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A$=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),o=n.detect(r,i);return o.length||((i=i.clone()).rotate180(),o=n.detect(r,i)),new b$(i,o)},n.detect=function(e,t){for(var r,i,o=new Array,a=0,c=0,u=!1;a<t.getHeight();){var d=n.findVertices(t,a,c);if(d[0]!=null||d[3]!=null){if(u=!0,o.push(d),!e)break;d[2]!=null?(c=Math.trunc(d[2].getX()),a=Math.trunc(d[2].getY())):(c=Math.trunc(d[4].getX()),a=Math.trunc(d[4].getY()))}else{if(!u)break;u=!1,c=0;try{for(var h=(r=void 0,E$(o)),p=h.next();!p.done;p=h.next()){var g=p.value;g[1]!=null&&(a=Math.trunc(Math.max(a,g[1].getY()))),g[3]!=null&&(a=Math.max(a,Math.trunc(g[3].getY())))}}catch(_){r={error:_}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}a+=n.ROW_STEP}}return o},n.findVertices=function(e,t,r){var i=e.getHeight(),o=e.getWidth(),a=new Array(8);return n.copyToResult(a,n.findRowsWithPattern(e,i,o,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),a[4]!=null&&(r=Math.trunc(a[4].getX()),t=Math.trunc(a[4].getY())),n.copyToResult(a,n.findRowsWithPattern(e,i,o,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),a},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,o,a){for(var c=new Array(4),u=!1,d=new Int32Array(a.length);i<t;i+=n.ROW_STEP)if((_=n.findGuardPattern(e,o,i,r,!1,a,d))!=null){for(;i>0;){if((g=n.findGuardPattern(e,o,--i,r,!1,a,d))==null){i++;break}_=g}c[0]=new Re(_[0],i),c[1]=new Re(_[1],i),u=!0;break}var h=i+1;if(u){for(var p=0,g=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);h<t;h++){var _;if((_=n.findGuardPattern(e,g[0],h,r,!1,a,d))!=null&&Math.abs(g[0]-_[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-_[1])<n.MAX_PATTERN_DRIFT)g=_,p=0;else{if(p>n.SKIPPED_ROW_COUNT_MAX)break;p++}}h-=p+1,c[2]=new Re(g[0],h),c[3]=new Re(g[1],h)}return h-i<n.BARCODE_MIN_HEIGHT&&Yr.fill(c,null),c},n.findGuardPattern=function(e,t,r,i,o,a,c){Yr.fillWithin(c,0,c.length,0);for(var u=t,d=0;e.get(u,r)&&u>0&&d++<n.MAX_PIXEL_DRIFT;)u--;for(var h=u,p=0,g=a.length,_=o;h<i;h++)if(e.get(h,r)!==_)c[p]++;else{if(p===g-1){if(n.patternMatchVariance(c,a,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([u,h]);u+=c[0]+c[1],Bt.arraycopy(c,2,c,0,p-1),c[p-1]=0,c[p]=0,p--}else p++;c[p]=1,_=!_}return p===g-1&&n.patternMatchVariance(c,a,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([u,h-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,a=0,c=0;c<i;c++)o+=e[c],a+=t[c];if(o<a)return 1/0;var u=o/a;r*=u;for(var d=0,h=0;h<i;h++){var p=e[h],g=t[h]*u,_=p>g?p-g:g-p;if(_>r)return 1/0;d+=_}return d/o},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),T$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dl=function(){function n(e,t){if(t.length===0)throw new He;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Bt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=T$(this.coefficients),a=o.next();!a.done;a=o.next()){var c=a.value;i=this.field.add(i,c)}}catch(p){t={error:p}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}for(var u=this.coefficients[0],d=this.coefficients.length,h=1;h<d;h++)u=this.field.add(this.field.multiply(e,u),this.coefficients[h]);return u},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new He("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),a=r.length-t.length;Bt.arraycopy(r,0,o,0,a);for(var c=a;c<r.length;c++)o[c]=this.field.add(t[c-a],r[c]);return new n(this.field,o)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new He("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new He("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,a=new Int32Array(r+o-1),c=0;c<r;c++)for(var u=t[c],d=0;d<o;d++)a[c+d]=this.field.add(a[c+d],this.field.multiply(u,i[d]));return new n(this.field,a)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new He;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new Nt,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),t!==0&&r===1||e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),S$=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new He;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new lR;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),x$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),C$=function(n){function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var o=1,a=0;a<t;a++)i.expTable[a]=o,o=o*r%t;for(a=0;a<t-1;a++)i.logTable[i.expTable[a]]=a;return i.zero=new dl(i,new Int32Array([0])),i.one=new dl(i,new Int32Array([1])),i}return x$(e,n),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new He;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new dl(this,i)},e.PDF417_GF=new e(lt.NUMBER_OF_CODEWORDS,3),e}(S$),I$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R$=function(){function n(){this.field=C$.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,o,a=new dl(this.field,e),c=new Int32Array(t),u=!1,d=t;d>0;d--){var h=a.evaluateAt(this.field.exp(d));c[t-d]=h,h!==0&&(u=!0)}if(!u)return 0;var p=this.field.getOne();if(r!=null)try{for(var g=I$(r),_=g.next();!_.done;_=g.next()){var E=_.value,A=this.field.exp(e.length-1-E),S=new dl(this.field,new Int32Array([this.field.subtract(0,A),1]));p=p.multiply(S)}}catch(R){i={error:R}}finally{try{_&&!_.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}var x=new dl(this.field,c),O=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),x,t),P=O[0],D=O[1],j=this.findErrorLocations(P),H=this.findErrorMagnitudes(D,P,j);for(d=0;d<j.length;d++){var M=e.length-1-this.field.log(j[d]);if(M<0)throw On.getChecksumInstance();e[M]=this.field.subtract(e[M],H[d])}return j.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=e,a=t,c=this.field.getZero(),u=this.field.getOne();a.getDegree()>=Math.round(r/2);){var d=o,h=c;if(c=u,(o=a).isZero())throw On.getChecksumInstance();a=d;for(var p=this.field.getZero(),g=o.getCoefficient(o.getDegree()),_=this.field.inverse(g);a.getDegree()>=o.getDegree()&&!a.isZero();){var E=a.getDegree()-o.getDegree(),A=this.field.multiply(a.getCoefficient(a.getDegree()),_);p=p.add(this.field.buildMonomial(E,A)),a=a.subtract(o.multiplyByMonomial(E,A))}u=p.multiply(c).subtract(h).negative()}var S=u.getCoefficient(0);if(S===0)throw On.getChecksumInstance();var x=this.field.inverse(S);return[u.multiply(x),a.multiply(x)]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,o=1;o<this.field.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==t)throw On.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),o=new Int32Array(i),a=1;a<=i;a++)o[i-a]=this.field.multiply(a,t.getCoefficient(a));var c=new dl(this.field,o),u=r.length,d=new Int32Array(u);for(a=0;a<u;a++){var h=this.field.inverse(r[a]),p=this.field.subtract(0,e.evaluateAt(h)),g=this.field.inverse(c.evaluateAt(h));d[a]=this.field.multiply(p,g)}return d},n}(),cv=function(){function n(e,t,r,i,o){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,o)}return n.prototype.constructor_1=function(e,t,r,i,o){var a=t==null||r==null,c=i==null||o==null;if(a&&c)throw new ce;a?(t=new Re(0,i.getY()),r=new Re(0,o.getY())):c&&(i=new Re(e.getWidth()-1,t.getY()),o=new Re(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,o=this.bottomLeft,a=this.topRight,c=this.bottomRight;if(e>0){var u=r?this.topLeft:this.topRight,d=Math.trunc(u.getY()-e);d<0&&(d=0);var h=new Re(u.getX(),d);r?i=h:a=h}if(t>0){var p=r?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+t);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var _=new Re(p.getX(),g);r?o=_:c=_}return new n(this.image,i,o,a,c)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),N$=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),h_=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(i,o,a,c,u,d){if(i==="%%")return"%";if(t[++r]!==void 0){i=c?parseInt(c.substr(1)):void 0;var h,p=u?parseInt(u.substr(1)):void 0;switch(d){case"s":h=t[r];break;case"c":h=t[r][0];break;case"f":h=parseFloat(t[r]).toFixed(i);break;case"p":h=parseFloat(t[r]).toPrecision(i);break;case"e":h=parseFloat(t[r]).toExponential(i);break;case"x":h=parseInt(t[r]).toString(p||16);break;case"d":h=parseFloat(parseInt(t[r],p||10).toPrecision(i)).toFixed(0)}h=typeof h=="object"?JSON.stringify(h):(+h).toString(p);for(var g=parseInt(a),_=a&&a[0]+""=="0"?"0":" ";h.length<g;)h=o!==void 0?h+_:_+h;return h}})},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),O$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gR=function(){function n(e){this.boundingBox=new cv(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i])!=null||(i=this.imageRowToCodewordIndex(e)+r)<this.codewords.length&&(t=this.codewords[i])!=null)return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new h_,i=0;try{for(var o=O$(this.codewords),a=o.next();!a.done;a=o.next()){var c=a.value;c!=null?r.format("%3d: %3d|%3d%n",i++,c.getRowNumber(),c.getValue()):r.format("%3d:    |   %n",i++)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),D$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P$=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r,i,o=t.call(n),a=[];try{for(;(e===void 0||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(c){i={error:c}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(i)throw i.error}}return a},Yd=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,o=function(d,h){var p=function(){return d},g=function(){return h};g()>r?(r=g(),(i=[]).push(p())):g()===r&&i.push(p())};try{for(var a=D$(this.values.entries()),c=a.next();!c.done;c=a.next()){var u=P$(c.value,2);o(u[0],u[1])}}catch(d){e={error:d}}finally{try{c&&!c.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return lt.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),M$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ky=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vS=function(n){function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return M$(e,n),e.prototype.setRowNumbers=function(){var t,r;try{for(var i=ky(this.getCodewords()),o=i.next();!o.done;o=i.next()){var a=o.value;a!=null&&a.setRowNumberAsRowIndicatorColumn()}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=-1,h=1,p=0,g=c;g<u;g++)if(r[g]!=null){var _=r[g],E=_.getRowNumber()-d;if(E===0)p++;else if(E===1)h=Math.max(h,p),p=1,d=_.getRowNumber();else if(E<0||_.getRowNumber()>=t.getRowCount()||E>g)r[g]=null;else{for(var A=void 0,S=(A=h>2?(h-2)*E:E)>=g,x=1;x<=A&&!S;x++)S=r[g-x]!=null;S?r[g]=null:(d=_.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var a=ky(this.getCodewords()),c=a.next();!c.done;c=a.next()){var u=c.value;if(u!=null){var d=u.getRowNumber();if(d>=o.length)continue;o[d]++}}}catch(h){t={error:h}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=this.getCodewords(),d=-1,h=a;h<c;h++)if(u[h]!=null){var p=u[h];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-d;g===0||(g===1?d=p.getRowNumber():p.getRowNumber()>=t.getRowCount()?u[h]=null:d=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),o=new Yd,a=new Yd,c=new Yd,u=new Yd;try{for(var d=ky(i),h=d.next();!h.done;h=d.next()){var p=h.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,_=p.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:a.setValue(3*g+1);break;case 1:u.setValue(g/3),c.setValue(g%3);break;case 2:o.setValue(g+1)}}}}catch(A){t={error:A}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}if(o.getValue().length===0||a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||o.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<lt.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>lt.MAX_ROWS_IN_BARCODE)return null;var E=new N$(o.getValue()[0],a.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,E),E},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var o=t[i];if(t[i]!=null){var a=o.getValue()%30,c=o.getRowNumber();if(c>r.getRowCount())t[i]=null;else switch(this._isLeft||(c+=2),c%3){case 0:3*a+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:Math.trunc(a/3)===r.getErrorCorrectionLevel()&&a%3===r.getRowCountLowerPart()||(t[i]=null);break;case 2:a+1!==r.getColumnCount()&&(t[i]=null)}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(gR),k$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L$=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e,t=lt.MAX_CODEWORDS_IN_BARCODE;do e=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<e);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(this.detectionResultColumns[0]!=null&&this.detectionResultColumns[this.barcodeColumnCount+1]!=null){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,a=this.barcodeColumnCount+1;a>0&&o<this.ADJUST_ROW_NUMBER_SKIP;a--){var c=this.detectionResultColumns[a].getCodewords()[r];c!=null&&(o=n.adjustRowNumberIfValid(i,o,c),c.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,a=1;a<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;a++){var c=this.detectionResultColumns[a].getCodewords()[r];c!=null&&(o=n.adjustRowNumberIfValid(i,o,c),c.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,o,a=r[t],c=this.detectionResultColumns[e-1].getCodewords(),u=c;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=c[t],d[3]=u[t],t>0&&(d[0]=r[t-1],d[4]=c[t-1],d[5]=u[t-1]),t>1&&(d[8]=r[t-2],d[10]=c[t-2],d[11]=u[t-2]),t<r.length-1&&(d[1]=r[t+1],d[6]=c[t+1],d[7]=u[t+1]),t<r.length-2&&(d[9]=r[t+2],d[12]=c[t+2],d[13]=u[t+2]);try{for(var h=k$(d),p=h.next();!p.done;p=h.next()){var g=p.value;if(n.adjustRowNumber(a,g))return}}catch(_){i={error:_}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}},n.adjustRowNumber=function(e,t){return t!=null&&!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0)},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new h_,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++)if(this.detectionResultColumns[i]!=null){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null?t.format(" %3d|%3d",o.getRowNumber(),o.getValue()):t.format("    |   ")}else t.format("    |   ");t.format("%n")}return t.toString()},n}(),j$=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),V$=function(){function n(){}return n.initialize=function(){for(var e=0;e<lt.SYMBOL_TABLE.length;e++)for(var t=lt.SYMBOL_TABLE[e],r=1&t,i=0;i<lt.BARS_IN_MODULE;i++){for(var o=0;(1&t)===r;)o+=1,t>>=1;r=1&t,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(lt.BARS_IN_MODULE)),n.RATIOS_TABLE[e][lt.BARS_IN_MODULE-i-1]=Math.fround(o/lt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=dt.sum(e),r=new Int32Array(lt.BARS_IN_MODULE),i=0,o=0,a=0;a<lt.MODULES_IN_CODEWORD;a++){var c=t/(2*lt.MODULES_IN_CODEWORD)+a*t/lt.MODULES_IN_CODEWORD;o+e[i]<=c&&(o+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return lt.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2==0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=dt.sum(e),r=new Array(lt.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var o=sv.MAX_VALUE,a=-1;this.bSymbolTableReady||n.initialize();for(var c=0;c<n.RATIOS_TABLE.length;c++){for(var u=0,d=n.RATIOS_TABLE[c],h=0;h<lt.BARS_IN_MODULE;h++){var p=Math.fround(d[h]-r[h]);if((u+=Math.fround(p*p))>=o)break}u<o&&(o=u,a=lt.SYMBOL_TABLE[c])}return a},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(lt.SYMBOL_TABLE.length).map(function(e){return new Array(lt.BARS_IN_MODULE)}),n}(),B$=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),wS=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),F$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),U$=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return F$(e,n),e.kind="NullPointerException",e}(Mr),z$=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new U$;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new c_;if(r!==0)for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),H$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),G$=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return H$(e,n),e}(Mr),q$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),W$=function(n){function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new He("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return q$(e,n),e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length<<1;if(r-t<0&&(r=t),r<0){if(t<0)throw new G$;r=nr.MAX_VALUE}this.buf=Yr.copyOfUint8Array(this.buf,r)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new c_;this.ensureCapacity(this.count+i),Bt.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Yr.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(z$);function yR(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function Fs(n){if(Gm===void 0&&(Gm=yR()),Gm===null)throw new Error("BigInt is not supported!");return Gm(n)}(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(xt||(xt={}));var $$=function(){function n(){}return n.decode=function(e,t){var r=new Nt(""),i=Nr.ISO8859_1;r.enableDecoding(i);for(var o=1,a=e[o++],c=new B$;o<e[0];){switch(a){case n.TEXT_COMPACTION_MODE_LATCH:o=n.textCompaction(e,o,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:o=n.byteCompaction(a,e,i,o,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:o=n.numericCompaction(e,o,r);break;case n.ECI_CHARSET:Nr.getCharacterSetECIByValue(e[o++]);break;case n.ECI_GENERAL_PURPOSE:o+=2;break;case n.ECI_USER_DEFINED:o++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=n.decodeMacroBlock(e,o,c);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new we;default:o--,o=n.textCompaction(e,o,r)}if(!(o<e.length))throw we.getFormatInstance();a=e[o++]}if(r.length()===0)throw we.getFormatInstance();var u=new W1(null,r.toString(),null,t);return u.setOther(c),u},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw we.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<n.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];r.setSegmentIndex(nr.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new Nt;t=n.textCompaction(e,t,a),r.setFileId(a.toString());var c=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new Nt;t=n.textCompaction(e,t+1,u),r.setFileName(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new Nt;t=n.textCompaction(e,t+1,d),r.setSender(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var h=new Nt;t=n.textCompaction(e,t+1,h),r.setAddressee(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new Nt;t=n.numericCompaction(e,t+1,p),r.setSegmentCount(nr.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new Nt;t=n.numericCompaction(e,t+1,g),r.setTimestamp(wS.parseLong(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var _=new Nt;t=n.numericCompaction(e,t+1,_),r.setChecksum(nr.parseInt(_.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var E=new Nt;t=n.numericCompaction(e,t+1,E),r.setFileSize(wS.parseLong(E.toString()));break;default:throw we.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw we.getFormatInstance()}if(c!==-1){var A=t-c;r.isLastSegment()&&A--,r.setOptionalData(Yr.copyOfRange(e,c,c+A))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array(2*(e[0]-t)),o=new Int32Array(2*(e[0]-t)),a=0,c=!1;t<e[0]&&!c;){var u=e[t++];if(u<n.TEXT_COMPACTION_MODE_LATCH)i[a]=u/30,i[a+1]=u%30,a+=2;else switch(u){case n.TEXT_COMPACTION_MODE_LATCH:i[a++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,c=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[a]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],o[a]=u,a++}}return n.decodeTextCompaction(i,o,a,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var o=xt.ALPHA,a=xt.ALPHA,c=0;c<r;){var u=e[c],d="";switch(o){case xt.ALPHA:if(u<26)d=String.fromCharCode(65+u);else switch(u){case 26:d=" ";break;case n.LL:o=xt.LOWER;break;case n.ML:o=xt.MIXED;break;case n.PS:a=o,o=xt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=xt.ALPHA}break;case xt.LOWER:if(u<26)d=String.fromCharCode(97+u);else switch(u){case 26:d=" ";break;case n.AS:a=o,o=xt.ALPHA_SHIFT;break;case n.ML:o=xt.MIXED;break;case n.PS:a=o,o=xt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=xt.ALPHA}break;case xt.MIXED:if(u<n.PL)d=n.MIXED_CHARS[u];else switch(u){case n.PL:o=xt.PUNCT;break;case 26:d=" ";break;case n.LL:o=xt.LOWER;break;case n.AL:o=xt.ALPHA;break;case n.PS:a=o,o=xt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=xt.ALPHA}break;case xt.PUNCT:if(u<n.PAL)d=n.PUNCT_CHARS[u];else switch(u){case n.PAL:o=xt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=xt.ALPHA}break;case xt.ALPHA_SHIFT:if(o=a,u<26)d=String.fromCharCode(65+u);else switch(u){case 26:d=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:o=xt.ALPHA}break;case xt.PUNCT_SHIFT:if(o=a,u<n.PAL)d=n.PUNCT_CHARS[u];else switch(u){case n.PAL:o=xt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=xt.ALPHA}}d!==""&&i.append(d),c++}},n.byteCompaction=function(e,t,r,i,o){var a=new W$,c=0,u=0,d=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var h=new Int32Array(6),p=t[i++];i<t[0]&&!d;)switch(h[c++]=p,u=900*u+p,p=t[i++]){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break;default:if(c%5==0&&c>0){for(var g=0;g<6;++g)a.write(Number(Fs(u)>>Fs(8*(5-g))));u=0,c=0}}i===t[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(h[c++]=p);for(var _=0;_<c;_++)a.write(h[_]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!d;){var E=t[i++];if(E<n.TEXT_COMPACTION_MODE_LATCH)c++,u=900*u+E;else switch(E){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0}if(c%5==0&&c>0){for(g=0;g<6;++g)a.write(Number(Fs(u)>>Fs(8*(5-g))));u=0,c=0}}}return o.append(ml.decode(a.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,o=!1,a=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var c=e[t++];if(t===e[0]&&(o=!0),c<n.TEXT_COMPACTION_MODE_LATCH)a[i]=c,i++;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0}(i%n.MAX_NUMERIC_CODEWORDS==0||c===n.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(n.decodeBase900toBase10(a,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Fs(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Fs(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new we;return o.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=yR()?function(){var e=[];e[0]=Fs(1);var t=Fs(900);e[1]=t;for(var r=2;r<16;r++)e[r]=e[r-1]*t;return e}():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),Ud=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},X$=function(){function n(){}return n.decode=function(e,t,r,i,o,a,c){for(var u,d=new cv(e,t,r,i,o),h=null,p=null,g=!0;;g=!1){if(t!=null&&(h=n.getRowIndicatorColumn(e,d,t,!0,a,c)),i!=null&&(p=n.getRowIndicatorColumn(e,d,i,!1,a,c)),(u=n.merge(h,p))==null)throw ce.getNotFoundInstance();var _=u.getBoundingBox();if(!g||_==null||!(_.getMinY()<d.getMinY()||_.getMaxY()>d.getMaxY()))break;d=_}u.setBoundingBox(d);var E=u.getBarcodeColumnCount()+1;u.setDetectionResultColumn(0,h),u.setDetectionResultColumn(E,p);for(var A=h!=null,S=1;S<=E;S++){var x=A?S:E-S;if(u.getDetectionResultColumn(x)===void 0){var O=void 0;O=x===0||x===E?new vS(d,x===0):new gR(d),u.setDetectionResultColumn(x,O);for(var P=-1,D=P,j=d.getMinY();j<=d.getMaxY();j++){if((P=n.getStartColumn(u,x,j,A))<0||P>d.getMaxX()){if(D===-1)continue;P=D}var H=n.detectCodeword(e,d.getMinX(),d.getMaxX(),A,P,j,a,c);H!=null&&(O.setCodeword(j,H),D=P,a=Math.min(a,H.getWidth()),c=Math.max(c,H.getWidth()))}}}return n.createDecoderResult(u)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=cv.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new L$(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=n.getMax(i),a=0;try{for(var c=Ud(i),u=c.next();!u.done;u=c.next()){var d=u.value;if(a+=o-d,d>0)break}}catch(_){t={error:_}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}for(var h=e.getCodewords(),p=0;a>0&&h[p]==null;p++)a--;var g=0;for(p=i.length-1;p>=0&&(g+=o-i[p],!(i[p]>0));p--);for(p=h.length-1;g>0&&h[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(a,g,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var o=Ud(e),a=o.next();!a.done;a=o.next()){var c=a.value;i=Math.max(i,c)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r,i;return e==null||(r=e.getBarcodeMetadata())==null?t==null?null:t.getBarcodeMetadata():t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,o,a){for(var c=new vS(t,i),u=0;u<2;u++)for(var d=u===0?1:-1,h=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=d){var g=n.detectCodeword(e,0,e.getWidth(),i,h,p,o,a);g!=null&&(c.setCodeword(p,g),h=i?g.getStartX():g.getEndX())}return c},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>lt.MAX_CODEWORDS_IN_BARCODE)throw ce.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],a=new Array,c=0;c<e.getBarcodeRowCount();c++)for(var u=0;u<e.getBarcodeColumnCount();u++){var d=t[c][u+1].getValue(),h=c*e.getBarcodeColumnCount()+u;d.length===0?r.push(h):d.length===1?i[h]=d[0]:(a.push(h),o.push(d))}for(var p=new Array(o.length),g=0;g<p.length;g++)p[g]=o[g];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,lt.toIntArray(r),lt.toIntArray(a),p)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,o){for(var a=new Int32Array(i.length),c=100;c-- >0;){for(var u=0;u<a.length;u++)t[i[u]]=o[u][a[u]];try{return n.decodeCodewords(t,e,r)}catch(d){if(!(d instanceof On))throw d}if(a.length===0)throw On.getChecksumInstance();for(u=0;u<a.length;u++){if(a[u]<o[u].length-1){a[u]++;break}if(a[u]=0,u===a.length-1)throw On.getChecksumInstance()}}throw On.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,o,a=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),c=0;c<a.length;c++)for(var u=0;u<a[c].length;u++)a[c][u]=new Yd;var d=0;try{for(var h=Ud(e.getDetectionResultColumns()),p=h.next();!p.done;p=h.next()){var g=p.value;if(g!=null)try{for(var _=(i=void 0,Ud(g.getCodewords())),E=_.next();!E.done;E=_.next()){var A=E.value;if(A!=null){var S=A.getRowNumber();if(S>=0){if(S>=a.length)continue;a[S][d].setValue(A.getValue())}}}}catch(x){i={error:x}}finally{try{E&&!E.done&&(o=_.return)&&o.call(_)}finally{if(i)throw i.error}}d++}}catch(x){t={error:x}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}return a},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var o,a,c=i?1:-1,u=null;if(n.isValidBarcodeColumn(e,t-c)&&(u=e.getDetectionResultColumn(t-c).getCodeword(r)),u!=null)return i?u.getEndX():u.getStartX();if((u=e.getDetectionResultColumn(t).getCodewordNearby(r))!=null)return i?u.getStartX():u.getEndX();if(n.isValidBarcodeColumn(e,t-c)&&(u=e.getDetectionResultColumn(t-c).getCodewordNearby(r)),u!=null)return i?u.getEndX():u.getStartX();for(var d=0;n.isValidBarcodeColumn(e,t-c);){t-=c;try{for(var h=(o=void 0,Ud(e.getDetectionResultColumn(t).getCodewords())),p=h.next();!p.done;p=h.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+c*d*(g.getEndX()-g.getStartX())}}catch(_){o={error:_}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}d++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,o,a,c,u){o=n.adjustCodewordStartColumn(e,t,r,i,o,a);var d,h=n.getModuleBitCount(e,t,r,i,o,a);if(h==null)return null;var p=dt.sum(h);if(i)d=o+p;else{for(var g=0;g<h.length/2;g++){var _=h[g];h[g]=h[h.length-1-g],h[h.length-1-g]=_}o=(d=o)-p}if(!n.checkCodewordSkew(p,c,u))return null;var E=V$.getDecodedValue(h),A=lt.getCodeword(E);return A===-1?null:new j$(o,d,n.getCodewordBucketNumber(E),A)},n.getModuleBitCount=function(e,t,r,i,o,a){for(var c=o,u=new Int32Array(8),d=0,h=i?1:-1,p=i;(i?c<r:c>=t)&&d<u.length;)e.get(c,a)===p?(u[d]++,c+=h):(d++,p=!p);return d===u.length||c===(i?r:t)&&d===u.length-1?u:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,o,a){for(var c=o,u=i?-1:1,d=0;d<2;d++){for(;(i?c>=t:c<r)&&i===e.get(c,a);){if(Math.abs(o-c)>n.CODEWORD_SKEW_SIZE)return o;c+=u}u=-u,i=!i}return c},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw we.getFormatInstance();var i=1<<t+1,o=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var a=$$.decode(e,""+t);return a.setErrorsCorrected(o),a.setErasures(r.length),a},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw On.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw we.getFormatInstance();var r=e[0];if(r>e.length)throw we.getFormatInstance();if(r===0){if(!(t<e.length))throw we.getFormatInstance();e[0]=e.length-t}},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((1&e)!==r&&(r=1&e,--i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new h_,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new R$,n}(),Y$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s1=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw ce.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof we||r instanceof On?ce.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,o,a=new Array,c=A$.detectMultiple(e,t,r);try{for(var u=Y$(c.getPoints()),d=u.next();!d.done;d=u.next()){var h=d.value,p=X$.decode(c.getBits(),h[4],h[5],h[6],h[7],n.getMinCodewordWidth(h),n.getMaxCodewordWidth(h)),g=new kr(p.getText(),p.getRawBytes(),void 0,h,Be.PDF_417);g.putMetadata(rr.ERROR_CORRECTION_LEVEL,p.getECLevel());var _=p.getOther();_!=null&&g.putMetadata(rr.PDF417_EXTRA_METADATA,_),a.push(g)}}catch(E){i={error:E}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return a.map(function(E){return E})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?nr.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),K$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_S=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return K$(e,n),e.kind="ReaderException",e}(Mr),bS=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vR=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return this.readers!==null&&this.readers!==void 0||this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(kt.TRY_HARDER)!==void 0,r=e==null?null:e.get(kt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(a){return a===Be.UPC_A||a===Be.UPC_E||a===Be.EAN_13||a===Be.EAN_8||a===Be.CODABAR||a===Be.CODE_39||a===Be.CODE_93||a===Be.CODE_128||a===Be.ITF||a===Be.RSS_14||a===Be.RSS_EXPANDED});o&&!t&&i.push(new Mc(e)),r.includes(Be.QR_CODE)&&i.push(new o1),r.includes(Be.DATA_MATRIX)&&i.push(new i1),r.includes(Be.AZTEC)&&i.push(new n1),r.includes(Be.PDF_417)&&i.push(new s1),o&&t&&i.push(new Mc(e))}i.length===0&&(t||i.push(new Mc(e)),i.push(new o1),i.push(new i1),i.push(new n1),i.push(new s1),t&&i.push(new Mc(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=bS(this.readers),i=r.next();!i.done;i=r.next())i.value.reset()}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new _S("No readers where selected, nothing can be read.");try{for(var i=bS(this.readers),o=i.next();!o.done;o=i.next()){var a=o.value;try{return a.decode(e,this.hints)}catch(c){if(c instanceof _S)continue}}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new ce("No MultiFormat Readers were able to detect the code.")},n}(),Q$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=new vR;return i.setHints(t),n.call(this,i,r)||this}Q$(e,n),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)}})(Su);var Z$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){function e(t){return t===void 0&&(t=500),n.call(this,new s1,t)||this}Z$(e,n)})(Su);var ES,J$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){function e(t){return t===void 0&&(t=500),n.call(this,new o1,t)||this}J$(e,n)})(Su),function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.MIN_SIZE=3]="MIN_SIZE",n[n.MAX_SIZE=4]="MAX_SIZE",n[n.MARGIN=5]="MARGIN",n[n.PDF417_COMPACT=6]="PDF417_COMPACT",n[n.PDF417_COMPACTION=7]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=9]="AZTEC_LAYERS",n[n.QR_VERSION=10]="QR_VERSION"}(ES||(ES={}));var eX=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o-1;a++)for(var c=r[a],u=0;u<i-1;u++){var d=c[u];d===c[u+1]&&d===r[a+1][u]&&d===r[a+1][u+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o;a++)for(var c=0;c<i;c++){var u=r[a];c+6<i&&u[c]===1&&u[c+1]===0&&u[c+2]===1&&u[c+3]===1&&u[c+4]===1&&u[c+5]===0&&u[c+6]===1&&(n.isWhiteHorizontal(u,c-4,c)||n.isWhiteHorizontal(u,c+7,c+11))&&t++,a+6<o&&r[a][c]===1&&r[a+1][c]===0&&r[a+2][c]===1&&r[a+3][c]===1&&r[a+4][c]===1&&r[a+5][c]===0&&r[a+6][c]===1&&(n.isWhiteVertical(r,c,a-4,a)||n.isWhiteVertical(r,c,a+7,a+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o;a++)for(var c=r[a],u=0;u<i;u++)c[u]===1&&t++;var d=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-d)/d)*n.N4},n.getDataMaskBit=function(e,t,r){var i,o;switch(e){case 0:i=r+t&1;break;case 1:i=1&r;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:i=(1&(o=r*t))+o%3;break;case 6:i=(1&(o=r*t))+o%3&1;break;case 7:i=(o=r*t)%3+(r+t&1)&1;break;default:throw new He("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),a=e.getArray(),c=0;c<i;c++){for(var u=0,d=-1,h=0;h<o;h++){var p=t?a[c][h]:a[h][c];p===d?u++:(u>=5&&(r+=n.N1+(u-5)),u=1,d=p)}u>=5&&(r+=n.N1+(u-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),tX=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new Nt;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),nX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tl=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return nX(e,n),e.kind="WriterException",e}(Mr);(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,o){n.clearMatrix(o),n.embedBasicPatterns(r,o),n.embedTypeInfo(t,i,o),n.maybeEmbedVersionInfo(r,o),n.embedDataBits(e,i,o)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new ro;n.makeTypeInfoBits(e,t,i);for(var o=0,a=i.getSize();o<a;++o){var c=i.get(i.getSize()-1-o),u=n.TYPE_INFO_COORDINATES[o],d=u[0],h=u[1];if(r.setBoolean(d,h,c),o<8){var p=r.getWidth()-o-1,g=8;r.setBoolean(p,g,c)}else p=8,g=r.getHeight()-7+(o-8),r.setBoolean(p,g,c)}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new ro;n.makeVersionInfoBits(e,r);for(var i=17,o=0;o<6;++o)for(var a=0;a<3;++a){var c=r.get(i);i--,t.setBoolean(o,t.getHeight()-11+a,c),t.setBoolean(t.getHeight()-11+a,o,c)}}},n.embedDataBits=function(e,t,r){for(var i=0,o=-1,a=r.getWidth()-1,c=r.getHeight()-1;a>0;){for(a===6&&(a-=1);c>=0&&c<r.getHeight();){for(var u=0;u<2;++u){var d=a-u;if(n.isEmpty(r.get(d,c))){var h=void 0;i<e.getSize()?(h=e.get(i),++i):h=!1,t!==255&&eX.getDataMaskBit(t,d,c)&&(h=!h),r.setBoolean(d,c,h)}}c+=o}c+=o=-o,a-=2}if(i!==e.getSize())throw new tl("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-nr.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new He("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!tX.isValidMaskPattern(t))throw new tl("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var o=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(o,10);var a=new ro;if(a.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(a),r.getSize()!==15)throw new tl("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new tl("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new tl;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new tl;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new tl;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var o=n.POSITION_ADJUSTMENT_PATTERN[i],a=0;a<5;++a)r.setNumber(e+a,t+i,o[a])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var o=n.POSITION_DETECTION_PATTERN[i],a=0;a<7;++a)r.setNumber(e+a,t+i,o[a])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e),n.embedHorizontalSeparationPattern(0,7,e),n.embedHorizontalSeparationPattern(e.getWidth()-8,7,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-8,e),n.embedVerticalSeparationPattern(7,0,e),n.embedVerticalSeparationPattern(e.getHeight()-7-1,0,e),n.embedVerticalSeparationPattern(7,e.getHeight()-7,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,a=i.length;o!==a;o++){var c=i[o];if(c>=0)for(var u=0;u!==a;u++){var d=i[u];d>=0&&n.isEmpty(t.get(d,c))&&n.embedPositionAdjustmentPattern(d-2,c-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})();(function(){Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Nr.UTF8.getName()})();var rX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){function e(t,r,i,o,a,c,u,d){var h=n.call(this,c,u)||this;if(h.yuvData=t,h.dataWidth=r,h.dataHeight=i,h.left=o,h.top=a,o+c>r||a+u>i)throw new He("Crop rectangle does not fit within image data.");return d&&h.reverseHorizontal(c,u),h}rX(e,n),e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new He("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return Bt.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,o=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Bt.arraycopy(this.yuvData,a,o,0,i),o;for(var c=0;c<r;c++){var u=c*t;Bt.arraycopy(this.yuvData,a,o,u,t),a+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),o=this.yuvData,a=this.top*this.dataWidth+this.left,c=0;c<r;c++){for(var u=c*t,d=0;d<t;d++){var h=255&o[a+d*e.THUMBNAIL_SCALE_FACTOR];i[u+d]=4278190080|65793*h}a+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,o=0,a=this.top*this.dataWidth+this.left;o<r;o++,a+=this.dataWidth)for(var c=a+t/2,u=a,d=a+t-1;u<c;u++,d--){var h=i[u];i[u]=i[d],i[d]=h}},e.prototype.invert=function(){return new q1(this)},e.THUMBNAIL_SCALE_FACTOR=2})(th);var iX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){function e(t,r,i,o,a,c,u){var d=n.call(this,r,i)||this;if(d.dataWidth=o,d.dataHeight=a,d.left=c,d.top=u,t.BYTES_PER_ELEMENT===4){for(var h=r*i,p=new Uint8ClampedArray(h),g=0;g<h;g++){var _=t[g],E=_>>16&255,A=_>>7&510,S=255&_;p[g]=(E+A+S)/4&255}d.luminances=p}else d.luminances=t;if(o===void 0&&(d.dataWidth=r),a===void 0&&(d.dataHeight=i),c===void 0&&(d.left=0),u===void 0&&(d.top=0),d.left+r>d.dataWidth||d.top+i>d.dataHeight)throw new He("Crop rectangle does not fit within image data.");return d}iX(e,n),e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new He("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return Bt.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,o=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Bt.arraycopy(this.luminances,a,o,0,i),o;for(var c=0;c<r;c++){var u=c*t;Bt.arraycopy(this.luminances,a,o,u,t),a+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new q1(this)}})(th);var oX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){function e(){return n!==null&&n.apply(this,arguments)||this}oX(e,n),e.forName=function(t){return this.getCharacterSetECIByName(t)}})(Nr);var sX=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),aX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wR=function(n){function e(t,r,i){var o=n.call(this,t)||this;return o.value=r,o.bitCount=i,o}return aX(e,n),e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+nr.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(sX),lX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){function e(t,r,i){var o=n.call(this,t,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}lX(e,n),e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}})(wR);new wR(null,0,0);var cX=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(n){var e,t;try{for(var r=cX(n),i=r.next();!i.done;i=r.next()){var o=i.value;Yr.fill(o,-1)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}n[0][4]=0,n[1][4]=0,n[1][0]=28,n[3][4]=0,n[2][4]=0,n[2][0]=15})(Yr.createInt32Array(6,6)),function(n){var e=Fn.getCharCode(" "),t=Fn.getCharCode("."),r=Fn.getCharCode(",");n[0][e]=1;for(var i=Fn.getCharCode("Z"),o=Fn.getCharCode("A"),a=o;a<=i;a++)n[0][a]=a-o+2;n[1][e]=1;var c=Fn.getCharCode("z"),u=Fn.getCharCode("a");for(a=u;a<=c;a++)n[1][a]=a-u+2;n[2][e]=1;var d=Fn.getCharCode("9"),h=Fn.getCharCode("0");for(a=h;a<=d;a++)n[2][a]=a-h+2;n[2][r]=12,n[2][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)n[3][Fn.getCharCode(p[g])]=g;var _=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(g=0;g<_.length;g++)Fn.getCharCode(_[g])>0&&(n[4][Fn.getCharCode(_[g])]=g)}(Yr.createInt32Array(5,256));var uX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dX=function(n){function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.buffer=e.makeBufferFromCanvasImageData(t),r}return uX(e,n),e.makeBufferFromCanvasImageData=function(t){var r=t.getContext("2d");if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var o=new Uint8ClampedArray(r*i),a=0,c=0,u=t.length;a<u;a+=4,c++){var d=void 0;t[a+3]===0?d=255:d=306*t[a]+601*t[a+1]+117*t[a+2]+512>>10,o[c]=d}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new He("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return n.prototype.crop.call(this,t,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new q1(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,a=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*a),u=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*a);r.width=c,r.height=u;var d=r.getContext("2d");if(!d)throw new Error("Could not create a Convas Context element.");return d.translate(c/2,u/2),d.rotate(i),d.drawImage(this.canvas,o/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(th);function _R(){return typeof navigator<"u"}function fX(){return!!(_R()&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)}var Lc=function(){return Lc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Lc.apply(this,arguments)},nn=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){var h;d.done?i(d.value):(h=d.value,h instanceof t?h:new t(function(p){p(h)})).then(a,c)}u((r=r.apply(n,[])).next())})},rn=function(n,e){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(u){return function(d){return function(h){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(i=2&h[0]?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,r=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||h[0]!==6&&h[0]!==2)){a=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){a.label=h[1];break}if(h[0]===6&&a.label<i[1]){a.label=i[1],i=h;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(h);break}i[2]&&a.ops.pop(),a.trys.pop();continue}h=e.call(n,a)}catch(p){h=[6,p],r=0}finally{t=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([u,d])}}},qm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hX={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},xu=function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=Lc(Lc({},hX),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(kt.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.mediaStreamSetTorch=function(e,t){return nn(this,void 0,void 0,function(){return rn(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var o=qm(i),a=o.next();!a.done;a=o.next()){var c=a.value;if(n.mediaStreamIsTorchCompatibleTrack(c))return!0}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{return"torch"in e.getCapabilities()}catch(t){return console.error(t),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new sn("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new sn("element with id '"+e+"' must be an "+t+" element");return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(e===void 0){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!!e.complete&&e.naturalWidth!==0},n.createBinaryBitmapFromCanvas=function(e){var t=new dX(e),r=new aR(t);return new sR(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimentions!")},n.createCaptureCanvas=function(e){if(!e)throw new sn("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,o=r.height;return t.style.width=i+"px",t.style.height=o+"px",t.width=i,t.height=o,t},n.tryPlayVideo=function(e){return nn(this,void 0,void 0,function(){var t;return rn(this,function(r){switch(r.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return nn(this,void 0,void 0,function(){var e,t,r,i,o,a,c,u,d,h,p,g;return rn(this,function(_){switch(_.label){case 0:if(!_R())throw new Error("Can't enumerate devices, navigator is not present.");if(!fX())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=_.sent(),t=[];try{for(r=qm(e),i=r.next();!i.done;i=r.next())o=i.value,(a=o.kind==="video"?"videoinput":o.kind)==="videoinput"&&(c=o.deviceId||o.id,u=o.label||"Video device "+(t.length+1),d=o.groupId,h={deviceId:c,label:u,kind:a,groupId:d},t.push(h))}catch(E){p={error:E}}finally{try{i&&!i.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.findDeviceById=function(e){return nn(this,void 0,void 0,function(){var t;return rn(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return(t=r.sent())?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.playVideoOnLoadAsync=function(e,t){return nn(this,void 0,void 0,function(){return rn(this,function(r){switch(r.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r.sent()?[2,!0]:[2,new Promise(function(i,o){var a=setTimeout(function(){n.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",c))},t),c=function(){n.tryPlayVideo(e).then(function(u){clearTimeout(a),e.removeEventListener("canplay",c),i(u)})};e.addEventListener("canplay",c)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),nn(this,void 0,void 0,function(){var i;return rn(this,function(o){switch(o.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return o.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",o),r())},1e4),o=function(){clearTimeout(i),e.removeEventListener("load",o),t()};e.addEventListener("load",o)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new sn("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return nn(this,void 0,void 0,function(){var t;return rn(this,function(r){switch(r.label){case 0:if(!e)throw new sn("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return nn(this,void 0,void 0,function(){var t;return rn(this,function(r){switch(r.label){case 0:if(!e)throw new sn("An URL must be provided.");(t=n.prepareImageElement()).src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return nn(this,void 0,void 0,function(){var i,o;return rn(this,function(a){switch(a.label){case 0:return n.checkCallbackFnOrThrow(r),[4,navigator.mediaDevices.getUserMedia(e)];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,a.sent()];case 4:throw o=a.sent(),n.disposeMediaStream(i),o;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return nn(this,void 0,void 0,function(){var i,o,a,c,u,d,h,p,g,_,E=this;return rn(this,function(A){switch(A.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return o=A.sent(),a=function(){var S,x;try{for(var O=qm(e.getVideoTracks()),P=O.next();!P.done;P=O.next())P.value.stop()}catch(D){S={error:D}}finally{try{P&&!P.done&&(x=O.return)&&x.call(O)}finally{if(S)throw S.error}}e=void 0},c=function(){a(),n.cleanVideoSource(o)},u=this.scan(o,r,c),d=e.getVideoTracks(),h=Lc(Lc({},u),{stop:function(){u.stop()},streamVideoConstraintsApply:function(S,x){return nn(this,void 0,void 0,function(){var O,P,D,j,H,M;return rn(this,function(R){switch(R.label){case 0:O=x?d.filter(x):d,R.label=1;case 1:R.trys.push([1,6,7,8]),P=qm(O),D=P.next(),R.label=2;case 2:return D.done?[3,5]:[4,D.value.applyConstraints(S)];case 3:R.sent(),R.label=4;case 4:return D=P.next(),[3,2];case 5:return[3,8];case 6:return j=R.sent(),H={error:j},[3,8];case 7:try{D&&!D.done&&(M=P.return)&&M.call(P)}finally{if(H)throw H.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(S){return d.find(S).getConstraints()},streamVideoSettingsGet:function(S){return d.find(S).getSettings()},streamVideoCapabilitiesGet:function(S){return d.find(S).getCapabilities()}}),n.mediaStreamIsTorchCompatible(e)&&(p=d==null?void 0:d.find(function(S){return n.mediaStreamIsTorchCompatibleTrack(S)}),g=function(S){return nn(E,void 0,void 0,function(){return rn(this,function(x){switch(x.label){case 0:return[4,n.mediaStreamSetTorch(p,S)];case 1:return x.sent(),[2]}})})},h.switchTorch=g,_=function(){u.stop(),g(!1)},h.stop=_),[2,h]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return nn(this,void 0,void 0,function(){var i;return rn(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),i={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(i,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return nn(this,void 0,void 0,function(){var r,i;return rn(this,function(o){switch(o.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new sn("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return o.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return nn(this,void 0,void 0,function(){var r,i,o;return rn(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new sn("An URL must be provided.");return(r=n.prepareVideoElement()).src=e,i=function(){n.cleanVideoSource(r)},o=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,o)];case 1:return a.sent(),[2,this.scan(r,t,i)]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return nn(this,void 0,void 0,function(){var r;return rn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return nn(this,void 0,void 0,function(){var r,i;return rn(this,function(o){switch(o.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return[2,o.sent()];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return nn(this,void 0,void 0,function(){var r;return rn(this,function(i){switch(i.label){case 0:return r={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(r,t)];case 1:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return nn(this,void 0,void 0,function(){var t,r;return rn(this,function(i){switch(i.label){case 0:if(!e)throw new sn("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return nn(this,void 0,void 0,function(){var t,r;return rn(this,function(i){switch(i.label){case 0:if(!e)throw new sn("An URL must be provided.");(t=n.prepareVideoElement()).src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var o=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(a,c){o.scan(e,function(u,d,h){if(u)return a(u),void h.stop();if(d){if(d instanceof ce&&t||d instanceof On&&r||d instanceof we&&i)return;h.stop(),c(d)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var o=n.createCaptureCanvas(e),a=o.getContext("2d");if(!a)throw new Error("Couldn't create canvas for visual element scan.");var c,u=function(){a=void 0,o=void 0},d=!1,h={stop:function(){d=!0,clearTimeout(c),u(),r&&r()}},p=function(){if(!d)try{n.drawImageOnCanvas(a,e);var g=i.decodeFromCanvas(o);t(g,void 0,h),c=setTimeout(p,i.options.delayBetweenScanSuccess)}catch(_){if(t(void 0,_,h),_ instanceof On||_ instanceof we||_ instanceof ce)return void(c=setTimeout(p,i.options.delayBetweenScanAttempts));u(),r&&r(_)}};return p(),h},n.prototype._decodeOnLoadImage=function(e){return nn(this,void 0,void 0,function(){return rn(this,function(t){switch(t.label){case 0:return n.isImageLoaded(e)?[3,2]:[4,n._waitImageLoad(e)];case 1:t.sent(),t.label=2;case 2:return[2,this.decode(e)]}})})},n}(),mX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){function e(t,r){return n.call(this,new n1,t,r)||this}mX(e,n)})(xu);var pX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){function e(t,r){return n.call(this,new Mc(t),t,r)||this}pX(e,n)})(xu);var gX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){function e(t,r){return n.call(this,new i1,t,r)||this}gX(e,n)})(xu);var yX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){function e(t,r){var i=this,o=new vR;return o.setHints(t),(i=n.call(this,o,t,r)||this).reader=o,i}yX(e,n),Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(kt.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)}})(xu);var vX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){function e(t,r){return n.call(this,new s1,t,r)||this}vX(e,n)})(xu);var wX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_X=function(n){function e(t,r){return n.call(this,new o1,t,r)||this}return wX(e,n),e}(xu),Wm=function(n,e,t){var r=typeof n===t;return r||console.warn('[ReactQrReader]: Expected "'.concat(e,'" to be a of type "').concat(t,'".')),r},bX=function(n){var e=n.scanDelay,t=n.constraints,r=n.onResult,i=n.videoId,o=C.useRef(null);C.useEffect(function(){var a=new _X(null,{delayBetweenScanAttempts:e});return!function(){var c=typeof navigator<"u"&&!!navigator.mediaDevices;return c||console.warn('[ReactQrReader]: MediaDevices API has no support for your browser. You can fix this by running "npm i webrtc-adapter"'),c}()&&Wm(r,"onResult","function")&&r(null,new Error('MediaDevices API has no support for your browser. You can fix this by running "npm i webrtc-adapter"'),a),Wm(t,"constraints","object")&&a.decodeFromConstraints({video:t},i,function(c,u){Wm(r,"onResult","function")&&r(c,u,a)}).then(function(c){return o.current=c}).catch(function(c){Wm(r,"onResult","function")&&r(null,c,a)}),function(){var c;(c=o.current)===null||c===void 0||c.stop()}},[])},ol=function(){return ol=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},ol.apply(this,arguments)},AS={container:{width:"100%",paddingTop:"100%",overflow:"hidden",position:"relative"},video:{top:0,left:0,width:"100%",height:"100%",display:"block",overflow:"hidden",position:"absolute",transform:void 0}},uv=function(n){var e=n.videoContainerStyle,t=n.containerStyle,r=n.videoStyle,i=n.constraints,o=n.ViewFinder,a=n.scanDelay,c=n.className,u=n.onResult,d=n.videoId;return bX({constraints:i,scanDelay:a,onResult:u,videoId:d}),C.createElement("section",{className:c,style:t},C.createElement("div",{style:ol(ol({},AS.container),e)},!!o&&C.createElement(o,null),C.createElement("video",{muted:!0,id:d,style:ol(ol(ol({},AS.video),r),{transform:(i==null?void 0:i.facingMode)==="user"&&"scaleX(-1)"})})))};uv.displayName="QrReader",uv.defaultProps={constraints:{facingMode:"user"},videoId:"video",scanDelay:500};function ln({className:n,type:e,...t}){return y.jsx("input",{type:e,"data-slot":"input",className:Wt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}const EX=()=>{const[n,e]=C.useState(""),[t,r]=C.useState(""),[i,o]=C.useState(""),[a,c]=C.useState(!0),[u,d]=C.useState(""),[h,p]=C.useState(!1),[g]=u1(),_=_i();C.useEffect(()=>{const O=navigator.userAgent||navigator.vendor||window.opera,P=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(O);p(P);const D=g.get("code");D&&(r(D),A(D))},[g]);const E=O=>{O!=null&&O.text&&(e(O.text),A(O.text))},A=O=>{try{_(`/customer/restaurant/${O}`)}catch(P){o("Invalid QR code. Please try again."),console.error("Error processing QR code:",P)}},S=O=>{if(O.preventDefault(),!t.trim()){o("Please enter a QR code");return}A(t.trim())},x=async()=>{try{a&&(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(P=>P.stop()),c(!a),d("")}catch(O){console.error("Error accessing camera:",O),d("Could not access camera. Please check your device settings."),c(!1)}};return y.jsxs("div",{className:"container mx-auto p-4 max-w-4xl",children:[y.jsxs("div",{className:"flex items-center mb-6",children:[y.jsx(_e,{variant:"ghost",size:"icon",onClick:()=>_(-1),className:"mr-4",children:y.jsx(Xp,{className:"h-5 w-5"})}),y.jsx("h1",{className:"text-2xl font-bold",children:"Connect to Restaurant"})]}),y.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:y.jsxs("div",{className:"p-6",children:[y.jsxs("div",{className:"relative aspect-video bg-gray-100 rounded-lg overflow-hidden mb-6",children:[h?a?y.jsxs("div",{className:"relative w-full h-full",children:[y.jsx(uv,{onResult:(O,P)=>{O&&E(O),P&&(console.error(P),d("Failed to access camera. Please check permissions."))},constraints:{facingMode:"environment",aspectRatio:1,width:{min:1024,ideal:1280,max:1920},height:{min:720,ideal:1280,max:1080}},className:"w-full h-full object-cover",videoStyle:{objectFit:"cover",width:"100%",height:"100%",transform:"scaleX(-1)"},videoContainerStyle:{width:"100%",height:"100%",position:"relative"},scanDelay:300}),u&&y.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center p-4",children:y.jsx("p",{className:"text-white text-center",children:u})}),y.jsx("div",{className:"absolute inset-0 border-4 border-primary/30 rounded-lg pointer-events-none"})]}):y.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:y.jsx(eu,{className:"h-24 w-24 text-gray-300"})}):y.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-6 text-center",children:[y.jsx(Sw,{className:"h-12 w-12 text-gray-400 mb-4"}),y.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Mobile Device Recommended"}),y.jsx("p",{className:"text-gray-600 mb-6",children:"For the best experience, please use a mobile device to scan QR codes."}),y.jsxs(_e,{variant:"outline",onClick:()=>c(!1),className:"gap-2",children:[y.jsx(eu,{className:"h-4 w-4"}),"Enter Code Manually"]})]}),h&&y.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center",children:y.jsx(_e,{variant:"secondary",size:"sm",onClick:x,className:"flex items-center gap-2",children:a?y.jsxs(y.Fragment,{children:[y.jsx(CameraOff,{className:"h-4 w-4"}),"Turn Off Camera"]}):y.jsxs(y.Fragment,{children:[y.jsx(aB,{className:"h-4 w-4"}),"Try Camera Again"]})})})]}),y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("h2",{className:"text-xl font-semibold mb-2",children:h?"Scan Restaurant QR Code":"Restaurant Access"}),y.jsx("p",{className:"text-gray-600 mb-4",children:h?"Point your camera at the QR code on the table or menu to connect to the restaurant's menu.":"Enter the restaurant code below or use a mobile device to scan the QR code."}),i&&y.jsx("div",{className:"text-red-500 text-sm mb-4 p-2 bg-red-50 rounded",children:i})]}),y.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[y.jsx("h3",{className:"text-center text-gray-500 text-sm font-medium mb-4",children:"OR"}),y.jsx("p",{className:"text-center text-gray-600 mb-4",children:"Enter the restaurant code manually"}),y.jsxs("form",{onSubmit:S,className:"flex gap-2",children:[y.jsx(ln,{type:"text",value:t,onChange:O=>r(O.target.value),placeholder:"Enter restaurant code",className:"flex-1"}),y.jsx(_e,{type:"submit",children:"Connect"})]})]})]})})]})};function AX(){const{restaurantId:n}=$9(),[e,t]=C.useState([]),[r,i]=C.useState([]),[o,a]=C.useState(!0),[c,u]=C.useState(!1),[d,h]=C.useState(""),[p,g]=C.useState(""),_=_i();C.useEffect(()=>{const x=localStorage.getItem("customerName"),O=localStorage.getItem("customerId");!x||!O?_(`/restaurant/${n}/start`):(h(x),g(O))},[n,_]),C.useEffect(()=>{(async()=>{if(n)try{const O=Gn(Pt(We,"menuItems"),Mt("restaurantId","==",n),Mt("available","==",!0)),P=await Jo(O),D=[];P.forEach(j=>{D.push({id:j.id,...j.data()})}),t(D)}catch(O){console.error("Error fetching menu:",O)}finally{a(!1)}})()},[n]);const E=x=>{i([...r,{...x,cartId:Date.now().toString()}])},A=x=>{i(r.filter(O=>O.cartId!==x))},S=async()=>{if(r.length!==0)try{const x=Gn(Pt(We,"tabs"),Mt("customerId","==",p),Mt("status","==","active")),O=await Jo(x);let P,D;if(O.empty){const R={restaurantId:n,customerId:p,customerName:d,status:"active",createdAt:ar(),referenceNumber:`TAB-${Math.floor(1e3+Math.random()*9e3)}`,total:0,items:[]};D=await Qc(Pt(We,"tabs"),R),P=D.id}else{const R=O.docs[0];P=R.id,D=R.ref}const j=r.reduce((R,k)=>R+k.price,0),H={tabId:P,restaurantId:n,customerId:p,customerName:d,items:r.map(R=>({menuItemId:R.id,name:R.name,price:R.price,quantity:1})),status:"pending",createdAt:ar(),total:j},M=await Qc(Pt(We,"orders"),H);await k1(D,{total:yC(j),updatedAt:ar()}),u(!0),i([]),setTimeout(()=>u(!1),3e3)}catch(x){console.error("Error placing order:",x)}};return o?y.jsx("div",{className:"flex justify-center p-8",children:"Loading menu..."}):y.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",d,"!"]}),y.jsx(_e,{variant:"outline",onClick:()=>{localStorage.removeItem("customerName"),localStorage.removeItem("customerId"),_(`/restaurant/${n}/start`)},children:"Change Name"})]}),c&&y.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:"Order placed successfully!"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Menu"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(x=>y.jsxs(ct,{className:"overflow-hidden",children:[y.jsxs(Rn,{className:"p-4 pb-2",children:[y.jsx(Nn,{className:"text-lg",children:x.name}),y.jsx(tr,{children:x.description})]}),y.jsx(Ct,{className:"p-4 pt-0",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("span",{className:"font-medium",children:["$",x.price.toFixed(2)]}),y.jsx(_e,{size:"sm",onClick:()=>E(x),children:"Add to Order"})]})})]},x.id))})]}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Your Order"}),y.jsx(ct,{children:y.jsx(Ct,{className:"p-4",children:r.length===0?y.jsx("p",{className:"text-gray-500 text-center py-4",children:"Your cart is empty"}):y.jsxs(y.Fragment,{children:[y.jsx("ul",{className:"space-y-2 mb-4",children:r.map(x=>y.jsxs("li",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-medium",children:x.name}),y.jsxs("p",{className:"text-sm text-gray-500",children:["$",x.price.toFixed(2)]})]}),y.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>A(x.cartId),children:"Remove"})]},x.cartId))}),y.jsxs("div",{className:"border-t pt-4",children:[y.jsxs("div",{className:"flex justify-between font-bold mb-4",children:[y.jsx("span",{children:"Total:"}),y.jsxs("span",{children:["$",r.reduce((x,O)=>x+O.price,0).toFixed(2)]})]}),y.jsx(_e,{className:"w-full",onClick:S,children:"Place Order"})]})]})})})]})]})]})}function TX({onNameSubmit:n}){const[e,t]=C.useState(""),[r,i]=C.useState("");_i();const o=a=>{if(a.preventDefault(),!e.trim()){i("Please enter your name");return}const c=`cust-${Date.now()}`;localStorage.setItem("customerName",e),localStorage.setItem("customerId",c),n(e,c)};return y.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md",children:[y.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Welcome!"}),y.jsx("p",{className:"mb-6 text-gray-600",children:"Please enter your name to start your tab"}),y.jsxs("form",{onSubmit:o,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"customerName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Name"}),y.jsx(ln,{id:"customerName",type:"text",value:e,onChange:a=>{t(a.target.value),r&&i("")},placeholder:"e.g., John",className:"w-full",autoFocus:!0}),r&&y.jsx("p",{className:"mt-1 text-sm text-red-500",children:r})]}),y.jsx(_e,{type:"submit",className:"w-full",children:"Start My Tab"})]})]})}function SX(){const{currentUser:n}=ss(),e=Pr();return n?y.jsx("div",{className:"min-h-screen bg-gray-50",children:y.jsx(f6,{})}):y.jsx(Tp,{to:"/customer/signin",state:{from:e},replace:!0})}function xX(){const[n]=u1(),[e,t]=C.useState("loading"),[r,i]=C.useState(null),[o,a]=C.useState([]),[c,u]=C.useState(null),[d,h]=C.useState(""),[p,g]=C.useState(!1);return Pr(),C.useEffect(()=>{const _=n.get("restaurantId"),E=sessionStorage.getItem(`tabId-${_}`);if(!_){t("scan");return}(async()=>{try{const S=await fI(_);if(!S){h("Restaurant not found. The QR code may be invalid."),t("error");return}u(S);let x=null;if(E){const{getDoc:P,doc:D}=await dI(async()=>{const{getDoc:H,doc:M}=await Promise.resolve().then(()=>Nk);return{getDoc:H,doc:M}},[]),j=await P(D(We,"tabs",E));j.exists()&&(x={id:j.id,...j.data()})}if(x&&(x.status==="active"||x.status==="pending")){i(x),t("tab");return}const O=await NB({restaurantId:S.id,restaurantName:S.name});i(O),sessionStorage.setItem(`tabId-${_}`,O.id),t("tab")}catch(S){console.error(S),h("Failed to create a new tab. Please try again."),t("error")}})()},[n]),C.useEffect(()=>{if(!(r!=null&&r.id))return;const _=OB(r.id,i),E=DB(r.id,a);return()=>{_(),E()}},[r==null?void 0:r.id]),e==="loading"?y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),y.jsx("p",{className:"text-lg text-muted-foreground",children:"Opening Your Tab..."})]})}):e==="error"?y.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:y.jsxs(ct,{className:"w-full max-w-sm text-center border-red-500",children:[y.jsx(Rn,{children:y.jsx(Nn,{children:"Error"})}),y.jsxs(Ct,{children:[y.jsx("p",{children:d}),y.jsx(mi,{to:"/",children:y.jsx(_e,{className:"w-full mt-4",children:"Go to Homepage"})})]})]})}):e==="scan"?y.jsx("div",{className:"min-h-screen bg-background p-4",children:y.jsxs("div",{className:"max-w-md mx-auto",children:[y.jsxs("div",{className:"flex items-center mb-6",children:[y.jsx(mi,{to:"/",children:y.jsx(_e,{variant:"ghost",size:"sm",className:"mr-2",children:y.jsx(Xp,{className:"w-4 h-4"})})}),y.jsx("h1",{className:"text-xl font-semibold",children:"Open a Tab"})]}),y.jsx(ct,{className:"text-center",children:y.jsxs(Rn,{children:[y.jsx(eu,{className:"w-24 h-24 text-primary mx-auto mb-4"}),y.jsx(Nn,{children:"Scan a Restaurant's QR Code"}),y.jsx(tr,{children:"To open a tab, please scan the QR code provided by the restaurant."})]})})]})}):e==="tab"&&r?y.jsx("div",{className:"min-h-screen bg-background p-4",children:y.jsxs("div",{className:"max-w-md mx-auto",children:[y.jsxs("div",{className:"flex items-center mb-6",children:[y.jsx(mi,{to:"/customer",children:y.jsx(_e,{variant:"ghost",size:"sm",className:"mr-2",children:y.jsx(Xp,{className:"w-4 h-4"})})}),y.jsx("h1",{className:"text-xl font-semibold",children:"Your Tab"})]}),y.jsxs(ct,{children:[y.jsxs(Rn,{children:[y.jsx(Nn,{children:c==null?void 0:c.name}),y.jsx(tr,{children:"Your tab is open! Show this number to your waiter to add orders."}),y.jsxs("div",{className:"pt-4 text-center",children:[y.jsx("p",{className:"text-sm text-muted-foreground",children:"Your Tab Number"}),y.jsx("p",{className:"text-4xl font-bold tracking-widest text-primary bg-muted p-4 rounded-lg",children:r.referenceNumber})]})]}),y.jsxs(Ct,{children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-lg font-semibold",children:"Your Orders"}),y.jsxs(CI,{className:"bg-blue-100 text-blue-800 capitalize",children:[y.jsx(Yp,{className:"w-4 h-4 mr-1"}),r.status.replace("_"," ")]})]}),y.jsxs("div",{className:"space-y-2 mb-4",children:[o.length===0&&y.jsx("p",{className:"text-center text-muted-foreground py-4",children:"Your orders will appear here once added by the waiter."}),o.map(_=>{var E;return y.jsxs("div",{className:"flex justify-between",children:[y.jsxs("div",{children:[y.jsxs("p",{className:"font-medium",children:[_.itemName," (x",_.quantity,")"]}),y.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(((E=_.createdAt)==null?void 0:E.seconds)*1e3).toLocaleTimeString()})]}),y.jsxs("p",{children:["$",(_.price*_.quantity).toFixed(2)]})]},_.id)})]}),y.jsx(LF,{className:"my-4"}),y.jsx("div",{className:"space-y-2",children:y.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[y.jsx("p",{children:"Total"}),y.jsxs("p",{children:["$",r.total.toFixed(2)]})]})}),y.jsxs(_e,{className:"w-full mt-4",disabled:r.status!=="pending_acceptance",children:[y.jsx(iB,{className:"w-4 h-4 mr-2"}),"Proceed to Payment"]})]})]})]})}):null}function CX(){return y.jsx(h6,{children:y.jsxs(Kt,{path:"/",element:y.jsx(SX,{}),children:[y.jsx(Kt,{index:!0,element:y.jsx(_q,{})}),y.jsx(Kt,{path:"tab",element:y.jsx(xX,{})}),y.jsx(Kt,{path:"scan",element:y.jsx(EX,{})}),y.jsx(Kt,{path:"saved",element:y.jsx("div",{children:"Saved Restaurants"})}),y.jsx(Kt,{path:"billing",element:y.jsx("div",{children:"Billing"})}),y.jsx(Kt,{path:"help",element:y.jsx("div",{children:"Help"})}),y.jsx(Kt,{path:"restaurant/:restaurantId/start",element:y.jsx(TX,{})}),y.jsx(Kt,{path:"restaurant/:restaurantId/menu",element:y.jsx(AX,{})})]})})}function IX(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}Array(12).fill(0);let dv=1;class RX{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...i}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:dv++,a=this.toasts.find(u=>u.id===o),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),a?this.toasts=this.toasts.map(u=>u.id===o?(this.publish({...u,...e,id:o,title:r}),{...u,...e,id:o,dismissible:c,title:r}):u):this.addToast({title:r,...i,dismissible:c,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,a;const c=i.then(async d=>{if(a=["resolve",d],In.isValidElement(d))o=!1,this.create({id:r,type:"default",message:d});else if(OX(d)&&!d.ok){o=!1;const p=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,g=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description,E=typeof p=="object"&&!In.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:g,...E})}else if(d instanceof Error){o=!1;const p=typeof t.error=="function"?await t.error(d):t.error,g=typeof t.description=="function"?await t.description(d):t.description,E=typeof p=="object"&&!In.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:g,...E})}else if(t.success!==void 0){o=!1;const p=typeof t.success=="function"?await t.success(d):t.success,g=typeof t.description=="function"?await t.description(d):t.description,E=typeof p=="object"&&!In.isValidElement(p)?p:{message:p};this.create({id:r,type:"success",description:g,...E})}}).catch(async d=>{if(a=["reject",d],t.error!==void 0){o=!1;const h=typeof t.error=="function"?await t.error(d):t.error,p=typeof t.description=="function"?await t.description(d):t.description,_=typeof h=="object"&&!In.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,..._})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),u=()=>new Promise((d,h)=>c.then(()=>a[0]==="reject"?h(a[1]):d(a[1])).catch(h));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||dv++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const fi=new RX,NX=(n,e)=>{const t=(e==null?void 0:e.id)||dv++;return fi.addToast({title:n,...e,id:t}),t},OX=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",DX=NX,PX=()=>fi.toasts,MX=()=>fi.getActiveToasts(),$m=Object.assign(DX,{success:fi.success,info:fi.info,warning:fi.warning,error:fi.error,custom:fi.custom,message:fi.message,promise:fi.promise,dismiss:fi.dismiss,loading:fi.loading},{getHistory:PX,getToasts:MX});IX("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const TS=({tab:n,onClick:e,isActive:t})=>{var o;const r=typeof n.total=="number"?n.total:0,i=n.orderCount||0;return y.jsx(ct,{className:`w-32 h-20 flex flex-col items-center justify-center cursor-pointer hover:shadow-lg transition-shadow ${t?"border-l-4 border-l-green-500 bg-green-50":"border-l-4 border-l-gray-300 bg-gray-50"}`,onClick:e,children:y.jsxs(Ct,{className:"flex flex-col items-center justify-center p-2 w-full",children:[y.jsxs("div",{className:"flex justify-between w-full items-center mb-1",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsxs("span",{className:"text-xs text-gray-700 font-medium",children:["Tab ",n.referenceNumber||((o=n.id)==null?void 0:o.substring(0,4))]}),y.jsx("span",{className:`ml-1 w-2 h-2 rounded-full ${t?"bg-green-500":"bg-gray-400"}`})]}),i>0&&y.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${t?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:[i," ",i===1?"order":"orders"]})]}),y.jsxs("div",{className:`font-bold text-lg ${t?"text-gray-900":"text-gray-600"}`,children:["$",r.toFixed(2)]})]})})},kX=({waiter:n})=>{var W;const e=_i(),{currentUser:t}=ss(),[r,i]=C.useState(!1),[o,a]=C.useState([{menuItemId:"",quantity:1,notes:"",category:""}]),[c,u]=C.useState(""),[d,h]=C.useState([]),[p,g]=C.useState([]),[_,E]=C.useState([]),[A,S]=C.useState([]),[x,O]=C.useState([]),[P,D]=C.useState(""),[j,H]=C.useState(!0),[M,R]=C.useState(""),[k,U]=C.useState(!1),z=C.useRef(null),q=C.useRef(null),F=C.useRef(null),Ce=C.useRef(null),Ee={id:(n==null?void 0:n.id)||(t==null?void 0:t.uid)||"",name:(n==null?void 0:n.name)||(t==null?void 0:t.displayName)||"Waiter",restaurantId:(n==null?void 0:n.restaurantId)||""},Q=Ee.restaurantId;C.useEffect(()=>{if(!Q){H(!1);return}console.log("[Menu Effect] Setting up menu listener for restaurant:",Q);const Y=Gn(Pt(We,"menuItems"),Mt("restaurantId","==",Q)),oe=hi(Y,te=>{console.log("[Menu Listener] Snapshot received. Size:",te.size);const se=te.docs.map(ge=>({id:ge.id,...ge.data(),price:parseFloat(ge.data().price)||0}));h(se);const pe=["All",...Array.from(new Set(se.map(ge=>ge.category).filter(Boolean))).sort()];g(pe),H(!1)},te=>{console.error("[Menu Listener] Error:",te),R(`Error loading menu: ${te.message}`),H(!1)});return Ce.current=oe,()=>{console.log("[Menu Effect] Cleaning up menu listener"),Ce.current&&Ce.current()}},[Q]),C.useEffect(()=>{if(!Q)return;console.log("[All Tabs Effect] Setting up listener for all tabs in restaurant:",Q);const Y=Gn(Pt(We,"tabs"),Mt("restaurantId","==",Q)),oe=hi(Y,te=>{console.log("[All Tabs Listener] Snapshot received. Size:",te.size);const se=[];te.forEach(pe=>{const ge=pe.data();se.push({id:pe.id,...ge,referenceNumber:ge.referenceNumber||ge.tableNumber||`TAB-${pe.id.substring(0,4).toUpperCase()}`,total:typeof ge.total=="number"?ge.total:0,waiterName:ge.waiterName||"Unassigned"})}),E(se),console.log("[All Tabs Effect] All tabs updated:",se.length)},te=>{console.error("[All Tabs Listener] Error:",te),R(`Error loading tabs: ${te.message}`)});return z.current=oe,()=>{console.log("[All Tabs Effect] Cleaning up all tabs listener"),z.current&&z.current()}},[Q]),C.useEffect(()=>{if(!Ee.id||!Q)return;console.log("[My Active Tabs Effect] Setting up listener for active tabs assigned to waiter:",Ee.id);const Y=Gn(Pt(We,"tabs"),Mt("restaurantId","==",Q),Mt("status","==","active"),Mt("waiterId","==",Ee.id)),oe=hi(Y,te=>{console.log("[My Active Tabs Listener] Snapshot received. Size:",te.size);const se=[];te.forEach(pe=>{const ge=pe.data();se.push({id:pe.id,...ge,referenceNumber:ge.referenceNumber||ge.tableNumber||`TAB-${pe.id.substring(0,4).toUpperCase()}`,total:typeof ge.total=="number"?ge.total:0,waiterName:ge.waiterName||"Unassigned"})}),S(se),console.log("[My Active Tabs Effect] My active tabs updated:",se.length)},te=>{console.error("[My Active Tabs Listener] Error:",te),R(`Error loading your active tabs: ${te.message}`)});return q.current=oe,()=>{console.log("[My Active Tabs Effect] Cleaning up my active tabs listener"),q.current&&q.current()}},[Ee.id,Q]),C.useEffect(()=>{if(A.length===0){O([]);return}const Y=A.map(se=>se.id);console.log("[My Orders Effect] Setting up listener for orders in tabs:",Y);const oe=Gn(Pt(We,"orders"),Mt("tabId","in",Y),Mt("status","in",["pending","preparing","ready"])),te=hi(oe,se=>{console.log("[My Orders Listener] Snapshot received. Size:",se.size);const pe=[];se.forEach(ge=>{pe.push({id:ge.id,...ge.data()})}),O(pe),console.log("[My Orders Effect] My orders updated:",pe.length)},se=>{console.error("[My Orders Listener] Error:",se)});return F.current=te,()=>{console.log("[My Orders Effect] Cleaning up my orders listener"),F.current&&F.current()}},[A]);const me=C.useCallback(async Y=>{try{console.log(`[updateTabTotal] Recalculating total for tab ${Y}`);const oe=await Jo(Gn(Pt(We,"orders"),Mt("tabId","==",Y)));let te=0,se=0,pe=0;oe.forEach(ke=>{const $e=ke.data();if($e.items&&Array.isArray($e.items)){const Zt=$e.items.reduce((mt,Ie)=>{const Le=(parseFloat(Ie.price)||0)*(parseInt(Ie.quantity)||1);return mt+Le},0);te+=Zt,se++,pe+=$e.items.reduce((mt,Ie)=>mt+(parseInt(Ie.quantity)||1),0)}}),console.log(`[updateTabTotal] Tab ${Y} - Total: $${te.toFixed(2)}, Orders: ${se}, Items: ${pe}`);const ge=sr(We,"tabs",Y);return await k1(ge,{total:te,orderCount:se,itemCount:pe,updatedAt:new Date}),console.log(`[updateTabTotal] Successfully updated tab ${Y}`),te}catch(oe){console.error(`[updateTabTotal] Error updating tab ${Y}:`,oe)}},[]),ue=C.useCallback(async Y=>{if(Y.preventDefault(),!P||!o.some(oe=>oe.menuItemId)){$m.error("Please select a tab and at least one valid menu item");return}try{i(!0);const oe=_.find(mt=>mt.id===P);if(!oe)throw new Error("Selected tab not found");const te=o.filter(mt=>mt.menuItemId).map(mt=>{const Ie=d.find(Le=>Le.id===mt.menuItemId);return{menuItemId:mt.menuItemId,name:(Ie==null?void 0:Ie.name)||"Unknown Item",price:parseFloat(Ie==null?void 0:Ie.price)||0,quantity:parseInt(mt.quantity)||1,notes:mt.notes||""}});if(te.length===0){$m.error("No valid items to order.");return}const se=te.reduce((mt,Ie)=>mt+Ie.price*Ie.quantity,0),pe=vC(We),ge=sr(Pt(We,"orders")),ke={id:ge.id,tabId:P,tabReferenceNumber:oe.referenceNumber,items:te,status:"pending",total:se,createdAt:new Date,updatedAt:new Date,waiterId:Ee.id,waiterName:Ee.name,restaurantId:Q,notes:c};pe.set(ge,ke);const $e=sr(We,"tabs",P),Zt={status:"active",waiterId:Ee.id,waiterName:Ee.name,updatedAt:new Date};pe.update($e,Zt),console.log("[Order Submit] Committing batch write for new order..."),await pe.commit(),console.log("[Order Submit] Batch write successful."),await me(P),a([{menuItemId:"",quantity:1,notes:"",category:""}]),u(""),D(""),U(!1),$m.success("Order placed successfully!")}catch(oe){console.error("[Order Submit] Error placing order:",oe),$m.error("Failed to place order: "+oe.message)}finally{i(!1)}},[P,o,_,d,Ee,Q,c,me]),De=_.filter(Y=>Y.status!=="active");return j?y.jsx("div",{className:"flex items-center justify-center min-h-screen",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),y.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):M?y.jsx("div",{className:"flex items-center justify-center min-h-screen",children:y.jsxs("div",{className:"text-center p-6 max-w-md",children:[y.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-4",children:y.jsx($o,{className:"w-6 h-6 text-red-600"})}),y.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error Loading Dashboard"}),y.jsx("p",{className:"text-gray-600 mb-4",children:M}),y.jsx(_e,{onClick:()=>window.location.reload(),children:"Try Again"})]})}):y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y.jsx("header",{className:"bg-white shadow",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8 flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Waiter Dashboard"}),y.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Welcome, ",Ee.name]})]}),y.jsx("div",{className:"flex space-x-2",children:y.jsx(_e,{variant:"outline",onClick:()=>e("/waiterhome"),children:"Exit"})})]})}),y.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"space-y-6 mb-8",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Your Active Tabs"}),y.jsx("div",{className:"flex flex-wrap gap-3",children:A.length>0?A.map(Y=>y.jsx(TS,{tab:Y,onClick:()=>{D(Y.id),U(!0)},isActive:!0},Y.id)):y.jsx("div",{className:"w-full text-center py-4 text-gray-500 bg-gray-50 rounded-lg",children:"No active tabs assigned to you"})})]}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Inactive Tabs"}),y.jsx("div",{className:"flex flex-wrap gap-3",children:De.length>0?De.map(Y=>y.jsx(TS,{tab:Y,onClick:()=>{D(Y.id),U(!0)},isActive:!1},Y.id)):y.jsx("div",{className:"w-full text-center py-4 text-gray-500 bg-gray-50 rounded-lg",children:"No inactive tabs available"})})]})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Tabs Orders"}),x.length>0?y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Object.entries(x.reduce((Y,oe)=>{const te=oe.tabId||"Unknown";return Y[te]||(Y[te]=[]),Y[te].push(oe),Y},{})).map(([Y,oe])=>{var pe;const te=A.find(ge=>ge.id===Y),se=te?te.referenceNumber||((pe=te.id)==null?void 0:pe.substring(0,4)):"Unknown Tab";return y.jsx(ct,{className:"overflow-hidden flex flex-col h-full",children:y.jsxs(Ct,{className:"p-4 flex-1 flex flex-col",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsxs("h3",{className:"font-medium",children:["Tab ",se]}),y.jsxs("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-800",children:[oe.length," ",oe.length===1?"order":"orders"]})]}),y.jsx("div",{className:"space-y-2 mb-3 flex-1 overflow-y-auto",children:oe.flatMap(ge=>(ge.items||[]).map((ke,$e)=>y.jsxs("div",{className:"flex justify-between text-sm",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsxs("span",{className:"font-medium",children:[ke.quantity,"x"]}),y.jsx("span",{className:"ml-2",children:ke.name}),ke.notes&&y.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",ke.notes,")"]})]}),y.jsxs("span",{children:["$",(ke.price*ke.quantity).toFixed(2)]})]},`${ge.id}-${$e}`)))}),y.jsx("div",{className:"mt-auto pt-2 border-t border-gray-100",children:y.jsxs("div",{className:"flex justify-between font-medium",children:[y.jsx("span",{children:"Tab Total"}),y.jsxs("span",{children:["$",oe.reduce((ge,ke)=>ge+(ke.total||0),0).toFixed(2)]})]})})]})},`tab-orders-${Y}`)})}):y.jsx(ct,{children:y.jsxs(Ct,{className:"p-6 text-center",children:[y.jsx("div",{className:"mx-auto w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:y.jsx(cI,{className:"w-6 h-6 text-gray-400"})}),y.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No orders for your tabs"}),y.jsx("p",{className:"text-gray-500",children:"Orders will appear here once you place them"})]})})]}),y.jsxs("div",{className:"mt-6",children:[y.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),y.jsx("div",{className:"grid grid-cols-1 gap-3",children:y.jsx(_e,{variant:"outline",className:"h-auto py-3",onClick:()=>U(!0),children:y.jsxs("div",{className:"text-left",children:[y.jsx("div",{className:"font-medium",children:"New Order"}),y.jsx("div",{className:"text-xs text-gray-500",children:"Create a new order"})]})})})]}),k&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-white rounded-lg shadow-lg flex flex-col w-full max-w-md max-h-[90vh]",children:[y.jsx("div",{className:"p-6 pb-0",children:y.jsx("h2",{className:"text-lg font-bold mb-4",children:"Create New Order"})}),y.jsx("div",{className:"overflow-y-auto px-6 flex-1",children:y.jsxs("form",{onSubmit:ue,children:[P&&y.jsxs("div",{className:"mb-4 p-2 bg-gray-100 rounded text-sm",children:[y.jsx("strong",{children:"Selected Tab:"})," ",((W=_.find(Y=>Y.id===P))==null?void 0:W.referenceNumber)||P]}),y.jsxs("div",{className:"space-y-4 mb-4 max-h-60 overflow-y-auto pr-2 -mr-2",children:[o.map((Y,oe)=>{const te=d.find(se=>se.id===Y.menuItemId);return y.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 relative",children:[o.length>1&&y.jsx("button",{type:"button",onClick:()=>{const se=[...o];se.splice(oe,1),a(se)},className:"absolute top-2 right-2 text-gray-400 hover:text-red-500",children:""}),y.jsxs("div",{className:"mb-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),y.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",value:Y.category,onChange:se=>{const pe=[...o];pe[oe].category=se.target.value,pe[oe].menuItemId="",a(pe)},required:!0,children:[y.jsx("option",{value:"",children:"-- Select Category --"}),p.map(se=>y.jsx("option",{value:se,children:se},se))]})]}),y.jsxs("div",{className:"mb-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Menu Item"}),y.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",value:Y.menuItemId,onChange:se=>{const pe=[...o];pe[oe].menuItemId=se.target.value,a(pe)},required:!0,disabled:!Y.category,children:[y.jsx("option",{value:"",children:"-- Select Menu Item --"}),Y.category&&d.filter(se=>se.category===Y.category).map(se=>{var pe;return y.jsxs("option",{value:se.id,children:[se.name," ($",((pe=se.price)==null?void 0:pe.toFixed(2))||"0.00",")"]},se.id)})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),y.jsx("input",{type:"number",min:"1",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",required:!0,value:Y.quantity,onChange:se=>{const pe=[...o];pe[oe].quantity=parseInt(se.target.value)||1,a(pe)}})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Notes"}),y.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",placeholder:"e.g., no onions",value:Y.notes||"",onChange:se=>{const pe=[...o];pe[oe].notes=se.target.value,a(pe)}})]})]}),te&&y.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Subtotal: $",(te.price*(Y.quantity||1)).toFixed(2)]})]},oe)}),y.jsx(_e,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>{a([...o,{menuItemId:"",quantity:1,notes:"",category:""}])},children:"+ Add Another Item"})]}),y.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg mb-4 text-sm",children:[y.jsx("div",{className:"font-medium mb-2",children:"Order Summary"}),y.jsx("div",{className:"space-y-1 mb-2 max-h-32 overflow-y-auto",children:o.filter(Y=>Y.menuItemId).map((Y,oe)=>{const te=d.find(se=>se.id===Y.menuItemId);return te?y.jsxs("div",{className:"flex justify-between",children:[y.jsxs("div",{children:[Y.quantity,"x ",te.name,Y.notes&&` (${Y.notes})`]}),y.jsxs("div",{children:["$",(te.price*Y.quantity).toFixed(2)]})]},oe):null})}),y.jsxs("div",{className:"border-t border-gray-200 pt-1 mt-2 font-medium flex justify-between",children:[y.jsx("span",{children:"Total:"}),y.jsxs("span",{children:["$",o.reduce((Y,oe)=>{const te=d.find(se=>se.id===oe.menuItemId);return Y+((te==null?void 0:te.price)||0)*(oe.quantity||1)},0).toFixed(2)]})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Notes (Optional)"}),y.jsx("textarea",{className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",rows:"2",placeholder:"Special instructions for the kitchen",value:c,onChange:Y=>u(Y.target.value)})]}),y.jsx("div",{className:"sticky bottom-0 bg-white pt-4 pb-6 -mx-6 px-6 border-t border-gray-200",children:y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsx(_e,{variant:"outline",type:"button",onClick:()=>U(!1),size:"sm",children:"Cancel"}),y.jsx(_e,{type:"submit",disabled:!P||!o.some(Y=>Y.menuItemId)||r,size:"sm",children:r?"Placing...":"Create Order"})]})})]})})]})})]})]})};function LX(n,e){const t=C.createContext(e),r=o=>{const{children:a,...c}=o,u=C.useMemo(()=>c,Object.values(c));return y.jsx(t.Provider,{value:u,children:a})};r.displayName=n+"Provider";function i(o){const a=C.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${n}\``)}return[r,i]}function rh(n,e=[]){let t=[];function r(o,a){const c=C.createContext(a),u=t.length;t=[...t,a];const d=p=>{var x;const{scope:g,children:_,...E}=p,A=((x=g==null?void 0:g[n])==null?void 0:x[u])||c,S=C.useMemo(()=>E,Object.values(E));return y.jsx(A.Provider,{value:S,children:_})};d.displayName=o+"Provider";function h(p,g){var A;const _=((A=g==null?void 0:g[n])==null?void 0:A[u])||c,E=C.useContext(_);if(E)return E;if(a!==void 0)return a;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[d,h]}const i=()=>{const o=t.map(a=>C.createContext(a));return function(c){const u=(c==null?void 0:c[n])||o;return C.useMemo(()=>({[`__scope${n}`]:{...c,[n]:u}}),[c,u])}};return i.scopeName=n,[r,jX(i,...e)]}function jX(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((c,{useScope:u,scopeName:d})=>{const p=u(o)[`__scope${d}`];return{...c,...p}},{});return C.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function Pn(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}var iu=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{},VX=t6[" useInsertionEffect ".trim().toString()]||iu;function X1({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,o,a]=BX({defaultProp:e,onChange:t}),c=n!==void 0,u=c?n:i;{const h=C.useRef(n!==void 0);C.useEffect(()=>{const p=h.current;p!==c&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=c},[c,r])}const d=C.useCallback(h=>{var p;if(c){const g=FX(h)?h(n):h;g!==n&&((p=a.current)==null||p.call(a,g))}else o(h)},[c,n,o,a]);return[u,d]}function BX({defaultProp:n,onChange:e}){const[t,r]=C.useState(n),i=C.useRef(t),o=C.useRef(e);return VX(()=>{o.current=e},[e]),C.useEffect(()=>{var a;i.current!==t&&((a=o.current)==null||a.call(o,t),i.current=t)},[t,i]),[t,r,o]}function FX(n){return typeof n=="function"}function UX(n){const e=C.useRef({value:n,previous:n});return C.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}function zX(n){const[e,t]=C.useState(void 0);return iu(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let a,c;if("borderBoxSize"in o){const u=o.borderBoxSize,d=Array.isArray(u)?u[0]:u;a=d.inlineSize,c=d.blockSize}else a=n.offsetWidth,c=n.offsetHeight;t({width:a,height:c})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}function HX(n,e){return C.useReducer((t,r)=>e[t][r]??t,n)}var Cu=n=>{const{present:e,children:t}=n,r=GX(e),i=typeof t=="function"?t({present:r.isPresent}):C.Children.only(t),o=Kr(r.ref,qX(i));return typeof t=="function"||r.isPresent?C.cloneElement(i,{ref:o}):null};Cu.displayName="Presence";function GX(n){const[e,t]=C.useState(),r=C.useRef(null),i=C.useRef(n),o=C.useRef("none"),a=n?"mounted":"unmounted",[c,u]=HX(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const d=Xm(r.current);o.current=c==="mounted"?d:"none"},[c]),iu(()=>{const d=r.current,h=i.current;if(h!==n){const g=o.current,_=Xm(d);n?u("MOUNT"):_==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(h&&g!==_?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,u]),iu(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,p=_=>{const A=Xm(r.current).includes(_.animationName);if(_.target===e&&A&&(u("ANIMATION_END"),!i.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},g=_=>{_.target===e&&(o.current=Xm(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:C.useCallback(d=>{r.current=d?getComputedStyle(d):null,t(d)},[])}}function Xm(n){return(n==null?void 0:n.animationName)||"none"}function qX(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Y1="Checkbox",[WX,gQ]=rh(Y1),[$X,m_]=WX(Y1);function XX(n){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:i,disabled:o,form:a,name:c,onCheckedChange:u,required:d,value:h="on",internal_do_not_use_render:p}=n,[g,_]=X1({prop:t,defaultProp:i??!1,onChange:u,caller:Y1}),[E,A]=C.useState(null),[S,x]=C.useState(null),O=C.useRef(!1),P=E?!!a||!!E.closest("form"):!0,D={checked:g,disabled:o,setChecked:_,control:E,setControl:A,name:c,form:a,value:h,hasConsumerStoppedPropagationRef:O,required:d,defaultChecked:na(i)?!1:i,isFormControl:P,bubbleInput:S,setBubbleInput:x};return y.jsx($X,{scope:e,...D,children:YX(p)?p(D):r})}var bR="CheckboxTrigger",ER=C.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...r},i)=>{const{control:o,value:a,disabled:c,checked:u,required:d,setControl:h,setChecked:p,hasConsumerStoppedPropagationRef:g,isFormControl:_,bubbleInput:E}=m_(bR,n),A=Kr(i,h),S=C.useRef(u);return C.useEffect(()=>{const x=o==null?void 0:o.form;if(x){const O=()=>p(S.current);return x.addEventListener("reset",O),()=>x.removeEventListener("reset",O)}},[o,p]),y.jsx(wn.button,{type:"button",role:"checkbox","aria-checked":na(u)?"mixed":u,"aria-required":d,"data-state":IR(u),"data-disabled":c?"":void 0,disabled:c,value:a,...r,ref:A,onKeyDown:Pn(e,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Pn(t,x=>{p(O=>na(O)?!0:!O),E&&_&&(g.current=x.isPropagationStopped(),g.current||x.stopPropagation())})})});ER.displayName=bR;var AR=C.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:i,defaultChecked:o,required:a,disabled:c,value:u,onCheckedChange:d,form:h,...p}=n;return y.jsx(XX,{__scopeCheckbox:t,checked:i,defaultChecked:o,disabled:c,required:a,onCheckedChange:d,name:r,form:h,value:u,internal_do_not_use_render:({isFormControl:g})=>y.jsxs(y.Fragment,{children:[y.jsx(ER,{...p,ref:e,__scopeCheckbox:t}),g&&y.jsx(CR,{__scopeCheckbox:t})]})})});AR.displayName=Y1;var TR="CheckboxIndicator",SR=C.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...i}=n,o=m_(TR,t);return y.jsx(Cu,{present:r||na(o.checked)||o.checked===!0,children:y.jsx(wn.span,{"data-state":IR(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...n.style}})})});SR.displayName=TR;var xR="CheckboxBubbleInput",CR=C.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:o,defaultChecked:a,required:c,disabled:u,name:d,value:h,form:p,bubbleInput:g,setBubbleInput:_}=m_(xR,n),E=Kr(t,_),A=UX(o),S=zX(r);C.useEffect(()=>{const O=g;if(!O)return;const P=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(P,"checked").set,H=!i.current;if(A!==o&&j){const M=new Event("click",{bubbles:H});O.indeterminate=na(o),j.call(O,na(o)?!1:o),O.dispatchEvent(M)}},[g,A,o,i]);const x=C.useRef(na(o)?!1:o);return y.jsx(wn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??x.current,required:c,disabled:u,name:d,value:h,form:p,...e,tabIndex:-1,ref:E,style:{...e.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});CR.displayName=xR;function YX(n){return typeof n=="function"}function na(n){return n==="indeterminate"}function IR(n){return na(n)?"indeterminate":n?"checked":"unchecked"}function Ly({className:n,...e}){return y.jsx(AR,{"data-slot":"checkbox",className:Wt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:y.jsx(SR,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:y.jsx(SV,{className:"size-3.5"})})})}function KX(n){const e=n+"CollectionProvider",[t,r]=rh(e),[i,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=A=>{const{scope:S,children:x}=A,O=In.useRef(null),P=In.useRef(new Map).current;return y.jsx(i,{scope:S,itemMap:P,collectionRef:O,children:x})};a.displayName=e;const c=n+"CollectionSlot",u=Tf(c),d=In.forwardRef((A,S)=>{const{scope:x,children:O}=A,P=o(c,x),D=Kr(S,P.collectionRef);return y.jsx(u,{ref:D,children:O})});d.displayName=c;const h=n+"CollectionItemSlot",p="data-radix-collection-item",g=Tf(h),_=In.forwardRef((A,S)=>{const{scope:x,children:O,...P}=A,D=In.useRef(null),j=Kr(S,D),H=o(h,x);return In.useEffect(()=>(H.itemMap.set(D,{ref:D,...P}),()=>void H.itemMap.delete(D))),y.jsx(g,{[p]:"",ref:j,children:O})});_.displayName=h;function E(A){const S=o(n+"CollectionConsumer",A);return In.useCallback(()=>{const O=S.collectionRef.current;if(!O)return[];const P=Array.from(O.querySelectorAll(`[${p}]`));return Array.from(S.itemMap.values()).sort((H,M)=>P.indexOf(H.ref.current)-P.indexOf(M.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:a,Slot:d,ItemSlot:_},E,r]}var QX=t6[" useId ".trim().toString()]||(()=>{}),ZX=0;function df(n){const[e,t]=C.useState(QX());return iu(()=>{t(r=>r??String(ZX++))},[n]),n||(e?`radix-${e}`:"")}function ou(n){const e=C.useRef(n);return C.useEffect(()=>{e.current=n}),C.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}var JX=C.createContext(void 0);function RR(n){const e=C.useContext(JX);return n||e||"ltr"}var jy="rovingFocusGroup.onEntryFocus",eY={bubbles:!1,cancelable:!0},ih="RovingFocusGroup",[fv,NR,tY]=KX(ih),[nY,OR]=rh(ih,[tY]),[rY,iY]=nY(ih),DR=C.forwardRef((n,e)=>y.jsx(fv.Provider,{scope:n.__scopeRovingFocusGroup,children:y.jsx(fv.Slot,{scope:n.__scopeRovingFocusGroup,children:y.jsx(oY,{...n,ref:e})})}));DR.displayName=ih;var oY=C.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...p}=n,g=C.useRef(null),_=Kr(e,g),E=RR(o),[A,S]=X1({prop:a,defaultProp:c??null,onChange:u,caller:ih}),[x,O]=C.useState(!1),P=ou(d),D=NR(t),j=C.useRef(!1),[H,M]=C.useState(0);return C.useEffect(()=>{const R=g.current;if(R)return R.addEventListener(jy,P),()=>R.removeEventListener(jy,P)},[P]),y.jsx(rY,{scope:t,orientation:r,dir:E,loop:i,currentTabStopId:A,onItemFocus:C.useCallback(R=>S(R),[S]),onItemShiftTab:C.useCallback(()=>O(!0),[]),onFocusableItemAdd:C.useCallback(()=>M(R=>R+1),[]),onFocusableItemRemove:C.useCallback(()=>M(R=>R-1),[]),children:y.jsx(wn.div,{tabIndex:x||H===0?-1:0,"data-orientation":r,...p,ref:_,style:{outline:"none",...n.style},onMouseDown:Pn(n.onMouseDown,()=>{j.current=!0}),onFocus:Pn(n.onFocus,R=>{const k=!j.current;if(R.target===R.currentTarget&&k&&!x){const U=new CustomEvent(jy,eY);if(R.currentTarget.dispatchEvent(U),!U.defaultPrevented){const z=D().filter(Q=>Q.focusable),q=z.find(Q=>Q.active),F=z.find(Q=>Q.id===A),Ee=[q,F,...z].filter(Boolean).map(Q=>Q.ref.current);kR(Ee,h)}}j.current=!1}),onBlur:Pn(n.onBlur,()=>O(!1))})})}),PR="RovingFocusGroupItem",MR=C.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:o,children:a,...c}=n,u=df(),d=o||u,h=iY(PR,t),p=h.currentTabStopId===d,g=NR(t),{onFocusableItemAdd:_,onFocusableItemRemove:E,currentTabStopId:A}=h;return C.useEffect(()=>{if(r)return _(),()=>E()},[r,_,E]),y.jsx(fv.ItemSlot,{scope:t,id:d,focusable:r,active:i,children:y.jsx(wn.span,{tabIndex:p?0:-1,"data-orientation":h.orientation,...c,ref:e,onMouseDown:Pn(n.onMouseDown,S=>{r?h.onItemFocus(d):S.preventDefault()}),onFocus:Pn(n.onFocus,()=>h.onItemFocus(d)),onKeyDown:Pn(n.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){h.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const x=lY(S,h.orientation,h.dir);if(x!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let P=g().filter(D=>D.focusable).map(D=>D.ref.current);if(x==="last")P.reverse();else if(x==="prev"||x==="next"){x==="prev"&&P.reverse();const D=P.indexOf(S.currentTarget);P=h.loop?cY(P,D+1):P.slice(D+1)}setTimeout(()=>kR(P))}}),children:typeof a=="function"?a({isCurrentTabStop:p,hasTabStop:A!=null}):a})})});MR.displayName=PR;var sY={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function aY(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function lY(n,e,t){const r=aY(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return sY[r]}function kR(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function cY(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var uY=DR,dY=MR,K1="Tabs",[fY,yQ]=rh(K1,[OR]),LR=OR(),[hY,p_]=fY(K1),jR=C.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:o,orientation:a="horizontal",dir:c,activationMode:u="automatic",...d}=n,h=RR(c),[p,g]=X1({prop:r,onChange:i,defaultProp:o??"",caller:K1});return y.jsx(hY,{scope:t,baseId:df(),value:p,onValueChange:g,orientation:a,dir:h,activationMode:u,children:y.jsx(wn.div,{dir:h,"data-orientation":a,...d,ref:e})})});jR.displayName=K1;var VR="TabsList",BR=C.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,o=p_(VR,t),a=LR(t);return y.jsx(uY,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:r,children:y.jsx(wn.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:e})})});BR.displayName=VR;var FR="TabsTrigger",UR=C.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...o}=n,a=p_(FR,t),c=LR(t),u=GR(a.baseId,r),d=qR(a.baseId,r),h=r===a.value;return y.jsx(dY,{asChild:!0,...c,focusable:!i,active:h,children:y.jsx(wn.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...o,ref:e,onMouseDown:Pn(n.onMouseDown,p=>{!i&&p.button===0&&p.ctrlKey===!1?a.onValueChange(r):p.preventDefault()}),onKeyDown:Pn(n.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&a.onValueChange(r)}),onFocus:Pn(n.onFocus,()=>{const p=a.activationMode!=="manual";!h&&!i&&p&&a.onValueChange(r)})})})});UR.displayName=FR;var zR="TabsContent",HR=C.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:o,...a}=n,c=p_(zR,t),u=GR(c.baseId,r),d=qR(c.baseId,r),h=r===c.value,p=C.useRef(h);return C.useEffect(()=>{const g=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(g)},[]),y.jsx(Cu,{present:i||h,children:({present:g})=>y.jsx(wn.div,{"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!g,id:d,tabIndex:0,...a,ref:e,style:{...n.style,animationDuration:p.current?"0s":void 0},children:g&&o})})});HR.displayName=zR;function GR(n,e){return`${n}-trigger-${e}`}function qR(n,e){return`${n}-content-${e}`}var mY=jR,pY=BR,gY=UR,yY=HR;function vY({className:n,...e}){return y.jsx(mY,{"data-slot":"tabs",className:Wt("flex flex-col gap-2",n),...e})}function wY({className:n,...e}){return y.jsx(pY,{"data-slot":"tabs-list",className:Wt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",n),...e})}function Ym({className:n,...e}){return y.jsx(gY,{"data-slot":"tabs-trigger",className:Wt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...e})}function Km({className:n,...e}){return y.jsx(yY,{"data-slot":"tabs-content",className:Wt("flex-1 outline-none",n),...e})}function _Y(n,e=globalThis==null?void 0:globalThis.document){const t=ou(n);C.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var bY="DismissableLayer",hv="dismissableLayer.update",EY="dismissableLayer.pointerDownOutside",AY="dismissableLayer.focusOutside",SS,WR=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$R=C.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:c,...u}=n,d=C.useContext(WR),[h,p]=C.useState(null),g=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,_]=C.useState({}),E=Kr(e,M=>p(M)),A=Array.from(d.layers),[S]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=A.indexOf(S),O=h?A.indexOf(h):-1,P=d.layersWithOutsidePointerEventsDisabled.size>0,D=O>=x,j=xY(M=>{const R=M.target,k=[...d.branches].some(U=>U.contains(R));!D||k||(i==null||i(M),a==null||a(M),M.defaultPrevented||c==null||c())},g),H=CY(M=>{const R=M.target;[...d.branches].some(U=>U.contains(R))||(o==null||o(M),a==null||a(M),M.defaultPrevented||c==null||c())},g);return _Y(M=>{O===d.layers.size-1&&(r==null||r(M),!M.defaultPrevented&&c&&(M.preventDefault(),c()))},g),C.useEffect(()=>{if(h)return t&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(SS=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),xS(),()=>{t&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=SS)}},[h,g,t,d]),C.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),xS())},[h,d]),C.useEffect(()=>{const M=()=>_({});return document.addEventListener(hv,M),()=>document.removeEventListener(hv,M)},[]),y.jsx(wn.div,{...u,ref:E,style:{pointerEvents:P?D?"auto":"none":void 0,...n.style},onFocusCapture:Pn(n.onFocusCapture,H.onFocusCapture),onBlurCapture:Pn(n.onBlurCapture,H.onBlurCapture),onPointerDownCapture:Pn(n.onPointerDownCapture,j.onPointerDownCapture)})});$R.displayName=bY;var TY="DismissableLayerBranch",SY=C.forwardRef((n,e)=>{const t=C.useContext(WR),r=C.useRef(null),i=Kr(e,r);return C.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),y.jsx(wn.div,{...n,ref:i})});SY.displayName=TY;function xY(n,e=globalThis==null?void 0:globalThis.document){const t=ou(n),r=C.useRef(!1),i=C.useRef(()=>{});return C.useEffect(()=>{const o=c=>{if(c.target&&!r.current){let u=function(){XR(EY,t,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function CY(n,e=globalThis==null?void 0:globalThis.document){const t=ou(n),r=C.useRef(!1);return C.useEffect(()=>{const i=o=>{o.target&&!r.current&&XR(AY,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function xS(){const n=new CustomEvent(hv);document.dispatchEvent(n)}function XR(n,e,t,{discrete:r}){const i=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?OF(i,o):i.dispatchEvent(o)}var Vy="focusScope.autoFocusOnMount",By="focusScope.autoFocusOnUnmount",CS={bubbles:!1,cancelable:!0},IY="FocusScope",YR=C.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...a}=n,[c,u]=C.useState(null),d=ou(i),h=ou(o),p=C.useRef(null),g=Kr(e,A=>u(A)),_=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(r){let A=function(P){if(_.paused||!c)return;const D=P.target;c.contains(D)?p.current=D:zs(p.current,{select:!0})},S=function(P){if(_.paused||!c)return;const D=P.relatedTarget;D!==null&&(c.contains(D)||zs(p.current,{select:!0}))},x=function(P){if(document.activeElement===document.body)for(const j of P)j.removedNodes.length>0&&zs(c)};document.addEventListener("focusin",A),document.addEventListener("focusout",S);const O=new MutationObserver(x);return c&&O.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",A),document.removeEventListener("focusout",S),O.disconnect()}}},[r,c,_.paused]),C.useEffect(()=>{if(c){RS.add(_);const A=document.activeElement;if(!c.contains(A)){const x=new CustomEvent(Vy,CS);c.addEventListener(Vy,d),c.dispatchEvent(x),x.defaultPrevented||(RY(MY(KR(c)),{select:!0}),document.activeElement===A&&zs(c))}return()=>{c.removeEventListener(Vy,d),setTimeout(()=>{const x=new CustomEvent(By,CS);c.addEventListener(By,h),c.dispatchEvent(x),x.defaultPrevented||zs(A??document.body,{select:!0}),c.removeEventListener(By,h),RS.remove(_)},0)}}},[c,d,h,_]);const E=C.useCallback(A=>{if(!t&&!r||_.paused)return;const S=A.key==="Tab"&&!A.altKey&&!A.ctrlKey&&!A.metaKey,x=document.activeElement;if(S&&x){const O=A.currentTarget,[P,D]=NY(O);P&&D?!A.shiftKey&&x===D?(A.preventDefault(),t&&zs(P,{select:!0})):A.shiftKey&&x===P&&(A.preventDefault(),t&&zs(D,{select:!0})):x===O&&A.preventDefault()}},[t,r,_.paused]);return y.jsx(wn.div,{tabIndex:-1,...a,ref:g,onKeyDown:E})});YR.displayName=IY;function RY(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(zs(r,{select:e}),document.activeElement!==t)return}function NY(n){const e=KR(n),t=IS(e,n),r=IS(e.reverse(),n);return[t,r]}function KR(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function IS(n,e){for(const t of n)if(!OY(t,{upTo:e}))return t}function OY(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function DY(n){return n instanceof HTMLInputElement&&"select"in n}function zs(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&DY(n)&&e&&n.select()}}var RS=PY();function PY(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=NS(n,e),n.unshift(e)},remove(e){var t;n=NS(n,e),(t=n[0])==null||t.resume()}}}function NS(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function MY(n){return n.filter(e=>e.tagName!=="A")}var kY="Portal",QR=C.forwardRef((n,e)=>{var c;const{container:t,...r}=n,[i,o]=C.useState(!1);iu(()=>o(!0),[]);const a=t||i&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return a?z7.createPortal(y.jsx(wn.div,{...r,ref:e}),a):null});QR.displayName=kY;var Fy=0;function LY(){C.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??OS()),document.body.insertAdjacentElement("beforeend",n[1]??OS()),Fy++,()=>{Fy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Fy--}},[])}function OS(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var bp="right-scroll-bar-position",Ep="width-before-scroll-bar",jY="with-scroll-bars-hidden",VY="--removed-body-scroll-bar-size";function Uy(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function BY(n,e){var t=C.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var FY=typeof window<"u"?C.useLayoutEffect:C.useEffect,DS=new WeakMap;function UY(n,e){var t=BY(null,function(r){return n.forEach(function(i){return Uy(i,r)})});return FY(function(){var r=DS.get(t);if(r){var i=new Set(r),o=new Set(n),a=t.current;i.forEach(function(c){o.has(c)||Uy(c,null)}),o.forEach(function(c){i.has(c)||Uy(c,a)})}DS.set(t,n)},[n]),t}function zY(n){return n}function HY(n,e){e===void 0&&(e=zY);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var a=e(o,r);return t.push(a),function(){t=t.filter(function(c){return c!==a})}},assignSyncMedium:function(o){for(r=!0;t.length;){var a=t;t=[],a.forEach(o)}t={push:function(c){return o(c)},filter:function(){return t}}},assignMedium:function(o){r=!0;var a=[];if(t.length){var c=t;t=[],c.forEach(o),a=t}var u=function(){var h=a;a=[],h.forEach(o)},d=function(){return Promise.resolve().then(u)};d(),t={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),t}}}};return i}function GY(n){n===void 0&&(n={});var e=HY(null);return e.options=to({async:!0,ssr:!1},n),e}var ZR=function(n){var e=n.sideCar,t=Wf(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return C.createElement(r,to({},t))};ZR.isSideCarExport=!0;function qY(n,e){return n.useMedium(e),ZR}var JR=GY(),zy=function(){},Q1=C.forwardRef(function(n,e){var t=C.useRef(null),r=C.useState({onScrollCapture:zy,onWheelCapture:zy,onTouchMoveCapture:zy}),i=r[0],o=r[1],a=n.forwardProps,c=n.children,u=n.className,d=n.removeScrollBar,h=n.enabled,p=n.shards,g=n.sideCar,_=n.noIsolation,E=n.inert,A=n.allowPinchZoom,S=n.as,x=S===void 0?"div":S,O=n.gapMode,P=Wf(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=g,j=UY([t,e]),H=to(to({},P),i);return C.createElement(C.Fragment,null,h&&C.createElement(D,{sideCar:JR,removeScrollBar:d,shards:p,noIsolation:_,inert:E,setCallbacks:o,allowPinchZoom:!!A,lockRef:t,gapMode:O}),a?C.cloneElement(C.Children.only(c),to(to({},H),{ref:j})):C.createElement(x,to({},H,{className:u,ref:j}),c))});Q1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Q1.classNames={fullWidth:Ep,zeroRight:bp};var WY=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $Y(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=WY();return e&&n.setAttribute("nonce",e),n}function XY(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function YY(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var KY=function(){var n=0,e=null;return{add:function(t){n==0&&(e=$Y())&&(XY(e,t),YY(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},QY=function(){var n=KY();return function(e,t){C.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},e5=function(){var n=QY(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},ZY={left:0,top:0,right:0,gap:0},Hy=function(n){return parseInt(n||"",10)||0},JY=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[Hy(t),Hy(r),Hy(i)]},eK=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return ZY;var e=JY(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},tK=e5(),Hc="data-scroll-locked",nK=function(n,e,t,r){var i=n.left,o=n.top,a=n.right,c=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(jY,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(Hc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(bp,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Ep,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(bp," .").concat(bp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ep," .").concat(Ep,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Hc,`] {
    `).concat(VY,": ").concat(c,`px;
  }
`)},PS=function(){var n=parseInt(document.body.getAttribute(Hc)||"0",10);return isFinite(n)?n:0},rK=function(){C.useEffect(function(){return document.body.setAttribute(Hc,(PS()+1).toString()),function(){var n=PS()-1;n<=0?document.body.removeAttribute(Hc):document.body.setAttribute(Hc,n.toString())}},[])},iK=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;rK();var o=C.useMemo(function(){return eK(i)},[i]);return C.createElement(tK,{styles:nK(o,!e,i,t?"":"!important")})},mv=!1;if(typeof window<"u")try{var Qm=Object.defineProperty({},"passive",{get:function(){return mv=!0,!0}});window.addEventListener("test",Qm,Qm),window.removeEventListener("test",Qm,Qm)}catch{mv=!1}var _c=mv?{passive:!1}:!1,oK=function(n){return n.tagName==="TEXTAREA"},t5=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!oK(n)&&t[e]==="visible")},sK=function(n){return t5(n,"overflowY")},aK=function(n){return t5(n,"overflowX")},MS=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=n5(n,r);if(i){var o=r5(n,r),a=o[1],c=o[2];if(a>c)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},lK=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},cK=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},n5=function(n,e){return n==="v"?sK(e):aK(e)},r5=function(n,e){return n==="v"?lK(e):cK(e)},uK=function(n,e){return n==="h"&&e==="rtl"?-1:1},dK=function(n,e,t,r,i){var o=uK(n,window.getComputedStyle(e).direction),a=o*r,c=t.target,u=e.contains(c),d=!1,h=a>0,p=0,g=0;do{var _=r5(n,c),E=_[0],A=_[1],S=_[2],x=A-S-o*E;(E||x)&&n5(n,c)&&(p+=x,g+=E),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!u&&c!==document.body||u&&(e.contains(c)||e===c));return(h&&Math.abs(p)<1||!h&&Math.abs(g)<1)&&(d=!0),d},Zm=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},kS=function(n){return[n.deltaX,n.deltaY]},LS=function(n){return n&&"current"in n?n.current:n},fK=function(n,e){return n[0]===e[0]&&n[1]===e[1]},hK=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},mK=0,bc=[];function pK(n){var e=C.useRef([]),t=C.useRef([0,0]),r=C.useRef(),i=C.useState(mK++)[0],o=C.useState(e5)[0],a=C.useRef(n);C.useEffect(function(){a.current=n},[n]),C.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var A=Ok([n.lockRef.current],(n.shards||[]).map(LS),!0).filter(Boolean);return A.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),A.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var c=C.useCallback(function(A,S){if("touches"in A&&A.touches.length===2||A.type==="wheel"&&A.ctrlKey)return!a.current.allowPinchZoom;var x=Zm(A),O=t.current,P="deltaX"in A?A.deltaX:O[0]-x[0],D="deltaY"in A?A.deltaY:O[1]-x[1],j,H=A.target,M=Math.abs(P)>Math.abs(D)?"h":"v";if("touches"in A&&M==="h"&&H.type==="range")return!1;var R=MS(M,H);if(!R)return!0;if(R?j=M:(j=M==="v"?"h":"v",R=MS(M,H)),!R)return!1;if(!r.current&&"changedTouches"in A&&(P||D)&&(r.current=j),!j)return!0;var k=r.current||j;return dK(k,S,A,k==="h"?P:D)},[]),u=C.useCallback(function(A){var S=A;if(!(!bc.length||bc[bc.length-1]!==o)){var x="deltaY"in S?kS(S):Zm(S),O=e.current.filter(function(j){return j.name===S.type&&(j.target===S.target||S.target===j.shadowParent)&&fK(j.delta,x)})[0];if(O&&O.should){S.cancelable&&S.preventDefault();return}if(!O){var P=(a.current.shards||[]).map(LS).filter(Boolean).filter(function(j){return j.contains(S.target)}),D=P.length>0?c(S,P[0]):!a.current.noIsolation;D&&S.cancelable&&S.preventDefault()}}},[]),d=C.useCallback(function(A,S,x,O){var P={name:A,delta:S,target:x,should:O,shadowParent:gK(x)};e.current.push(P),setTimeout(function(){e.current=e.current.filter(function(D){return D!==P})},1)},[]),h=C.useCallback(function(A){t.current=Zm(A),r.current=void 0},[]),p=C.useCallback(function(A){d(A.type,kS(A),A.target,c(A,n.lockRef.current))},[]),g=C.useCallback(function(A){d(A.type,Zm(A),A.target,c(A,n.lockRef.current))},[]);C.useEffect(function(){return bc.push(o),n.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:g}),document.addEventListener("wheel",u,_c),document.addEventListener("touchmove",u,_c),document.addEventListener("touchstart",h,_c),function(){bc=bc.filter(function(A){return A!==o}),document.removeEventListener("wheel",u,_c),document.removeEventListener("touchmove",u,_c),document.removeEventListener("touchstart",h,_c)}},[]);var _=n.removeScrollBar,E=n.inert;return C.createElement(C.Fragment,null,E?C.createElement(o,{styles:hK(i)}):null,_?C.createElement(iK,{gapMode:n.gapMode}):null)}function gK(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const yK=qY(JR,pK);var i5=C.forwardRef(function(n,e){return C.createElement(Q1,to({},n,{ref:e,sideCar:yK}))});i5.classNames=Q1.classNames;var vK=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Ec=new WeakMap,Jm=new WeakMap,ep={},Gy=0,o5=function(n){return n&&(n.host||o5(n.parentNode))},wK=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=o5(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},_K=function(n,e,t,r){var i=wK(e,Array.isArray(n)?n:[n]);ep[t]||(ep[t]=new WeakMap);var o=ep[t],a=[],c=new Set,u=new Set(i),d=function(p){!p||c.has(p)||(c.add(p),d(p.parentNode))};i.forEach(d);var h=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(g){if(c.has(g))h(g);else try{var _=g.getAttribute(r),E=_!==null&&_!=="false",A=(Ec.get(g)||0)+1,S=(o.get(g)||0)+1;Ec.set(g,A),o.set(g,S),a.push(g),A===1&&E&&Jm.set(g,!0),S===1&&g.setAttribute(t,"true"),E||g.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",g,x)}})};return h(e),c.clear(),Gy++,function(){a.forEach(function(p){var g=Ec.get(p)-1,_=o.get(p)-1;Ec.set(p,g),o.set(p,_),g||(Jm.has(p)||p.removeAttribute(r),Jm.delete(p)),_||p.removeAttribute(t)}),Gy--,Gy||(Ec=new WeakMap,Ec=new WeakMap,Jm=new WeakMap,ep={})}},bK=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=vK(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),_K(r,i,t,"aria-hidden")):function(){return null}},Z1="Dialog",[s5,vQ]=rh(Z1),[EK,Li]=s5(Z1),a5=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:o,modal:a=!0}=n,c=C.useRef(null),u=C.useRef(null),[d,h]=X1({prop:r,defaultProp:i??!1,onChange:o,caller:Z1});return y.jsx(EK,{scope:e,triggerRef:c,contentRef:u,contentId:df(),titleId:df(),descriptionId:df(),open:d,onOpenChange:h,onOpenToggle:C.useCallback(()=>h(p=>!p),[h]),modal:a,children:t})};a5.displayName=Z1;var l5="DialogTrigger",AK=C.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Li(l5,t),o=Kr(e,i.triggerRef);return y.jsx(wn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":v_(i.open),...r,ref:o,onClick:Pn(n.onClick,i.onOpenToggle)})});AK.displayName=l5;var g_="DialogPortal",[TK,c5]=s5(g_,{forceMount:void 0}),u5=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,o=Li(g_,e);return y.jsx(TK,{scope:e,forceMount:t,children:C.Children.map(r,a=>y.jsx(Cu,{present:t||o.open,children:y.jsx(QR,{asChild:!0,container:i,children:a})}))})};u5.displayName=g_;var a1="DialogOverlay",d5=C.forwardRef((n,e)=>{const t=c5(a1,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,o=Li(a1,n.__scopeDialog);return o.modal?y.jsx(Cu,{present:r||o.open,children:y.jsx(xK,{...i,ref:e})}):null});d5.displayName=a1;var SK=Tf("DialogOverlay.RemoveScroll"),xK=C.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Li(a1,t);return y.jsx(i5,{as:SK,allowPinchZoom:!0,shards:[i.contentRef],children:y.jsx(wn.div,{"data-state":v_(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),bl="DialogContent",f5=C.forwardRef((n,e)=>{const t=c5(bl,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,o=Li(bl,n.__scopeDialog);return y.jsx(Cu,{present:r||o.open,children:o.modal?y.jsx(CK,{...i,ref:e}):y.jsx(IK,{...i,ref:e})})});f5.displayName=bl;var CK=C.forwardRef((n,e)=>{const t=Li(bl,n.__scopeDialog),r=C.useRef(null),i=Kr(e,t.contentRef,r);return C.useEffect(()=>{const o=r.current;if(o)return bK(o)},[]),y.jsx(h5,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pn(n.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=t.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Pn(n.onPointerDownOutside,o=>{const a=o.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0;(a.button===2||c)&&o.preventDefault()}),onFocusOutside:Pn(n.onFocusOutside,o=>o.preventDefault())})}),IK=C.forwardRef((n,e)=>{const t=Li(bl,n.__scopeDialog),r=C.useRef(!1),i=C.useRef(!1);return y.jsx(h5,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,c;(a=n.onCloseAutoFocus)==null||a.call(n,o),o.defaultPrevented||(r.current||(c=t.triggerRef.current)==null||c.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var u,d;(u=n.onInteractOutside)==null||u.call(n,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=o.target;((d=t.triggerRef.current)==null?void 0:d.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),h5=C.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...a}=n,c=Li(bl,t),u=C.useRef(null),d=Kr(e,u);return LY(),y.jsxs(y.Fragment,{children:[y.jsx(YR,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:y.jsx($R,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":v_(c.open),...a,ref:d,onDismiss:()=>c.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(RK,{titleId:c.titleId}),y.jsx(OK,{contentRef:u,descriptionId:c.descriptionId})]})]})}),y_="DialogTitle",m5=C.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Li(y_,t);return y.jsx(wn.h2,{id:i.titleId,...r,ref:e})});m5.displayName=y_;var p5="DialogDescription",g5=C.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Li(p5,t);return y.jsx(wn.p,{id:i.descriptionId,...r,ref:e})});g5.displayName=p5;var y5="DialogClose",v5=C.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Li(y5,t);return y.jsx(wn.button,{type:"button",...r,ref:e,onClick:Pn(n.onClick,()=>i.onOpenChange(!1))})});v5.displayName=y5;function v_(n){return n?"open":"closed"}var w5="DialogTitleWarning",[wQ,_5]=LX(w5,{contentName:bl,titleName:y_,docsSlug:"dialog"}),RK=({titleId:n})=>{const e=_5(w5),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return C.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},NK="DialogDescriptionWarning",OK=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${_5(NK).contentName}}.`;return C.useEffect(()=>{var o;const i=(o=n.current)==null?void 0:o.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},DK=a5,PK=u5,b5=d5,E5=f5,A5=m5,T5=g5,MK=v5;const S5=DK,kK=PK,x5=C.forwardRef(({className:n,...e},t)=>y.jsx(b5,{ref:t,className:Wt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));x5.displayName=b5.displayName;const w_=C.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(kK,{children:[y.jsx(x5,{}),y.jsxs(E5,{ref:r,className:Wt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,y.jsxs(MK,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[y.jsx(uI,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));w_.displayName=E5.displayName;const __=({className:n,...e})=>y.jsx("div",{className:Wt("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});__.displayName="DialogHeader";const C5=({className:n,...e})=>y.jsx("div",{className:Wt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});C5.displayName="DialogFooter";const b_=C.forwardRef(({className:n,...e},t)=>y.jsx(A5,{ref:t,className:Wt("text-lg font-semibold leading-none tracking-tight",n),...e}));b_.displayName=A5.displayName;const E_=C.forwardRef(({className:n,...e},t)=>y.jsx(T5,{ref:t,className:Wt("text-sm text-muted-foreground",n),...e}));E_.displayName=T5.displayName;const LK=Iw("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function jS({className:n,variant:e,...t}){return y.jsx("div",{"data-slot":"alert",role:"alert",className:Wt(LK({variant:e}),n),...t})}function VS({className:n,...e}){return y.jsx("div",{"data-slot":"alert-description",className:Wt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",n),...e})}var jK="Label",I5=C.forwardRef((n,e)=>y.jsx(wn.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));I5.displayName=jK;var VK=I5;function pn({className:n,...e}){return y.jsx(VK,{"data-slot":"label",className:Wt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}function BK({restaurant:n}){console.log("WaiterManager rendered with restaurant:",n);const[e,t]=C.useState([]),[r,i]=C.useState(!1),[o,a]=C.useState({name:"",pin:""}),[c,u]=C.useState(""),[d,h]=C.useState([]),[p,g]=C.useState(!0),[_,E]=C.useState(!0);if(!n||!n.id)return y.jsxs("div",{className:"p-6 text-center",children:[y.jsx($o,{className:"w-12 h-12 mx-auto text-yellow-500 mb-4"}),y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Restaurant Information Required"}),y.jsx("p",{className:"text-muted-foreground mb-4",children:"Unable to load waiter information. Please ensure you're logged in and have selected a restaurant."}),y.jsxs(_e,{variant:"outline",onClick:()=>window.location.reload(),children:[y.jsx(F1,{className:"w-4 h-4 mr-2"}),"Refresh Page"]})]});C.useEffect(()=>{if(console.log("useEffect triggered with restaurant:",n),!(n!=null&&n.id)){console.error("No restaurant ID available"),u("No restaurant selected"),g(!1);return}g(!0),u(""),console.log("Subscribing to waiters and tabs for restaurant:",n.id);let H=()=>{},M=()=>{};return(async()=>{try{H=jB(n.id,k=>{console.log("Received waiters data:",k),t(k),E(!1),g(!1)}),M=RB(n.id,k=>{console.log("Received tabs data:",k),h(k)})}catch(k){console.error("Error setting up subscriptions:",k),u("Failed to load data. Please refresh the page."),g(!1)}})(),()=>{console.log("Cleaning up subscriptions");try{typeof H=="function"&&H(),typeof M=="function"&&M()}catch(k){console.error("Error cleaning up subscriptions:",k)}}},[n==null?void 0:n.id]);const A=H=>{const M=d.filter(F=>F.waiterId===H),R=M.filter(F=>F.status==="active"),k=M.filter(F=>F.status==="completed"),U=M.reduce((F,Ce)=>F+(Ce.total||0),0),z=k.reduce((F,Ce)=>F+(Ce.total||0),0),q=R.reduce((F,Ce)=>F+(Ce.total||0),0);return{totalTabs:M.length,activeTabs:R.length,completedTabs:k.length,totalSales:U,totalPaid:z,totalOutstanding:q}},S=async()=>{if(!o.name.trim()||!/^\d{4}$/.test(o.pin)){u("Please enter a name and a 4-digit PIN.");return}u("");try{await LB({...o,restaurantId:n.id}),a({name:"",pin:""}),i(!1)}catch{u("Failed to add waiter. Please try again.")}},x=async H=>{if(window.confirm("Are you sure you want to delete this waiter? This action cannot be undone."))try{await VB(H)}catch{u("Failed to delete waiter. Please try again.")}},O=e.length,P=d.filter(H=>H.status==="active").length;d.filter(H=>H.status==="completed").length;const D=d.reduce((H,M)=>H+(M.total||0),0);d.filter(H=>H.status==="completed").reduce((H,M)=>H+(M.total||0),0);const j=d.filter(H=>H.status!=="completed").reduce((H,M)=>H+(M.total||0),0);return console.log("WaiterManager state:",{loading:p,initialLoad:_,waitersCount:e.length,tabsCount:d.length}),p?y.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[y.jsx(Xs,{className:"w-12 h-12 animate-spin text-primary"}),y.jsx("p",{className:"text-muted-foreground",children:"Loading waiter data..."})]}):y.jsxs("div",{className:"space-y-6",children:[c&&y.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx($o,{className:"h-5 w-5 text-red-500"})}),y.jsx("div",{className:"ml-3",children:y.jsx("p",{className:"text-sm text-red-700",children:c})})]})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[y.jsx(ct,{children:y.jsx(Ct,{className:"p-4",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx(zc,{className:"w-6 h-6 text-blue-600 mr-3"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-2xl font-bold",children:O}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Waiters"})]})]})})}),y.jsx(ct,{children:y.jsx(Ct,{className:"p-4",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx(Yp,{className:"w-6 h-6 text-amber-600 mr-3"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-2xl font-bold",children:P}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Tabs"})]})]})})}),y.jsx(ct,{children:y.jsx(Ct,{className:"p-4",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx(aI,{className:"w-6 h-6 text-green-600 mr-3"}),y.jsxs("div",{children:[y.jsxs("p",{className:"text-2xl font-bold",children:["Ksh ",D.toFixed(2)]}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Sales"})]})]})})}),y.jsx(ct,{children:y.jsx(Ct,{className:"p-4",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx(Tw,{className:"w-6 h-6 text-red-600 mr-3"}),y.jsxs("div",{children:[y.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["Ksh ",j.toFixed(2)]}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Outstanding"})]})]})})})]}),y.jsxs(ct,{children:[y.jsx(Rn,{children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx(Nn,{children:"Waiters"}),y.jsx(tr,{children:"Manage your waitstaff and view their performance"})]}),y.jsxs(_e,{onClick:()=>i(!r),children:[y.jsx(Uc,{className:"w-4 h-4 mr-2"}),r?"Cancel":"Add Waiter"]})]})}),y.jsxs(Ct,{className:"space-y-6",children:[r&&y.jsxs(ct,{className:"mb-6",children:[y.jsxs(Rn,{children:[y.jsx(Nn,{children:"Add New Waiter"}),y.jsx(tr,{children:"Create a new waiter account with a unique PIN"})]}),y.jsxs(Ct,{className:"space-y-4",children:[c&&y.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:c}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx(pn,{htmlFor:"waiterName",children:"Waiter Name"}),y.jsx(ln,{id:"waiterName",value:o.name,onChange:H=>a({...o,name:H.target.value}),placeholder:"e.g., John Doe",className:"w-full"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(pn,{htmlFor:"waiterPin",children:"4-Digit PIN"}),y.jsx(ln,{id:"waiterPin",type:"password",inputMode:"numeric",maxLength:4,value:o.pin,onChange:H=>a({...o,pin:H.target.value.replace(/\D/g,"")}),placeholder:"e.g., 1234",className:"w-full"})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsx(_e,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),y.jsxs(_e,{onClick:S,disabled:!o.name||o.pin.length!==4,children:[y.jsx(Uc,{className:"w-4 h-4 mr-2"}),"Add Waiter"]})]})]})]}),e.length===0?y.jsxs("div",{className:"text-center py-8 border-2 border-dashed rounded-lg",children:[y.jsx(zc,{className:"w-12 h-12 mx-auto text-gray-400 mb-2"}),y.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No waiters yet"}),y.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Get started by adding your first waiter"}),y.jsxs(_e,{onClick:()=>i(!0),children:[y.jsx(Uc,{className:"w-4 h-4 mr-2"}),"Add Waiter"]})]}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(H=>{const M=A(H.id);return y.jsx(ct,{className:"hover:shadow-md transition-shadow",children:y.jsxs(Ct,{className:"p-0",children:[y.jsx("div",{className:"p-4 border-b",children:y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:y.jsx(Kp,{className:"w-5 h-5 text-blue-600"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold",children:H.name}),y.jsxs("p",{className:"text-sm text-muted-foreground",children:["PIN: ",H.pin]})]})]}),y.jsx(_e,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-destructive",onClick:()=>x(H.id),children:y.jsx(xw,{className:"w-4 h-4"})})]})}),y.jsxs("div",{className:"p-4",children:[y.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium",children:"Tabs"}),y.jsx("p",{className:"text-lg font-bold",children:M.totalTabs})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium",children:"Active"}),y.jsx("p",{className:"text-lg font-bold text-amber-600",children:M.activeTabs})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium",children:"Completed"}),y.jsx("p",{className:"text-lg font-bold text-green-600",children:M.completedTabs})]})]}),y.jsxs("div",{className:"mt-4 space-y-2",children:[y.jsxs("div",{className:"flex justify-between text-sm",children:[y.jsx("span",{className:"text-muted-foreground",children:"Total Sales"}),y.jsxs("span",{className:"font-medium",children:["Ksh ",M.totalSales.toFixed(2)]})]}),y.jsxs("div",{className:"flex justify-between text-sm",children:[y.jsx("span",{className:"text-muted-foreground",children:"Paid"}),y.jsxs("span",{className:"text-green-600 font-medium",children:["Ksh ",M.totalPaid.toFixed(2)]})]}),y.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[y.jsx("span",{className:"text-muted-foreground",children:"Outstanding"}),y.jsxs("span",{className:"text-red-600",children:["Ksh ",M.totalOutstanding.toFixed(2)]})]})]})]})]})},H.id)})})]})]})]})}const R5=Object.freeze([{value:"food",label:"Food"},{value:"drinks",label:"Drinks"},{value:"appetizers",label:"Appetizers"},{value:"desserts",label:"Desserts"}]);console.log("Available categories:",R5);function FK({restaurant:n}){console.log("MenuManager rendering with restaurant:",n);const[e,t]=C.useState([]),[r,i]=C.useState(!1),[o,a]=C.useState(null),[c,u]=C.useState(!0),[d,h]=C.useState(null),{logInWithGoogle:p}=ss(),[g,_]=C.useState({name:"",price:"",category:"food",description:"",available:!0,imageUrl:""});C.useEffect(()=>{if(console.log("Restaurant ID changed:",n==null?void 0:n.id),!(n!=null&&n.id)){console.log("No restaurant ID, skipping subscription"),t([]),u(!1),h("No restaurant selected");return}u(!0),h(null),console.log("Setting up menu subscription for restaurant:",n.id);const j=(async()=>{try{console.log("Trying with composite index...");const H=Gn(Pt(We,"menuItems"),Mt("restaurantId","==",n.id),ca("category","asc"),ca("name","asc"));return hi(H,M=>{const R=M.docs.map(k=>({id:k.id,...k.data()}));console.log("Received menu items (with index):",R),t(R),u(!1)},M=>{if(console.error("Error with composite index query:",M),M.code==="failed-precondition"){console.log("Composite index missing, trying without ordering...");const R=Gn(Pt(We,"menuItems"),Mt("restaurantId","==",n.id));return hi(R,k=>{const U=k.docs.map(z=>({id:z.id,...z.data()}));console.log("Received menu items (simple query):",U),t(U),u(!1)},k=>{console.error("Error with simple query:",k),h("Failed to load menu items"),u(!1)})}})}catch(H){return console.error("Error setting up menu subscription:",H),()=>{}}})();return()=>{console.log("Cleaning up menu subscription"),j&&typeof j.then=="function"?j.then(H=>H&&H()):typeof j=="function"&&j()}},[n==null?void 0:n.id]);const E=async()=>{if(console.log("handleAddItem called with newItem:",g),!g.name.trim()||!g.price){console.log("Validation failed - missing name or price");return}try{console.log("Attempting to create menu item...");const D={name:g.name.trim(),description:(g.description||"").trim(),price:parseFloat(g.price),category:g.category||"food",available:!0,restaurantId:n.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("Calling createMenuItem with data:",D);const j=await BB(D);console.log("createMenuItem result:",j),_({name:"",price:"",category:"food",description:"",available:!0,imageUrl:""}),i(!1),console.log("Form reset and hidden")}catch(D){console.error("Error in handleAddItem:",{error:D,errorMessage:D.message,errorStack:D.stack,restaurantId:n==null?void 0:n.id}),alert(`Failed to add menu item: ${D.message}`)}},A=D=>{a(D),_({name:D.name,price:D.price,category:D.category,description:D.description||"",available:D.available!==!1,imageUrl:D.imageUrl||""}),i(!0)},S=D=>{_({name:`${D.name} (Copy)`,price:D.price,category:D.category,description:D.description||"",available:!0,imageUrl:D.imageUrl||""}),i(!0),a(null),setTimeout(()=>{const j=document.querySelector('form, [role="form"]');j&&j.scrollIntoView({behavior:"smooth",block:"start"})},100)},x=async()=>{if(!o||!g.name.trim()||!g.price){console.log("Validation failed - missing name, price, or editing item");return}try{console.log("Attempting to update menu item:",o.id);const D={name:g.name.trim(),description:(g.description||"").trim(),price:parseFloat(g.price),category:g.category||"food",available:g.available,updatedAt:new Date().toISOString()};console.log("Updating menu item with data:",D),await FB(o.id,D),_({name:"",price:"",category:"food",description:"",available:!0,imageUrl:""}),a(null),i(!1),console.log("Menu item updated successfully")}catch(D){console.error("Error updating menu item:",D),alert(`Failed to update menu item: ${D.message}`)}},O=async D=>{confirm("Are you sure you want to delete this menu item?")&&await UB(D)},P=async()=>{try{const D=await p();alert(`Successfully connected to Google as ${D.user.displayName}. Ready to import from Sheets! (API call to be implemented)`)}catch(D){console.error("Google Sheets connection error:",D),alert("Failed to connect to Google. Please try again.")}};return n?c?y.jsxs("div",{className:"flex justify-center items-center p-8",children:[y.jsx(Xs,{className:"w-8 h-8 animate-spin text-primary"}),y.jsx("span",{className:"ml-2",children:"Loading menu items..."})]}):(e.reduce((D,j)=>(D[j.category]||(D[j.category]=[]),D[j.category].push(j),D),{}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h2",{className:"text-2xl font-bold",children:"Menu Management"}),y.jsxs(_e,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),className:"flex items-center gap-2",children:[y.jsx(F1,{className:"w-4 h-4"}),"Refresh"]})]}),r&&y.jsxs(ct,{className:"mb-6",children:[y.jsxs(Rn,{children:[y.jsx(Nn,{children:"Add New Menu Item"}),y.jsx(tr,{children:"Enter the details for the new menu item"})]}),y.jsxs(Ct,{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx(pn,{htmlFor:"itemName",children:"Item Name *"}),y.jsx(ln,{id:"itemName",placeholder:"e.g., Spaghetti Carbonara",value:g.name,onChange:D=>_({...g,name:D.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(pn,{htmlFor:"price",children:"Price *"}),y.jsx(ln,{id:"price",type:"number",placeholder:"e.g., 12.99",min:"0",step:"0.01",value:g.price,onChange:D=>_({...g,price:D.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(pn,{htmlFor:"category",children:"Category"}),y.jsx("select",{id:"category",value:g.category,onChange:D=>_({...g,category:D.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:R5.map(D=>y.jsx("option",{value:D.value,children:D.label},D.value))})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(pn,{htmlFor:"description",children:"Description"}),y.jsx(ln,{id:"description",placeholder:"Short description (optional)",value:g.description,onChange:D=>_({...g,description:D.target.value})})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsx(_e,{variant:"outline",onClick:()=>{i(!1),_({name:"",price:"",category:"food",description:""})},children:"Cancel"}),y.jsxs(_e,{onClick:E,disabled:!g.name.trim()||!g.price,children:[y.jsx(Uc,{className:"w-4 h-4 mr-2"})," Add Item"]})]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[y.jsx(ct,{className:"cursor-pointer hover:border-primary",onClick:()=>i(!0),children:y.jsxs(Rn,{className:"items-center text-center",children:[y.jsx(O2,{className:"w-8 h-8 text-primary mb-2"}),y.jsx(Nn,{children:"Manual Entry"}),y.jsx(tr,{className:"text-xs",children:"Add items one by one using a form."})]})}),y.jsx(ct,{className:"cursor-pointer h-full hover:border-primary",onClick:P,children:y.jsxs(Rn,{className:"items-center text-center",children:[y.jsx(dB,{className:"w-8 h-8 text-green-600 mb-2"}),y.jsx(Nn,{children:"Google Sheet"}),y.jsx(tr,{className:"text-xs",children:"Connect and import from a Google Sheet."})]})}),y.jsx(ct,{className:"cursor-not-allowed bg-muted/50",children:y.jsxs(Rn,{className:"items-center text-center",children:[y.jsx(FV,{className:"w-8 h-8 text-muted-foreground mb-2"}),y.jsx(Nn,{className:"text-muted-foreground",children:"Upload PDF (AI)"}),y.jsx(tr,{className:"text-xs",children:"Auto-extract items from a PDF menu. (Coming soon)"})]})}),y.jsx(ct,{className:"cursor-not-allowed bg-muted/50",children:y.jsxs(Rn,{className:"items-center text-center",children:[y.jsx(OV,{className:"w-8 h-8 text-muted-foreground mb-2"}),y.jsx(Nn,{className:"text-muted-foreground",children:"API Sync"}),y.jsx(tr,{className:"text-xs",children:"Connect to your POS system. (Coming soon)"})]})})]}),(r||o)&&y.jsxs(ct,{className:"mb-6",children:[y.jsxs(Rn,{children:[y.jsx(Nn,{children:o?"Edit Menu Item":"Add New Menu Item"}),y.jsx(tr,{children:o?"Update the menu item details":"Enter the details for the new menu item"})]}),y.jsxs(Ct,{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx(pn,{htmlFor:"itemName",children:"Item Name *"}),y.jsx(ln,{id:"itemName",placeholder:"e.g., Margherita Pizza",value:g.name,onChange:D=>_({...g,name:D.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(pn,{htmlFor:"price",children:"Price *"}),y.jsx(ln,{id:"price",type:"number",placeholder:"e.g., 12.99",value:g.price,onChange:D=>_({...g,price:D.target.value}),min:"0",step:"0.01"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"category",className:"block text-sm font-medium mb-1",children:"Category"}),y.jsxs("div",{className:"relative",children:[y.jsxs("select",{id:"category",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:g.category,onChange:D=>{console.log("Selected category:",D.target.value),_({...g,category:D.target.value})},children:[y.jsx("option",{value:"",children:"-- Select a category --"}),y.jsx("option",{value:"food",children:"Food"}),y.jsx("option",{value:"drinks",children:"Drinks"}),y.jsx("option",{value:"appetizers",children:"Appetizers"}),y.jsx("option",{value:"desserts",children:"Desserts"})]}),y.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:y.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),y.jsxs("div",{className:"mt-1 text-sm text-gray-500",children:["Current: ",g.category||"None selected"]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(pn,{htmlFor:"description",children:"Description"}),y.jsx(ln,{id:"description",placeholder:"Short description (optional)",value:g.description,onChange:D=>_({...g,description:D.target.value})})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[y.jsx(_e,{variant:"outline",onClick:()=>{i(!1),a(null),_({name:"",price:"",category:"food",description:"",available:!0,imageUrl:""})},children:"Cancel"}),y.jsx(_e,{onClick:o?x:E,disabled:!g.name.trim()||!g.price,className:o?"bg-blue-600 hover:bg-blue-700":"",children:o?y.jsxs(y.Fragment,{children:[y.jsx(RT,{className:"w-4 h-4 mr-2"}),"Update Item"]}):y.jsxs(y.Fragment,{children:[y.jsx(Uc,{className:"w-4 h-4 mr-2"}),"Add Item"]})})]})]})]}),y.jsxs("div",{className:"space-y-4 pt-4",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h3",{className:"text-lg font-semibold",children:"Current Menu"}),y.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.length," ",e.length===1?"item":"items"," in menu"]})]}),d&&y.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-;oiuy6ghhgtdfhregeteueiueueueyeyeyeyeueueueueieieeieureytythr3393i5uyuhyy86869797iu9uuiu979797iu679u6809u75790iii----====////////////''''';=-04 py-3 rounded relative",role:"alert",children:y.jsx("span",{className:"block sm:inline",children:d})}),e.length===0?y.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center",children:[y.jsx(O2,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),y.jsx("h3",{className:"text-lg font-medium",children:"No menu items yet"}),y.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by adding your first menu item"}),y.jsxs(_e,{onClick:()=>i(!0),children:[y.jsx(Uc,{className:"w-4 h-4 mr-2"})," Add Menu Item"]})]}):y.jsx("div",{className:"rounded-md border",children:y.jsxs("table",{className:"w-full",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"border-b bg-muted/50",children:[y.jsx("th",{className:"text-left p-3 font-medium",children:"Name"}),y.jsx("th",{className:"text-left p-3 font-medium",children:"Description"}),y.jsx("th",{className:"text-right p-3 font-medium",children:"Price"}),y.jsx("th",{className:"text-center p-3 font-medium",children:"Category"}),y.jsx("th",{className:"text-center p-3 font-medium",children:"Status"}),y.jsx("th",{className:"text-right p-3 font-medium",children:"Actions"})]})}),y.jsx("tbody",{children:e.map(D=>y.jsxs("tr",{className:"border-b hover:bg-muted/20 transition-colors",children:[y.jsx("td",{className:"p-3 font-medium",children:y.jsxs("div",{className:"flex items-center",children:[D.imageUrl&&y.jsx("img",{src:D.imageUrl,alt:D.name,className:"w-10 h-10 rounded-md object-cover mr-3"}),y.jsx("span",{children:D.name})]})}),y.jsx("td",{className:"p-3 text-sm text-muted-foreground max-w-xs",children:y.jsx("p",{className:"line-clamp-2",children:D.description||""})}),y.jsxs("td",{className:"p-3 text-right font-medium",children:["$",parseFloat(D.price).toFixed(2)]}),y.jsx("td",{className:"p-3 text-center",children:y.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-muted text-muted-foreground capitalize",children:D.category})}),y.jsx("td",{className:"p-3 text-center",children:y.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D.available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:D.available?"Available":"Unavailable"})}),y.jsx("td",{className:"p-3 text-right",children:y.jsxs("div",{className:"flex justify-end space-x-1",children:[y.jsx(_e,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>A(D),title:"Edit item",children:y.jsx(RT,{className:"h-4 w-4"})}),y.jsx(_e,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-800",onClick:()=>S(D),title:"Duplicate item",children:y.jsx(sI,{className:"h-4 w-4"})}),y.jsx(_e,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive hover:text-destructive",onClick:()=>O(D.id),children:y.jsx(xw,{className:"h-4 w-4"})})]})})]},D.id))})]})})]})]})):y.jsxs("div",{className:"flex justify-center items-center p-8",children:[y.jsx(Xs,{className:"w-8 h-8 animate-spin text-primary"}),y.jsx("span",{className:"ml-2",children:"Loading restaurant data..."})]})}var Ac={},qy={exports:{}},Wy,BS;function UK(){if(BS)return Wy;BS=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Wy=n,Wy}var $y,FS;function zK(){if(FS)return $y;FS=1;var n=UK();function e(){}function t(){}return t.resetWarningCache=e,$y=function(){function r(a,c,u,d,h,p){if(p!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},$y}var US;function N5(){return US||(US=1,qy.exports=zK()()),qy.exports}var Xy,zS;function O5(){return zS||(zS=1,Xy={L:1,M:0,Q:3,H:2}),Xy}var Yy,HS;function D5(){return HS||(HS=1,Yy={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),Yy}var Ky,GS;function HK(){if(GS)return Ky;GS=1;var n=D5();function e(t){this.mode=n.MODE_8BIT_BYTE,this.data=t}return e.prototype={getLength:function(t){return this.data.length},write:function(t){for(var r=0;r<this.data.length;r++)t.put(this.data.charCodeAt(r),8)}},Ky=e,Ky}var Qy,qS;function GK(){if(qS)return Qy;qS=1;var n=O5();function e(t,r){this.totalCount=t,this.dataCount=r}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,r){var i=e.getRsBlockTable(t,r);if(i==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+r);for(var o=i.length/3,a=new Array,c=0;c<o;c++)for(var u=i[c*3+0],d=i[c*3+1],h=i[c*3+2],p=0;p<u;p++)a.push(new e(d,h));return a},e.getRsBlockTable=function(t,r){switch(r){case n.L:return e.RS_BLOCK_TABLE[(t-1)*4+0];case n.M:return e.RS_BLOCK_TABLE[(t-1)*4+1];case n.Q:return e.RS_BLOCK_TABLE[(t-1)*4+2];case n.H:return e.RS_BLOCK_TABLE[(t-1)*4+3];default:return}},Qy=e,Qy}var Zy,WS;function qK(){if(WS)return Zy;WS=1;function n(){this.buffer=new Array,this.length=0}return n.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},Zy=n,Zy}var Jy,$S;function P5(){if($S)return Jy;$S=1;for(var n={glog:function(t){if(t<1)throw new Error("glog("+t+")");return n.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return n.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)n.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)n.EXP_TABLE[e]=n.EXP_TABLE[e-4]^n.EXP_TABLE[e-5]^n.EXP_TABLE[e-6]^n.EXP_TABLE[e-8];for(var e=0;e<255;e++)n.LOG_TABLE[n.EXP_TABLE[e]]=e;return Jy=n,Jy}var e2,XS;function M5(){if(XS)return e2;XS=1;var n=P5();function e(t,r){if(t.length==null)throw new Error(t.length+"/"+r);for(var i=0;i<t.length&&t[i]==0;)i++;this.num=new Array(t.length-i+r);for(var o=0;o<t.length-i;o++)this.num[o]=t[o+i]}return e.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var r=new Array(this.getLength()+t.getLength()-1),i=0;i<this.getLength();i++)for(var o=0;o<t.getLength();o++)r[i+o]^=n.gexp(n.glog(this.get(i))+n.glog(t.get(o)));return new e(r,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var r=n.glog(this.get(0))-n.glog(t.get(0)),i=new Array(this.getLength()),o=0;o<this.getLength();o++)i[o]=this.get(o);for(var o=0;o<t.getLength();o++)i[o]^=n.gexp(n.glog(t.get(o))+r);return new e(i,0).mod(t)}},e2=e,e2}var t2,YS;function WK(){if(YS)return t2;YS=1;var n=D5(),e=M5(),t=P5(),r={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},i={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(o){for(var a=o<<10;i.getBCHDigit(a)-i.getBCHDigit(i.G15)>=0;)a^=i.G15<<i.getBCHDigit(a)-i.getBCHDigit(i.G15);return(o<<10|a)^i.G15_MASK},getBCHTypeNumber:function(o){for(var a=o<<12;i.getBCHDigit(a)-i.getBCHDigit(i.G18)>=0;)a^=i.G18<<i.getBCHDigit(a)-i.getBCHDigit(i.G18);return o<<12|a},getBCHDigit:function(o){for(var a=0;o!=0;)a++,o>>>=1;return a},getPatternPosition:function(o){return i.PATTERN_POSITION_TABLE[o-1]},getMask:function(o,a,c){switch(o){case r.PATTERN000:return(a+c)%2==0;case r.PATTERN001:return a%2==0;case r.PATTERN010:return c%3==0;case r.PATTERN011:return(a+c)%3==0;case r.PATTERN100:return(Math.floor(a/2)+Math.floor(c/3))%2==0;case r.PATTERN101:return a*c%2+a*c%3==0;case r.PATTERN110:return(a*c%2+a*c%3)%2==0;case r.PATTERN111:return(a*c%3+(a+c)%2)%2==0;default:throw new Error("bad maskPattern:"+o)}},getErrorCorrectPolynomial:function(o){for(var a=new e([1],0),c=0;c<o;c++)a=a.multiply(new e([1,t.gexp(c)],0));return a},getLengthInBits:function(o,a){if(1<=a&&a<10)switch(o){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:return 8;case n.MODE_KANJI:return 8;default:throw new Error("mode:"+o)}else if(a<27)switch(o){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+o)}else if(a<41)switch(o){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+o)}else throw new Error("type:"+a)},getLostPoint:function(o){for(var a=o.getModuleCount(),c=0,u=0;u<a;u++)for(var d=0;d<a;d++){for(var h=0,p=o.isDark(u,d),g=-1;g<=1;g++)if(!(u+g<0||a<=u+g))for(var _=-1;_<=1;_++)d+_<0||a<=d+_||g==0&&_==0||p==o.isDark(u+g,d+_)&&h++;h>5&&(c+=3+h-5)}for(var u=0;u<a-1;u++)for(var d=0;d<a-1;d++){var E=0;o.isDark(u,d)&&E++,o.isDark(u+1,d)&&E++,o.isDark(u,d+1)&&E++,o.isDark(u+1,d+1)&&E++,(E==0||E==4)&&(c+=3)}for(var u=0;u<a;u++)for(var d=0;d<a-6;d++)o.isDark(u,d)&&!o.isDark(u,d+1)&&o.isDark(u,d+2)&&o.isDark(u,d+3)&&o.isDark(u,d+4)&&!o.isDark(u,d+5)&&o.isDark(u,d+6)&&(c+=40);for(var d=0;d<a;d++)for(var u=0;u<a-6;u++)o.isDark(u,d)&&!o.isDark(u+1,d)&&o.isDark(u+2,d)&&o.isDark(u+3,d)&&o.isDark(u+4,d)&&!o.isDark(u+5,d)&&o.isDark(u+6,d)&&(c+=40);for(var A=0,d=0;d<a;d++)for(var u=0;u<a;u++)o.isDark(u,d)&&A++;var S=Math.abs(100*A/a/a-50)/5;return c+=S*10,c}};return t2=i,t2}var n2,KS;function $K(){if(KS)return n2;KS=1;var n=HK(),e=GK(),t=qK(),r=WK(),i=M5();function o(c,u){this.typeNumber=c,this.errorCorrectLevel=u,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var a=o.prototype;return a.addData=function(c){var u=new n(c);this.dataList.push(u),this.dataCache=null},a.isDark=function(c,u){if(c<0||this.moduleCount<=c||u<0||this.moduleCount<=u)throw new Error(c+","+u);return this.modules[c][u]},a.getModuleCount=function(){return this.moduleCount},a.make=function(){if(this.typeNumber<1){var c=1;for(c=1;c<40;c++){for(var u=e.getRSBlocks(c,this.errorCorrectLevel),d=new t,h=0,p=0;p<u.length;p++)h+=u[p].dataCount;for(var p=0;p<this.dataList.length;p++){var g=this.dataList[p];d.put(g.mode,4),d.put(g.getLength(),r.getLengthInBits(g.mode,c)),g.write(d)}if(d.getLengthInBits()<=h*8)break}this.typeNumber=c}this.makeImpl(!1,this.getBestMaskPattern())},a.makeImpl=function(c,u){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=new Array(this.moduleCount);for(var h=0;h<this.moduleCount;h++)this.modules[d][h]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(c,u),this.typeNumber>=7&&this.setupTypeNumber(c),this.dataCache==null&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,u)},a.setupPositionProbePattern=function(c,u){for(var d=-1;d<=7;d++)if(!(c+d<=-1||this.moduleCount<=c+d))for(var h=-1;h<=7;h++)u+h<=-1||this.moduleCount<=u+h||(0<=d&&d<=6&&(h==0||h==6)||0<=h&&h<=6&&(d==0||d==6)||2<=d&&d<=4&&2<=h&&h<=4?this.modules[c+d][u+h]=!0:this.modules[c+d][u+h]=!1)},a.getBestMaskPattern=function(){for(var c=0,u=0,d=0;d<8;d++){this.makeImpl(!0,d);var h=r.getLostPoint(this);(d==0||c>h)&&(c=h,u=d)}return u},a.createMovieClip=function(c,u,d){var h=c.createEmptyMovieClip(u,d),p=1;this.make();for(var g=0;g<this.modules.length;g++)for(var _=g*p,E=0;E<this.modules[g].length;E++){var A=E*p,S=this.modules[g][E];S&&(h.beginFill(0,100),h.moveTo(A,_),h.lineTo(A+p,_),h.lineTo(A+p,_+p),h.lineTo(A,_+p),h.endFill())}return h},a.setupTimingPattern=function(){for(var c=8;c<this.moduleCount-8;c++)this.modules[c][6]==null&&(this.modules[c][6]=c%2==0);for(var u=8;u<this.moduleCount-8;u++)this.modules[6][u]==null&&(this.modules[6][u]=u%2==0)},a.setupPositionAdjustPattern=function(){for(var c=r.getPatternPosition(this.typeNumber),u=0;u<c.length;u++)for(var d=0;d<c.length;d++){var h=c[u],p=c[d];if(this.modules[h][p]==null)for(var g=-2;g<=2;g++)for(var _=-2;_<=2;_++)g==-2||g==2||_==-2||_==2||g==0&&_==0?this.modules[h+g][p+_]=!0:this.modules[h+g][p+_]=!1}},a.setupTypeNumber=function(c){for(var u=r.getBCHTypeNumber(this.typeNumber),d=0;d<18;d++){var h=!c&&(u>>d&1)==1;this.modules[Math.floor(d/3)][d%3+this.moduleCount-8-3]=h}for(var d=0;d<18;d++){var h=!c&&(u>>d&1)==1;this.modules[d%3+this.moduleCount-8-3][Math.floor(d/3)]=h}},a.setupTypeInfo=function(c,u){for(var d=this.errorCorrectLevel<<3|u,h=r.getBCHTypeInfo(d),p=0;p<15;p++){var g=!c&&(h>>p&1)==1;p<6?this.modules[p][8]=g:p<8?this.modules[p+1][8]=g:this.modules[this.moduleCount-15+p][8]=g}for(var p=0;p<15;p++){var g=!c&&(h>>p&1)==1;p<8?this.modules[8][this.moduleCount-p-1]=g:p<9?this.modules[8][15-p-1+1]=g:this.modules[8][15-p-1]=g}this.modules[this.moduleCount-8][8]=!c},a.mapData=function(c,u){for(var d=-1,h=this.moduleCount-1,p=7,g=0,_=this.moduleCount-1;_>0;_-=2)for(_==6&&_--;;){for(var E=0;E<2;E++)if(this.modules[h][_-E]==null){var A=!1;g<c.length&&(A=(c[g]>>>p&1)==1);var S=r.getMask(u,h,_-E);S&&(A=!A),this.modules[h][_-E]=A,p--,p==-1&&(g++,p=7)}if(h+=d,h<0||this.moduleCount<=h){h-=d,d=-d;break}}},o.PAD0=236,o.PAD1=17,o.createData=function(c,u,d){for(var h=e.getRSBlocks(c,u),p=new t,g=0;g<d.length;g++){var _=d[g];p.put(_.mode,4),p.put(_.getLength(),r.getLengthInBits(_.mode,c)),_.write(p)}for(var E=0,g=0;g<h.length;g++)E+=h[g].dataCount;if(p.getLengthInBits()>E*8)throw new Error("code length overflow. ("+p.getLengthInBits()+">"+E*8+")");for(p.getLengthInBits()+4<=E*8&&p.put(0,4);p.getLengthInBits()%8!=0;)p.putBit(!1);for(;!(p.getLengthInBits()>=E*8||(p.put(o.PAD0,8),p.getLengthInBits()>=E*8));)p.put(o.PAD1,8);return o.createBytes(p,h)},o.createBytes=function(c,u){for(var d=0,h=0,p=0,g=new Array(u.length),_=new Array(u.length),E=0;E<u.length;E++){var A=u[E].dataCount,S=u[E].totalCount-A;h=Math.max(h,A),p=Math.max(p,S),g[E]=new Array(A);for(var x=0;x<g[E].length;x++)g[E][x]=255&c.buffer[x+d];d+=A;var O=r.getErrorCorrectPolynomial(S),P=new i(g[E],O.getLength()-1),D=P.mod(O);_[E]=new Array(O.getLength()-1);for(var x=0;x<_[E].length;x++){var j=x+D.getLength()-_[E].length;_[E][x]=j>=0?D.get(j):0}}for(var H=0,x=0;x<u.length;x++)H+=u[x].totalCount;for(var M=new Array(H),R=0,x=0;x<h;x++)for(var E=0;E<u.length;E++)x<g[E].length&&(M[R++]=g[E][x]);for(var x=0;x<p;x++)for(var E=0;E<u.length;E++)x<_[E].length&&(M[R++]=_[E][x]);return M},n2=o,n2}var tp={},QS;function XK(){if(QS)return tp;QS=1,Object.defineProperty(tp,"__esModule",{value:!0});var n=Object.assign||function(d){for(var h=1;h<arguments.length;h++){var p=arguments[h];for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(d[g]=p[g])}return d},e=N5(),t=o(e),r=Df(),i=o(r);function o(d){return d&&d.__esModule?d:{default:d}}function a(d,h){var p={};for(var g in d)h.indexOf(g)>=0||Object.prototype.hasOwnProperty.call(d,g)&&(p[g]=d[g]);return p}var c={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},u=(0,r.forwardRef)(function(d,h){var p=d.bgColor,g=d.bgD,_=d.fgD,E=d.fgColor,A=d.size,S=d.title,x=d.viewBoxSize,O=d.xmlns,P=O===void 0?"http://www.w3.org/2000/svg":O,D=a(d,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return i.default.createElement("svg",n({},D,{height:A,ref:h,viewBox:"0 0 "+x+" "+x,width:A,xmlns:P}),S?i.default.createElement("title",null,S):null,i.default.createElement("path",{d:g,fill:p}),i.default.createElement("path",{d:_,fill:E}))});return u.displayName="QRCodeSvg",u.propTypes=c,tp.default=u,tp}var ZS;function YK(){if(ZS)return Ac;ZS=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.QRCode=void 0;var n=Object.assign||function(A){for(var S=1;S<arguments.length;S++){var x=arguments[S];for(var O in x)Object.prototype.hasOwnProperty.call(x,O)&&(A[O]=x[O])}return A},e=N5(),t=p(e),r=O5(),i=p(r),o=$K(),a=p(o),c=Df(),u=p(c),d=XK(),h=p(d);function p(A){return A&&A.__esModule?A:{default:A}}function g(A,S){var x={};for(var O in A)S.indexOf(O)>=0||Object.prototype.hasOwnProperty.call(A,O)&&(x[O]=A[O]);return x}var _={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},E=(0,c.forwardRef)(function(A,S){var x=A.bgColor,O=x===void 0?"#FFFFFF":x,P=A.fgColor,D=P===void 0?"#000000":P,j=A.level,H=j===void 0?"L":j,M=A.size,R=M===void 0?256:M,k=A.value,U=g(A,["bgColor","fgColor","level","size","value"]),z=new a.default(-1,i.default[H]);z.addData(k),z.make();var q=z.modules;return u.default.createElement(h.default,n({},U,{bgColor:O,bgD:q.map(function(F,Ce){return F.map(function(Ee,Q){return Ee?"":"M "+Q+" "+Ce+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:D,fgD:q.map(function(F,Ce){return F.map(function(Ee,Q){return Ee?"M "+Q+" "+Ce+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:S,size:R,viewBoxSize:q.length}))});return Ac.QRCode=E,E.displayName="QRCode",E.propTypes=_,Ac.default=E,Ac}var KK=YK();const QK=pv(KK);function ZK({open:n,onOpenChange:e,restaurant:t}){var E;const[r,i]=C.useState(""),[o,a]=C.useState(""),[c,u]=C.useState(!1),d=C.useRef(null),h=()=>{const A="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";let S="";for(let x=0;x<6;x++)S+=A.charAt(Math.floor(Math.random()*A.length));return S};C.useEffect(()=>{if(n&&t){const A="https://billo-692b3.web.app",S=h();a(S);const x=`${A}/customer/scan?code=${S}`;i(x)}},[n,t]);const p=async()=>{const{jsPDF:A}=await dI(async()=>{const{jsPDF:R}=await import("./jspdf.es.min-BSsqK66U.js").then(k=>k.j);return{jsPDF:R}},[]),S=d.current,x=new A({orientation:"portrait",unit:"mm",format:"a4"});x.setFontSize(24),x.setTextColor(15,23,42),x.text((t==null?void 0:t.name)||"Restaurant Menu",105,30,{align:"center"}),x.setFontSize(14),x.setTextColor(75,85,99),x.text("Scan or enter the code below to view our menu",105,40,{align:"center"});const O=S.querySelector("svg"),P=document.createElement("canvas"),D=P.getContext("2d"),j=500;P.width=j,P.height=j,D.fillStyle="white",D.fillRect(0,0,j,j);const H=new XMLSerializer().serializeToString(O),M=new Image;await new Promise(R=>{M.onload=()=>{D.drawImage(M,0,0,j,j);const k=P.toDataURL("image/png"),U=x.internal.pageSize.getWidth(),z=80,q=(U-z)/2;x.addImage(k,"PNG",q,50,z,z),x.setFontSize(18),x.setTextColor(15,23,42),x.text("Or enter this code:",105,150,{align:"center"}),x.setFillColor(243,244,246),x.roundedRect(70,160,70,15,4,4,"F"),x.setFont("courier","bold"),x.setFontSize(20),x.setTextColor(31,41,55);const Ce=105-x.getTextWidth(o)/2;x.text(o,Ce,171),x.setFontSize(10),x.setTextColor(107,114,128),x.text("Generated by Billo - The Smart Restaurant Solution",105,280,{align:"center"});const Ee=(t==null?void 0:t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase())||"restaurant";x.save(`billo-menu-${Ee}.pdf`),R()},M.src=`data:image/svg+xml;base64,${btoa(H)}`})},g=()=>{i(""),e(!1)},_=()=>{navigator.clipboard.writeText(o)};return y.jsx(S5,{open:n,onOpenChange:g,children:y.jsxs(w_,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[y.jsxs(__,{children:[y.jsx(b_,{children:"Restaurant Access Code"}),y.jsx(E_,{children:"Share this code with your customers to let them access your menu and place orders."})]}),y.jsx("div",{className:"grid gap-6 py-4",children:r?y.jsxs("div",{className:"bg-white rounded-lg border p-6 shadow-sm",ref:d,children:[y.jsxs("div",{className:"flex flex-col items-center mb-6",children:[y.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-3",children:y.jsx("span",{className:"text-2xl font-bold text-primary",children:((E=t==null?void 0:t.name)==null?void 0:E.charAt(0))||"B"})}),y.jsx("h3",{className:"text-xl font-bold text-center",children:(t==null?void 0:t.name)||"Restaurant"}),y.jsx("p",{className:"text-muted-foreground text-sm",children:"Scan the code below"})]}),y.jsx("div",{className:"flex justify-center mb-6",children:y.jsx("div",{className:"p-4 border rounded-lg",children:y.jsx(QK,{value:r,size:200,style:{height:"auto",width:"100%"},viewBox:"0 0 200 200"})})}),y.jsxs("div",{className:"mb-6",children:[y.jsx("p",{className:"text-center text-sm text-muted-foreground mb-2",children:"Or enter this code:"}),y.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[y.jsx("div",{className:"px-4 py-2 bg-muted/50 rounded-md font-mono text-lg font-bold tracking-wider",children:o}),y.jsx(_e,{variant:"outline",size:"icon",className:"h-9 w-9",onClick:_,title:"Copy code",children:y.jsx(sI,{className:"h-4 w-4"})})]})]}),y.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"Display this code where customers can easily see it"})]}):y.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"Generating access code..."})}),y.jsxs(C5,{className:"sm:justify-between",children:[y.jsx(_e,{variant:"outline",onClick:g,children:"Close"}),y.jsx(_e,{onClick:async()=>{u(!0);try{await p()}catch(A){console.error("Error generating PDF:",A)}finally{u(!1)}},disabled:!r||c,className:"gap-2 min-w-[120px]",children:c?y.jsxs(y.Fragment,{children:[y.jsx(Xs,{className:"h-4 w-4 animate-spin"}),"Generating..."]}):y.jsxs(y.Fragment,{children:[y.jsx(VV,{className:"h-4 w-4"}),"Download PDF"]})})]})]})})}function JK({isAdminView:n=!1}){const e=_i(),t=Pr(),{currentUser:r,login:i,loginWithGoogle:o,logout:a,isAdmin:c,loading:u}=ss(),[d,h]=C.useState(!0),[p,g]=C.useState(!1),[_,E]=C.useState(!1),[A,S]=C.useState(""),[x,O]=C.useState(""),[P,D]=C.useState(!1),[j,H]=C.useState(!0),[M,R]=C.useState(null),[k,U]=C.useState(""),[z,q]=C.useState([]),[F,Ce]=C.useState([]),[Ee,Q]=C.useState(!1),[me,ue]=C.useState(!1),[De,W]=C.useState({email:"",password:"",confirmPassword:""}),[Y,oe]=C.useState("");C.useRef(),C.useRef(),C.useRef(),C.useEffect(()=>{if(!(M!=null&&M.id))return;console.log("Loading active tabs for restaurant:",M.id);const Ie=OT(M.id,Le=>{console.log("Active tabs updated:",Le),q(Le.map(xe=>{var bt;return{...xe,referenceNumber:xe.referenceNumber||xe.tableNumber||`#${xe.id.slice(-4)}`,waiterName:xe.waiterName||((bt=xe.waiter)==null?void 0:bt.name)||"Unassigned"}}))});return()=>Ie()},[M==null?void 0:M.id]),C.useEffect(()=>{console.log("RestaurantDashboard - Current user:",r),console.log("RestaurantDashboard - isAdmin:",c),console.log("RestaurantDashboard - authLoading:",u)},[r,c,u]),C.useEffect(()=>{var Ie;(Ie=t.state)!=null&&Ie.message&&(oe(t.state.message),window.history.replaceState({},document.title)),!u&&!r&&!t.pathname.endsWith("/restaurant")&&(console.log("No user found, redirecting to /restaurant"),e("/restaurant",{state:{from:t.pathname,message:"Please log in to access this page"},replace:!0}))},[r,u,e,t]),C.useEffect(()=>{r&&c&&!r.emailVerified&&S("Please verify your email to access the admin dashboard. Check your inbox for the verification link.")},[r,c]),C.useEffect(()=>{!u&&!r&&n&&e("/restaurant",{replace:!0})},[r,u,n,e]),C.useEffect(()=>{if(u){console.log("Auth still loading, skipping verification check");return}(async()=>{if(console.log("Verifying user and checking redirection..."),console.log("Current path:",window.location.pathname),console.log("User object:",r),!r){console.log("No user found, showing login form");return}try{if(console.log("Checking user verification status..."),window.location.pathname==="/restaurant"){console.log("User is on the restaurant dashboard, no redirection needed");return}if(c&&!p){if(M===null){console.log("Waiting for restaurant data to load...");return}if(M&&Object.keys(M).length===0){console.log("Admin user needs to complete onboarding");return}}c&&!window.location.pathname.startsWith("/restaurant")&&(console.log("Admin user accessing non-restaurant path, redirecting to /restaurant"),e("/restaurant",{replace:!0}))}catch(Le){console.error("Error in verification check:",Le)}})()},[r,u,c,e,M,p]);const[te,se]=C.useState({activeTabs:0,orders:0,sales:0,outstanding:0});C.useEffect(()=>{if(_){q(mockTabs),Ce(mockPayments),H(!1);return}if(r){H(!0);let Ie=()=>{};return(async()=>{try{const xe=await P2(r.uid);R(xe),xe?(Ie=OT(xe.id,bt=>{q(bt)}),Ce([])):(q([]),Ce([]))}catch{S("Could not load your restaurant data.")}finally{H(!1)}})(),()=>Ie()}},[r,_]),C.useEffect(()=>{console.log("Tabs data:",z);const Ie=z.filter(cn=>cn.status==="active"),Le=Ie.reduce((cn,Tr)=>cn+(Tr.total||0),0),xe=Ie.reduce((cn,Tr)=>{const Wn=Tr.total||0,mo=Tr.paid||0;return cn+Math.max(Wn-mo,0)},0),bt=Ie.reduce((cn,Tr)=>cn+(Tr.orderCount||0),0);se({activeTabs:Ie.length,orders:bt,sales:Le,outstanding:xe})},[z]);const pe=Ie=>{const{name:Le,value:xe}=Ie.target;W(bt=>({...bt,[Le]:xe})),A&&S(""),x&&O("")};async function ge(Ie){var Le;try{if(S(""),D(!0),!Ie)throw new Error("No user is currently signed in. Please sign in again.");if(console.log("Resending verification email to:",Ie.email),await Ie.reload(),Ie.emailVerified){console.log("User is already verified, redirecting to /admin"),window.location.href="/admin";return}const xe=`${window.location.origin}/restaurant?verified=true`;await UC(Ie,{url:xe,handleCodeInApp:!0}),console.log("Verification email sent with redirect URL:",xe),O("A new verification email has been sent. Please check your inbox and spam folder."),setTimeout(()=>{window.location.href="/admin"},5e3)}catch(xe){console.error("Error in handleResendVerification:",{code:xe.code,message:xe.message,stack:xe.stack});let bt="Failed to resend verification email. ";xe.code==="auth/too-many-requests"?bt="We have blocked all requests from this device due to unusual activity. Try again later.":xe.code==="auth/user-not-found"?bt="No user found with this email. Please sign up again.":xe.code==="auth/requires-recent-login"?bt="For security, please sign in again before requesting a new verification email.":xe.code==="auth/network-request-failed"?bt="Network error. Please check your internet connection and try again.":(Le=xe.message)!=null&&Le.includes("auth/missing-email")?bt="Email address is required. Please enter a valid email.":bt+=xe.message||"Please try again later or contact support if the problem persists.",S(bt)}finally{D(!1)}}async function ke(Ie){if(Ie.preventDefault(),!De.email||!De.password)return S("Please fill in all required fields");if(!d&&De.password!==De.confirmPassword)return S("Passwords do not match");try{if(S(""),O(""),D(!0),d){const{user:Le}=await i(De.email,De.password);x?loggedInUser.emailVerified?await P2(loggedInUser.uid)?e("/restaurant"):setShowOnboarding(!0):(S("Please verify your email before logging in. Check your inbox for the verification email."),await a()):S(A||"Failed to log in. Please check your credentials and try again.")}else{const{success:Le,error:xe,user:bt}=await rI(De.email,De.password,"User","admin");if(Le)O(y.jsxs("div",{className:"space-y-4",children:[y.jsxs("p",{children:["Account created successfully! We've sent a verification email to ",De.email,"."]}),y.jsxs("div",{className:"bg-blue-50 p-3 rounded-md border border-blue-100",children:[y.jsx("p",{className:"font-medium text-blue-800",children:"Important:"}),y.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Please check your inbox and verify your email to activate your account. If you don't see the email, please check your spam folder."}),y.jsx("button",{onClick:()=>ge(bt),className:"mt-2 text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center",disabled:P,children:P?y.jsxs(y.Fragment,{children:[y.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Resend verification email"})]})]})),W({email:De.email,password:"",confirmPassword:""}),U(""),setTimeout(()=>{h(!0)},5e3);else{let cn=xe||"Failed to create account. Please try again.";throw xe!=null&&xe.includes("email-already-in-use")?cn="This email is already registered. Please log in or use a different email.":xe!=null&&xe.includes("weak-password")?cn="Password is too weak. Please use at least 6 characters.":xe!=null&&xe.includes("invalid-email")&&(cn="Please enter a valid email address."),new Error(cn)}}}catch(Le){console.error("Auth error:",Le);let xe=Le.message;xe.includes("auth/email-already-in-use")?xe="This email is already registered. Please log in instead.":xe.includes("auth/weak-password")?xe="Password should be at least 6 characters":xe.includes("auth/invalid-email")?xe="Please enter a valid email address":(xe.includes("auth/user-not-found")||xe.includes("auth/wrong-password"))&&(xe="Invalid email or password"),S(xe)}finally{D(!1)}}function $e(){E(!1),g(!1)}const Zt=Ie=>{switch(Ie){case"active":return"bg-blue-100 text-blue-800";case"pending_acceptance":return"bg-yellow-100 text-yellow-800";case"bill_accepted":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},mt=Ie=>{switch(Ie){case"active":return y.jsx(Yp,{className:"w-4 h-4"});case"pending_acceptance":return y.jsx($o,{className:"w-4 h-4"});case"bill_accepted":return y.jsx(yy,{className:"w-4 h-4"});case"completed":return y.jsx(yy,{className:"w-4 h-4"});default:return y.jsx(Yp,{className:"w-4 h-4"})}};if(!n&&(!r||!c))return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:d?"Sign in to your account":"Create a new account"}),Y&&y.jsx("div",{className:"mt-4 p-3 bg-blue-50 text-blue-700 text-sm rounded-md",children:Y}),y.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:[d?"Don't have an account? ":"Already have an account? ",y.jsx("button",{type:"button",onClick:()=>{oe(""),h(!d)},className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none",children:d?"Sign up":"Sign in"})]})]}),A&&y.jsxs(jS,{variant:"destructive",className:"mb-4",children:[y.jsx($o,{className:"h-4 w-4"}),y.jsx(VS,{children:A})]}),x&&y.jsxs(jS,{className:"mb-4 bg-green-50 border-green-200",children:[y.jsx(yy,{className:"h-4 w-4 text-green-600"}),y.jsx(VS,{className:"text-green-700",children:x})]}),y.jsxs("form",{className:"mt-4 space-y-4",onSubmit:ke,children:[y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"email",children:"Email address"}),y.jsx(ln,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:De.email,onChange:pe,className:"mt-1",placeholder:"Enter your email",disabled:P})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx(pn,{htmlFor:"password",children:"Password"}),d&&y.jsx("a",{href:"#",className:"text-sm text-blue-600 hover:text-blue-500",children:"Forgot password?"})]}),y.jsx(ln,{id:"password",name:"password",type:"password",autoComplete:d?"current-password":"new-password",required:!0,value:De.password,onChange:pe,className:"mt-1",placeholder:d?"Enter your password":"Create a password (min 6 characters)",minLength:d?void 0:6,disabled:P})]}),!d&&y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"confirmPassword",children:"Confirm Password"}),y.jsx(ln,{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:De.confirmPassword,onChange:pe,className:"mt-1",placeholder:"Confirm your password",disabled:P})]})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsx(_e,{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:P,children:P?y.jsxs(y.Fragment,{children:[y.jsx(F1,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),d?"Signing in...":"Creating account..."]}):d?"Sign in":"Create account"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-gray-300"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),y.jsxs(_e,{type:"button",variant:"outline",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>logInWithGoogle("admin"),disabled:P,children:[y.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",children:[y.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),y.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),y.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),y.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),d?"Sign in with Google":"Sign up with Google"]})]})]}),y.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500",children:[y.jsxs("p",{children:["By ",d?"signing in":"signing up",", you agree to our"]}),y.jsxs("p",{className:"mt-1",children:[y.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-500",children:"Terms of Service"})," and"," ",y.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-500",children:"Privacy Policy"})]})]})]})});if(r&&!_&&!j&&!M)return y.jsx(eQ,{user:r,onRestaurantCreated:R});if(r||_){if(j)return y.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),y.jsx("p",{className:"text-lg text-muted-foreground",children:"Loading Dashboard..."})]})});const Ie=!_&&z.length===0&&F.length===0;return y.jsxs("div",{className:"min-h-screen bg-background p-4",children:[y.jsx(tQ,{open:me,onOpenChange:ue}),y.jsxs("div",{className:"max-w-6xl mx-auto",children:[y.jsx(ZK,{open:Ee,onOpenChange:Q,restaurant:M}),y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsx("div",{className:"flex items-center",children:y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-bold",children:"Restaurant Dashboard"}),y.jsx("p",{className:"text-muted-foreground capitalize",children:_?"Viewing in Demo Mode":(M==null?void 0:M.name)||"Real-time tab and payment monitoring"})]})}),y.jsxs("div",{className:"flex items-center gap-2",children:[!_&&M&&y.jsxs(y.Fragment,{children:[y.jsxs(_e,{variant:"outline",size:"sm",onClick:()=>e("/waiterhome"),className:"bg-primary/10 hover:bg-primary/20 border-primary/30",children:[y.jsx(zc,{className:"w-4 h-4 mr-2"}),"Waiter Dashboard"]}),y.jsxs(_e,{variant:"outline",size:"sm",onClick:()=>Q(!0),children:[y.jsx(eu,{className:"w-4 h-4 mr-2"}),"Get QR Code"]})]}),y.jsxs(_e,{variant:"outline",size:"sm",onClick:r?a:$e,children:[y.jsx(ZV,{className:"w-4 h-4 mr-2"}),"Log Out"]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[y.jsx(ct,{children:y.jsx(Ct,{className:"p-4",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx(zc,{className:"w-8 h-8 text-blue-600 mr-3"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-2xl font-bold",children:te.activeTabs}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Tabs"})]})]})})}),y.jsx(ct,{children:y.jsx(Ct,{className:"p-4",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx(hB,{className:"w-8 h-8 text-purple-600 mr-3"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-2xl font-bold",children:te.orders}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Orders"})]})]})})}),y.jsx(ct,{children:y.jsx(Ct,{className:"p-4",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx(aI,{className:"w-8 h-8 text-green-600 mr-3"}),y.jsxs("div",{children:[y.jsxs("p",{className:"text-2xl font-bold",children:["Ksh ",te.sales.toFixed(2)]}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Sales"})]})]})})}),y.jsx(ct,{children:y.jsx(Ct,{className:"p-4",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx($o,{className:"w-8 h-8 text-yellow-600 mr-3"}),y.jsxs("div",{children:[y.jsxs("p",{className:"text-2xl font-bold",children:["Ksh ",te.outstanding.toFixed(2)]}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Outstanding"})]})]})})})]}),y.jsxs(vY,{defaultValue:"tabs",className:"w-full space-y-4",children:[y.jsxs(wY,{className:"grid w-full grid-cols-4",children:[y.jsxs(Ym,{value:"tabs",className:"flex items-center",children:[y.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 mr-2"}),"Active Tabs"]}),y.jsxs(Ym,{value:"menu",children:[y.jsx(cI,{className:"w-4 h-4 mr-2"}),"Menu"]}),y.jsxs(Ym,{value:"waiters",children:[y.jsx(zc,{className:"w-4 h-4 mr-2"}),"Waiters"]}),y.jsxs(Ym,{value:"settings",children:[y.jsx(cB,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),y.jsx(Km,{value:"tabs",className:"space-y-4",children:y.jsxs(ct,{children:[y.jsxs(Rn,{children:[y.jsx(Nn,{children:"Active Tabs"}),y.jsx(tr,{children:"List of all active tabs, assigned waiter, and outstanding amounts"})]}),y.jsx(Ct,{children:j?y.jsxs("div",{className:"flex justify-center items-center p-8",children:[y.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),y.jsx("span",{className:"ml-2",children:"Loading active tabs..."})]}):Ie||z.length===0?y.jsxs("div",{className:"text-center p-8 text-gray-500",children:[y.jsx(O2,{className:"mx-auto h-12 w-12 text-gray-400"}),y.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No active tabs"}),y.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Active tabs will appear here when customers start ordering."})]}):y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[y.jsx("thead",{className:"bg-gray-50",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Tab #"}),y.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Waiter"}),y.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Sales"}),y.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Paid"}),y.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Outstanding"}),y.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),y.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),y.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map(Le=>{var as;const xe=Le.total||Le.amount||0,bt=Le.status==="completed"||Le.status==="paid"?xe:0,cn=Le.status!=="completed"&&Le.status!=="paid"?xe:0,Tr=Le.referenceNumber||Le.tabNumber||`#${Le.id.slice(-4)}`,Wn=Le.waiterName||((as=Le.waiter)==null?void 0:as.name)||"Unassigned",mo=Le.status||"active";return y.jsxs("tr",{className:Le.expired?"bg-red-50":"",children:[y.jsxs("td",{className:"px-4 py-2 font-semibold",children:["Tab ",Tr]}),y.jsx("td",{className:"px-4 py-2",children:Wn}),y.jsxs("td",{className:"px-4 py-2 font-medium",children:["Ksh ",xe.toFixed(2)]}),y.jsxs("td",{className:"px-4 py-2 text-green-600",children:["Ksh ",bt.toFixed(2)]}),y.jsxs("td",{className:"px-4 py-2 text-red-600 font-bold",children:["Ksh ",cn.toFixed(2)]}),y.jsx("td",{className:"px-4 py-2",children:y.jsxs(CI,{className:Zt(mo),children:[mt(mo),y.jsx("span",{className:"ml-1 capitalize",children:mo.replace("_"," ")})]})}),y.jsx("td",{className:"px-4 py-2",children:y.jsx(_e,{size:"sm",variant:"outline",onClick:()=>{e(`/tab/${Le.id}`,{state:{tabData:Le,referenceNumber:Tr,waiterName:Wn}})},children:"View"})})]},Le.id)})})]})})})]})}),y.jsx(Km,{value:"menu",className:"space-y-6",children:y.jsx(FK,{restaurant:M})}),y.jsx(Km,{value:"waiters",className:"space-y-4",children:y.jsx(BK,{restaurant:M})}),y.jsx(Km,{value:"settings",className:"space-y-6",children:y.jsxs(ct,{children:[y.jsxs(Rn,{children:[y.jsx(Nn,{children:"Restaurant Settings"}),y.jsx(tr,{children:"Manage your restaurant's configuration and preferences"})]}),y.jsxs(Ct,{className:"space-y-6",children:[y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"bg-primary/10 p-2 rounded-lg mr-4",children:y.jsx(Kp,{className:"h-5 w-5 text-primary"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-medium",children:"Account Information"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your restaurant details and contact information"})]}),y.jsx(_e,{variant:"outline",size:"sm",className:"ml-auto",children:"Edit"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"bg-primary/10 p-2 rounded-lg mr-4",children:y.jsx(lI,{className:"h-5 w-5 text-primary"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-medium",children:"Currency & Region"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Set your preferred currency and regional settings"})]}),y.jsx(_e,{variant:"outline",size:"sm",className:"ml-auto",children:"Configure"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"bg-primary/10 p-2 rounded-lg mr-4",children:y.jsx(qV,{className:"h-5 w-5 text-primary"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-medium",children:"Restaurant Logo"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload or update your restaurant's logo"})]}),y.jsx(_e,{variant:"outline",size:"sm",className:"ml-auto",children:"Upload"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"bg-primary/10 p-2 rounded-lg mr-4",children:y.jsx(Tw,{className:"h-5 w-5 text-primary"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-medium",children:"M-Pesa Integration"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Set up and manage M-Pesa payment processing"})]}),y.jsx(_e,{variant:"outline",size:"sm",className:"ml-auto",children:"Configure"})]})]}),y.jsxs("div",{className:"border-t pt-6",children:[y.jsx("h3",{className:"text-lg font-medium text-foreground mb-4",children:"Danger Zone"}),y.jsx("div",{className:"rounded-lg border border-destructive/20 bg-destructive/5 p-4",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"font-medium text-destructive",children:"Delete Account"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Permanently delete your restaurant account and all associated data"})]}),y.jsxs(_e,{variant:"destructive",size:"sm",children:[y.jsx(xw,{className:"mr-2 h-4 w-4"}),"Delete Account"]})]})})]})]})]})})]})]})]})}return null}function eQ({user:n,onRestaurantCreated:e}){var _,E;const t=[{code:"KES",name:"Kenyan Shilling",symbol:"KSh"},{code:"UGX",name:"Ugandan Shilling",symbol:"USh"},{code:"TZS",name:"Tanzanian Shilling",symbol:"TSh"},{code:"USD",name:"US Dollar",symbol:"$"},{code:"EUR",name:"Euro",symbol:""},{code:"GBP",name:"British Pound",symbol:""},{code:"ZAR",name:"South African Rand",symbol:"R"},{code:"ETB",name:"Ethiopian Birr",symbol:"Br"},{code:"NGN",name:"Nigerian Naira",symbol:""},{code:"GHS",name:"Ghanaian Cedi",symbol:"GH"}],[r,i]=C.useState({restaurantName:"",city:"",telephone:"",currency:"KES",paymentTypes:{cash:!1,card:!1,mobileMoney:!1},logo:null}),[o,a]=C.useState(null),[c,u]=C.useState(!1),[d,h]=C.useState(""),p=A=>{const{name:S,value:x,type:O,checked:P,files:D}=A.target;if(O==="file"){const j=D[0];if(j){if(!j.type.startsWith("image/")){h("Please upload an image file (JPEG, PNG, etc.)");return}if(j.size>5*1024*1024){h("Image size should be less than 5MB");return}const H=new FileReader;H.onloadend=()=>{a(H.result)},H.readAsDataURL(j),i(M=>({...M,[S]:j}))}}else i(O==="checkbox"?j=>({...j,paymentTypes:{...j.paymentTypes,[S]:P}}):j=>({...j,[S]:x}));d&&h("")},g=async A=>{if(A.preventDefault(),!r.restaurantName.trim()){h("Restaurant name is required");return}if(!r.city.trim()){h("City is required");return}if(!r.telephone.trim()){h("Telephone number is required");return}const S=Object.entries(r.paymentTypes).filter(([O,P])=>P).map(([O])=>O);if(S.length===0){h("Please select at least one payment method");return}let x="";r.logo&&(x=o),u(!0),h("");try{console.log("Creating restaurant with data:",r);const O=t.find(j=>j.code===r.currency),P=await PB({name:r.restaurantName,ownerId:n.uid,email:n.email,city:r.city,telephone:r.telephone,paymentTypes:S,logo:x,currency:{code:O.code,symbol:O.symbol,name:O.name},address:{city:r.city},settings:{},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});console.log("Restaurant created:",P),console.log("Updating user profile with restaurantId:",P.id),await Aw({...n,restaurantId:P.id},"admin"),console.log("Refreshing user data...");const D=await B1(n.uid);console.log("Updated user data:",D),e(P)}catch(O){const P="Failed to create restaurant. Please try again.";console.error(P,O),h(P)}finally{u(!1)}};return y.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:y.jsxs(ct,{className:"w-full max-w-md",children:[y.jsxs(Rn,{children:[y.jsx(Nn,{children:"Welcome to Bill-O!"}),y.jsx(tr,{children:"Let's set up your restaurant profile to get started."})]}),y.jsx(Ct,{children:y.jsxs("form",{onSubmit:g,className:"space-y-4",children:[y.jsx("div",{children:y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{children:y.jsxs("div",{className:"flex flex-col items-center mb-4",children:[y.jsx("div",{className:"relative w-24 h-24 rounded-full bg-gray-100 border-2 border-dashed border-gray-300 flex items-center justify-center overflow-hidden",children:o?y.jsx("img",{src:o,alt:"Restaurant logo preview",className:"w-full h-full object-cover"}):y.jsx("div",{className:"text-gray-400",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-8 h-8",children:[y.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),y.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),y.jsx("path",{d:"M21 15l-3.1-3.9a2 2 0 0 0-3.1.1l-3.6 4.6-1.1-1.1a2 2 0 0 0-2.9.1L3 18"})]})})}),y.jsxs("label",{className:"mt-2",children:[y.jsx("span",{className:"text-sm text-blue-600 hover:text-blue-500 cursor-pointer",children:o?"Change logo":"Add restaurant logo (optional)"}),y.jsx("input",{type:"file",name:"logo",accept:"image/*",onChange:p,className:"hidden"})]})]})}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"restaurantName",children:"Restaurant Name *"}),y.jsx(ln,{id:"restaurantName",name:"restaurantName",value:r.restaurantName,onChange:p,placeholder:"e.g., The Blue Moon Bar & Grill",required:!0})]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"city",children:"City *"}),y.jsx(ln,{id:"city",name:"city",value:r.city,onChange:p,placeholder:"e.g., Nairobi",required:!0})]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"telephone",children:"Telephone *"}),y.jsx(ln,{id:"telephone",name:"telephone",type:"tel",value:r.telephone,onChange:p,placeholder:"e.g., +254 700 123456",required:!0})]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"currency",children:"Currency *"}),y.jsx("select",{id:"currency",name:"currency",value:r.currency,onChange:p,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:t.map(A=>y.jsxs("option",{value:A.code,children:[A.code," - ",A.name," (",A.symbol,")"]},A.code))}),y.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Selected: ",(_=t.find(A=>A.code===r.currency))==null?void 0:_.symbol," - ",(E=t.find(A=>A.code===r.currency))==null?void 0:E.name]})]}),y.jsxs("div",{children:[y.jsx(pn,{children:"Payment Methods Accepted *"}),y.jsxs("div",{className:"mt-2 space-y-2",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Ly,{id:"payment-cash",name:"cash",checked:r.paymentTypes.cash,onChange:A=>i(S=>({...S,paymentTypes:{...S.paymentTypes,cash:A.target.checked}}))}),y.jsx(pn,{htmlFor:"payment-cash",className:"font-normal",children:"Cash"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Ly,{id:"payment-card",name:"card",checked:r.paymentTypes.card,onChange:A=>i(S=>({...S,paymentTypes:{...S.paymentTypes,card:A.target.checked}}))}),y.jsx(pn,{htmlFor:"payment-card",className:"font-normal",children:"Credit/Debit Card"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Ly,{id:"payment-mobile",name:"mobileMoney",checked:r.paymentTypes.mobileMoney,onChange:A=>i(S=>({...S,paymentTypes:{...S.paymentTypes,mobileMoney:A.target.checked}}))}),y.jsx(pn,{htmlFor:"payment-mobile",className:"font-normal",children:"Mobile Money"})]})]})]})]})}),d&&y.jsx("p",{className:"text-sm text-red-500",children:d}),y.jsx(_e,{type:"submit",className:"w-full",disabled:c,children:c?"Creating...":"Create Restaurant"})]})})]})})}function tQ({open:n,onOpenChange:e}){const t=()=>{alert("Connecting to Google... (placeholder)"),e(!1)};return y.jsx(S5,{open:n,onOpenChange:e,children:y.jsxs(w_,{className:"sm:max-w-md",children:[y.jsxs(__,{children:[y.jsx(b_,{children:"Connect to Google Sheets"}),y.jsx(E_,{children:"Sign in with your Google account to link a spreadsheet for your menu."})]}),y.jsxs("div",{className:"py-4 text-center",children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"You will be redirected to Google to authorize access. We will provide a template for you to use."}),y.jsxs(_e,{onClick:t,className:"w-full",children:[y.jsx("svg",{className:"mr-2 h-4 w-4","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:y.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 126 21.2 172.9 60.2l-67.4 64.8C295.5 98.2 273.5 84 248 84c-73.2 0-132.3 59.2-132.3 132S174.8 388 248 388c78.2 0 110.3-57.5 114.3-87.2H248v-85.3h236.1c2.3 12.7 3.9 26.9 3.9 41.4z"})}),"Sign in with Google"]})]})]})})}const nQ=()=>y.jsxs("div",{className:"my-4 rounded-lg border border-border overflow-hidden relative aspect-[16/9] md:aspect-[21/9] group cursor-pointer",children:[y.jsx("img",{src:"https://images.unsplash.com/photo-1514933651103-005eec06c04b?q=80&w=1200&auto=format&fit=crop",alt:"A modern bar interior with warm lighting",className:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent"}),y.jsxs("div",{className:"relative h-full flex flex-col justify-end items-center text-center p-6 text-white",children:[y.jsx("h4",{className:"text-2xl md:text-3xl font-bold tracking-tight whitespace-nowrap",children:"Modernize Your Bar with Bill-O"}),y.jsx("p",{className:"text-sm md:text-base text-white/90 mt-1",children:"Effortless tabs, faster payments, happier customers."})]})]});function rQ(){return y.jsx("div",{className:"min-h-screen bg-background p-4",children:y.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[y.jsxs("div",{className:"text-center py-8",children:[y.jsx("h1",{className:"text-3xl font-bold text-primary mb-2",children:"Bill-O"}),y.jsx("p",{className:"text-muted-foreground",children:"User Centered Tab Management"})]}),y.jsx(nQ,{}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs(ct,{className:"border-2 hover:border-primary/50 transition-colors",children:[y.jsxs(Rn,{className:"text-center",children:[y.jsx(eu,{className:"w-12 h-12 text-primary mx-auto mb-2"}),y.jsx(Nn,{children:"Customer"}),y.jsx(tr,{children:"Open a tab and manage your bill"})]}),y.jsx(Ct,{children:y.jsx(mi,{to:"/customer",className:"w-full",children:y.jsx(_e,{className:"w-full",children:"Start Tab"})})})]}),y.jsxs(ct,{className:"border-2 hover:border-primary/50 transition-colors",children:[y.jsxs(Rn,{className:"text-center",children:[y.jsx(AV,{className:"w-12 h-12 text-primary mx-auto mb-2"}),y.jsx(Nn,{children:"Restaurant"}),y.jsx(tr,{children:"Monitor tabs and payments"})]}),y.jsx(Ct,{children:y.jsx(mi,{to:"/restaurant",className:"w-full",children:y.jsx(_e,{variant:"outline",className:"w-full",children:"Admin Dashboard"})})})]})]})]})})}function iQ(){const[n]=u1(),[e,t]=C.useState(null),[r,i]=C.useState(!0),o=n.get("restaurantId");if(C.useEffect(()=>{o?fI(o).then(t).finally(()=>i(!1)):i(!1)},[o]),r)return y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."});if(!e)return y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Invalid Restaurant QR Code."});const a=`intent://customer?restaurantId=${o}#Intent;scheme=billo;package=com.billo.app;end`;return y.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:y.jsxs(ct,{className:"w-full max-w-sm text-center",children:[y.jsxs(Rn,{children:[y.jsx(Nn,{children:"Welcome to"}),y.jsx(tr,{className:"text-xl font-bold text-primary",children:e.name})]}),y.jsxs(Ct,{className:"space-y-4",children:[y.jsx("p",{children:"How would you like to open your tab?"}),y.jsx(mi,{to:`/customer/signin?restaurantId=${o}`,children:y.jsxs(_e,{className:"w-full",children:[y.jsx(lI,{className:"w-4 h-4 mr-2"}),"Continue in Web Browser"]})}),y.jsx("a",{href:a,children:y.jsxs(_e,{variant:"outline",className:"w-full",children:[y.jsx(Sw,{className:"w-4 h-4 mr-2"}),"Open in Android App"]})}),y.jsx("p",{className:"text-xs text-muted-foreground pt-2",children:"If you don't have the app, you will be redirected to the Play Store."})]})]})})}function oQ({onVerify:n,onClose:e,waiterName:t}){const[r,i]=C.useState(""),[o,a]=C.useState(""),c=h=>{r.length<4&&(i(p=>p+h),a(""))},u=()=>{i(h=>h.slice(0,-1)),a("")},d=()=>{r.length===4?n(r):a("Please enter a 4-digit PIN")};return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsxs("h3",{className:"text-lg font-semibold",children:["Enter PIN for ",t]}),y.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:y.jsx(uI,{className:"w-5 h-5"})})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("div",{className:"flex justify-center items-center space-x-2 mb-2",children:[1,2,3,4].map((h,p)=>y.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${p<r.length?"bg-primary border-primary":"border-gray-300"}`},p))}),o&&y.jsx("p",{className:"text-red-500 text-sm text-center",children:o})]}),y.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[[1,2,3,4,5,6,7,8,9,0].map(h=>y.jsx(_e,{variant:"outline",className:"h-14 text-lg",onClick:()=>c(h.toString()),children:h},h)),y.jsx(_e,{variant:"outline",className:"h-14",onClick:u,children:y.jsx(kV,{className:"w-5 h-5"})}),y.jsx(_e,{className:"h-14 bg-primary hover:bg-primary/90",onClick:d,children:"Enter"})]})]})})}function sQ(){const n=_i(),{currentUser:e}=ss(),[t,r]=C.useState([]),[i,o]=C.useState(!0),[a,c]=C.useState(""),[u,d]=C.useState(""),[h,p]=C.useState("checking"),[g,_]=C.useState(!1),[E,A]=C.useState(null),S=C.useCallback(async()=>{try{if(o(!0),c(""),!e)throw new Error("You need to be logged in to access this page");let D=e==null?void 0:e.restaurantId,j=null;if(!D&&(e!=null&&e.uid))try{j=await P2(e.uid),j&&(D=j.id,e.updateProfile?await e.updateProfile({restaurantId:D}):e.restaurantId=D)}catch(M){console.error("Error fetching restaurant:",M)}if(!D){r([]),c("No restaurant associated with this account. Please complete restaurant setup first.");return}const H=await kB(D);r(H)}catch(D){console.error("Error loading waiters:",D),c(D.message||"Failed to load waiters")}finally{o(!1)}},[e]),x=D=>{A(D),_(!0)},O=async D=>{try{if(o(!0),c(""),!e)throw console.error("No current user found"),new Error("You need to be logged in to access this page");console.log("=== PIN Verification Debug ==="),console.log("Current user:",{uid:e.uid,email:e.email,restaurantId:e.restaurantId}),console.log("Selected waiter:",E),console.log("Entered PIN:",D,"Type:",typeof D);const j=await PT(E.id);if(console.log("Waiter from DB:",j),!j)throw console.error("Waiter not found in database"),new Error("Waiter not found in database");console.log("Waiter data:",{id:j.id,name:j.name,storedPIN:j.pin,pinType:typeof j.pin,restaurantId:j.restaurantId});const H=D.toString().trim(),M=j.pin?j.pin.toString().trim():"";if(M&&M===H){console.log(" PIN verification successful"),console.log("Navigating to waiter dashboard...");const k=await PT(j.id);n(`/waiter/${k.id}`,{state:{waiter:k,user:e,timestamp:new Date().toISOString()},replace:!0});return}console.log("Direct PIN comparison failed, trying database query...");const R=await MB(E.restaurantId,D);console.log("Waiter found by PIN query:",R),R&&R.id===E.id?(console.log(" Database PIN verification successful"),n(`/waiter/${R.id}`,{state:{waiter:R,user:e,timestamp:new Date().toISOString()},replace:!0})):(console.error(" All PIN verification methods failed"),c("Invalid PIN. Please try again."),_(!1))}catch(j){console.error("Error verifying PIN:",j),c("Error verifying PIN. Please try again."),_(!1)}finally{o(!1)}},P=async()=>{try{d("Checking waiters collection...");const D=await hI();d(`Found ${D.size} waiters in collection. Check console for details.`)}catch(D){console.error("Debug error:",D),d(`Error: ${D.message}`)}};return C.useEffect(()=>{(async()=>{try{const j=await DT();p(j?"connected":"disconnected")}catch(j){console.error("Connection test error:",j),p("error")}})()},[]),C.useEffect(()=>{e&&S()},[e,S]),i&&t.length===0?y.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:y.jsxs("div",{className:"text-center",children:[y.jsx(Xs,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),y.jsx("p",{className:"text-muted-foreground",children:"Loading waiters..."})]})}):y.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 p-4 md:p-6 relative",children:[g&&E&&y.jsx(oQ,{onVerify:O,onClose:()=>_(!1),waiterName:E.name}),y.jsxs("div",{className:"max-w-7xl mx-auto",children:[y.jsxs("div",{className:"flex items-center justify-between mb-8",children:[y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx(_e,{variant:"outline",size:"icon",onClick:()=>n(-1),className:"rounded-full",children:y.jsx(Xp,{className:"w-4 h-4"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Waiter Dashboard"}),y.jsx("p",{className:"text-muted-foreground",children:"Select a waiter to view their dashboard"})]})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsxs(_e,{variant:"outline",size:"sm",onClick:S,disabled:i,className:"gap-2",children:[i?y.jsx(Xs,{className:"h-4 w-4 animate-spin"}):y.jsx(F1,{className:"h-4 w-4"}),"Refresh"]}),y.jsx(_e,{variant:"outline",size:"sm",onClick:()=>{e?n("/restaurant"):n("/",{state:{showLogin:!0}})},className:"gap-2 bg-red-50 text-red-700 hover:bg-red-100 hover:text-red-800 border-red-200",children:e?"Restaurant Dashboard":"Back to Login"})]})]}),y.jsxs("div",{className:"mb-6 flex items-center space-x-2",children:[y.jsxs(_e,{variant:"outline",size:"sm",onClick:P,title:"Debug waiters collection",className:"gap-2",children:[y.jsx(bV,{className:"h-4 w-4"}),"Debug"]}),y.jsxs(_e,{variant:"outline",size:"sm",onClick:async()=>{p("checking");const D=await DT();p(D?"connected":"disconnected")},title:"Test Firestore connection",className:`gap-2 ${h==="connected"?"bg-green-50 text-green-700 border-green-200":h==="error"?"bg-red-50 text-red-700 border-red-200":"bg-yellow-50 text-yellow-700 border-yellow-200"}`,children:[h==="connected"?y.jsx(AB,{className:"h-4 w-4 text-green-600"}):h==="error"?y.jsx(bB,{className:"h-4 w-4 text-red-600"}):y.jsx(Xs,{className:"h-4 w-4 animate-spin"}),h==="connected"?"Connected":h==="error"?"Error":"Connecting..."]})]}),u&&y.jsx("div",{className:"mb-6 p-3 bg-yellow-50 border border-yellow-200 text-yellow-800 text-sm rounded-lg",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx($V,{className:"w-4 h-4 mr-2 flex-shrink-0"}),y.jsx("span",{children:u})]})}),a&&y.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx($o,{className:"w-5 h-5 mr-2 mt-0.5 flex-shrink-0"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium",children:"Error loading waiters"}),y.jsx("p",{className:"text-sm mt-1",children:a}),y.jsx(_e,{variant:"ghost",size:"sm",className:"mt-2 text-red-700 hover:bg-red-100",onClick:S,disabled:i,children:i?"Retrying...":"Try Again"})]})]})}),y.jsx(y.Fragment,{children:y.jsxs("div",{className:"mb-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Active Waiters"}),y.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.length," ",t.length===1?"waiter":"waiters"," available"]})]}),t.length>0?y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(D=>y.jsx(ct,{className:"group cursor-pointer transition-all duration-200 hover:shadow-md hover:-translate-y-1 border-border/60",onClick:()=>x(D),children:y.jsx(Ct,{className:"p-5",children:y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:y.jsx(Kp,{className:"w-6 h-6 text-primary"})}),y.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:D.name||"Unnamed Waiter"}),y.jsx("p",{className:"text-sm text-muted-foreground truncate",children:D.email||"No email provided"}),y.jsx("div",{className:"mt-1 flex items-center",children:y.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})})]})]})})},D.id))}):i?null:y.jsxs("div",{className:"text-center py-12 px-4 border-2 border-dashed border-gray-200 rounded-xl bg-white",children:[y.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:y.jsx(Kp,{className:"w-8 h-8 text-gray-400"})}),y.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No waiters found"}),y.jsx("p",{className:"text-sm text-gray-500 max-w-md mx-auto mb-4",children:"Add waiters in the admin panel to get started managing your restaurant's service team."}),y.jsx(_e,{variant:"outline",onClick:()=>n("/restaurant"),children:"Go to Admin Panel"})]})]})}),i&&y.jsxs("div",{className:"mt-8 text-center",children:[y.jsx(Xs,{className:"inline-block w-6 h-6 text-primary animate-spin"}),y.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading waiters..."})]})]})]})}const JS=({mode:n="signin"})=>{const[e,t]=C.useState(""),[r,i]=C.useState(""),[o,a]=C.useState(""),[c,u]=C.useState(!1),{login:d,signup:h,loginWithGoogle:p}=ss(),g=_i(),_=n==="signin",E=async S=>{S.preventDefault(),a(""),u(!0);try{_?await d(e,r):await h(e,r),g("/customer")}catch(x){a(x.message)}u(!1)},A=async()=>{try{await p(),g("/customer")}catch(S){a(S.message)}};return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:y.jsxs(l_.div,{className:"w-full max-w-md bg-white p-8 rounded-2xl shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:_?"Welcome Back":"Create Account"}),y.jsx("p",{className:"text-gray-600",children:_?"Sign in to continue to Billo":"Create your Billo account"})]}),o&&y.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg text-sm",children:o}),y.jsxs("form",{onSubmit:E,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),y.jsx(ln,{id:"email",type:"email",value:e,onChange:S=>t(S.target.value),placeholder:"your@email.com",required:!0,className:"w-full"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),y.jsx(ln,{id:"password",type:"password",value:r,onChange:S=>i(S.target.value),placeholder:"",required:!0,minLength:6,className:"w-full"})]}),y.jsx(_e,{type:"submit",className:"w-full py-2.5 text-base font-medium",disabled:c,children:c?"Processing...":_?"Sign In":"Sign Up"})]}),y.jsxs("div",{className:"relative my-6",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-gray-300"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),y.jsxs(_e,{variant:"outline",className:"w-full flex items-center justify-center gap-2 py-2.5",onClick:A,disabled:c,children:[y.jsx(zV,{className:"w-5 h-5 text-gray-800"}),_?"Sign in with GitHub":"Sign up with GitHub"]}),y.jsx("div",{className:"mt-6 text-center text-sm",children:_?y.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",y.jsx(mi,{to:"/signup",className:"text-blue-600 hover:underline font-medium",children:"Sign up"})]}):y.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",y.jsx(mi,{to:"/signin",className:"text-blue-600 hover:underline font-medium",children:"Sign in"})]})})]})})},aQ=n=>{const e=n.replace(/\D/g,"");return/^\d{10,15}$/.test(e)},e6=({mode:n="signin"})=>{const[e,t]=C.useState({email:"",phone:"",name:""}),[r,i]=C.useState({}),[o,a]=C.useState(!1),[c]=u1(),{login:u,signup:d,loginWithGoogle:h}=ss(),p=_i(),g=n==="signin",_=c.get("restaurantId"),E=P=>{const{name:D,value:j}=P.target;t(H=>({...H,[D]:j})),r[D]&&i(H=>({...H,[D]:""}))},A=P=>{let D=P.target.value.replace(/\D/g,"");D.length>3&&D.length<=6?D=`(${D.slice(0,3)}) ${D.slice(3)}`:D.length>6&&(D=`(${D.slice(0,3)}) ${D.slice(3,6)}-${D.slice(6,10)}`),t(j=>({...j,phone:D})),r.phone&&i(j=>({...j,phone:""}))},S=()=>{const P={};return e.email?/\S+@\S+\.\S+/.test(e.email)||(P.email="Please enter a valid email address"):P.email="Email is required",e.phone?aQ(e.phone)||(P.phone="Please enter a valid phone number (10-15 digits)"):P.phone="Phone number is required",!g&&!e.name.trim()&&(P.name="Full name is required"),i(P),Object.keys(P).length===0},x=async P=>{if(P.preventDefault(),!!S()){a(!0);try{g?await u(e.email,e.phone):await d(e.email,e.phone,e.name);const D=_?`/customer?restaurantId=${_}`:"/customer";p(D)}catch(D){i(j=>({...j,form:D.message||"An error occurred. Please try again."}))}a(!1)}},O=async()=>{try{await h("customer");const P=_?`/customer?restaurantId=${_}`:"/customer";p(P)}catch(P){i(D=>({...D,form:P.message||"Failed to sign in with Google"}))}};return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:y.jsxs(l_.div,{className:"w-full max-w-md bg-white p-8 rounded-2xl shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:g?"Welcome Back!":"Join Billo"}),y.jsx("p",{className:"text-gray-600",children:g?"Sign in to continue to your account":"Create your customer account"})]}),r.form&&y.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg text-sm flex items-start",children:[y.jsx($o,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),y.jsx("span",{children:r.form})]}),y.jsxs("form",{onSubmit:x,className:"space-y-4",children:[!g&&y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),r.name&&y.jsx("span",{className:"text-xs text-red-600",children:r.name})]}),y.jsx(ln,{id:"name",name:"name",type:"text",value:e.name,onChange:E,placeholder:"John Doe",className:`w-full ${r.name?"border-red-500":""}`,"aria-invalid":!!r.name,"aria-describedby":r.name?"name-error":void 0})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),r.email&&y.jsx("span",{className:"text-xs text-red-600",children:r.email})]}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(eB,{className:"h-4 w-4 text-gray-400"})}),y.jsx(ln,{id:"email",name:"email",type:"email",value:e.email,onChange:E,placeholder:"your@email.com",className:`w-full pl-10 ${r.email?"border-red-500":""}`,"aria-invalid":!!r.email,"aria-describedby":r.email?"email-error":void 0})]})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),r.phone&&y.jsx("span",{className:"text-xs text-red-600",children:r.phone})]}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(Sw,{className:`h-4 w-4 ${r.phone?"text-red-500":"text-gray-400"}`})}),y.jsx(ln,{id:"phone",name:"phone",type:"tel",value:e.phone,onChange:A,placeholder:"(123) 456-7890",className:`pl-10 w-full ${r.phone?"border-red-500":""}`,"aria-invalid":!!r.phone,"aria-describedby":r.phone?"phone-error":void 0,maxLength:15})]})]}),y.jsx(_e,{type:"submit",className:"w-full mt-2",disabled:o,children:o?y.jsxs(y.Fragment,{children:[y.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),g?"Signing In...":"Creating Account..."]}):g?y.jsxs(y.Fragment,{children:[y.jsx(KV,{className:"w-4 h-4 mr-2"}),"Sign In"]}):"Create Account"})]}),y.jsxs("div",{className:"relative my-6",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-gray-300"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),y.jsxs(_e,{variant:"outline",className:"w-full flex items-center justify-center gap-2 py-2.5 mb-4",onClick:O,disabled:o,children:[y.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[y.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),y.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),y.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),y.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),g?"Sign in with Google":"Sign up with Google"]}),y.jsx("div",{className:"mt-6 text-center text-sm",children:g?y.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",y.jsx(mi,{to:"/customer/signup",className:"text-blue-600 hover:underline font-medium",children:"Sign up"})]}):y.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",y.jsx(mi,{to:"/customer/signin",className:"text-blue-600 hover:underline font-medium",children:"Sign in"})]})})]})})},lQ=({children:n})=>{var h,p;const{user:e,loading:t}=ss(),r=Pr(),[i,o]=C.useState(""),[a,c]=C.useState(!0),[u,d]=C.useState(null);if(n||WaiterDashboard,C.useEffect(()=>{var g;if(console.log("WaiterRoute - Auth state changed:",{user:e,loading:t}),(g=r.state)!=null&&g.waiter){console.log("Waiter data found in location state:",r.state.waiter),d(r.state.waiter),o(""),c(!1);return}!t&&!e?(console.error("No authenticated user found"),o("You need to be logged in to access this page"),c(!1)):e&&(console.log("User authenticated:",e.email),o(""),c(!1))},[e,t,r.state]),t||a)return y.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),y.jsx("p",{className:"mt-4 text-gray-600",children:"Loading waiter dashboard..."})]})});if(i){if((h=r.state)!=null&&h.waiter){console.log("Found waiter in location state, proceeding to dashboard...");const g=In.Children.map(n,_=>In.isValidElement(_)?In.cloneElement(_,{waiter:r.state.waiter}):_);return y.jsx(y.Fragment,{children:g})}return y.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:y.jsxs("div",{className:"max-w-md p-6 bg-white rounded-lg shadow-md text-center",children:[y.jsx("div",{className:"flex justify-center mb-4",children:y.jsx($o,{className:"w-12 h-12 text-red-500"})}),y.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Access Denied"}),y.jsx("p",{className:"text-gray-600 mb-6",children:i}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(_e,{onClick:()=>window.location.href="/landing",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:"Go to Login"}),y.jsx(_e,{variant:"outline",onClick:()=>window.location.reload(),className:"w-full",children:"Try Again"})]})]})})}if(u||(p=r.state)!=null&&p.waiter){const g=u||r.state.waiter;console.log("Rendering WaiterDashboard with data:",g);const _=In.Children.map(n,E=>In.isValidElement(E)?In.cloneElement(E,{waiter:g,key:g.id||"waiter-dashboard"}):E);return y.jsx(y.Fragment,{children:_})}return y.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),y.jsx("p",{className:"mt-4 text-gray-600",children:"Loading waiter dashboard..."})]})})},cQ=({children:n})=>{const{currentUser:e,loading:t}=ss(),r=Pr();return t?y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e?n||y.jsx(f6,{}):y.jsx(Tp,{to:"/customer/signin",state:{from:r},replace:!0})};function uQ(){return y.jsx(hV,{children:y.jsx(D7,{children:y.jsxs(h6,{children:[y.jsx(Kt,{path:"/",element:y.jsx(rQ,{})}),y.jsx(Kt,{path:"/landing",element:y.jsx(iQ,{})}),y.jsx(Kt,{path:"/signin",element:y.jsx(JS,{mode:"signin"})}),y.jsx(Kt,{path:"/signup",element:y.jsx(JS,{mode:"signup"})}),y.jsx(Kt,{path:"/customer/signin",element:y.jsx(e6,{mode:"signin"})}),y.jsx(Kt,{path:"/customer/signup",element:y.jsx(e6,{mode:"signup"})}),y.jsx(Kt,{path:"/customer/*",element:y.jsx(cQ,{children:y.jsx(CX,{})})}),y.jsx(Kt,{path:"/restaurant",element:y.jsx(JK,{})}),y.jsx(Kt,{path:"/waiterhome",element:y.jsx(sQ,{})}),y.jsx(Kt,{path:"/waiter/:waiterId",element:y.jsx(lQ,{children:y.jsx(kX,{})})}),y.jsx(Kt,{path:"/restaurant/waiter",element:y.jsx(Tp,{to:"/waiter",replace:!0})}),y.jsx(Kt,{path:"*",element:y.jsx(Tp,{to:"/",replace:!0})})]})})})}m9.createRoot(document.getElementById("root")).render(y.jsx(C.StrictMode,{children:y.jsx(uQ,{})}));export{dI as _,dQ as c,pv as g};
//# sourceMappingURL=index-DEfTVqin.js.map
