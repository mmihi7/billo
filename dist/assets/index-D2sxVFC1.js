function eN(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Ry(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jp={exports:{}},zc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s1;function tN(){if(s1)return zc;s1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:s,key:u,ref:a!==void 0?a:null,props:l}}return zc.Fragment=e,zc.jsx=t,zc.jsxs=t,zc}var i1;function nN(){return i1||(i1=1,Jp.exports=tN()),Jp.exports}var m=nN(),eg={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a1;function rN(){if(a1)return Ve;a1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function _(U){return U===null||typeof U!="object"?null:(U=w&&U[w]||U["@@iterator"],typeof U=="function"?U:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,C={};function k(U,G,re){this.props=U,this.context=G,this.refs=C,this.updater=re||S}k.prototype.isReactComponent={},k.prototype.setState=function(U,G){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,G,"setState")},k.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function P(){}P.prototype=k.prototype;function B(U,G,re){this.props=U,this.context=G,this.refs=C,this.updater=re||S}var H=B.prototype=new P;H.constructor=B,R(H,k.prototype),H.isPureReactComponent=!0;var M=Array.isArray,K={H:null,A:null,T:null,S:null,V:null},ne=Object.prototype.hasOwnProperty;function I(U,G,re,Q,se,de){return re=de.ref,{$$typeof:n,type:U,key:G,ref:re!==void 0?re:null,props:de}}function A(U,G){return I(U.type,G,void 0,void 0,void 0,U.props)}function O(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function L(U){var G={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(re){return G[re]})}var z=/\/+/g;function F(U,G){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):G.toString(36)}function j(){}function Me(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(j,j):(U.status="pending",U.then(function(G){U.status==="pending"&&(U.status="fulfilled",U.value=G)},function(G){U.status==="pending"&&(U.status="rejected",U.reason=G)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function Ce(U,G,re,Q,se){var de=typeof U;(de==="undefined"||de==="boolean")&&(U=null);var fe=!1;if(U===null)fe=!0;else switch(de){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(U.$$typeof){case n:case e:fe=!0;break;case v:return fe=U._init,Ce(fe(U._payload),G,re,Q,se)}}if(fe)return se=se(U),fe=Q===""?"."+F(U,0):Q,M(se)?(re="",fe!=null&&(re=fe.replace(z,"$&/")+"/"),Ce(se,G,re,"",function(Dt){return Dt})):se!=null&&(O(se)&&(se=A(se,re+(se.key==null||U&&U.key===se.key?"":(""+se.key).replace(z,"$&/")+"/")+fe)),G.push(se)),1;fe=0;var Te=Q===""?".":Q+":";if(M(U))for(var Ue=0;Ue<U.length;Ue++)Q=U[Ue],de=Te+F(Q,Ue),fe+=Ce(Q,G,re,de,se);else if(Ue=_(U),typeof Ue=="function")for(U=Ue.call(U),Ue=0;!(Q=U.next()).done;)Q=Q.value,de=Te+F(Q,Ue++),fe+=Ce(Q,G,re,de,se);else if(de==="object"){if(typeof U.then=="function")return Ce(Me(U),G,re,Q,se);throw G=String(U),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return fe}function Y(U,G,re){if(U==null)return U;var Q=[],se=0;return Ce(U,Q,"","",function(de){return G.call(re,de,se++)}),Q}function he(U){if(U._status===-1){var G=U._result;G=G(),G.then(function(re){(U._status===0||U._status===-1)&&(U._status=1,U._result=re)},function(re){(U._status===0||U._status===-1)&&(U._status=2,U._result=re)}),U._status===-1&&(U._status=0,U._result=G)}if(U._status===1)return U._result.default;throw U._result}var ue=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function Re(){}return Ve.Children={map:Y,forEach:function(U,G,re){Y(U,function(){G.apply(this,arguments)},re)},count:function(U){var G=0;return Y(U,function(){G++}),G},toArray:function(U){return Y(U,function(G){return G})||[]},only:function(U){if(!O(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ve.Component=k,Ve.Fragment=t,Ve.Profiler=a,Ve.PureComponent=B,Ve.StrictMode=s,Ve.Suspense=g,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(U){return K.H.useMemoCache(U)}},Ve.cache=function(U){return function(){return U.apply(null,arguments)}},Ve.cloneElement=function(U,G,re){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var Q=R({},U.props),se=U.key,de=void 0;if(G!=null)for(fe in G.ref!==void 0&&(de=void 0),G.key!==void 0&&(se=""+G.key),G)!ne.call(G,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&G.ref===void 0||(Q[fe]=G[fe]);var fe=arguments.length-2;if(fe===1)Q.children=re;else if(1<fe){for(var Te=Array(fe),Ue=0;Ue<fe;Ue++)Te[Ue]=arguments[Ue+2];Q.children=Te}return I(U.type,se,void 0,void 0,de,Q)},Ve.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},Ve.createElement=function(U,G,re){var Q,se={},de=null;if(G!=null)for(Q in G.key!==void 0&&(de=""+G.key),G)ne.call(G,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(se[Q]=G[Q]);var fe=arguments.length-2;if(fe===1)se.children=re;else if(1<fe){for(var Te=Array(fe),Ue=0;Ue<fe;Ue++)Te[Ue]=arguments[Ue+2];se.children=Te}if(U&&U.defaultProps)for(Q in fe=U.defaultProps,fe)se[Q]===void 0&&(se[Q]=fe[Q]);return I(U,de,void 0,void 0,null,se)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(U){return{$$typeof:h,render:U}},Ve.isValidElement=O,Ve.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:he}},Ve.memo=function(U,G){return{$$typeof:p,type:U,compare:G===void 0?null:G}},Ve.startTransition=function(U){var G=K.T,re={};K.T=re;try{var Q=U(),se=K.S;se!==null&&se(re,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(Re,ue)}catch(de){ue(de)}finally{K.T=G}},Ve.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},Ve.use=function(U){return K.H.use(U)},Ve.useActionState=function(U,G,re){return K.H.useActionState(U,G,re)},Ve.useCallback=function(U,G){return K.H.useCallback(U,G)},Ve.useContext=function(U){return K.H.useContext(U)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(U,G){return K.H.useDeferredValue(U,G)},Ve.useEffect=function(U,G,re){var Q=K.H;if(typeof re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(U,G)},Ve.useId=function(){return K.H.useId()},Ve.useImperativeHandle=function(U,G,re){return K.H.useImperativeHandle(U,G,re)},Ve.useInsertionEffect=function(U,G){return K.H.useInsertionEffect(U,G)},Ve.useLayoutEffect=function(U,G){return K.H.useLayoutEffect(U,G)},Ve.useMemo=function(U,G){return K.H.useMemo(U,G)},Ve.useOptimistic=function(U,G){return K.H.useOptimistic(U,G)},Ve.useReducer=function(U,G,re){return K.H.useReducer(U,G,re)},Ve.useRef=function(U){return K.H.useRef(U)},Ve.useState=function(U){return K.H.useState(U)},Ve.useSyncExternalStore=function(U,G,re){return K.H.useSyncExternalStore(U,G,re)},Ve.useTransition=function(){return K.H.useTransition()},Ve.version="19.1.0",Ve}var o1;function xu(){return o1||(o1=1,eg.exports=rN()),eg.exports}var T=xu();const Jt=Ry(T),qx=eN({__proto__:null,default:Jt},[T]);var tg={exports:{}},Bc={},ng={exports:{}},rg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1;function sN(){return l1||(l1=1,function(n){function e(Y,he){var ue=Y.length;Y.push(he);e:for(;0<ue;){var Re=ue-1>>>1,U=Y[Re];if(0<a(U,he))Y[Re]=he,Y[ue]=U,ue=Re;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var he=Y[0],ue=Y.pop();if(ue!==he){Y[0]=ue;e:for(var Re=0,U=Y.length,G=U>>>1;Re<G;){var re=2*(Re+1)-1,Q=Y[re],se=re+1,de=Y[se];if(0>a(Q,ue))se<U&&0>a(de,Q)?(Y[Re]=de,Y[se]=ue,Re=se):(Y[Re]=Q,Y[re]=ue,Re=re);else if(se<U&&0>a(de,ue))Y[Re]=de,Y[se]=ue,Re=se;else break e}}return he}function a(Y,he){var ue=Y.sortIndex-he.sortIndex;return ue!==0?ue:Y.id-he.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var g=[],p=[],v=1,w=null,_=3,S=!1,R=!1,C=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function M(Y){for(var he=t(p);he!==null;){if(he.callback===null)s(p);else if(he.startTime<=Y)s(p),he.sortIndex=he.expirationTime,e(g,he);else break;he=t(p)}}function K(Y){if(C=!1,M(Y),!R)if(t(g)!==null)R=!0,ne||(ne=!0,F());else{var he=t(p);he!==null&&Ce(K,he.startTime-Y)}}var ne=!1,I=-1,A=5,O=-1;function L(){return k?!0:!(n.unstable_now()-O<A)}function z(){if(k=!1,ne){var Y=n.unstable_now();O=Y;var he=!0;try{e:{R=!1,C&&(C=!1,B(I),I=-1),S=!0;var ue=_;try{t:{for(M(Y),w=t(g);w!==null&&!(w.expirationTime>Y&&L());){var Re=w.callback;if(typeof Re=="function"){w.callback=null,_=w.priorityLevel;var U=Re(w.expirationTime<=Y);if(Y=n.unstable_now(),typeof U=="function"){w.callback=U,M(Y),he=!0;break t}w===t(g)&&s(g),M(Y)}else s(g);w=t(g)}if(w!==null)he=!0;else{var G=t(p);G!==null&&Ce(K,G.startTime-Y),he=!1}}break e}finally{w=null,_=ue,S=!1}he=void 0}}finally{he?F():ne=!1}}}var F;if(typeof H=="function")F=function(){H(z)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Me=j.port2;j.port1.onmessage=z,F=function(){Me.postMessage(null)}}else F=function(){P(z,0)};function Ce(Y,he){I=P(function(){Y(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(Y){switch(_){case 1:case 2:case 3:var he=3;break;default:he=_}var ue=_;_=he;try{return Y()}finally{_=ue}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(Y,he){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ue=_;_=Y;try{return he()}finally{_=ue}},n.unstable_scheduleCallback=function(Y,he,ue){var Re=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Re+ue:Re):ue=Re,Y){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ue+U,Y={id:v++,callback:he,priorityLevel:Y,startTime:ue,expirationTime:U,sortIndex:-1},ue>Re?(Y.sortIndex=ue,e(p,Y),t(g)===null&&Y===t(p)&&(C?(B(I),I=-1):C=!0,Ce(K,ue-Re))):(Y.sortIndex=U,e(g,Y),R||S||(R=!0,ne||(ne=!0,F()))),Y},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(Y){var he=_;return function(){var ue=_;_=he;try{return Y.apply(this,arguments)}finally{_=ue}}}}(rg)),rg}var c1;function iN(){return c1||(c1=1,ng.exports=sN()),ng.exports}var sg={exports:{}},Nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u1;function aN(){if(u1)return Nn;u1=1;var n=xu();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:g,containerInfo:p,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Nn.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,v)},Nn.flushSync=function(g){var p=u.T,v=s.p;try{if(u.T=null,s.p=2,g)return g()}finally{u.T=p,s.p=v,s.d.f()}},Nn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},Nn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Nn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,w=h(v,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:_,fetchPriority:S}):v==="script"&&s.d.X(g,{crossOrigin:w,integrity:_,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Nn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},Nn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,w=h(v,p.crossOrigin);s.d.L(g,v,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Nn.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=h(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},Nn.requestFormReset=function(g){s.d.r(g)},Nn.unstable_batchedUpdates=function(g,p){return g(p)},Nn.useFormState=function(g,p,v){return u.H.useFormState(g,p,v)},Nn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Nn.version="19.1.0",Nn}var d1;function Hx(){if(d1)return sg.exports;d1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sg.exports=aN(),sg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h1;function oN(){if(h1)return Bc;h1=1;var n=iN(),e=xu(),t=Hx();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function u(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function h(r){if(l(r)!==r)throw Error(s(188))}function g(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(s(188));return i!==r?null:r}for(var o=r,c=i;;){var f=o.return;if(f===null)break;var y=f.alternate;if(y===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===o)return h(f),r;if(y===c)return h(f),i;y=y.sibling}throw Error(s(188))}if(o.return!==c.return)o=f,c=y;else{for(var E=!1,N=f.child;N;){if(N===o){E=!0,o=f,c=y;break}if(N===c){E=!0,c=f,o=y;break}N=N.sibling}if(!E){for(N=y.child;N;){if(N===o){E=!0,o=y,c=f;break}if(N===c){E=!0,c=y,o=f;break}N=N.sibling}if(!E)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?r:i}function p(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=p(r),i!==null)return i;r=r.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),H=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function F(r){return r===null||typeof r!="object"?null:(r=z&&r[z]||r["@@iterator"],typeof r=="function"?r:null)}var j=Symbol.for("react.client.reference");function Me(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===j?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case k:return"Profiler";case C:return"StrictMode";case K:return"Suspense";case ne:return"SuspenseList";case O:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case H:return(r.displayName||"Context")+".Provider";case B:return(r._context.displayName||"Context")+".Consumer";case M:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case I:return i=r.displayName||null,i!==null?i:Me(r.type)||"Memo";case A:i=r._payload,r=r._init;try{return Me(r(i))}catch{}}return null}var Ce=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},Re=[],U=-1;function G(r){return{current:r}}function re(r){0>U||(r.current=Re[U],Re[U]=null,U--)}function Q(r,i){U++,Re[U]=r.current,r.current=i}var se=G(null),de=G(null),fe=G(null),Te=G(null);function Ue(r,i){switch(Q(fe,i),Q(de,r),Q(se,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?k_(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=k_(i),r=O_(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}re(se),Q(se,r)}function Dt(){re(se),re(de),re(fe)}function rt(r){r.memoizedState!==null&&Q(Te,r);var i=se.current,o=O_(i,r.type);i!==o&&(Q(de,r),Q(se,o))}function xe(r){de.current===r&&(re(se),re(de)),Te.current===r&&(re(Te),jc._currentValue=ue)}var ye=Object.prototype.hasOwnProperty,ve=n.unstable_scheduleCallback,lt=n.unstable_cancelCallback,Mt=n.unstable_shouldYield,Ln=n.unstable_requestPaint,pn=n.unstable_now,os=n.unstable_getCurrentPriorityLevel,Ys=n.unstable_ImmediatePriority,Ya=n.unstable_UserBlockingPriority,Zi=n.unstable_NormalPriority,em=n.unstable_LowPriority,Xa=n.unstable_IdlePriority,Pl=n.log,Hu=n.unstable_setDisableYieldValue,Nt=null,it=null;function Hn(r){if(typeof Pl=="function"&&Hu(r),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(Nt,r)}catch{}}var An=Math.clz32?Math.clz32:Ji,Gu=Math.log,tm=Math.LN2;function Ji(r){return r>>>=0,r===0?32:31-(Gu(r)/tm|0)|0}var ea=256,ta=4194304;function wr(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Za(r,i,o){var c=r.pendingLanes;if(c===0)return 0;var f=0,y=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var N=c&134217727;return N!==0?(c=N&~y,c!==0?f=wr(c):(E&=N,E!==0?f=wr(E):o||(o=N&~r,o!==0&&(f=wr(o))))):(N=c&~y,N!==0?f=wr(N):E!==0?f=wr(E):o||(o=c&~r,o!==0&&(f=wr(o)))),f===0?0:i!==0&&i!==f&&(i&y)===0&&(y=f&-f,o=i&-i,y>=o||y===32&&(o&4194048)!==0)?i:f}function na(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function jl(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ml(){var r=ea;return ea<<=1,(ea&4194048)===0&&(ea=256),r}function Vl(){var r=ta;return ta<<=1,(ta&62914560)===0&&(ta=4194304),r}function ls(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function cs(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ll(r,i,o,c,f,y){var E=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var N=r.entanglements,V=r.expirationTimes,Z=r.hiddenUpdates;for(o=E&~o;0<o;){var ae=31-An(o),le=1<<ae;N[ae]=0,V[ae]=-1;var J=Z[ae];if(J!==null)for(Z[ae]=null,ae=0;ae<J.length;ae++){var ee=J[ae];ee!==null&&(ee.lane&=-536870913)}o&=~le}c!==0&&Mr(r,c,0),y!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=y&~(E&~i))}function Mr(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var c=31-An(i);r.entangledLanes|=i,r.entanglements[c]=r.entanglements[c]|1073741824|o&4194090}function Ul(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var c=31-An(o),f=1<<c;f&i|r[c]&i&&(r[c]|=i),o&=~f}}function Xs(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ja(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Zs(){var r=he.p;return r!==0?r:(r=window.event,r===void 0?32:Z_(r.type))}function $u(r,i){var o=he.p;try{return he.p=r,i()}finally{he.p=o}}var _t=Math.random().toString(36).slice(2),Kt="__reactFiber$"+_t,Vt="__reactProps$"+_t,rr="__reactContainer$"+_t,zl="__reactEvents$"+_t,nm="__reactListeners$"+_t,Js="__reactHandles$"+_t,Ku="__reactResources$"+_t,ra="__reactMarker$"+_t;function ei(r){delete r[Kt],delete r[Vt],delete r[zl],delete r[nm],delete r[Js]}function us(r){var i=r[Kt];if(i)return i;for(var o=r.parentNode;o;){if(i=o[rr]||o[Kt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=V_(r);r!==null;){if(o=r[Kt])return o;r=V_(r)}return i}r=o,o=r.parentNode}return null}function Vr(r){if(r=r[Kt]||r[rr]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function Lr(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function kn(r){var i=r[Ku];return i||(i=r[Ku]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function kt(r){r[ra]=!0}var Bl=new Set,eo={};function xr(r,i){ds(r,i),ds(r+"Capture",i)}function ds(r,i){for(eo[r]=i,r=0;r<i.length;r++)Bl.add(i[r])}var Qu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wu={},sa={};function Yu(r){return ye.call(sa,r)?!0:ye.call(Wu,r)?!1:Qu.test(r)?sa[r]=!0:(Wu[r]=!0,!1)}function ti(r,i,o){if(Yu(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function Ur(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function gn(r,i,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+c)}}var ia,Xu;function hs(r){if(ia===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);ia=i&&i[1]||"",Xu=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ia+r+Xu}var to=!1;function no(r,i){if(!r||to)return"";to=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ee){var J=ee}Reflect.construct(r,[],le)}else{try{le.call()}catch(ee){J=ee}r.call(le.prototype)}}else{try{throw Error()}catch(ee){J=ee}(le=r())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ee){if(ee&&J&&typeof ee.stack=="string")return[ee.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),E=y[0],N=y[1];if(E&&N){var V=E.split(`
`),Z=N.split(`
`);for(f=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;if(c===V.length||f===Z.length)for(c=V.length-1,f=Z.length-1;1<=c&&0<=f&&V[c]!==Z[f];)f--;for(;1<=c&&0<=f;c--,f--)if(V[c]!==Z[f]){if(c!==1||f!==1)do if(c--,f--,0>f||V[c]!==Z[f]){var ae=`
`+V[c].replace(" at new "," at ");return r.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",r.displayName)),ae}while(1<=c&&0<=f);break}}}finally{to=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?hs(o):""}function Fl(r){switch(r.tag){case 26:case 27:case 5:return hs(r.type);case 16:return hs("Lazy");case 13:return hs("Suspense");case 19:return hs("SuspenseList");case 0:case 15:return no(r.type,!1);case 11:return no(r.type.render,!1);case 1:return no(r.type,!0);case 31:return hs("Activity");default:return""}}function ro(r){try{var i="";do i+=Fl(r),r=r.return;while(r);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function On(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ql(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function rm(r){var i=ql(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),c=""+r[i];if(!r.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,y=o.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){c=""+E,y.call(this,E)}}),Object.defineProperty(r,i,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function so(r){r._valueTracker||(r._valueTracker=rm(r))}function Hl(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return r&&(c=ql(r)?r.checked?"true":"false":r.value),r=c,r!==o?(i.setValue(r),!0):!1}function aa(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var sm=/[\n"\\]/g;function Lt(r){return r.replace(sm,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Gn(r,i,o,c,f,y,E,N){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),i!=null?E==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+On(i)):r.value!==""+On(i)&&(r.value=""+On(i)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),i!=null?ni(r,E,On(i)):o!=null?ni(r,E,On(o)):c!=null&&r.removeAttribute("value"),f==null&&y!=null&&(r.defaultChecked=!!y),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?r.name=""+On(N):r.removeAttribute("name")}function oa(r,i,o,c,f,y,E,N){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null))return;o=o!=null?""+On(o):"",i=i!=null?""+On(i):o,N||i===r.value||(r.value=i),r.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=N?r.checked:!!c,r.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E)}function ni(r,i,o){i==="number"&&aa(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function fs(r,i,o,c){if(r=r.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=i.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&c&&(r[o].defaultSelected=!0)}else{for(o=""+On(o),i=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,c&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function ct(r,i,o){if(i!=null&&(i=""+On(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+On(o):""}function la(r,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(s(92));if(Ce(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=On(i),r.defaultValue=o,c=r.textContent,c===o&&c!==""&&c!==null&&(r.value=c)}function sr(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var ca=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zu(r,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":c?r.setProperty(i,o):typeof o!="number"||o===0||ca.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function Gl(r,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&o[f]!==c&&Zu(r,f,c)}else for(var y in i)i.hasOwnProperty(y)&&Zu(r,y,i[y])}function $l(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var im=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),am=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function io(r){return am.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var ms=null;function ir(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ps=null,gs=null;function Kl(r){var i=Vr(r);if(i&&(r=i.stateNode)){var o=r[Vt]||null;e:switch(r=i.stateNode,i.type){case"input":if(Gn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Lt(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==r&&c.form===r.form){var f=c[Vt]||null;if(!f)throw Error(s(90));Gn(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===r.form&&Hl(c)}break e;case"textarea":ct(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&fs(r,!!o.multiple,i,!1)}}}var zr=!1;function Ju(r,i,o){if(zr)return r(i,o);zr=!0;try{var c=r(i);return c}finally{if(zr=!1,(ps!==null||gs!==null)&&($d(),ps&&(i=ps,r=gs,gs=ps=null,Kl(i),r)))for(i=0;i<r.length;i++)Kl(r[i])}}function ua(r,i){var o=r.stateNode;if(o===null)return null;var c=o[Vt]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ar=!1;if(Er)try{var da={};Object.defineProperty(da,"passive",{get:function(){ar=!0}}),window.addEventListener("test",da,da),window.removeEventListener("test",da,da)}catch{ar=!1}var Br=null,ri=null,ys=null;function Ql(){if(ys)return ys;var r,i=ri,o=i.length,c,f="value"in Br?Br.value:Br.textContent,y=f.length;for(r=0;r<o&&i[r]===f[r];r++);var E=o-r;for(c=1;c<=E&&i[o-c]===f[y-c];c++);return ys=f.slice(r,1<c?1-c:void 0)}function Fr(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function qr(){return!0}function Wl(){return!1}function nn(r){function i(o,c,f,y,E){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var N in r)r.hasOwnProperty(N)&&(o=r[N],this[N]=o?o(y):y[N]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?qr:Wl,this.isPropagationStopped=Wl,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=qr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=qr)},persist:function(){},isPersistent:qr}),i}var st={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ao=nn(st),ha=v({},st,{view:0,detail:0}),ed=nn(ha),oo,lo,Hr,fa=v({},ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ga,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Hr&&(Hr&&r.type==="mousemove"?(oo=r.screenX-Hr.screenX,lo=r.screenY-Hr.screenY):lo=oo=0,Hr=r),oo)},movementY:function(r){return"movementY"in r?r.movementY:lo}}),or=nn(fa),td=v({},fa,{dataTransfer:0}),om=nn(td),ma=v({},ha,{relatedTarget:0}),co=nn(ma),Yl=v({},st,{animationName:0,elapsedTime:0,pseudoElement:0}),uo=nn(Yl),nd=v({},st,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ho=nn(nd),lm=v({},st,{data:0}),Xl=nn(lm),pa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zl(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=sd[r])?!!i[r]:!1}function ga(){return Zl}var id=v({},ha,{key:function(r){if(r.key){var i=pa[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Fr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?rd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ga,charCode:function(r){return r.type==="keypress"?Fr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Fr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),fo=nn(id),ad=v({},fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jl=nn(ad),vs=v({},ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ga}),od=nn(vs),ld=v({},st,{propertyName:0,elapsedTime:0,pseudoElement:0}),cd=nn(ld),ud=v({},fa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),mo=nn(ud),Pn=v({},st,{newState:0,oldState:0}),dd=nn(Pn),hd=[9,13,27,32],Gr=Er&&"CompositionEvent"in window,d=null;Er&&"documentMode"in document&&(d=document.documentMode);var b=Er&&"TextEvent"in window&&!d,x=Er&&(!Gr||d&&8<d&&11>=d),D=" ",W=!1;function te(r,i){switch(r){case"keyup":return hd.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function me(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Qe=!1;function Qt(r,i){switch(r){case"compositionend":return me(i);case"keypress":return i.which!==32?null:(W=!0,D);case"textInput":return r=i.data,r===D&&W?null:r;default:return null}}function We(r,i){if(Qe)return r==="compositionend"||!Gr&&te(r,i)?(r=Ql(),ys=ri=Br=null,Qe=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return x&&i.locale!=="ko"?null:i.data;default:return null}}var rn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wt(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!rn[r.type]:i==="textarea"}function bs(r,i,o,c){ps?gs?gs.push(c):gs=[c]:ps=c,i=Zd(i,"onChange"),0<i.length&&(o=new ao("onChange","change",null,o,c),r.push({event:o,listeners:i}))}var yn=null,$r=null;function ec(r){R_(r,0)}function fd(r){var i=Lr(r);if(Hl(i))return r}function Qv(r,i){if(r==="change")return i}var Wv=!1;if(Er){var cm;if(Er){var um="oninput"in document;if(!um){var Yv=document.createElement("div");Yv.setAttribute("oninput","return;"),um=typeof Yv.oninput=="function"}cm=um}else cm=!1;Wv=cm&&(!document.documentMode||9<document.documentMode)}function Xv(){yn&&(yn.detachEvent("onpropertychange",Zv),$r=yn=null)}function Zv(r){if(r.propertyName==="value"&&fd($r)){var i=[];bs(i,$r,r,ir(r)),Ju(ec,i)}}function I2(r,i,o){r==="focusin"?(Xv(),yn=i,$r=o,yn.attachEvent("onpropertychange",Zv)):r==="focusout"&&Xv()}function D2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return fd($r)}function k2(r,i){if(r==="click")return fd(i)}function O2(r,i){if(r==="input"||r==="change")return fd(i)}function P2(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var $n=typeof Object.is=="function"?Object.is:P2;function tc(r,i){if($n(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!ye.call(i,f)||!$n(r[f],i[f]))return!1}return!0}function Jv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function e0(r,i){var o=Jv(r);r=0;for(var c;o;){if(o.nodeType===3){if(c=r+o.textContent.length,r<=i&&c>=i)return{node:o,offset:i-r};r=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Jv(o)}}function t0(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?t0(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function n0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=aa(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=aa(r.document)}return i}function dm(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var j2=Er&&"documentMode"in document&&11>=document.documentMode,po=null,hm=null,nc=null,fm=!1;function r0(r,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;fm||po==null||po!==aa(c)||(c=po,"selectionStart"in c&&dm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),nc&&tc(nc,c)||(nc=c,c=Zd(hm,"onSelect"),0<c.length&&(i=new ao("onSelect","select",null,i,o),r.push({event:i,listeners:c}),i.target=po)))}function ya(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var go={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionrun:ya("Transition","TransitionRun"),transitionstart:ya("Transition","TransitionStart"),transitioncancel:ya("Transition","TransitionCancel"),transitionend:ya("Transition","TransitionEnd")},mm={},s0={};Er&&(s0=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function va(r){if(mm[r])return mm[r];if(!go[r])return r;var i=go[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in s0)return mm[r]=i[o];return r}var i0=va("animationend"),a0=va("animationiteration"),o0=va("animationstart"),M2=va("transitionrun"),V2=va("transitionstart"),L2=va("transitioncancel"),l0=va("transitionend"),c0=new Map,pm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pm.push("scrollEnd");function Tr(r,i){c0.set(r,i),xr(i,[r])}var u0=new WeakMap;function lr(r,i){if(typeof r=="object"&&r!==null){var o=u0.get(r);return o!==void 0?o:(i={value:r,source:i,stack:ro(i)},u0.set(r,i),i)}return{value:r,source:i,stack:ro(i)}}var cr=[],yo=0,gm=0;function md(){for(var r=yo,i=gm=yo=0;i<r;){var o=cr[i];cr[i++]=null;var c=cr[i];cr[i++]=null;var f=cr[i];cr[i++]=null;var y=cr[i];if(cr[i++]=null,c!==null&&f!==null){var E=c.pending;E===null?f.next=f:(f.next=E.next,E.next=f),c.pending=f}y!==0&&d0(o,f,y)}}function pd(r,i,o,c){cr[yo++]=r,cr[yo++]=i,cr[yo++]=o,cr[yo++]=c,gm|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function ym(r,i,o,c){return pd(r,i,o,c),gd(r)}function vo(r,i){return pd(r,null,null,i),gd(r)}function d0(r,i,o){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o);for(var f=!1,y=r.return;y!==null;)y.childLanes|=o,c=y.alternate,c!==null&&(c.childLanes|=o),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(f=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,f&&i!==null&&(f=31-An(o),r=y.hiddenUpdates,c=r[f],c===null?r[f]=[i]:c.push(i),i.lane=o|536870912),y):null}function gd(r){if(50<Rc)throw Rc=0,Ep=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var bo={};function U2(r,i,o,c){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(r,i,o,c){return new U2(r,i,o,c)}function vm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function _s(r,i){var o=r.alternate;return o===null?(o=Kn(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function h0(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function yd(r,i,o,c,f,y){var E=0;if(c=r,typeof r=="function")vm(r)&&(E=1);else if(typeof r=="string")E=BR(r,o,se.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case O:return r=Kn(31,o,i,f),r.elementType=O,r.lanes=y,r;case R:return ba(o.children,f,y,i);case C:E=8,f|=24;break;case k:return r=Kn(12,o,i,f|2),r.elementType=k,r.lanes=y,r;case K:return r=Kn(13,o,i,f),r.elementType=K,r.lanes=y,r;case ne:return r=Kn(19,o,i,f),r.elementType=ne,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case P:case H:E=10;break e;case B:E=9;break e;case M:E=11;break e;case I:E=14;break e;case A:E=16,c=null;break e}E=29,o=Error(s(130,r===null?"null":typeof r,"")),c=null}return i=Kn(E,o,i,f),i.elementType=r,i.type=c,i.lanes=y,i}function ba(r,i,o,c){return r=Kn(7,r,c,i),r.lanes=o,r}function bm(r,i,o){return r=Kn(6,r,null,i),r.lanes=o,r}function _m(r,i,o){return i=Kn(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var _o=[],wo=0,vd=null,bd=0,ur=[],dr=0,_a=null,ws=1,xs="";function wa(r,i){_o[wo++]=bd,_o[wo++]=vd,vd=r,bd=i}function f0(r,i,o){ur[dr++]=ws,ur[dr++]=xs,ur[dr++]=_a,_a=r;var c=ws;r=xs;var f=32-An(c)-1;c&=~(1<<f),o+=1;var y=32-An(i)+f;if(30<y){var E=f-f%5;y=(c&(1<<E)-1).toString(32),c>>=E,f-=E,ws=1<<32-An(i)+f|o<<f|c,xs=y+r}else ws=1<<y|o<<f|c,xs=r}function wm(r){r.return!==null&&(wa(r,1),f0(r,1,0))}function xm(r){for(;r===vd;)vd=_o[--wo],_o[wo]=null,bd=_o[--wo],_o[wo]=null;for(;r===_a;)_a=ur[--dr],ur[dr]=null,xs=ur[--dr],ur[dr]=null,ws=ur[--dr],ur[dr]=null}var jn=null,Ct=null,nt=!1,xa=null,Kr=!1,Em=Error(s(519));function Ea(r){var i=Error(s(418,""));throw ic(lr(i,r)),Em}function m0(r){var i=r.stateNode,o=r.type,c=r.memoizedProps;switch(i[Kt]=r,i[Vt]=c,o){case"dialog":Ge("cancel",i),Ge("close",i);break;case"iframe":case"object":case"embed":Ge("load",i);break;case"video":case"audio":for(o=0;o<Cc.length;o++)Ge(Cc[o],i);break;case"source":Ge("error",i);break;case"img":case"image":case"link":Ge("error",i),Ge("load",i);break;case"details":Ge("toggle",i);break;case"input":Ge("invalid",i),oa(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),so(i);break;case"select":Ge("invalid",i);break;case"textarea":Ge("invalid",i),la(i,c.value,c.defaultValue,c.children),so(i)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||D_(i.textContent,o)?(c.popover!=null&&(Ge("beforetoggle",i),Ge("toggle",i)),c.onScroll!=null&&Ge("scroll",i),c.onScrollEnd!=null&&Ge("scrollend",i),c.onClick!=null&&(i.onclick=Jd),i=!0):i=!1,i||Ea(r)}function p0(r){for(jn=r.return;jn;)switch(jn.tag){case 5:case 13:Kr=!1;return;case 27:case 3:Kr=!0;return;default:jn=jn.return}}function rc(r){if(r!==jn)return!1;if(!nt)return p0(r),nt=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Up(r.type,r.memoizedProps)),o=!o),o&&Ct&&Ea(r),p0(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(i===0){Ct=Ar(r.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;r=r.nextSibling}Ct=null}}else i===27?(i=Ct,bi(r.type)?(r=qp,qp=null,Ct=r):Ct=i):Ct=jn?Ar(r.stateNode.nextSibling):null;return!0}function sc(){Ct=jn=null,nt=!1}function g0(){var r=xa;return r!==null&&(Bn===null?Bn=r:Bn.push.apply(Bn,r),xa=null),r}function ic(r){xa===null?xa=[r]:xa.push(r)}var Tm=G(null),Ta=null,Es=null;function si(r,i,o){Q(Tm,i._currentValue),i._currentValue=o}function Ts(r){r._currentValue=Tm.current,re(Tm)}function Sm(r,i,o){for(;r!==null;){var c=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),r===o)break;r=r.return}}function Am(r,i,o,c){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var y=f.dependencies;if(y!==null){var E=f.child;y=y.firstContext;e:for(;y!==null;){var N=y;y=f;for(var V=0;V<i.length;V++)if(N.context===i[V]){y.lanes|=o,N=y.alternate,N!==null&&(N.lanes|=o),Sm(y.return,o,r),c||(E=null);break e}y=N.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(s(341));E.lanes|=o,y=E.alternate,y!==null&&(y.lanes|=o),Sm(E,o,r),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===r){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function ac(r,i,o,c){r=null;for(var f=i,y=!1;f!==null;){if(!y){if((f.flags&524288)!==0)y=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var N=f.type;$n(f.pendingProps.value,E.value)||(r!==null?r.push(N):r=[N])}}else if(f===Te.current){if(E=f.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(jc):r=[jc])}f=f.return}r!==null&&Am(i,r,o,c),i.flags|=262144}function _d(r){for(r=r.firstContext;r!==null;){if(!$n(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Sa(r){Ta=r,Es=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Rn(r){return y0(Ta,r)}function wd(r,i){return Ta===null&&Sa(r),y0(r,i)}function y0(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Es===null){if(r===null)throw Error(s(308));Es=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Es=Es.next=i;return o}var z2=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,c){r.push(c)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},B2=n.unstable_scheduleCallback,F2=n.unstable_NormalPriority,Yt={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rm(){return{controller:new z2,data:new Map,refCount:0}}function oc(r){r.refCount--,r.refCount===0&&B2(F2,function(){r.controller.abort()})}var lc=null,Nm=0,xo=0,Eo=null;function q2(r,i){if(lc===null){var o=lc=[];Nm=0,xo=Ip(),Eo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Nm++,i.then(v0,v0),i}function v0(){if(--Nm===0&&lc!==null){Eo!==null&&(Eo.status="fulfilled");var r=lc;lc=null,xo=0,Eo=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function H2(r,i){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var b0=Y.S;Y.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&q2(r,i),b0!==null&&b0(r,i)};var Aa=G(null);function Cm(){var r=Aa.current;return r!==null?r:gt.pooledCache}function xd(r,i){i===null?Q(Aa,Aa.current):Q(Aa,i.pool)}function _0(){var r=Cm();return r===null?null:{parent:Yt._currentValue,pool:r}}var cc=Error(s(460)),w0=Error(s(474)),Ed=Error(s(542)),Im={then:function(){}};function x0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Td(){}function E0(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(Td,Td),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,S0(r),r;default:if(typeof i.status=="string")i.then(Td,Td);else{if(r=gt,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,S0(r),r}throw uc=i,cc}}var uc=null;function T0(){if(uc===null)throw Error(s(459));var r=uc;return uc=null,r}function S0(r){if(r===cc||r===Ed)throw Error(s(483))}var ii=!1;function Dm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function km(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ai(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function oi(r,i,o){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(at&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=gd(r),d0(r,null,o),i}return pd(r,c,i,o),gd(r)}function dc(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=r.pendingLanes,o|=c,i.lanes=o,Ul(r,o)}}function Om(r,i){var o=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?f=y=E:y=y.next=E,o=o.next}while(o!==null);y===null?f=y=i:y=y.next=i}else f=y=i;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var Pm=!1;function hc(){if(Pm){var r=Eo;if(r!==null)throw r}}function fc(r,i,o,c){Pm=!1;var f=r.updateQueue;ii=!1;var y=f.firstBaseUpdate,E=f.lastBaseUpdate,N=f.shared.pending;if(N!==null){f.shared.pending=null;var V=N,Z=V.next;V.next=null,E===null?y=Z:E.next=Z,E=V;var ae=r.alternate;ae!==null&&(ae=ae.updateQueue,N=ae.lastBaseUpdate,N!==E&&(N===null?ae.firstBaseUpdate=Z:N.next=Z,ae.lastBaseUpdate=V))}if(y!==null){var le=f.baseState;E=0,ae=Z=V=null,N=y;do{var J=N.lane&-536870913,ee=J!==N.lane;if(ee?(Ye&J)===J:(c&J)===J){J!==0&&J===xo&&(Pm=!0),ae!==null&&(ae=ae.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Pe=r,De=N;J=i;var ht=o;switch(De.tag){case 1:if(Pe=De.payload,typeof Pe=="function"){le=Pe.call(ht,le,J);break e}le=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=De.payload,J=typeof Pe=="function"?Pe.call(ht,le,J):Pe,J==null)break e;le=v({},le,J);break e;case 2:ii=!0}}J=N.callback,J!==null&&(r.flags|=64,ee&&(r.flags|=8192),ee=f.callbacks,ee===null?f.callbacks=[J]:ee.push(J))}else ee={lane:J,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ae===null?(Z=ae=ee,V=le):ae=ae.next=ee,E|=J;if(N=N.next,N===null){if(N=f.shared.pending,N===null)break;ee=N,N=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);ae===null&&(V=le),f.baseState=V,f.firstBaseUpdate=Z,f.lastBaseUpdate=ae,y===null&&(f.shared.lanes=0),pi|=E,r.lanes=E,r.memoizedState=le}}function A0(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function R0(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)A0(o[r],i)}var To=G(null),Sd=G(0);function N0(r,i){r=Ds,Q(Sd,r),Q(To,i),Ds=r|i.baseLanes}function jm(){Q(Sd,Ds),Q(To,To.current)}function Mm(){Ds=Sd.current,re(To),re(Sd)}var li=0,ze=null,ut=null,Ut=null,Ad=!1,So=!1,Ra=!1,Rd=0,mc=0,Ao=null,G2=0;function Ot(){throw Error(s(321))}function Vm(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!$n(r[o],i[o]))return!1;return!0}function Lm(r,i,o,c,f,y){return li=y,ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=r===null||r.memoizedState===null?db:hb,Ra=!1,y=o(c,f),Ra=!1,So&&(y=I0(i,o,c,f)),C0(r),y}function C0(r){Y.H=Od;var i=ut!==null&&ut.next!==null;if(li=0,Ut=ut=ze=null,Ad=!1,mc=0,Ao=null,i)throw Error(s(300));r===null||sn||(r=r.dependencies,r!==null&&_d(r)&&(sn=!0))}function I0(r,i,o,c){ze=r;var f=0;do{if(So&&(Ao=null),mc=0,So=!1,25<=f)throw Error(s(301));if(f+=1,Ut=ut=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}Y.H=Z2,y=i(o,c)}while(So);return y}function $2(){var r=Y.H,i=r.useState()[0];return i=typeof i.then=="function"?pc(i):i,r=r.useState()[0],(ut!==null?ut.memoizedState:null)!==r&&(ze.flags|=1024),i}function Um(){var r=Rd!==0;return Rd=0,r}function zm(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Bm(r){if(Ad){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ad=!1}li=0,Ut=ut=ze=null,So=!1,mc=Rd=0,Ao=null}function Un(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?ze.memoizedState=Ut=r:Ut=Ut.next=r,Ut}function zt(){if(ut===null){var r=ze.alternate;r=r!==null?r.memoizedState:null}else r=ut.next;var i=Ut===null?ze.memoizedState:Ut.next;if(i!==null)Ut=i,ut=r;else{if(r===null)throw ze.alternate===null?Error(s(467)):Error(s(310));ut=r,r={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Ut===null?ze.memoizedState=Ut=r:Ut=Ut.next=r}return Ut}function Fm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pc(r){var i=mc;return mc+=1,Ao===null&&(Ao=[]),r=E0(Ao,r,i),i=ze,(Ut===null?i.memoizedState:Ut.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?db:hb),r}function Nd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return pc(r);if(r.$$typeof===H)return Rn(r)}throw Error(s(438,String(r)))}function qm(r){var i=null,o=ze.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=ze.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Fm(),ze.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),c=0;c<r;c++)o[c]=L;return i.index++,o}function Ss(r,i){return typeof i=="function"?i(r):i}function Cd(r){var i=zt();return Hm(i,ut,r)}function Hm(r,i,o){var c=r.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var f=r.baseQueue,y=c.pending;if(y!==null){if(f!==null){var E=f.next;f.next=y.next,y.next=E}i.baseQueue=f=y,c.pending=null}if(y=r.baseState,f===null)r.memoizedState=y;else{i=f.next;var N=E=null,V=null,Z=i,ae=!1;do{var le=Z.lane&-536870913;if(le!==Z.lane?(Ye&le)===le:(li&le)===le){var J=Z.revertLane;if(J===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),le===xo&&(ae=!0);else if((li&J)===J){Z=Z.next,J===xo&&(ae=!0);continue}else le={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},V===null?(N=V=le,E=y):V=V.next=le,ze.lanes|=J,pi|=J;le=Z.action,Ra&&o(y,le),y=Z.hasEagerState?Z.eagerState:o(y,le)}else J={lane:le,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},V===null?(N=V=J,E=y):V=V.next=J,ze.lanes|=le,pi|=le;Z=Z.next}while(Z!==null&&Z!==i);if(V===null?E=y:V.next=N,!$n(y,r.memoizedState)&&(sn=!0,ae&&(o=Eo,o!==null)))throw o;r.memoizedState=y,r.baseState=E,r.baseQueue=V,c.lastRenderedState=y}return f===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function Gm(r){var i=zt(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var c=o.dispatch,f=o.pending,y=i.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do y=r(y,E.action),E=E.next;while(E!==f);$n(y,i.memoizedState)||(sn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,c]}function D0(r,i,o){var c=ze,f=zt(),y=nt;if(y){if(o===void 0)throw Error(s(407));o=o()}else o=i();var E=!$n((ut||f).memoizedState,o);E&&(f.memoizedState=o,sn=!0),f=f.queue;var N=P0.bind(null,c,f,r);if(gc(2048,8,N,[r]),f.getSnapshot!==i||E||Ut!==null&&Ut.memoizedState.tag&1){if(c.flags|=2048,Ro(9,Id(),O0.bind(null,c,f,o,i),null),gt===null)throw Error(s(349));y||(li&124)!==0||k0(c,i,o)}return o}function k0(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=ze.updateQueue,i===null?(i=Fm(),ze.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function O0(r,i,o,c){i.value=o,i.getSnapshot=c,j0(i)&&M0(r)}function P0(r,i,o){return o(function(){j0(i)&&M0(r)})}function j0(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!$n(r,o)}catch{return!0}}function M0(r){var i=vo(r,2);i!==null&&Zn(i,r,2)}function $m(r){var i=Un();if(typeof r=="function"){var o=r;if(r=o(),Ra){Hn(!0);try{o()}finally{Hn(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:r},i}function V0(r,i,o,c){return r.baseState=o,Hm(r,ut,typeof c=="function"?c:Ss)}function K2(r,i,o,c,f){if(kd(r))throw Error(s(485));if(r=i.action,r!==null){var y={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};Y.T!==null?o(!0):y.isTransition=!1,c(y),o=i.pending,o===null?(y.next=i.pending=y,L0(i,y)):(y.next=o.next,i.pending=o.next=y)}}function L0(r,i){var o=i.action,c=i.payload,f=r.state;if(i.isTransition){var y=Y.T,E={};Y.T=E;try{var N=o(f,c),V=Y.S;V!==null&&V(E,N),U0(r,i,N)}catch(Z){Km(r,i,Z)}finally{Y.T=y}}else try{y=o(f,c),U0(r,i,y)}catch(Z){Km(r,i,Z)}}function U0(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){z0(r,i,c)},function(c){return Km(r,i,c)}):z0(r,i,o)}function z0(r,i,o){i.status="fulfilled",i.value=o,B0(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,L0(r,o)))}function Km(r,i,o){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,B0(i),i=i.next;while(i!==c)}r.action=null}function B0(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function F0(r,i){return i}function q0(r,i){if(nt){var o=gt.formState;if(o!==null){e:{var c=ze;if(nt){if(Ct){t:{for(var f=Ct,y=Kr;f.nodeType!==8;){if(!y){f=null;break t}if(f=Ar(f.nextSibling),f===null){f=null;break t}}y=f.data,f=y==="F!"||y==="F"?f:null}if(f){Ct=Ar(f.nextSibling),c=f.data==="F!";break e}}Ea(c)}c=!1}c&&(i=o[0])}}return o=Un(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:F0,lastRenderedState:i},o.queue=c,o=lb.bind(null,ze,c),c.dispatch=o,c=$m(!1),y=Zm.bind(null,ze,!1,c.queue),c=Un(),f={state:i,dispatch:null,action:r,pending:null},c.queue=f,o=K2.bind(null,ze,f,y,o),f.dispatch=o,c.memoizedState=r,[i,o,!1]}function H0(r){var i=zt();return G0(i,ut,r)}function G0(r,i,o){if(i=Hm(r,i,F0)[0],r=Cd(Ss)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=pc(i)}catch(E){throw E===cc?Ed:E}else c=i;i=zt();var f=i.queue,y=f.dispatch;return o!==i.memoizedState&&(ze.flags|=2048,Ro(9,Id(),Q2.bind(null,f,o),null)),[c,y,r]}function Q2(r,i){r.action=i}function $0(r){var i=zt(),o=ut;if(o!==null)return G0(i,o,r);zt(),i=i.memoizedState,o=zt();var c=o.queue.dispatch;return o.memoizedState=r,[i,c,!1]}function Ro(r,i,o,c){return r={tag:r,create:o,deps:c,inst:i,next:null},i=ze.updateQueue,i===null&&(i=Fm(),ze.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(c=o.next,o.next=r,r.next=c,i.lastEffect=r),r}function Id(){return{destroy:void 0,resource:void 0}}function K0(){return zt().memoizedState}function Dd(r,i,o,c){var f=Un();c=c===void 0?null:c,ze.flags|=r,f.memoizedState=Ro(1|i,Id(),o,c)}function gc(r,i,o,c){var f=zt();c=c===void 0?null:c;var y=f.memoizedState.inst;ut!==null&&c!==null&&Vm(c,ut.memoizedState.deps)?f.memoizedState=Ro(i,y,o,c):(ze.flags|=r,f.memoizedState=Ro(1|i,y,o,c))}function Q0(r,i){Dd(8390656,8,r,i)}function W0(r,i){gc(2048,8,r,i)}function Y0(r,i){return gc(4,2,r,i)}function X0(r,i){return gc(4,4,r,i)}function Z0(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function J0(r,i,o){o=o!=null?o.concat([r]):null,gc(4,4,Z0.bind(null,i,r),o)}function Qm(){}function eb(r,i){var o=zt();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Vm(i,c[1])?c[0]:(o.memoizedState=[r,i],r)}function tb(r,i){var o=zt();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Vm(i,c[1]))return c[0];if(c=r(),Ra){Hn(!0);try{r()}finally{Hn(!1)}}return o.memoizedState=[c,i],c}function Wm(r,i,o){return o===void 0||(li&1073741824)!==0?r.memoizedState=i:(r.memoizedState=o,r=s_(),ze.lanes|=r,pi|=r,o)}function nb(r,i,o,c){return $n(o,i)?o:To.current!==null?(r=Wm(r,o,c),$n(r,i)||(sn=!0),r):(li&42)===0?(sn=!0,r.memoizedState=o):(r=s_(),ze.lanes|=r,pi|=r,i)}function rb(r,i,o,c,f){var y=he.p;he.p=y!==0&&8>y?y:8;var E=Y.T,N={};Y.T=N,Zm(r,!1,i,o);try{var V=f(),Z=Y.S;if(Z!==null&&Z(N,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ae=H2(V,c);yc(r,i,ae,Xn(r))}else yc(r,i,c,Xn(r))}catch(le){yc(r,i,{then:function(){},status:"rejected",reason:le},Xn())}finally{he.p=y,Y.T=E}}function W2(){}function Ym(r,i,o,c){if(r.tag!==5)throw Error(s(476));var f=sb(r).queue;rb(r,f,i,ue,o===null?W2:function(){return ib(r),o(c)})}function sb(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:ue},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function ib(r){var i=sb(r).next.queue;yc(r,i,{},Xn())}function Xm(){return Rn(jc)}function ab(){return zt().memoizedState}function ob(){return zt().memoizedState}function Y2(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Xn();r=ai(o);var c=oi(i,r,o);c!==null&&(Zn(c,i,o),dc(c,i,o)),i={cache:Rm()},r.payload=i;return}i=i.return}}function X2(r,i,o){var c=Xn();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},kd(r)?cb(i,o):(o=ym(r,i,o,c),o!==null&&(Zn(o,r,c),ub(o,i,c)))}function lb(r,i,o){var c=Xn();yc(r,i,o,c)}function yc(r,i,o,c){var f={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(kd(r))cb(i,f);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var E=i.lastRenderedState,N=y(E,o);if(f.hasEagerState=!0,f.eagerState=N,$n(N,E))return pd(r,i,f,0),gt===null&&md(),!1}catch{}finally{}if(o=ym(r,i,f,c),o!==null)return Zn(o,r,c),ub(o,i,c),!0}return!1}function Zm(r,i,o,c){if(c={lane:2,revertLane:Ip(),action:c,hasEagerState:!1,eagerState:null,next:null},kd(r)){if(i)throw Error(s(479))}else i=ym(r,o,c,2),i!==null&&Zn(i,r,2)}function kd(r){var i=r.alternate;return r===ze||i!==null&&i===ze}function cb(r,i){So=Ad=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function ub(r,i,o){if((o&4194048)!==0){var c=i.lanes;c&=r.pendingLanes,o|=c,i.lanes=o,Ul(r,o)}}var Od={readContext:Rn,use:Nd,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot},db={readContext:Rn,use:Nd,useCallback:function(r,i){return Un().memoizedState=[r,i===void 0?null:i],r},useContext:Rn,useEffect:Q0,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,Dd(4194308,4,Z0.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Dd(4194308,4,r,i)},useInsertionEffect:function(r,i){Dd(4,2,r,i)},useMemo:function(r,i){var o=Un();i=i===void 0?null:i;var c=r();if(Ra){Hn(!0);try{r()}finally{Hn(!1)}}return o.memoizedState=[c,i],c},useReducer:function(r,i,o){var c=Un();if(o!==void 0){var f=o(i);if(Ra){Hn(!0);try{o(i)}finally{Hn(!1)}}}else f=i;return c.memoizedState=c.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},c.queue=r,r=r.dispatch=X2.bind(null,ze,r),[c.memoizedState,r]},useRef:function(r){var i=Un();return r={current:r},i.memoizedState=r},useState:function(r){r=$m(r);var i=r.queue,o=lb.bind(null,ze,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:Qm,useDeferredValue:function(r,i){var o=Un();return Wm(o,r,i)},useTransition:function(){var r=$m(!1);return r=rb.bind(null,ze,r.queue,!0,!1),Un().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var c=ze,f=Un();if(nt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),gt===null)throw Error(s(349));(Ye&124)!==0||k0(c,i,o)}f.memoizedState=o;var y={value:o,getSnapshot:i};return f.queue=y,Q0(P0.bind(null,c,y,r),[r]),c.flags|=2048,Ro(9,Id(),O0.bind(null,c,y,o,i),null),o},useId:function(){var r=Un(),i=gt.identifierPrefix;if(nt){var o=xs,c=ws;o=(c&~(1<<32-An(c)-1)).toString(32)+o,i="«"+i+"R"+o,o=Rd++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=G2++,i="«"+i+"r"+o.toString(32)+"»";return r.memoizedState=i},useHostTransitionStatus:Xm,useFormState:q0,useActionState:q0,useOptimistic:function(r){var i=Un();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Zm.bind(null,ze,!0,o),o.dispatch=i,[r,i]},useMemoCache:qm,useCacheRefresh:function(){return Un().memoizedState=Y2.bind(null,ze)}},hb={readContext:Rn,use:Nd,useCallback:eb,useContext:Rn,useEffect:W0,useImperativeHandle:J0,useInsertionEffect:Y0,useLayoutEffect:X0,useMemo:tb,useReducer:Cd,useRef:K0,useState:function(){return Cd(Ss)},useDebugValue:Qm,useDeferredValue:function(r,i){var o=zt();return nb(o,ut.memoizedState,r,i)},useTransition:function(){var r=Cd(Ss)[0],i=zt().memoizedState;return[typeof r=="boolean"?r:pc(r),i]},useSyncExternalStore:D0,useId:ab,useHostTransitionStatus:Xm,useFormState:H0,useActionState:H0,useOptimistic:function(r,i){var o=zt();return V0(o,ut,r,i)},useMemoCache:qm,useCacheRefresh:ob},Z2={readContext:Rn,use:Nd,useCallback:eb,useContext:Rn,useEffect:W0,useImperativeHandle:J0,useInsertionEffect:Y0,useLayoutEffect:X0,useMemo:tb,useReducer:Gm,useRef:K0,useState:function(){return Gm(Ss)},useDebugValue:Qm,useDeferredValue:function(r,i){var o=zt();return ut===null?Wm(o,r,i):nb(o,ut.memoizedState,r,i)},useTransition:function(){var r=Gm(Ss)[0],i=zt().memoizedState;return[typeof r=="boolean"?r:pc(r),i]},useSyncExternalStore:D0,useId:ab,useHostTransitionStatus:Xm,useFormState:$0,useActionState:$0,useOptimistic:function(r,i){var o=zt();return ut!==null?V0(o,ut,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:qm,useCacheRefresh:ob},No=null,vc=0;function Pd(r){var i=vc;return vc+=1,No===null&&(No=[]),E0(No,r,i)}function bc(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function jd(r,i){throw i.$$typeof===w?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function fb(r){var i=r._init;return i(r._payload)}function mb(r){function i($,q){if(r){var X=$.deletions;X===null?($.deletions=[q],$.flags|=16):X.push(q)}}function o($,q){if(!r)return null;for(;q!==null;)i($,q),q=q.sibling;return null}function c($){for(var q=new Map;$!==null;)$.key!==null?q.set($.key,$):q.set($.index,$),$=$.sibling;return q}function f($,q){return $=_s($,q),$.index=0,$.sibling=null,$}function y($,q,X){return $.index=X,r?(X=$.alternate,X!==null?(X=X.index,X<q?($.flags|=67108866,q):X):($.flags|=67108866,q)):($.flags|=1048576,q)}function E($){return r&&$.alternate===null&&($.flags|=67108866),$}function N($,q,X,oe){return q===null||q.tag!==6?(q=bm(X,$.mode,oe),q.return=$,q):(q=f(q,X),q.return=$,q)}function V($,q,X,oe){var be=X.type;return be===R?ae($,q,X.props.children,oe,X.key):q!==null&&(q.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===A&&fb(be)===q.type)?(q=f(q,X.props),bc(q,X),q.return=$,q):(q=yd(X.type,X.key,X.props,null,$.mode,oe),bc(q,X),q.return=$,q)}function Z($,q,X,oe){return q===null||q.tag!==4||q.stateNode.containerInfo!==X.containerInfo||q.stateNode.implementation!==X.implementation?(q=_m(X,$.mode,oe),q.return=$,q):(q=f(q,X.children||[]),q.return=$,q)}function ae($,q,X,oe,be){return q===null||q.tag!==7?(q=ba(X,$.mode,oe,be),q.return=$,q):(q=f(q,X),q.return=$,q)}function le($,q,X){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=bm(""+q,$.mode,X),q.return=$,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case _:return X=yd(q.type,q.key,q.props,null,$.mode,X),bc(X,q),X.return=$,X;case S:return q=_m(q,$.mode,X),q.return=$,q;case A:var oe=q._init;return q=oe(q._payload),le($,q,X)}if(Ce(q)||F(q))return q=ba(q,$.mode,X,null),q.return=$,q;if(typeof q.then=="function")return le($,Pd(q),X);if(q.$$typeof===H)return le($,wd($,q),X);jd($,q)}return null}function J($,q,X,oe){var be=q!==null?q.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return be!==null?null:N($,q,""+X,oe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case _:return X.key===be?V($,q,X,oe):null;case S:return X.key===be?Z($,q,X,oe):null;case A:return be=X._init,X=be(X._payload),J($,q,X,oe)}if(Ce(X)||F(X))return be!==null?null:ae($,q,X,oe,null);if(typeof X.then=="function")return J($,q,Pd(X),oe);if(X.$$typeof===H)return J($,q,wd($,X),oe);jd($,X)}return null}function ee($,q,X,oe,be){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return $=$.get(X)||null,N(q,$,""+oe,be);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case _:return $=$.get(oe.key===null?X:oe.key)||null,V(q,$,oe,be);case S:return $=$.get(oe.key===null?X:oe.key)||null,Z(q,$,oe,be);case A:var qe=oe._init;return oe=qe(oe._payload),ee($,q,X,oe,be)}if(Ce(oe)||F(oe))return $=$.get(X)||null,ae(q,$,oe,be,null);if(typeof oe.then=="function")return ee($,q,X,Pd(oe),be);if(oe.$$typeof===H)return ee($,q,X,wd(q,oe),be);jd(q,oe)}return null}function Pe($,q,X,oe){for(var be=null,qe=null,Se=q,ke=q=0,on=null;Se!==null&&ke<X.length;ke++){Se.index>ke?(on=Se,Se=null):on=Se.sibling;var et=J($,Se,X[ke],oe);if(et===null){Se===null&&(Se=on);break}r&&Se&&et.alternate===null&&i($,Se),q=y(et,q,ke),qe===null?be=et:qe.sibling=et,qe=et,Se=on}if(ke===X.length)return o($,Se),nt&&wa($,ke),be;if(Se===null){for(;ke<X.length;ke++)Se=le($,X[ke],oe),Se!==null&&(q=y(Se,q,ke),qe===null?be=Se:qe.sibling=Se,qe=Se);return nt&&wa($,ke),be}for(Se=c(Se);ke<X.length;ke++)on=ee(Se,$,ke,X[ke],oe),on!==null&&(r&&on.alternate!==null&&Se.delete(on.key===null?ke:on.key),q=y(on,q,ke),qe===null?be=on:qe.sibling=on,qe=on);return r&&Se.forEach(function(Ti){return i($,Ti)}),nt&&wa($,ke),be}function De($,q,X,oe){if(X==null)throw Error(s(151));for(var be=null,qe=null,Se=q,ke=q=0,on=null,et=X.next();Se!==null&&!et.done;ke++,et=X.next()){Se.index>ke?(on=Se,Se=null):on=Se.sibling;var Ti=J($,Se,et.value,oe);if(Ti===null){Se===null&&(Se=on);break}r&&Se&&Ti.alternate===null&&i($,Se),q=y(Ti,q,ke),qe===null?be=Ti:qe.sibling=Ti,qe=Ti,Se=on}if(et.done)return o($,Se),nt&&wa($,ke),be;if(Se===null){for(;!et.done;ke++,et=X.next())et=le($,et.value,oe),et!==null&&(q=y(et,q,ke),qe===null?be=et:qe.sibling=et,qe=et);return nt&&wa($,ke),be}for(Se=c(Se);!et.done;ke++,et=X.next())et=ee(Se,$,ke,et.value,oe),et!==null&&(r&&et.alternate!==null&&Se.delete(et.key===null?ke:et.key),q=y(et,q,ke),qe===null?be=et:qe.sibling=et,qe=et);return r&&Se.forEach(function(JR){return i($,JR)}),nt&&wa($,ke),be}function ht($,q,X,oe){if(typeof X=="object"&&X!==null&&X.type===R&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case _:e:{for(var be=X.key;q!==null;){if(q.key===be){if(be=X.type,be===R){if(q.tag===7){o($,q.sibling),oe=f(q,X.props.children),oe.return=$,$=oe;break e}}else if(q.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===A&&fb(be)===q.type){o($,q.sibling),oe=f(q,X.props),bc(oe,X),oe.return=$,$=oe;break e}o($,q);break}else i($,q);q=q.sibling}X.type===R?(oe=ba(X.props.children,$.mode,oe,X.key),oe.return=$,$=oe):(oe=yd(X.type,X.key,X.props,null,$.mode,oe),bc(oe,X),oe.return=$,$=oe)}return E($);case S:e:{for(be=X.key;q!==null;){if(q.key===be)if(q.tag===4&&q.stateNode.containerInfo===X.containerInfo&&q.stateNode.implementation===X.implementation){o($,q.sibling),oe=f(q,X.children||[]),oe.return=$,$=oe;break e}else{o($,q);break}else i($,q);q=q.sibling}oe=_m(X,$.mode,oe),oe.return=$,$=oe}return E($);case A:return be=X._init,X=be(X._payload),ht($,q,X,oe)}if(Ce(X))return Pe($,q,X,oe);if(F(X)){if(be=F(X),typeof be!="function")throw Error(s(150));return X=be.call(X),De($,q,X,oe)}if(typeof X.then=="function")return ht($,q,Pd(X),oe);if(X.$$typeof===H)return ht($,q,wd($,X),oe);jd($,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,q!==null&&q.tag===6?(o($,q.sibling),oe=f(q,X),oe.return=$,$=oe):(o($,q),oe=bm(X,$.mode,oe),oe.return=$,$=oe),E($)):o($,q)}return function($,q,X,oe){try{vc=0;var be=ht($,q,X,oe);return No=null,be}catch(Se){if(Se===cc||Se===Ed)throw Se;var qe=Kn(29,Se,null,$.mode);return qe.lanes=oe,qe.return=$,qe}finally{}}}var Co=mb(!0),pb=mb(!1),hr=G(null),Qr=null;function ci(r){var i=r.alternate;Q(Xt,Xt.current&1),Q(hr,r),Qr===null&&(i===null||To.current!==null||i.memoizedState!==null)&&(Qr=r)}function gb(r){if(r.tag===22){if(Q(Xt,Xt.current),Q(hr,r),Qr===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(Qr=r)}}else ui()}function ui(){Q(Xt,Xt.current),Q(hr,hr.current)}function As(r){re(hr),Qr===r&&(Qr=null),re(Xt)}var Xt=G(0);function Md(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Fp(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Jm(r,i,o,c){i=r.memoizedState,o=o(c,i),o=o==null?i:v({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var ep={enqueueSetState:function(r,i,o){r=r._reactInternals;var c=Xn(),f=ai(c);f.payload=i,o!=null&&(f.callback=o),i=oi(r,f,c),i!==null&&(Zn(i,r,c),dc(i,r,c))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var c=Xn(),f=ai(c);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=oi(r,f,c),i!==null&&(Zn(i,r,c),dc(i,r,c))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Xn(),c=ai(o);c.tag=2,i!=null&&(c.callback=i),i=oi(r,c,o),i!==null&&(Zn(i,r,o),dc(i,r,o))}};function yb(r,i,o,c,f,y,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,y,E):i.prototype&&i.prototype.isPureReactComponent?!tc(o,c)||!tc(f,y):!0}function vb(r,i,o,c){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==r&&ep.enqueueReplaceState(i,i.state,null)}function Na(r,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(r=r.defaultProps){o===i&&(o=v({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var Vd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function bb(r){Vd(r)}function _b(r){console.error(r)}function wb(r){Vd(r)}function Ld(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function xb(r,i,o){try{var c=r.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function tp(r,i,o){return o=ai(o),o.tag=3,o.payload={element:null},o.callback=function(){Ld(r,i)},o}function Eb(r){return r=ai(r),r.tag=3,r}function Tb(r,i,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var y=c.value;r.payload=function(){return f(y)},r.callback=function(){xb(i,o,c)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){xb(i,o,c),typeof f!="function"&&(gi===null?gi=new Set([this]):gi.add(this));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})})}function J2(r,i,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&ac(i,o,f,!0),o=hr.current,o!==null){switch(o.tag){case 13:return Qr===null?Sp():o.alternate===null&&It===0&&(It=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Im?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),Rp(r,c,f)),!1;case 22:return o.flags|=65536,c===Im?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),Rp(r,c,f)),!1}throw Error(s(435,o.tag))}return Rp(r,c,f),Sp(),!1}if(nt)return i=hr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==Em&&(r=Error(s(422),{cause:c}),ic(lr(r,o)))):(c!==Em&&(i=Error(s(423),{cause:c}),ic(lr(i,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,c=lr(c,o),f=tp(r.stateNode,c,f),Om(r,f),It!==4&&(It=2)),!1;var y=Error(s(520),{cause:c});if(y=lr(y,o),Ac===null?Ac=[y]:Ac.push(y),It!==4&&(It=2),i===null)return!0;c=lr(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=tp(o.stateNode,c,r),Om(o,r),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(gi===null||!gi.has(y))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Eb(f),Tb(f,r,o,c),Om(o,f),!1}o=o.return}while(o!==null);return!1}var Sb=Error(s(461)),sn=!1;function vn(r,i,o,c){i.child=r===null?pb(i,null,o,c):Co(i,r.child,o,c)}function Ab(r,i,o,c,f){o=o.render;var y=i.ref;if("ref"in c){var E={};for(var N in c)N!=="ref"&&(E[N]=c[N])}else E=c;return Sa(i),c=Lm(r,i,o,E,y,f),N=Um(),r!==null&&!sn?(zm(r,i,f),Rs(r,i,f)):(nt&&N&&wm(i),i.flags|=1,vn(r,i,c,f),i.child)}function Rb(r,i,o,c,f){if(r===null){var y=o.type;return typeof y=="function"&&!vm(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,Nb(r,i,y,c,f)):(r=yd(o.type,null,c,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(y=r.child,!cp(r,f)){var E=y.memoizedProps;if(o=o.compare,o=o!==null?o:tc,o(E,c)&&r.ref===i.ref)return Rs(r,i,f)}return i.flags|=1,r=_s(y,c),r.ref=i.ref,r.return=i,i.child=r}function Nb(r,i,o,c,f){if(r!==null){var y=r.memoizedProps;if(tc(y,c)&&r.ref===i.ref)if(sn=!1,i.pendingProps=c=y,cp(r,f))(r.flags&131072)!==0&&(sn=!0);else return i.lanes=r.lanes,Rs(r,i,f)}return np(r,i,o,c,f)}function Cb(r,i,o){var c=i.pendingProps,f=c.children,y=r!==null?r.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=y!==null?y.baseLanes|o:o,r!==null){for(f=i.child=r.child,y=0;f!==null;)y=y|f.lanes|f.childLanes,f=f.sibling;i.childLanes=y&~c}else i.childLanes=0,i.child=null;return Ib(r,i,c,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&xd(i,y!==null?y.cachePool:null),y!==null?N0(i,y):jm(),gb(i);else return i.lanes=i.childLanes=536870912,Ib(r,i,y!==null?y.baseLanes|o:o,o)}else y!==null?(xd(i,y.cachePool),N0(i,y),ui(),i.memoizedState=null):(r!==null&&xd(i,null),jm(),ui());return vn(r,i,f,o),i.child}function Ib(r,i,o,c){var f=Cm();return f=f===null?null:{parent:Yt._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},r!==null&&xd(i,null),jm(),gb(i),r!==null&&ac(r,i,c,!0),null}function Ud(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function np(r,i,o,c,f){return Sa(i),o=Lm(r,i,o,c,void 0,f),c=Um(),r!==null&&!sn?(zm(r,i,f),Rs(r,i,f)):(nt&&c&&wm(i),i.flags|=1,vn(r,i,o,f),i.child)}function Db(r,i,o,c,f,y){return Sa(i),i.updateQueue=null,o=I0(i,c,o,f),C0(r),c=Um(),r!==null&&!sn?(zm(r,i,y),Rs(r,i,y)):(nt&&c&&wm(i),i.flags|=1,vn(r,i,o,y),i.child)}function kb(r,i,o,c,f){if(Sa(i),i.stateNode===null){var y=bo,E=o.contextType;typeof E=="object"&&E!==null&&(y=Rn(E)),y=new o(c,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=ep,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=c,y.state=i.memoizedState,y.refs={},Dm(i),E=o.contextType,y.context=typeof E=="object"&&E!==null?Rn(E):bo,y.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Jm(i,o,E,c),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&ep.enqueueReplaceState(y,y.state,null),fc(i,c,y,f),hc(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(r===null){y=i.stateNode;var N=i.memoizedProps,V=Na(o,N);y.props=V;var Z=y.context,ae=o.contextType;E=bo,typeof ae=="object"&&ae!==null&&(E=Rn(ae));var le=o.getDerivedStateFromProps;ae=typeof le=="function"||typeof y.getSnapshotBeforeUpdate=="function",N=i.pendingProps!==N,ae||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(N||Z!==E)&&vb(i,y,c,E),ii=!1;var J=i.memoizedState;y.state=J,fc(i,c,y,f),hc(),Z=i.memoizedState,N||J!==Z||ii?(typeof le=="function"&&(Jm(i,o,le,c),Z=i.memoizedState),(V=ii||yb(i,o,V,c,J,Z,E))?(ae||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=Z),y.props=c,y.state=Z,y.context=E,c=V):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{y=i.stateNode,km(r,i),E=i.memoizedProps,ae=Na(o,E),y.props=ae,le=i.pendingProps,J=y.context,Z=o.contextType,V=bo,typeof Z=="object"&&Z!==null&&(V=Rn(Z)),N=o.getDerivedStateFromProps,(Z=typeof N=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==le||J!==V)&&vb(i,y,c,V),ii=!1,J=i.memoizedState,y.state=J,fc(i,c,y,f),hc();var ee=i.memoizedState;E!==le||J!==ee||ii||r!==null&&r.dependencies!==null&&_d(r.dependencies)?(typeof N=="function"&&(Jm(i,o,N,c),ee=i.memoizedState),(ae=ii||yb(i,o,ae,c,J,ee,V)||r!==null&&r.dependencies!==null&&_d(r.dependencies))?(Z||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,ee,V),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,ee,V)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ee),y.props=c,y.state=ee,y.context=V,c=ae):(typeof y.componentDidUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(i.flags|=1024),c=!1)}return y=c,Ud(r,i),c=(i.flags&128)!==0,y||c?(y=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,r!==null&&c?(i.child=Co(i,r.child,null,f),i.child=Co(i,null,o,f)):vn(r,i,o,f),i.memoizedState=y.state,r=i.child):r=Rs(r,i,f),r}function Ob(r,i,o,c){return sc(),i.flags|=256,vn(r,i,o,c),i.child}var rp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sp(r){return{baseLanes:r,cachePool:_0()}}function ip(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=fr),r}function Pb(r,i,o){var c=i.pendingProps,f=!1,y=(i.flags&128)!==0,E;if((E=y)||(E=r!==null&&r.memoizedState===null?!1:(Xt.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,r===null){if(nt){if(f?ci(i):ui(),nt){var N=Ct,V;if(V=N){e:{for(V=N,N=Kr;V.nodeType!==8;){if(!N){N=null;break e}if(V=Ar(V.nextSibling),V===null){N=null;break e}}N=V}N!==null?(i.memoizedState={dehydrated:N,treeContext:_a!==null?{id:ws,overflow:xs}:null,retryLane:536870912,hydrationErrors:null},V=Kn(18,null,null,0),V.stateNode=N,V.return=i,i.child=V,jn=i,Ct=null,V=!0):V=!1}V||Ea(i)}if(N=i.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return Fp(N)?i.lanes=32:i.lanes=536870912,null;As(i)}return N=c.children,c=c.fallback,f?(ui(),f=i.mode,N=zd({mode:"hidden",children:N},f),c=ba(c,f,o,null),N.return=i,c.return=i,N.sibling=c,i.child=N,f=i.child,f.memoizedState=sp(o),f.childLanes=ip(r,E,o),i.memoizedState=rp,c):(ci(i),ap(i,N))}if(V=r.memoizedState,V!==null&&(N=V.dehydrated,N!==null)){if(y)i.flags&256?(ci(i),i.flags&=-257,i=op(r,i,o)):i.memoizedState!==null?(ui(),i.child=r.child,i.flags|=128,i=null):(ui(),f=c.fallback,N=i.mode,c=zd({mode:"visible",children:c.children},N),f=ba(f,N,o,null),f.flags|=2,c.return=i,f.return=i,c.sibling=f,i.child=c,Co(i,r.child,null,o),c=i.child,c.memoizedState=sp(o),c.childLanes=ip(r,E,o),i.memoizedState=rp,i=f);else if(ci(i),Fp(N)){if(E=N.nextSibling&&N.nextSibling.dataset,E)var Z=E.dgst;E=Z,c=Error(s(419)),c.stack="",c.digest=E,ic({value:c,source:null,stack:null}),i=op(r,i,o)}else if(sn||ac(r,i,o,!1),E=(o&r.childLanes)!==0,sn||E){if(E=gt,E!==null&&(c=o&-o,c=(c&42)!==0?1:Xs(c),c=(c&(E.suspendedLanes|o))!==0?0:c,c!==0&&c!==V.retryLane))throw V.retryLane=c,vo(r,c),Zn(E,r,c),Sb;N.data==="$?"||Sp(),i=op(r,i,o)}else N.data==="$?"?(i.flags|=192,i.child=r.child,i=null):(r=V.treeContext,Ct=Ar(N.nextSibling),jn=i,nt=!0,xa=null,Kr=!1,r!==null&&(ur[dr++]=ws,ur[dr++]=xs,ur[dr++]=_a,ws=r.id,xs=r.overflow,_a=i),i=ap(i,c.children),i.flags|=4096);return i}return f?(ui(),f=c.fallback,N=i.mode,V=r.child,Z=V.sibling,c=_s(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,Z!==null?f=_s(Z,f):(f=ba(f,N,o,null),f.flags|=2),f.return=i,c.return=i,c.sibling=f,i.child=c,c=f,f=i.child,N=r.child.memoizedState,N===null?N=sp(o):(V=N.cachePool,V!==null?(Z=Yt._currentValue,V=V.parent!==Z?{parent:Z,pool:Z}:V):V=_0(),N={baseLanes:N.baseLanes|o,cachePool:V}),f.memoizedState=N,f.childLanes=ip(r,E,o),i.memoizedState=rp,c):(ci(i),o=r.child,r=o.sibling,o=_s(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,r!==null&&(E=i.deletions,E===null?(i.deletions=[r],i.flags|=16):E.push(r)),i.child=o,i.memoizedState=null,o)}function ap(r,i){return i=zd({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function zd(r,i){return r=Kn(22,r,null,i),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function op(r,i,o){return Co(i,r.child,null,o),r=ap(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function jb(r,i,o){r.lanes|=i;var c=r.alternate;c!==null&&(c.lanes|=i),Sm(r.return,i,o)}function lp(r,i,o,c,f){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=o,y.tailMode=f)}function Mb(r,i,o){var c=i.pendingProps,f=c.revealOrder,y=c.tail;if(vn(r,i,c.children,o),c=Xt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&jb(r,o,i);else if(r.tag===19)jb(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(Q(Xt,c),f){case"forwards":for(o=i.child,f=null;o!==null;)r=o.alternate,r!==null&&Md(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),lp(i,!1,f,o,y);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&Md(r)===null){i.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}lp(i,!0,o,null,y);break;case"together":lp(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Rs(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),pi|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(ac(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,o=_s(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=_s(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function cp(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&_d(r)))}function eR(r,i,o){switch(i.tag){case 3:Ue(i,i.stateNode.containerInfo),si(i,Yt,r.memoizedState.cache),sc();break;case 27:case 5:rt(i);break;case 4:Ue(i,i.stateNode.containerInfo);break;case 10:si(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(ci(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Pb(r,i,o):(ci(i),r=Rs(r,i,o),r!==null?r.sibling:null);ci(i);break;case 19:var f=(r.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(ac(r,i,o,!1),c=(o&i.childLanes)!==0),f){if(c)return Mb(r,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Q(Xt,Xt.current),c)break;return null;case 22:case 23:return i.lanes=0,Cb(r,i,o);case 24:si(i,Yt,r.memoizedState.cache)}return Rs(r,i,o)}function Vb(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)sn=!0;else{if(!cp(r,o)&&(i.flags&128)===0)return sn=!1,eR(r,i,o);sn=(r.flags&131072)!==0}else sn=!1,nt&&(i.flags&1048576)!==0&&f0(i,bd,i.index);switch(i.lanes=0,i.tag){case 16:e:{r=i.pendingProps;var c=i.elementType,f=c._init;if(c=f(c._payload),i.type=c,typeof c=="function")vm(c)?(r=Na(c,r),i.tag=1,i=kb(null,i,c,r,o)):(i.tag=0,i=np(null,i,c,r,o));else{if(c!=null){if(f=c.$$typeof,f===M){i.tag=11,i=Ab(null,i,c,r,o);break e}else if(f===I){i.tag=14,i=Rb(null,i,c,r,o);break e}}throw i=Me(c)||c,Error(s(306,i,""))}}return i;case 0:return np(r,i,i.type,i.pendingProps,o);case 1:return c=i.type,f=Na(c,i.pendingProps),kb(r,i,c,f,o);case 3:e:{if(Ue(i,i.stateNode.containerInfo),r===null)throw Error(s(387));c=i.pendingProps;var y=i.memoizedState;f=y.element,km(r,i),fc(i,c,null,o);var E=i.memoizedState;if(c=E.cache,si(i,Yt,c),c!==y.cache&&Am(i,[Yt],o,!0),hc(),c=E.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=Ob(r,i,c,o);break e}else if(c!==f){f=lr(Error(s(424)),i),ic(f),i=Ob(r,i,c,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ct=Ar(r.firstChild),jn=i,nt=!0,xa=null,Kr=!0,o=pb(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(sc(),c===f){i=Rs(r,i,o);break e}vn(r,i,c,o)}i=i.child}return i;case 26:return Ud(r,i),r===null?(o=B_(i.type,null,i.pendingProps,null))?i.memoizedState=o:nt||(o=i.type,r=i.pendingProps,c=eh(fe.current).createElement(o),c[Kt]=i,c[Vt]=r,_n(c,o,r),kt(c),i.stateNode=c):i.memoizedState=B_(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return rt(i),r===null&&nt&&(c=i.stateNode=L_(i.type,i.pendingProps,fe.current),jn=i,Kr=!0,f=Ct,bi(i.type)?(qp=f,Ct=Ar(c.firstChild)):Ct=f),vn(r,i,i.pendingProps.children,o),Ud(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&nt&&((f=c=Ct)&&(c=NR(c,i.type,i.pendingProps,Kr),c!==null?(i.stateNode=c,jn=i,Ct=Ar(c.firstChild),Kr=!1,f=!0):f=!1),f||Ea(i)),rt(i),f=i.type,y=i.pendingProps,E=r!==null?r.memoizedProps:null,c=y.children,Up(f,y)?c=null:E!==null&&Up(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=Lm(r,i,$2,null,null,o),jc._currentValue=f),Ud(r,i),vn(r,i,c,o),i.child;case 6:return r===null&&nt&&((r=o=Ct)&&(o=CR(o,i.pendingProps,Kr),o!==null?(i.stateNode=o,jn=i,Ct=null,r=!0):r=!1),r||Ea(i)),null;case 13:return Pb(r,i,o);case 4:return Ue(i,i.stateNode.containerInfo),c=i.pendingProps,r===null?i.child=Co(i,null,c,o):vn(r,i,c,o),i.child;case 11:return Ab(r,i,i.type,i.pendingProps,o);case 7:return vn(r,i,i.pendingProps,o),i.child;case 8:return vn(r,i,i.pendingProps.children,o),i.child;case 12:return vn(r,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,si(i,i.type,c.value),vn(r,i,c.children,o),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,Sa(i),f=Rn(f),c=c(f),i.flags|=1,vn(r,i,c,o),i.child;case 14:return Rb(r,i,i.type,i.pendingProps,o);case 15:return Nb(r,i,i.type,i.pendingProps,o);case 19:return Mb(r,i,o);case 31:return c=i.pendingProps,o=i.mode,c={mode:c.mode,children:c.children},r===null?(o=zd(c,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=_s(r.child,c),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return Cb(r,i,o);case 24:return Sa(i),c=Rn(Yt),r===null?(f=Cm(),f===null&&(f=gt,y=Rm(),f.pooledCache=y,y.refCount++,y!==null&&(f.pooledCacheLanes|=o),f=y),i.memoizedState={parent:c,cache:f},Dm(i),si(i,Yt,f)):((r.lanes&o)!==0&&(km(r,i),fc(i,null,null,o),hc()),f=r.memoizedState,y=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),si(i,Yt,c)):(c=y.cache,si(i,Yt,c),c!==f.cache&&Am(i,[Yt],o,!0))),vn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ns(r){r.flags|=4}function Lb(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!$_(i)){if(i=hr.current,i!==null&&((Ye&4194048)===Ye?Qr!==null:(Ye&62914560)!==Ye&&(Ye&536870912)===0||i!==Qr))throw uc=Im,w0;r.flags|=8192}}function Bd(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Vl():536870912,r.lanes|=i,Oo|=i)}function _c(r,i){if(!nt)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function St(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,c=0;if(i)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=c,r.childLanes=o,i}function tR(r,i,o){var c=i.pendingProps;switch(xm(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(i),null;case 1:return St(i),null;case 3:return o=i.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Ts(Yt),Dt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(rc(i)?Ns(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,g0())),St(i),null;case 26:return o=i.memoizedState,r===null?(Ns(i),o!==null?(St(i),Lb(i,o)):(St(i),i.flags&=-16777217)):o?o!==r.memoizedState?(Ns(i),St(i),Lb(i,o)):(St(i),i.flags&=-16777217):(r.memoizedProps!==c&&Ns(i),St(i),i.flags&=-16777217),null;case 27:xe(i),o=fe.current;var f=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==c&&Ns(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return St(i),null}r=se.current,rc(i)?m0(i):(r=L_(f,c,o),i.stateNode=r,Ns(i))}return St(i),null;case 5:if(xe(i),o=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==c&&Ns(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return St(i),null}if(r=se.current,rc(i))m0(i);else{switch(f=eh(fe.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?f.createElement(o,{is:c.is}):f.createElement(o)}}r[Kt]=i,r[Vt]=c;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=r;e:switch(_n(r,o,c),o){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Ns(i)}}return St(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==c&&Ns(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(r=fe.current,rc(i)){if(r=i.stateNode,o=i.memoizedProps,c=null,f=jn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}r[Kt]=i,r=!!(r.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||D_(r.nodeValue,o)),r||Ea(i)}else r=eh(r).createTextNode(c),r[Kt]=i,i.stateNode=r}return St(i),null;case 13:if(c=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=rc(i),c!==null&&c.dehydrated!==null){if(r===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Kt]=i}else sc(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;St(i),f=!1}else f=g0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(As(i),i):(As(i),null)}if(As(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=c!==null,r=r!==null&&r.memoizedState!==null,o){c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var y=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==f&&(c.flags|=2048)}return o!==r&&o&&(i.child.flags|=8192),Bd(i,i.updateQueue),St(i),null;case 4:return Dt(),r===null&&Pp(i.stateNode.containerInfo),St(i),null;case 10:return Ts(i.type),St(i),null;case 19:if(re(Xt),f=i.memoizedState,f===null)return St(i),null;if(c=(i.flags&128)!==0,y=f.rendering,y===null)if(c)_c(f,!1);else{if(It!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(y=Md(r),y!==null){for(i.flags|=128,_c(f,!1),r=y.updateQueue,i.updateQueue=r,Bd(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)h0(o,r),o=o.sibling;return Q(Xt,Xt.current&1|2),i.child}r=r.sibling}f.tail!==null&&pn()>Hd&&(i.flags|=128,c=!0,_c(f,!1),i.lanes=4194304)}else{if(!c)if(r=Md(y),r!==null){if(i.flags|=128,c=!0,r=r.updateQueue,i.updateQueue=r,Bd(i,r),_c(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!nt)return St(i),null}else 2*pn()-f.renderingStartTime>Hd&&o!==536870912&&(i.flags|=128,c=!0,_c(f,!1),i.lanes=4194304);f.isBackwards?(y.sibling=i.child,i.child=y):(r=f.last,r!==null?r.sibling=y:i.child=y,f.last=y)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=pn(),i.sibling=null,r=Xt.current,Q(Xt,c?r&1|2:r&1),i):(St(i),null);case 22:case 23:return As(i),Mm(),c=i.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(St(i),i.subtreeFlags&6&&(i.flags|=8192)):St(i),o=i.updateQueue,o!==null&&Bd(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),r!==null&&re(Aa),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ts(Yt),St(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function nR(r,i){switch(xm(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Ts(Yt),Dt(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return xe(i),null;case 13:if(As(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));sc()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return re(Xt),null;case 4:return Dt(),null;case 10:return Ts(i.type),null;case 22:case 23:return As(i),Mm(),r!==null&&re(Aa),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Ts(Yt),null;case 25:return null;default:return null}}function Ub(r,i){switch(xm(i),i.tag){case 3:Ts(Yt),Dt();break;case 26:case 27:case 5:xe(i);break;case 4:Dt();break;case 13:As(i);break;case 19:re(Xt);break;case 10:Ts(i.type);break;case 22:case 23:As(i),Mm(),r!==null&&re(Aa);break;case 24:Ts(Yt)}}function wc(r,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&r)===r){c=void 0;var y=o.create,E=o.inst;c=y(),E.destroy=c}o=o.next}while(o!==f)}}catch(N){mt(i,i.return,N)}}function di(r,i,o){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var y=f.next;c=y;do{if((c.tag&r)===r){var E=c.inst,N=E.destroy;if(N!==void 0){E.destroy=void 0,f=i;var V=o,Z=N;try{Z()}catch(ae){mt(f,V,ae)}}}c=c.next}while(c!==y)}}catch(ae){mt(i,i.return,ae)}}function zb(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{R0(i,o)}catch(c){mt(r,r.return,c)}}}function Bb(r,i,o){o.props=Na(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(c){mt(r,i,c)}}function xc(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof o=="function"?r.refCleanup=o(c):o.current=c}}catch(f){mt(r,i,f)}}function Wr(r,i){var o=r.ref,c=r.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){mt(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){mt(r,i,f)}else o.current=null}function Fb(r){var i=r.type,o=r.memoizedProps,c=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){mt(r,r.return,f)}}function up(r,i,o){try{var c=r.stateNode;ER(c,r.type,o,i),c[Vt]=i}catch(f){mt(r,r.return,f)}}function qb(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&bi(r.type)||r.tag===4}function dp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||qb(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&bi(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function hp(r,i,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Jd));else if(c!==4&&(c===27&&bi(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(hp(r,i,o),r=r.sibling;r!==null;)hp(r,i,o),r=r.sibling}function Fd(r,i,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(c!==4&&(c===27&&bi(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Fd(r,i,o),r=r.sibling;r!==null;)Fd(r,i,o),r=r.sibling}function Hb(r){var i=r.stateNode,o=r.memoizedProps;try{for(var c=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);_n(i,c,o),i[Kt]=r,i[Vt]=o}catch(y){mt(r,r.return,y)}}var Cs=!1,Pt=!1,fp=!1,Gb=typeof WeakSet=="function"?WeakSet:Set,an=null;function rR(r,i){if(r=r.containerInfo,Vp=ah,r=n0(r),dm(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var E=0,N=-1,V=-1,Z=0,ae=0,le=r,J=null;t:for(;;){for(var ee;le!==o||f!==0&&le.nodeType!==3||(N=E+f),le!==y||c!==0&&le.nodeType!==3||(V=E+c),le.nodeType===3&&(E+=le.nodeValue.length),(ee=le.firstChild)!==null;)J=le,le=ee;for(;;){if(le===r)break t;if(J===o&&++Z===f&&(N=E),J===y&&++ae===c&&(V=E),(ee=le.nextSibling)!==null)break;le=J,J=le.parentNode}le=ee}o=N===-1||V===-1?null:{start:N,end:V}}else o=null}o=o||{start:0,end:0}}else o=null;for(Lp={focusedElem:r,selectionRange:o},ah=!1,an=i;an!==null;)if(i=an,r=i.child,(i.subtreeFlags&1024)!==0&&r!==null)r.return=i,an=r;else for(;an!==null;){switch(i=an,y=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,o=i,f=y.memoizedProps,y=y.memoizedState,c=o.stateNode;try{var Pe=Na(o.type,f,o.elementType===o.type);r=c.getSnapshotBeforeUpdate(Pe,y),c.__reactInternalSnapshotBeforeUpdate=r}catch(De){mt(o,o.return,De)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Bp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Bp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,an=r;break}an=i.return}}function $b(r,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:hi(r,o),c&4&&wc(5,o);break;case 1:if(hi(r,o),c&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(E){mt(o,o.return,E)}else{var f=Na(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(E){mt(o,o.return,E)}}c&64&&zb(o),c&512&&xc(o,o.return);break;case 3:if(hi(r,o),c&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{R0(r,i)}catch(E){mt(o,o.return,E)}}break;case 27:i===null&&c&4&&Hb(o);case 26:case 5:hi(r,o),i===null&&c&4&&Fb(o),c&512&&xc(o,o.return);break;case 12:hi(r,o);break;case 13:hi(r,o),c&4&&Wb(r,o),c&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=hR.bind(null,o),IR(r,o))));break;case 22:if(c=o.memoizedState!==null||Cs,!c){i=i!==null&&i.memoizedState!==null||Pt,f=Cs;var y=Pt;Cs=c,(Pt=i)&&!y?fi(r,o,(o.subtreeFlags&8772)!==0):hi(r,o),Cs=f,Pt=y}break;case 30:break;default:hi(r,o)}}function Kb(r){var i=r.alternate;i!==null&&(r.alternate=null,Kb(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&ei(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var wt=null,zn=!1;function Is(r,i,o){for(o=o.child;o!==null;)Qb(r,i,o),o=o.sibling}function Qb(r,i,o){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(Nt,o)}catch{}switch(o.tag){case 26:Pt||Wr(o,i),Is(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Pt||Wr(o,i);var c=wt,f=zn;bi(o.type)&&(wt=o.stateNode,zn=!1),Is(r,i,o),Dc(o.stateNode),wt=c,zn=f;break;case 5:Pt||Wr(o,i);case 6:if(c=wt,f=zn,wt=null,Is(r,i,o),wt=c,zn=f,wt!==null)if(zn)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(o.stateNode)}catch(y){mt(o,i,y)}else try{wt.removeChild(o.stateNode)}catch(y){mt(o,i,y)}break;case 18:wt!==null&&(zn?(r=wt,M_(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Uc(r)):M_(wt,o.stateNode));break;case 4:c=wt,f=zn,wt=o.stateNode.containerInfo,zn=!0,Is(r,i,o),wt=c,zn=f;break;case 0:case 11:case 14:case 15:Pt||di(2,o,i),Pt||di(4,o,i),Is(r,i,o);break;case 1:Pt||(Wr(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Bb(o,i,c)),Is(r,i,o);break;case 21:Is(r,i,o);break;case 22:Pt=(c=Pt)||o.memoizedState!==null,Is(r,i,o),Pt=c;break;default:Is(r,i,o)}}function Wb(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Uc(r)}catch(o){mt(i,i.return,o)}}function sR(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Gb),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Gb),i;default:throw Error(s(435,r.tag))}}function mp(r,i){var o=sR(r);i.forEach(function(c){var f=fR.bind(null,r,c);o.has(c)||(o.add(c),c.then(f,f))})}function Qn(r,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],y=r,E=i,N=E;e:for(;N!==null;){switch(N.tag){case 27:if(bi(N.type)){wt=N.stateNode,zn=!1;break e}break;case 5:wt=N.stateNode,zn=!1;break e;case 3:case 4:wt=N.stateNode.containerInfo,zn=!0;break e}N=N.return}if(wt===null)throw Error(s(160));Qb(y,E,f),wt=null,zn=!1,y=f.alternate,y!==null&&(y.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Yb(i,r),i=i.sibling}var Sr=null;function Yb(r,i){var o=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Qn(i,r),Wn(r),c&4&&(di(3,r,r.return),wc(3,r),di(5,r,r.return));break;case 1:Qn(i,r),Wn(r),c&512&&(Pt||o===null||Wr(o,o.return)),c&64&&Cs&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Sr;if(Qn(i,r),Wn(r),c&512&&(Pt||o===null||Wr(o,o.return)),c&4){var y=o!==null?o.memoizedState:null;if(c=r.memoizedState,o===null)if(c===null)if(r.stateNode===null){e:{c=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":y=f.getElementsByTagName("title")[0],(!y||y[ra]||y[Kt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=f.createElement(c),f.head.insertBefore(y,f.querySelector("head > title"))),_n(y,c,o),y[Kt]=r,kt(y),c=y;break e;case"link":var E=H_("link","href",f).get(c+(o.href||""));if(E){for(var N=0;N<E.length;N++)if(y=E[N],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(N,1);break t}}y=f.createElement(c),_n(y,c,o),f.head.appendChild(y);break;case"meta":if(E=H_("meta","content",f).get(c+(o.content||""))){for(N=0;N<E.length;N++)if(y=E[N],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(N,1);break t}}y=f.createElement(c),_n(y,c,o),f.head.appendChild(y);break;default:throw Error(s(468,c))}y[Kt]=r,kt(y),c=y}r.stateNode=c}else G_(f,r.type,r.stateNode);else r.stateNode=q_(f,c,r.memoizedProps);else y!==c?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,c===null?G_(f,r.type,r.stateNode):q_(f,c,r.memoizedProps)):c===null&&r.stateNode!==null&&up(r,r.memoizedProps,o.memoizedProps)}break;case 27:Qn(i,r),Wn(r),c&512&&(Pt||o===null||Wr(o,o.return)),o!==null&&c&4&&up(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Qn(i,r),Wn(r),c&512&&(Pt||o===null||Wr(o,o.return)),r.flags&32){f=r.stateNode;try{sr(f,"")}catch(ee){mt(r,r.return,ee)}}c&4&&r.stateNode!=null&&(f=r.memoizedProps,up(r,f,o!==null?o.memoizedProps:f)),c&1024&&(fp=!0);break;case 6:if(Qn(i,r),Wn(r),c&4){if(r.stateNode===null)throw Error(s(162));c=r.memoizedProps,o=r.stateNode;try{o.nodeValue=c}catch(ee){mt(r,r.return,ee)}}break;case 3:if(rh=null,f=Sr,Sr=th(i.containerInfo),Qn(i,r),Sr=f,Wn(r),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Uc(i.containerInfo)}catch(ee){mt(r,r.return,ee)}fp&&(fp=!1,Xb(r));break;case 4:c=Sr,Sr=th(r.stateNode.containerInfo),Qn(i,r),Wn(r),Sr=c;break;case 12:Qn(i,r),Wn(r);break;case 13:Qn(i,r),Wn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(_p=pn()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,mp(r,c)));break;case 22:f=r.memoizedState!==null;var V=o!==null&&o.memoizedState!==null,Z=Cs,ae=Pt;if(Cs=Z||f,Pt=ae||V,Qn(i,r),Pt=ae,Cs=Z,Wn(r),c&8192)e:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||V||Cs||Pt||Ca(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){V=o=i;try{if(y=V.stateNode,f)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{N=V.stateNode;var le=V.memoizedProps.style,J=le!=null&&le.hasOwnProperty("display")?le.display:null;N.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ee){mt(V,V.return,ee)}}}else if(i.tag===6){if(o===null){V=i;try{V.stateNode.nodeValue=f?"":V.memoizedProps}catch(ee){mt(V,V.return,ee)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=r.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,mp(r,o))));break;case 19:Qn(i,r),Wn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,mp(r,c)));break;case 30:break;case 21:break;default:Qn(i,r),Wn(r)}}function Wn(r){var i=r.flags;if(i&2){try{for(var o,c=r.return;c!==null;){if(qb(c)){o=c;break}c=c.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var f=o.stateNode,y=dp(r);Fd(r,y,f);break;case 5:var E=o.stateNode;o.flags&32&&(sr(E,""),o.flags&=-33);var N=dp(r);Fd(r,N,E);break;case 3:case 4:var V=o.stateNode.containerInfo,Z=dp(r);hp(r,Z,V);break;default:throw Error(s(161))}}catch(ae){mt(r,r.return,ae)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function Xb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;Xb(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function hi(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)$b(r,i.alternate,i),i=i.sibling}function Ca(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:di(4,i,i.return),Ca(i);break;case 1:Wr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Bb(i,i.return,o),Ca(i);break;case 27:Dc(i.stateNode);case 26:case 5:Wr(i,i.return),Ca(i);break;case 22:i.memoizedState===null&&Ca(i);break;case 30:Ca(i);break;default:Ca(i)}r=r.sibling}}function fi(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=r,y=i,E=y.flags;switch(y.tag){case 0:case 11:case 15:fi(f,y,o),wc(4,y);break;case 1:if(fi(f,y,o),c=y,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Z){mt(c,c.return,Z)}if(c=y,f=c.updateQueue,f!==null){var N=c.stateNode;try{var V=f.shared.hiddenCallbacks;if(V!==null)for(f.shared.hiddenCallbacks=null,f=0;f<V.length;f++)A0(V[f],N)}catch(Z){mt(c,c.return,Z)}}o&&E&64&&zb(y),xc(y,y.return);break;case 27:Hb(y);case 26:case 5:fi(f,y,o),o&&c===null&&E&4&&Fb(y),xc(y,y.return);break;case 12:fi(f,y,o);break;case 13:fi(f,y,o),o&&E&4&&Wb(f,y);break;case 22:y.memoizedState===null&&fi(f,y,o),xc(y,y.return);break;case 30:break;default:fi(f,y,o)}i=i.sibling}}function pp(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&oc(o))}function gp(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&oc(r))}function Yr(r,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Zb(r,i,o,c),i=i.sibling}function Zb(r,i,o,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Yr(r,i,o,c),f&2048&&wc(9,i);break;case 1:Yr(r,i,o,c);break;case 3:Yr(r,i,o,c),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&oc(r)));break;case 12:if(f&2048){Yr(r,i,o,c),r=i.stateNode;try{var y=i.memoizedProps,E=y.id,N=y.onPostCommit;typeof N=="function"&&N(E,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(V){mt(i,i.return,V)}}else Yr(r,i,o,c);break;case 13:Yr(r,i,o,c);break;case 23:break;case 22:y=i.stateNode,E=i.alternate,i.memoizedState!==null?y._visibility&2?Yr(r,i,o,c):Ec(r,i):y._visibility&2?Yr(r,i,o,c):(y._visibility|=2,Io(r,i,o,c,(i.subtreeFlags&10256)!==0)),f&2048&&pp(E,i);break;case 24:Yr(r,i,o,c),f&2048&&gp(i.alternate,i);break;default:Yr(r,i,o,c)}}function Io(r,i,o,c,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var y=r,E=i,N=o,V=c,Z=E.flags;switch(E.tag){case 0:case 11:case 15:Io(y,E,N,V,f),wc(8,E);break;case 23:break;case 22:var ae=E.stateNode;E.memoizedState!==null?ae._visibility&2?Io(y,E,N,V,f):Ec(y,E):(ae._visibility|=2,Io(y,E,N,V,f)),f&&Z&2048&&pp(E.alternate,E);break;case 24:Io(y,E,N,V,f),f&&Z&2048&&gp(E.alternate,E);break;default:Io(y,E,N,V,f)}i=i.sibling}}function Ec(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,c=i,f=c.flags;switch(c.tag){case 22:Ec(o,c),f&2048&&pp(c.alternate,c);break;case 24:Ec(o,c),f&2048&&gp(c.alternate,c);break;default:Ec(o,c)}i=i.sibling}}var Tc=8192;function Do(r){if(r.subtreeFlags&Tc)for(r=r.child;r!==null;)Jb(r),r=r.sibling}function Jb(r){switch(r.tag){case 26:Do(r),r.flags&Tc&&r.memoizedState!==null&&qR(Sr,r.memoizedState,r.memoizedProps);break;case 5:Do(r);break;case 3:case 4:var i=Sr;Sr=th(r.stateNode.containerInfo),Do(r),Sr=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=Tc,Tc=16777216,Do(r),Tc=i):Do(r));break;default:Do(r)}}function e_(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Sc(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];an=c,n_(c,r)}e_(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)t_(r),r=r.sibling}function t_(r){switch(r.tag){case 0:case 11:case 15:Sc(r),r.flags&2048&&di(9,r,r.return);break;case 3:Sc(r);break;case 12:Sc(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,qd(r)):Sc(r);break;default:Sc(r)}}function qd(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];an=c,n_(c,r)}e_(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:di(8,i,i.return),qd(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,qd(i));break;default:qd(i)}r=r.sibling}}function n_(r,i){for(;an!==null;){var o=an;switch(o.tag){case 0:case 11:case 15:di(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:oc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,an=c;else e:for(o=r;an!==null;){c=an;var f=c.sibling,y=c.return;if(Kb(c),c===o){an=null;break e}if(f!==null){f.return=y,an=f;break e}an=y}}}var iR={getCacheForType:function(r){var i=Rn(Yt),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o}},aR=typeof WeakMap=="function"?WeakMap:Map,at=0,gt=null,He=null,Ye=0,ot=0,Yn=null,mi=!1,ko=!1,yp=!1,Ds=0,It=0,pi=0,Ia=0,vp=0,fr=0,Oo=0,Ac=null,Bn=null,bp=!1,_p=0,Hd=1/0,Gd=null,gi=null,bn=0,yi=null,Po=null,jo=0,wp=0,xp=null,r_=null,Rc=0,Ep=null;function Xn(){if((at&2)!==0&&Ye!==0)return Ye&-Ye;if(Y.T!==null){var r=xo;return r!==0?r:Ip()}return Zs()}function s_(){fr===0&&(fr=(Ye&536870912)===0||nt?Ml():536870912);var r=hr.current;return r!==null&&(r.flags|=32),fr}function Zn(r,i,o){(r===gt&&(ot===2||ot===9)||r.cancelPendingCommit!==null)&&(Mo(r,0),vi(r,Ye,fr,!1)),cs(r,o),((at&2)===0||r!==gt)&&(r===gt&&((at&2)===0&&(Ia|=o),It===4&&vi(r,Ye,fr,!1)),Xr(r))}function i_(r,i,o){if((at&6)!==0)throw Error(s(327));var c=!o&&(i&124)===0&&(i&r.expiredLanes)===0||na(r,i),f=c?cR(r,i):Ap(r,i,!0),y=c;do{if(f===0){ko&&!c&&vi(r,i,0,!1);break}else{if(o=r.current.alternate,y&&!oR(o)){f=Ap(r,i,!1),y=!1;continue}if(f===2){if(y=i,r.errorRecoveryDisabledLanes&y)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var N=r;f=Ac;var V=N.current.memoizedState.isDehydrated;if(V&&(Mo(N,E).flags|=256),E=Ap(N,E,!1),E!==2){if(yp&&!V){N.errorRecoveryDisabledLanes|=y,Ia|=y,f=4;break e}y=Bn,Bn=f,y!==null&&(Bn===null?Bn=y:Bn.push.apply(Bn,y))}f=E}if(y=!1,f!==2)continue}}if(f===1){Mo(r,0),vi(r,i,0,!0);break}e:{switch(c=r,y=f,y){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:vi(c,i,fr,!mi);break e;case 2:Bn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=_p+300-pn(),10<f)){if(vi(c,i,fr,!mi),Za(c,0,!0)!==0)break e;c.timeoutHandle=P_(a_.bind(null,c,o,Bn,Gd,bp,i,fr,Ia,Oo,mi,y,2,-0,0),f);break e}a_(c,o,Bn,Gd,bp,i,fr,Ia,Oo,mi,y,0,-0,0)}}break}while(!0);Xr(r)}function a_(r,i,o,c,f,y,E,N,V,Z,ae,le,J,ee){if(r.timeoutHandle=-1,le=i.subtreeFlags,(le&8192||(le&16785408)===16785408)&&(Pc={stylesheets:null,count:0,unsuspend:FR},Jb(i),le=HR(),le!==null)){r.cancelPendingCommit=le(f_.bind(null,r,i,y,o,c,f,E,N,V,ae,1,J,ee)),vi(r,y,E,!Z);return}f_(r,i,y,o,c,f,E,N,V)}function oR(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],y=f.getSnapshot;f=f.value;try{if(!$n(y(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function vi(r,i,o,c){i&=~vp,i&=~Ia,r.suspendedLanes|=i,r.pingedLanes&=~i,c&&(r.warmLanes|=i),c=r.expirationTimes;for(var f=i;0<f;){var y=31-An(f),E=1<<y;c[y]=-1,f&=~E}o!==0&&Mr(r,o,i)}function $d(){return(at&6)===0?(Nc(0),!1):!0}function Tp(){if(He!==null){if(ot===0)var r=He.return;else r=He,Es=Ta=null,Bm(r),No=null,vc=0,r=He;for(;r!==null;)Ub(r.alternate,r),r=r.return;He=null}}function Mo(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,SR(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Tp(),gt=r,He=o=_s(r.current,null),Ye=i,ot=0,Yn=null,mi=!1,ko=na(r,i),yp=!1,Oo=fr=vp=Ia=pi=It=0,Bn=Ac=null,bp=!1,(i&8)!==0&&(i|=i&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=i;0<c;){var f=31-An(c),y=1<<f;i|=r[f],c&=~y}return Ds=i,md(),o}function o_(r,i){ze=null,Y.H=Od,i===cc||i===Ed?(i=T0(),ot=3):i===w0?(i=T0(),ot=4):ot=i===Sb?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Yn=i,He===null&&(It=1,Ld(r,lr(i,r.current)))}function l_(){var r=Y.H;return Y.H=Od,r===null?Od:r}function c_(){var r=Y.A;return Y.A=iR,r}function Sp(){It=4,mi||(Ye&4194048)!==Ye&&hr.current!==null||(ko=!0),(pi&134217727)===0&&(Ia&134217727)===0||gt===null||vi(gt,Ye,fr,!1)}function Ap(r,i,o){var c=at;at|=2;var f=l_(),y=c_();(gt!==r||Ye!==i)&&(Gd=null,Mo(r,i)),i=!1;var E=It;e:do try{if(ot!==0&&He!==null){var N=He,V=Yn;switch(ot){case 8:Tp(),E=6;break e;case 3:case 2:case 9:case 6:hr.current===null&&(i=!0);var Z=ot;if(ot=0,Yn=null,Vo(r,N,V,Z),o&&ko){E=0;break e}break;default:Z=ot,ot=0,Yn=null,Vo(r,N,V,Z)}}lR(),E=It;break}catch(ae){o_(r,ae)}while(!0);return i&&r.shellSuspendCounter++,Es=Ta=null,at=c,Y.H=f,Y.A=y,He===null&&(gt=null,Ye=0,md()),E}function lR(){for(;He!==null;)u_(He)}function cR(r,i){var o=at;at|=2;var c=l_(),f=c_();gt!==r||Ye!==i?(Gd=null,Hd=pn()+500,Mo(r,i)):ko=na(r,i);e:do try{if(ot!==0&&He!==null){i=He;var y=Yn;t:switch(ot){case 1:ot=0,Yn=null,Vo(r,i,y,1);break;case 2:case 9:if(x0(y)){ot=0,Yn=null,d_(i);break}i=function(){ot!==2&&ot!==9||gt!==r||(ot=7),Xr(r)},y.then(i,i);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:x0(y)?(ot=0,Yn=null,d_(i)):(ot=0,Yn=null,Vo(r,i,y,7));break;case 5:var E=null;switch(He.tag){case 26:E=He.memoizedState;case 5:case 27:var N=He;if(!E||$_(E)){ot=0,Yn=null;var V=N.sibling;if(V!==null)He=V;else{var Z=N.return;Z!==null?(He=Z,Kd(Z)):He=null}break t}}ot=0,Yn=null,Vo(r,i,y,5);break;case 6:ot=0,Yn=null,Vo(r,i,y,6);break;case 8:Tp(),It=6;break e;default:throw Error(s(462))}}uR();break}catch(ae){o_(r,ae)}while(!0);return Es=Ta=null,Y.H=c,Y.A=f,at=o,He!==null?0:(gt=null,Ye=0,md(),It)}function uR(){for(;He!==null&&!Mt();)u_(He)}function u_(r){var i=Vb(r.alternate,r,Ds);r.memoizedProps=r.pendingProps,i===null?Kd(r):He=i}function d_(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=Db(o,i,i.pendingProps,i.type,void 0,Ye);break;case 11:i=Db(o,i,i.pendingProps,i.type.render,i.ref,Ye);break;case 5:Bm(i);default:Ub(o,i),i=He=h0(i,Ds),i=Vb(o,i,Ds)}r.memoizedProps=r.pendingProps,i===null?Kd(r):He=i}function Vo(r,i,o,c){Es=Ta=null,Bm(i),No=null,vc=0;var f=i.return;try{if(J2(r,f,i,o,Ye)){It=1,Ld(r,lr(o,r.current)),He=null;return}}catch(y){if(f!==null)throw He=f,y;It=1,Ld(r,lr(o,r.current)),He=null;return}i.flags&32768?(nt||c===1?r=!0:ko||(Ye&536870912)!==0?r=!1:(mi=r=!0,(c===2||c===9||c===3||c===6)&&(c=hr.current,c!==null&&c.tag===13&&(c.flags|=16384))),h_(i,r)):Kd(i)}function Kd(r){var i=r;do{if((i.flags&32768)!==0){h_(i,mi);return}r=i.return;var o=tR(i.alternate,i,Ds);if(o!==null){He=o;return}if(i=i.sibling,i!==null){He=i;return}He=i=r}while(i!==null);It===0&&(It=5)}function h_(r,i){do{var o=nR(r.alternate,r);if(o!==null){o.flags&=32767,He=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){He=r;return}He=r=o}while(r!==null);It=6,He=null}function f_(r,i,o,c,f,y,E,N,V){r.cancelPendingCommit=null;do Qd();while(bn!==0);if((at&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(y=i.lanes|i.childLanes,y|=gm,Ll(r,o,y,E,N,V),r===gt&&(He=gt=null,Ye=0),Po=i,yi=r,jo=o,wp=y,xp=f,r_=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,mR(Zi,function(){return v_(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,f=he.p,he.p=2,E=at,at|=4;try{rR(r,i,o)}finally{at=E,he.p=f,Y.T=c}}bn=1,m_(),p_(),g_()}}function m_(){if(bn===1){bn=0;var r=yi,i=Po,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var c=he.p;he.p=2;var f=at;at|=4;try{Yb(i,r);var y=Lp,E=n0(r.containerInfo),N=y.focusedElem,V=y.selectionRange;if(E!==N&&N&&N.ownerDocument&&t0(N.ownerDocument.documentElement,N)){if(V!==null&&dm(N)){var Z=V.start,ae=V.end;if(ae===void 0&&(ae=Z),"selectionStart"in N)N.selectionStart=Z,N.selectionEnd=Math.min(ae,N.value.length);else{var le=N.ownerDocument||document,J=le&&le.defaultView||window;if(J.getSelection){var ee=J.getSelection(),Pe=N.textContent.length,De=Math.min(V.start,Pe),ht=V.end===void 0?De:Math.min(V.end,Pe);!ee.extend&&De>ht&&(E=ht,ht=De,De=E);var $=e0(N,De),q=e0(N,ht);if($&&q&&(ee.rangeCount!==1||ee.anchorNode!==$.node||ee.anchorOffset!==$.offset||ee.focusNode!==q.node||ee.focusOffset!==q.offset)){var X=le.createRange();X.setStart($.node,$.offset),ee.removeAllRanges(),De>ht?(ee.addRange(X),ee.extend(q.node,q.offset)):(X.setEnd(q.node,q.offset),ee.addRange(X))}}}}for(le=[],ee=N;ee=ee.parentNode;)ee.nodeType===1&&le.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<le.length;N++){var oe=le[N];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}ah=!!Vp,Lp=Vp=null}finally{at=f,he.p=c,Y.T=o}}r.current=i,bn=2}}function p_(){if(bn===2){bn=0;var r=yi,i=Po,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var c=he.p;he.p=2;var f=at;at|=4;try{$b(r,i.alternate,i)}finally{at=f,he.p=c,Y.T=o}}bn=3}}function g_(){if(bn===4||bn===3){bn=0,Ln();var r=yi,i=Po,o=jo,c=r_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?bn=5:(bn=0,Po=yi=null,y_(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(gi=null),Ja(o),i=i.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(Nt,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=Y.T,f=he.p,he.p=2,Y.T=null;try{for(var y=r.onRecoverableError,E=0;E<c.length;E++){var N=c[E];y(N.value,{componentStack:N.stack})}}finally{Y.T=i,he.p=f}}(jo&3)!==0&&Qd(),Xr(r),f=r.pendingLanes,(o&4194090)!==0&&(f&42)!==0?r===Ep?Rc++:(Rc=0,Ep=r):Rc=0,Nc(0)}}function y_(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,oc(i)))}function Qd(r){return m_(),p_(),g_(),v_()}function v_(){if(bn!==5)return!1;var r=yi,i=wp;wp=0;var o=Ja(jo),c=Y.T,f=he.p;try{he.p=32>o?32:o,Y.T=null,o=xp,xp=null;var y=yi,E=jo;if(bn=0,Po=yi=null,jo=0,(at&6)!==0)throw Error(s(331));var N=at;if(at|=4,t_(y.current),Zb(y,y.current,E,o),at=N,Nc(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(Nt,y)}catch{}return!0}finally{he.p=f,Y.T=c,y_(r,i)}}function b_(r,i,o){i=lr(o,i),i=tp(r.stateNode,i,2),r=oi(r,i,2),r!==null&&(cs(r,2),Xr(r))}function mt(r,i,o){if(r.tag===3)b_(r,r,o);else for(;i!==null;){if(i.tag===3){b_(i,r,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(gi===null||!gi.has(c))){r=lr(o,r),o=Eb(2),c=oi(i,o,2),c!==null&&(Tb(o,c,i,r),cs(c,2),Xr(c));break}}i=i.return}}function Rp(r,i,o){var c=r.pingCache;if(c===null){c=r.pingCache=new aR;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(o)||(yp=!0,f.add(o),r=dR.bind(null,r,i,o),i.then(r,r))}function dR(r,i,o){var c=r.pingCache;c!==null&&c.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,gt===r&&(Ye&o)===o&&(It===4||It===3&&(Ye&62914560)===Ye&&300>pn()-_p?(at&2)===0&&Mo(r,0):vp|=o,Oo===Ye&&(Oo=0)),Xr(r)}function __(r,i){i===0&&(i=Vl()),r=vo(r,i),r!==null&&(cs(r,i),Xr(r))}function hR(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),__(r,o)}function fR(r,i){var o=0;switch(r.tag){case 13:var c=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),__(r,o)}function mR(r,i){return ve(r,i)}var Wd=null,Lo=null,Np=!1,Yd=!1,Cp=!1,Da=0;function Xr(r){r!==Lo&&r.next===null&&(Lo===null?Wd=Lo=r:Lo=Lo.next=r),Yd=!0,Np||(Np=!0,gR())}function Nc(r,i){if(!Cp&&Yd){Cp=!0;do for(var o=!1,c=Wd;c!==null;){if(r!==0){var f=c.pendingLanes;if(f===0)var y=0;else{var E=c.suspendedLanes,N=c.pingedLanes;y=(1<<31-An(42|r)+1)-1,y&=f&~(E&~N),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,T_(c,y))}else y=Ye,y=Za(c,c===gt?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||na(c,y)||(o=!0,T_(c,y));c=c.next}while(o);Cp=!1}}function pR(){w_()}function w_(){Yd=Np=!1;var r=0;Da!==0&&(TR()&&(r=Da),Da=0);for(var i=pn(),o=null,c=Wd;c!==null;){var f=c.next,y=x_(c,i);y===0?(c.next=null,o===null?Wd=f:o.next=f,f===null&&(Lo=o)):(o=c,(r!==0||(y&3)!==0)&&(Yd=!0)),c=f}Nc(r)}function x_(r,i){for(var o=r.suspendedLanes,c=r.pingedLanes,f=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var E=31-An(y),N=1<<E,V=f[E];V===-1?((N&o)===0||(N&c)!==0)&&(f[E]=jl(N,i)):V<=i&&(r.expiredLanes|=N),y&=~N}if(i=gt,o=Ye,o=Za(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,o===0||r===i&&(ot===2||ot===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&lt(c),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||na(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(c!==null&&lt(c),Ja(o)){case 2:case 8:o=Ya;break;case 32:o=Zi;break;case 268435456:o=Xa;break;default:o=Zi}return c=E_.bind(null,r),o=ve(o,c),r.callbackPriority=i,r.callbackNode=o,i}return c!==null&&c!==null&&lt(c),r.callbackPriority=2,r.callbackNode=null,2}function E_(r,i){if(bn!==0&&bn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Qd()&&r.callbackNode!==o)return null;var c=Ye;return c=Za(r,r===gt?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(i_(r,c,i),x_(r,pn()),r.callbackNode!=null&&r.callbackNode===o?E_.bind(null,r):null)}function T_(r,i){if(Qd())return null;i_(r,i,!0)}function gR(){AR(function(){(at&6)!==0?ve(Ys,pR):w_()})}function Ip(){return Da===0&&(Da=Ml()),Da}function S_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:io(""+r)}function A_(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function yR(r,i,o,c,f){if(i==="submit"&&o&&o.stateNode===f){var y=S_((f[Vt]||null).action),E=c.submitter;E&&(i=(i=E[Vt]||null)?S_(i.formAction):E.getAttribute("formAction"),i!==null&&(y=i,E=null));var N=new ao("action","action",null,c,f);r.push({event:N,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Da!==0){var V=E?A_(f,E):new FormData(f);Ym(o,{pending:!0,data:V,method:f.method,action:y},null,V)}}else typeof y=="function"&&(N.preventDefault(),V=E?A_(f,E):new FormData(f),Ym(o,{pending:!0,data:V,method:f.method,action:y},y,V))},currentTarget:f}]})}}for(var Dp=0;Dp<pm.length;Dp++){var kp=pm[Dp],vR=kp.toLowerCase(),bR=kp[0].toUpperCase()+kp.slice(1);Tr(vR,"on"+bR)}Tr(i0,"onAnimationEnd"),Tr(a0,"onAnimationIteration"),Tr(o0,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(M2,"onTransitionRun"),Tr(V2,"onTransitionStart"),Tr(L2,"onTransitionCancel"),Tr(l0,"onTransitionEnd"),ds("onMouseEnter",["mouseout","mouseover"]),ds("onMouseLeave",["mouseout","mouseover"]),ds("onPointerEnter",["pointerout","pointerover"]),ds("onPointerLeave",["pointerout","pointerover"]),xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xr("onBeforeInput",["compositionend","keypress","textInput","paste"]),xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_R=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cc));function R_(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var c=r[o],f=c.event;c=c.listeners;e:{var y=void 0;if(i)for(var E=c.length-1;0<=E;E--){var N=c[E],V=N.instance,Z=N.currentTarget;if(N=N.listener,V!==y&&f.isPropagationStopped())break e;y=N,f.currentTarget=Z;try{y(f)}catch(ae){Vd(ae)}f.currentTarget=null,y=V}else for(E=0;E<c.length;E++){if(N=c[E],V=N.instance,Z=N.currentTarget,N=N.listener,V!==y&&f.isPropagationStopped())break e;y=N,f.currentTarget=Z;try{y(f)}catch(ae){Vd(ae)}f.currentTarget=null,y=V}}}}function Ge(r,i){var o=i[zl];o===void 0&&(o=i[zl]=new Set);var c=r+"__bubble";o.has(c)||(N_(i,r,2,!1),o.add(c))}function Op(r,i,o){var c=0;i&&(c|=4),N_(o,r,c,i)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Pp(r){if(!r[Xd]){r[Xd]=!0,Bl.forEach(function(o){o!=="selectionchange"&&(_R.has(o)||Op(o,!1,r),Op(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Xd]||(i[Xd]=!0,Op("selectionchange",!1,i))}}function N_(r,i,o,c){switch(Z_(i)){case 2:var f=KR;break;case 8:f=QR;break;default:f=Qp}o=f.bind(null,i,o,r),f=void 0,!ar||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?r.addEventListener(i,o,{capture:!0,passive:f}):r.addEventListener(i,o,!0):f!==void 0?r.addEventListener(i,o,{passive:f}):r.addEventListener(i,o,!1)}function jp(r,i,o,c,f){var y=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var N=c.stateNode.containerInfo;if(N===f)break;if(E===4)for(E=c.return;E!==null;){var V=E.tag;if((V===3||V===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;N!==null;){if(E=us(N),E===null)return;if(V=E.tag,V===5||V===6||V===26||V===27){c=y=E;continue e}N=N.parentNode}}c=c.return}Ju(function(){var Z=y,ae=ir(o),le=[];e:{var J=c0.get(r);if(J!==void 0){var ee=ao,Pe=r;switch(r){case"keypress":if(Fr(o)===0)break e;case"keydown":case"keyup":ee=fo;break;case"focusin":Pe="focus",ee=co;break;case"focusout":Pe="blur",ee=co;break;case"beforeblur":case"afterblur":ee=co;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=or;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=om;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=od;break;case i0:case a0:case o0:ee=uo;break;case l0:ee=cd;break;case"scroll":case"scrollend":ee=ed;break;case"wheel":ee=mo;break;case"copy":case"cut":case"paste":ee=ho;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Jl;break;case"toggle":case"beforetoggle":ee=dd}var De=(i&4)!==0,ht=!De&&(r==="scroll"||r==="scrollend"),$=De?J!==null?J+"Capture":null:J;De=[];for(var q=Z,X;q!==null;){var oe=q;if(X=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||X===null||$===null||(oe=ua(q,$),oe!=null&&De.push(Ic(q,oe,X))),ht)break;q=q.return}0<De.length&&(J=new ee(J,Pe,null,o,ae),le.push({event:J,listeners:De}))}}if((i&7)===0){e:{if(J=r==="mouseover"||r==="pointerover",ee=r==="mouseout"||r==="pointerout",J&&o!==ms&&(Pe=o.relatedTarget||o.fromElement)&&(us(Pe)||Pe[rr]))break e;if((ee||J)&&(J=ae.window===ae?ae:(J=ae.ownerDocument)?J.defaultView||J.parentWindow:window,ee?(Pe=o.relatedTarget||o.toElement,ee=Z,Pe=Pe?us(Pe):null,Pe!==null&&(ht=l(Pe),De=Pe.tag,Pe!==ht||De!==5&&De!==27&&De!==6)&&(Pe=null)):(ee=null,Pe=Z),ee!==Pe)){if(De=or,oe="onMouseLeave",$="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(De=Jl,oe="onPointerLeave",$="onPointerEnter",q="pointer"),ht=ee==null?J:Lr(ee),X=Pe==null?J:Lr(Pe),J=new De(oe,q+"leave",ee,o,ae),J.target=ht,J.relatedTarget=X,oe=null,us(ae)===Z&&(De=new De($,q+"enter",Pe,o,ae),De.target=X,De.relatedTarget=ht,oe=De),ht=oe,ee&&Pe)t:{for(De=ee,$=Pe,q=0,X=De;X;X=Uo(X))q++;for(X=0,oe=$;oe;oe=Uo(oe))X++;for(;0<q-X;)De=Uo(De),q--;for(;0<X-q;)$=Uo($),X--;for(;q--;){if(De===$||$!==null&&De===$.alternate)break t;De=Uo(De),$=Uo($)}De=null}else De=null;ee!==null&&C_(le,J,ee,De,!1),Pe!==null&&ht!==null&&C_(le,ht,Pe,De,!0)}}e:{if(J=Z?Lr(Z):window,ee=J.nodeName&&J.nodeName.toLowerCase(),ee==="select"||ee==="input"&&J.type==="file")var be=Qv;else if(Wt(J))if(Wv)be=O2;else{be=D2;var qe=I2}else ee=J.nodeName,!ee||ee.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Z&&$l(Z.elementType)&&(be=Qv):be=k2;if(be&&(be=be(r,Z))){bs(le,be,o,ae);break e}qe&&qe(r,J,Z),r==="focusout"&&Z&&J.type==="number"&&Z.memoizedProps.value!=null&&ni(J,"number",J.value)}switch(qe=Z?Lr(Z):window,r){case"focusin":(Wt(qe)||qe.contentEditable==="true")&&(po=qe,hm=Z,nc=null);break;case"focusout":nc=hm=po=null;break;case"mousedown":fm=!0;break;case"contextmenu":case"mouseup":case"dragend":fm=!1,r0(le,o,ae);break;case"selectionchange":if(j2)break;case"keydown":case"keyup":r0(le,o,ae)}var Se;if(Gr)e:{switch(r){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Qe?te(r,o)&&(ke="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ke="onCompositionStart");ke&&(x&&o.locale!=="ko"&&(Qe||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Qe&&(Se=Ql()):(Br=ae,ri="value"in Br?Br.value:Br.textContent,Qe=!0)),qe=Zd(Z,ke),0<qe.length&&(ke=new Xl(ke,r,null,o,ae),le.push({event:ke,listeners:qe}),Se?ke.data=Se:(Se=me(o),Se!==null&&(ke.data=Se)))),(Se=b?Qt(r,o):We(r,o))&&(ke=Zd(Z,"onBeforeInput"),0<ke.length&&(qe=new Xl("onBeforeInput","beforeinput",null,o,ae),le.push({event:qe,listeners:ke}),qe.data=Se)),yR(le,r,Z,o,ae)}R_(le,i)})}function Ic(r,i,o){return{instance:r,listener:i,currentTarget:o}}function Zd(r,i){for(var o=i+"Capture",c=[];r!==null;){var f=r,y=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||y===null||(f=ua(r,o),f!=null&&c.unshift(Ic(r,f,y)),f=ua(r,i),f!=null&&c.push(Ic(r,f,y))),r.tag===3)return c;r=r.return}return[]}function Uo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function C_(r,i,o,c,f){for(var y=i._reactName,E=[];o!==null&&o!==c;){var N=o,V=N.alternate,Z=N.stateNode;if(N=N.tag,V!==null&&V===c)break;N!==5&&N!==26&&N!==27||Z===null||(V=Z,f?(Z=ua(o,y),Z!=null&&E.unshift(Ic(o,Z,V))):f||(Z=ua(o,y),Z!=null&&E.push(Ic(o,Z,V)))),o=o.return}E.length!==0&&r.push({event:i,listeners:E})}var wR=/\r\n?/g,xR=/\u0000|\uFFFD/g;function I_(r){return(typeof r=="string"?r:""+r).replace(wR,`
`).replace(xR,"")}function D_(r,i){return i=I_(i),I_(r)===i}function Jd(){}function dt(r,i,o,c,f,y){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||sr(r,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&sr(r,""+c);break;case"className":Ur(r,"class",c);break;case"tabIndex":Ur(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ur(r,o,c);break;case"style":Gl(r,c,y);break;case"data":if(i!=="object"){Ur(r,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=io(""+c),r.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&dt(r,i,"name",f.name,f,null),dt(r,i,"formEncType",f.formEncType,f,null),dt(r,i,"formMethod",f.formMethod,f,null),dt(r,i,"formTarget",f.formTarget,f,null)):(dt(r,i,"encType",f.encType,f,null),dt(r,i,"method",f.method,f,null),dt(r,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=io(""+c),r.setAttribute(o,c);break;case"onClick":c!=null&&(r.onclick=Jd);break;case"onScroll":c!=null&&Ge("scroll",r);break;case"onScrollEnd":c!=null&&Ge("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}o=io(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""+c):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":c===!0?r.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,c):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(o,c):r.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(o):r.setAttribute(o,c);break;case"popover":Ge("beforetoggle",r),Ge("toggle",r),ti(r,"popover",c);break;case"xlinkActuate":gn(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":gn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":gn(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":gn(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":gn(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":gn(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":gn(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":gn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":gn(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ti(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=im.get(o)||o,ti(r,o,c))}}function Mp(r,i,o,c,f,y){switch(o){case"style":Gl(r,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"children":typeof c=="string"?sr(r,c):(typeof c=="number"||typeof c=="bigint")&&sr(r,""+c);break;case"onScroll":c!=null&&Ge("scroll",r);break;case"onScrollEnd":c!=null&&Ge("scrollend",r);break;case"onClick":c!=null&&(r.onclick=Jd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!eo.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),y=r[Vt]||null,y=y!=null?y[o]:null,typeof y=="function"&&r.removeEventListener(i,y,f),typeof c=="function")){typeof y!="function"&&y!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,c,f);break e}o in r?r[o]=c:c===!0?r.setAttribute(o,""):ti(r,o,c)}}}function _n(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",r),Ge("load",r);var c=!1,f=!1,y;for(y in o)if(o.hasOwnProperty(y)){var E=o[y];if(E!=null)switch(y){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:dt(r,i,y,E,o,null)}}f&&dt(r,i,"srcSet",o.srcSet,o,null),c&&dt(r,i,"src",o.src,o,null);return;case"input":Ge("invalid",r);var N=y=E=f=null,V=null,Z=null;for(c in o)if(o.hasOwnProperty(c)){var ae=o[c];if(ae!=null)switch(c){case"name":f=ae;break;case"type":E=ae;break;case"checked":V=ae;break;case"defaultChecked":Z=ae;break;case"value":y=ae;break;case"defaultValue":N=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,i));break;default:dt(r,i,c,ae,o,null)}}oa(r,y,N,V,Z,E,f,!1),so(r);return;case"select":Ge("invalid",r),c=E=y=null;for(f in o)if(o.hasOwnProperty(f)&&(N=o[f],N!=null))switch(f){case"value":y=N;break;case"defaultValue":E=N;break;case"multiple":c=N;default:dt(r,i,f,N,o,null)}i=y,o=E,r.multiple=!!c,i!=null?fs(r,!!c,i,!1):o!=null&&fs(r,!!c,o,!0);return;case"textarea":Ge("invalid",r),y=f=c=null;for(E in o)if(o.hasOwnProperty(E)&&(N=o[E],N!=null))switch(E){case"value":c=N;break;case"defaultValue":f=N;break;case"children":y=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(s(91));break;default:dt(r,i,E,N,o,null)}la(r,c,f,y),so(r);return;case"option":for(V in o)if(o.hasOwnProperty(V)&&(c=o[V],c!=null))switch(V){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:dt(r,i,V,c,o,null)}return;case"dialog":Ge("beforetoggle",r),Ge("toggle",r),Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":Ge("load",r);break;case"video":case"audio":for(c=0;c<Cc.length;c++)Ge(Cc[c],r);break;case"image":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"embed":case"source":case"link":Ge("error",r),Ge("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(c=o[Z],c!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:dt(r,i,Z,c,o,null)}return;default:if($l(i)){for(ae in o)o.hasOwnProperty(ae)&&(c=o[ae],c!==void 0&&Mp(r,i,ae,c,o,void 0));return}}for(N in o)o.hasOwnProperty(N)&&(c=o[N],c!=null&&dt(r,i,N,c,o,null))}function ER(r,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,y=null,E=null,N=null,V=null,Z=null,ae=null;for(ee in o){var le=o[ee];if(o.hasOwnProperty(ee)&&le!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":V=le;default:c.hasOwnProperty(ee)||dt(r,i,ee,null,c,le)}}for(var J in c){var ee=c[J];if(le=o[J],c.hasOwnProperty(J)&&(ee!=null||le!=null))switch(J){case"type":y=ee;break;case"name":f=ee;break;case"checked":Z=ee;break;case"defaultChecked":ae=ee;break;case"value":E=ee;break;case"defaultValue":N=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,i));break;default:ee!==le&&dt(r,i,J,ee,c,le)}}Gn(r,E,N,V,Z,ae,y,f);return;case"select":ee=E=N=J=null;for(y in o)if(V=o[y],o.hasOwnProperty(y)&&V!=null)switch(y){case"value":break;case"multiple":ee=V;default:c.hasOwnProperty(y)||dt(r,i,y,null,c,V)}for(f in c)if(y=c[f],V=o[f],c.hasOwnProperty(f)&&(y!=null||V!=null))switch(f){case"value":J=y;break;case"defaultValue":N=y;break;case"multiple":E=y;default:y!==V&&dt(r,i,f,y,c,V)}i=N,o=E,c=ee,J!=null?fs(r,!!o,J,!1):!!c!=!!o&&(i!=null?fs(r,!!o,i,!0):fs(r,!!o,o?[]:"",!1));return;case"textarea":ee=J=null;for(N in o)if(f=o[N],o.hasOwnProperty(N)&&f!=null&&!c.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:dt(r,i,N,null,c,f)}for(E in c)if(f=c[E],y=o[E],c.hasOwnProperty(E)&&(f!=null||y!=null))switch(E){case"value":J=f;break;case"defaultValue":ee=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==y&&dt(r,i,E,f,c,y)}ct(r,J,ee);return;case"option":for(var Pe in o)if(J=o[Pe],o.hasOwnProperty(Pe)&&J!=null&&!c.hasOwnProperty(Pe))switch(Pe){case"selected":r.selected=!1;break;default:dt(r,i,Pe,null,c,J)}for(V in c)if(J=c[V],ee=o[V],c.hasOwnProperty(V)&&J!==ee&&(J!=null||ee!=null))switch(V){case"selected":r.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:dt(r,i,V,J,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in o)J=o[De],o.hasOwnProperty(De)&&J!=null&&!c.hasOwnProperty(De)&&dt(r,i,De,null,c,J);for(Z in c)if(J=c[Z],ee=o[Z],c.hasOwnProperty(Z)&&J!==ee&&(J!=null||ee!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,i));break;default:dt(r,i,Z,J,c,ee)}return;default:if($l(i)){for(var ht in o)J=o[ht],o.hasOwnProperty(ht)&&J!==void 0&&!c.hasOwnProperty(ht)&&Mp(r,i,ht,void 0,c,J);for(ae in c)J=c[ae],ee=o[ae],!c.hasOwnProperty(ae)||J===ee||J===void 0&&ee===void 0||Mp(r,i,ae,J,c,ee);return}}for(var $ in o)J=o[$],o.hasOwnProperty($)&&J!=null&&!c.hasOwnProperty($)&&dt(r,i,$,null,c,J);for(le in c)J=c[le],ee=o[le],!c.hasOwnProperty(le)||J===ee||J==null&&ee==null||dt(r,i,le,J,c,ee)}var Vp=null,Lp=null;function eh(r){return r.nodeType===9?r:r.ownerDocument}function k_(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function O_(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Up(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var zp=null;function TR(){var r=window.event;return r&&r.type==="popstate"?r===zp?!1:(zp=r,!0):(zp=null,!1)}var P_=typeof setTimeout=="function"?setTimeout:void 0,SR=typeof clearTimeout=="function"?clearTimeout:void 0,j_=typeof Promise=="function"?Promise:void 0,AR=typeof queueMicrotask=="function"?queueMicrotask:typeof j_<"u"?function(r){return j_.resolve(null).then(r).catch(RR)}:P_;function RR(r){setTimeout(function(){throw r})}function bi(r){return r==="head"}function M_(r,i){var o=i,c=0,f=0;do{var y=o.nextSibling;if(r.removeChild(o),y&&y.nodeType===8)if(o=y.data,o==="/$"){if(0<c&&8>c){o=c;var E=r.ownerDocument;if(o&1&&Dc(E.documentElement),o&2&&Dc(E.body),o&4)for(o=E.head,Dc(o),E=o.firstChild;E;){var N=E.nextSibling,V=E.nodeName;E[ra]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=N}}if(f===0){r.removeChild(y),Uc(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:c=o.charCodeAt(0)-48;else c=0;o=y}while(o);Uc(i)}function Bp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Bp(o),ei(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function NR(r,i,o,c){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[ra])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var y=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=Ar(r.nextSibling),r===null)break}return null}function CR(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Ar(r.nextSibling),r===null))return null;return r}function Fp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function IR(r,i){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function Ar(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}var qp=null;function V_(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return r;i--}else o==="/$"&&i++}r=r.previousSibling}return null}function L_(r,i,o){switch(i=eh(o),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Dc(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);ei(r)}var mr=new Map,U_=new Set;function th(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ks=he.d;he.d={f:DR,r:kR,D:OR,C:PR,L:jR,m:MR,X:LR,S:VR,M:UR};function DR(){var r=ks.f(),i=$d();return r||i}function kR(r){var i=Vr(r);i!==null&&i.tag===5&&i.type==="form"?ib(i):ks.r(r)}var zo=typeof document>"u"?null:document;function z_(r,i,o){var c=zo;if(c&&typeof i=="string"&&i){var f=Lt(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),U_.has(f)||(U_.add(f),r={rel:r,crossOrigin:o,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),_n(i,"link",r),kt(i),c.head.appendChild(i)))}}function OR(r){ks.D(r),z_("dns-prefetch",r,null)}function PR(r,i){ks.C(r,i),z_("preconnect",r,i)}function jR(r,i,o){ks.L(r,i,o);var c=zo;if(c&&r&&i){var f='link[rel="preload"][as="'+Lt(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Lt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Lt(o.imageSizes)+'"]')):f+='[href="'+Lt(r)+'"]';var y=f;switch(i){case"style":y=Bo(r);break;case"script":y=Fo(r)}mr.has(y)||(r=v({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),mr.set(y,r),c.querySelector(f)!==null||i==="style"&&c.querySelector(kc(y))||i==="script"&&c.querySelector(Oc(y))||(i=c.createElement("link"),_n(i,"link",r),kt(i),c.head.appendChild(i)))}}function MR(r,i){ks.m(r,i);var o=zo;if(o&&r){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Lt(c)+'"][href="'+Lt(r)+'"]',y=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Fo(r)}if(!mr.has(y)&&(r=v({rel:"modulepreload",href:r},i),mr.set(y,r),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Oc(y)))return}c=o.createElement("link"),_n(c,"link",r),kt(c),o.head.appendChild(c)}}}function VR(r,i,o){ks.S(r,i,o);var c=zo;if(c&&r){var f=kn(c).hoistableStyles,y=Bo(r);i=i||"default";var E=f.get(y);if(!E){var N={loading:0,preload:null};if(E=c.querySelector(kc(y)))N.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":i},o),(o=mr.get(y))&&Hp(r,o);var V=E=c.createElement("link");kt(V),_n(V,"link",r),V._p=new Promise(function(Z,ae){V.onload=Z,V.onerror=ae}),V.addEventListener("load",function(){N.loading|=1}),V.addEventListener("error",function(){N.loading|=2}),N.loading|=4,nh(E,i,c)}E={type:"stylesheet",instance:E,count:1,state:N},f.set(y,E)}}}function LR(r,i){ks.X(r,i);var o=zo;if(o&&r){var c=kn(o).hoistableScripts,f=Fo(r),y=c.get(f);y||(y=o.querySelector(Oc(f)),y||(r=v({src:r,async:!0},i),(i=mr.get(f))&&Gp(r,i),y=o.createElement("script"),kt(y),_n(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(f,y))}}function UR(r,i){ks.M(r,i);var o=zo;if(o&&r){var c=kn(o).hoistableScripts,f=Fo(r),y=c.get(f);y||(y=o.querySelector(Oc(f)),y||(r=v({src:r,async:!0,type:"module"},i),(i=mr.get(f))&&Gp(r,i),y=o.createElement("script"),kt(y),_n(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(f,y))}}function B_(r,i,o,c){var f=(f=fe.current)?th(f):null;if(!f)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Bo(o.href),o=kn(f).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Bo(o.href);var y=kn(f).hoistableStyles,E=y.get(r);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,E),(y=f.querySelector(kc(r)))&&!y._p&&(E.instance=y,E.state.loading=5),mr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},mr.set(r,o),y||zR(f,r,o,E.state))),i&&c===null)throw Error(s(528,""));return E}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Fo(o),o=kn(f).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Bo(r){return'href="'+Lt(r)+'"'}function kc(r){return'link[rel="stylesheet"]['+r+"]"}function F_(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function zR(r,i,o,c){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=r.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),_n(i,"link",o),kt(i),r.head.appendChild(i))}function Fo(r){return'[src="'+Lt(r)+'"]'}function Oc(r){return"script[async]"+r}function q_(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=r.querySelector('style[data-href~="'+Lt(o.href)+'"]');if(c)return i.instance=c,kt(c),c;var f=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),kt(c),_n(c,"style",f),nh(c,o.precedence,r),i.instance=c;case"stylesheet":f=Bo(o.href);var y=r.querySelector(kc(f));if(y)return i.state.loading|=4,i.instance=y,kt(y),y;c=F_(o),(f=mr.get(f))&&Hp(c,f),y=(r.ownerDocument||r).createElement("link"),kt(y);var E=y;return E._p=new Promise(function(N,V){E.onload=N,E.onerror=V}),_n(y,"link",c),i.state.loading|=4,nh(y,o.precedence,r),i.instance=y;case"script":return y=Fo(o.src),(f=r.querySelector(Oc(y)))?(i.instance=f,kt(f),f):(c=o,(f=mr.get(y))&&(c=v({},o),Gp(c,f)),r=r.ownerDocument||r,f=r.createElement("script"),kt(f),_n(f,"link",c),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,nh(c,o.precedence,r));return i.instance}function nh(r,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,y=f,E=0;E<c.length;E++){var N=c[E];if(N.dataset.precedence===i)y=N;else if(y!==f)break}y?y.parentNode.insertBefore(r,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Hp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Gp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var rh=null;function H_(r,i,o){if(rh===null){var c=new Map,f=rh=new Map;f.set(o,c)}else f=rh,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(r))return c;for(c.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var y=o[f];if(!(y[ra]||y[Kt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(i)||"";E=r+E;var N=c.get(E);N?N.push(y):c.set(E,[y])}}return c}function G_(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function BR(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function $_(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Pc=null;function FR(){}function qR(r,i,o){if(Pc===null)throw Error(s(475));var c=Pc;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Bo(o.href),y=r.querySelector(kc(f));if(y){r=y._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=sh.bind(c),r.then(c,c)),i.state.loading|=4,i.instance=y,kt(y);return}y=r.ownerDocument||r,o=F_(o),(f=mr.get(f))&&Hp(o,f),y=y.createElement("link"),kt(y);var E=y;E._p=new Promise(function(N,V){E.onload=N,E.onerror=V}),_n(y,"link",o),i.instance=y}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=sh.bind(c),r.addEventListener("load",i),r.addEventListener("error",i))}}function HR(){if(Pc===null)throw Error(s(475));var r=Pc;return r.stylesheets&&r.count===0&&$p(r,r.stylesheets),0<r.count?function(i){var o=setTimeout(function(){if(r.stylesheets&&$p(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(o)}}:null}function sh(){if(this.count--,this.count===0){if(this.stylesheets)$p(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var ih=null;function $p(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,ih=new Map,i.forEach(GR,r),ih=null,sh.call(r))}function GR(r,i){if(!(i.state.loading&4)){var o=ih.get(r);if(o)var c=o.get(null);else{o=new Map,ih.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<f.length;y++){var E=f[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),c=E)}c&&o.set(null,c)}f=i.instance,E=f.getAttribute("data-precedence"),y=o.get(E)||c,y===c&&o.set(null,f),o.set(E,f),this.count++,c=sh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),y?y.parentNode.insertBefore(f,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var jc={$$typeof:H,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function $R(r,i,o,c,f,y,E,N){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ls(0),this.hiddenUpdates=ls(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function K_(r,i,o,c,f,y,E,N,V,Z,ae,le){return r=new $R(r,i,o,E,N,V,Z,le),i=1,y===!0&&(i|=24),y=Kn(3,null,null,i),r.current=y,y.stateNode=r,i=Rm(),i.refCount++,r.pooledCache=i,i.refCount++,y.memoizedState={element:c,isDehydrated:o,cache:i},Dm(y),r}function Q_(r){return r?(r=bo,r):bo}function W_(r,i,o,c,f,y){f=Q_(f),c.context===null?c.context=f:c.pendingContext=f,c=ai(i),c.payload={element:o},y=y===void 0?null:y,y!==null&&(c.callback=y),o=oi(r,c,i),o!==null&&(Zn(o,r,i),dc(o,r,i))}function Y_(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function Kp(r,i){Y_(r,i),(r=r.alternate)&&Y_(r,i)}function X_(r){if(r.tag===13){var i=vo(r,67108864);i!==null&&Zn(i,r,67108864),Kp(r,67108864)}}var ah=!0;function KR(r,i,o,c){var f=Y.T;Y.T=null;var y=he.p;try{he.p=2,Qp(r,i,o,c)}finally{he.p=y,Y.T=f}}function QR(r,i,o,c){var f=Y.T;Y.T=null;var y=he.p;try{he.p=8,Qp(r,i,o,c)}finally{he.p=y,Y.T=f}}function Qp(r,i,o,c){if(ah){var f=Wp(c);if(f===null)jp(r,i,c,oh,o),J_(r,c);else if(YR(f,r,i,o,c))c.stopPropagation();else if(J_(r,c),i&4&&-1<WR.indexOf(r)){for(;f!==null;){var y=Vr(f);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=wr(y.pendingLanes);if(E!==0){var N=y;for(N.pendingLanes|=2,N.entangledLanes|=2;E;){var V=1<<31-An(E);N.entanglements[1]|=V,E&=~V}Xr(y),(at&6)===0&&(Hd=pn()+500,Nc(0))}}break;case 13:N=vo(y,2),N!==null&&Zn(N,y,2),$d(),Kp(y,2)}if(y=Wp(c),y===null&&jp(r,i,c,oh,o),y===f)break;f=y}f!==null&&c.stopPropagation()}else jp(r,i,c,null,o)}}function Wp(r){return r=ir(r),Yp(r)}var oh=null;function Yp(r){if(oh=null,r=us(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=u(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return oh=r,null}function Z_(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(os()){case Ys:return 2;case Ya:return 8;case Zi:case em:return 32;case Xa:return 268435456;default:return 32}default:return 32}}var Xp=!1,_i=null,wi=null,xi=null,Mc=new Map,Vc=new Map,Ei=[],WR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function J_(r,i){switch(r){case"focusin":case"focusout":_i=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":Mc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vc.delete(i.pointerId)}}function Lc(r,i,o,c,f,y){return r===null||r.nativeEvent!==y?(r={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:y,targetContainers:[f]},i!==null&&(i=Vr(i),i!==null&&X_(i)),r):(r.eventSystemFlags|=c,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function YR(r,i,o,c,f){switch(i){case"focusin":return _i=Lc(_i,r,i,o,c,f),!0;case"dragenter":return wi=Lc(wi,r,i,o,c,f),!0;case"mouseover":return xi=Lc(xi,r,i,o,c,f),!0;case"pointerover":var y=f.pointerId;return Mc.set(y,Lc(Mc.get(y)||null,r,i,o,c,f)),!0;case"gotpointercapture":return y=f.pointerId,Vc.set(y,Lc(Vc.get(y)||null,r,i,o,c,f)),!0}return!1}function e1(r){var i=us(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){r.blockedOn=i,$u(r.priority,function(){if(o.tag===13){var c=Xn();c=Xs(c);var f=vo(o,c);f!==null&&Zn(f,o,c),Kp(o,c)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function lh(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Wp(r.nativeEvent);if(o===null){o=r.nativeEvent;var c=new o.constructor(o.type,o);ms=c,o.target.dispatchEvent(c),ms=null}else return i=Vr(o),i!==null&&X_(i),r.blockedOn=o,!1;i.shift()}return!0}function t1(r,i,o){lh(r)&&o.delete(i)}function XR(){Xp=!1,_i!==null&&lh(_i)&&(_i=null),wi!==null&&lh(wi)&&(wi=null),xi!==null&&lh(xi)&&(xi=null),Mc.forEach(t1),Vc.forEach(t1)}function ch(r,i){r.blockedOn===i&&(r.blockedOn=null,Xp||(Xp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,XR)))}var uh=null;function n1(r){uh!==r&&(uh=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){uh===r&&(uh=null);for(var i=0;i<r.length;i+=3){var o=r[i],c=r[i+1],f=r[i+2];if(typeof c!="function"){if(Yp(c||o)===null)continue;break}var y=Vr(o);y!==null&&(r.splice(i,3),i-=3,Ym(y,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function Uc(r){function i(V){return ch(V,r)}_i!==null&&ch(_i,r),wi!==null&&ch(wi,r),xi!==null&&ch(xi,r),Mc.forEach(i),Vc.forEach(i);for(var o=0;o<Ei.length;o++){var c=Ei[o];c.blockedOn===r&&(c.blockedOn=null)}for(;0<Ei.length&&(o=Ei[0],o.blockedOn===null);)e1(o),o.blockedOn===null&&Ei.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],y=o[c+1],E=f[Vt]||null;if(typeof y=="function")E||n1(o);else if(E){var N=null;if(y&&y.hasAttribute("formAction")){if(f=y,E=y[Vt]||null)N=E.formAction;else if(Yp(f)!==null)continue}else N=E.action;typeof N=="function"?o[c+1]=N:(o.splice(c,3),c-=3),n1(o)}}}function Zp(r){this._internalRoot=r}dh.prototype.render=Zp.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,c=Xn();W_(o,c,r,i,null,null)},dh.prototype.unmount=Zp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;W_(r.current,2,null,r,null,null),$d(),i[rr]=null}};function dh(r){this._internalRoot=r}dh.prototype.unstable_scheduleHydration=function(r){if(r){var i=Zs();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Ei.length&&i!==0&&i<Ei[o].priority;o++);Ei.splice(o,0,r),o===0&&e1(r)}};var r1=e.version;if(r1!=="19.1.0")throw Error(s(527,r1,"19.1.0"));he.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=g(i),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var ZR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hh.isDisabled&&hh.supportsFiber)try{Nt=hh.inject(ZR),it=hh}catch{}}return Bc.createRoot=function(r,i){if(!a(r))throw Error(s(299));var o=!1,c="",f=bb,y=_b,E=wb,N=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(N=i.unstable_transitionCallbacks)),i=K_(r,1,!1,null,null,o,c,f,y,E,N,null),r[rr]=i.current,Pp(r),new Zp(i)},Bc.hydrateRoot=function(r,i,o){if(!a(r))throw Error(s(299));var c=!1,f="",y=bb,E=_b,N=wb,V=null,Z=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(N=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(V=o.unstable_transitionCallbacks),o.formState!==void 0&&(Z=o.formState)),i=K_(r,1,!0,i,o??null,c,f,y,E,N,V,Z),i.context=Q_(null),o=i.current,c=Xn(),c=Xs(c),f=ai(c),f.callback=null,oi(o,f,c),o=c,i.current.lanes=o,cs(i,o),Xr(i),r[rr]=i.current,Pp(r),new dh(i)},Bc.version="19.1.0",Bc}var f1;function lN(){if(f1)return tg.exports;f1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),tg.exports=oN(),tg.exports}var cN=lN(),Fc={},m1;function uN(){if(m1)return Fc;m1=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.parse=u,Fc.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function u(_,S){const R=new l,C=_.length;if(C<2)return R;const k=(S==null?void 0:S.decode)||v;let P=0;do{const B=_.indexOf("=",P);if(B===-1)break;const H=_.indexOf(";",P),M=H===-1?C:H;if(B>M){P=_.lastIndexOf(";",B-1)+1;continue}const K=h(_,P,B),ne=g(_,B,K),I=_.slice(K,ne);if(R[I]===void 0){let A=h(_,B+1,M),O=g(_,M,A);const L=k(_.slice(A,O));R[I]=L}P=M+1}while(P<C);return R}function h(_,S,R){do{const C=_.charCodeAt(S);if(C!==32&&C!==9)return S}while(++S<R);return R}function g(_,S,R){for(;S>R;){const C=_.charCodeAt(--S);if(C!==32&&C!==9)return S+1}return R}function p(_,S,R){const C=(R==null?void 0:R.encode)||encodeURIComponent;if(!n.test(_))throw new TypeError(`argument name is invalid: ${_}`);const k=C(S);if(!e.test(k))throw new TypeError(`argument val is invalid: ${S}`);let P=_+"="+k;if(!R)return P;if(R.maxAge!==void 0){if(!Number.isInteger(R.maxAge))throw new TypeError(`option maxAge is invalid: ${R.maxAge}`);P+="; Max-Age="+R.maxAge}if(R.domain){if(!t.test(R.domain))throw new TypeError(`option domain is invalid: ${R.domain}`);P+="; Domain="+R.domain}if(R.path){if(!s.test(R.path))throw new TypeError(`option path is invalid: ${R.path}`);P+="; Path="+R.path}if(R.expires){if(!w(R.expires)||!Number.isFinite(R.expires.valueOf()))throw new TypeError(`option expires is invalid: ${R.expires}`);P+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&(P+="; HttpOnly"),R.secure&&(P+="; Secure"),R.partitioned&&(P+="; Partitioned"),R.priority)switch(typeof R.priority=="string"?R.priority.toLowerCase():void 0){case"low":P+="; Priority=Low";break;case"medium":P+="; Priority=Medium";break;case"high":P+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${R.priority}`)}if(R.sameSite)switch(typeof R.sameSite=="string"?R.sameSite.toLowerCase():R.sameSite){case!0:case"strict":P+="; SameSite=Strict";break;case"lax":P+="; SameSite=Lax";break;case"none":P+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${R.sameSite}`)}return P}function v(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function w(_){return a.call(_)==="[object Date]"}return Fc}uN();var p1="popstate";function dN(n={}){function e(s,a){let{pathname:l,search:u,hash:h}=s.location;return Bg("",{pathname:l,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){return typeof a=="string"?a:lu(a)}return fN(e,t,null,n)}function Et(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function vr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hN(){return Math.random().toString(36).substring(2,10)}function g1(n,e){return{usr:n.state,key:n.key,idx:e}}function Bg(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?yl(e):e,state:t,key:e&&e.key||s||hN()}}function lu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function yl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function fN(n,e,t,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,u=a.history,h="POP",g=null,p=v();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function v(){return(u.state||{idx:null}).idx}function w(){h="POP";let k=v(),P=k==null?null:k-p;p=k,g&&g({action:h,location:C.location,delta:P})}function _(k,P){h="PUSH";let B=Bg(C.location,k,P);p=v()+1;let H=g1(B,p),M=C.createHref(B);try{u.pushState(H,"",M)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;a.location.assign(M)}l&&g&&g({action:h,location:C.location,delta:1})}function S(k,P){h="REPLACE";let B=Bg(C.location,k,P);p=v();let H=g1(B,p),M=C.createHref(B);u.replaceState(H,"",M),l&&g&&g({action:h,location:C.location,delta:0})}function R(k){return mN(k)}let C={get action(){return h},get location(){return n(a,u)},listen(k){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(p1,w),g=k,()=>{a.removeEventListener(p1,w),g=null}},createHref(k){return e(a,k)},createURL:R,encodeLocation(k){let P=R(k);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:_,replace:S,go(k){return u.go(k)}};return C}function mN(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Et(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:lu(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Gx(n,e,t="/"){return pN(n,e,t,!1)}function pN(n,e,t,s){let a=typeof e=="string"?yl(e):e,l=zs(a.pathname||"/",t);if(l==null)return null;let u=$x(n);gN(u);let h=null;for(let g=0;h==null&&g<u.length;++g){let p=RN(l);h=SN(u[g],p,s)}return h}function $x(n,e=[],t=[],s=""){let a=(l,u,h)=>{let g={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};g.relativePath.startsWith("/")&&(Et(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length));let p=Ms([s,g.relativePath]),v=t.concat(g);l.children&&l.children.length>0&&(Et(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),$x(l.children,e,v,p)),!(l.path==null&&!l.index)&&e.push({path:p,score:EN(p,l.index),routesMeta:v})};return n.forEach((l,u)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))a(l,u);else for(let g of Kx(l.path))a(l,u,g)}),e}function Kx(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let u=Kx(s.join("/")),h=[];return h.push(...u.map(g=>g===""?l:[l,g].join("/"))),a&&h.push(...u),h.map(g=>n.startsWith("/")&&g===""?"/":g)}function gN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:TN(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var yN=/^:[\w-]+$/,vN=3,bN=2,_N=1,wN=10,xN=-2,y1=n=>n==="*";function EN(n,e){let t=n.split("/"),s=t.length;return t.some(y1)&&(s+=xN),e&&(s+=bN),t.filter(a=>!y1(a)).reduce((a,l)=>a+(yN.test(l)?vN:l===""?_N:wN),s)}function TN(n,e){return n.length===e.length&&n.slice(0,-1).every((s,a)=>s===e[a])?n[n.length-1]-e[e.length-1]:0}function SN(n,e,t=!1){let{routesMeta:s}=n,a={},l="/",u=[];for(let h=0;h<s.length;++h){let g=s[h],p=h===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",w=Gh({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},v),_=g.route;if(!w&&p&&t&&!s[s.length-1].route.index&&(w=Gh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!w)return null;Object.assign(a,w.params),u.push({params:a,pathname:Ms([l,w.pathname]),pathnameBase:DN(Ms([l,w.pathnameBase])),route:_}),w.pathnameBase!=="/"&&(l=Ms([l,w.pathnameBase]))}return u}function Gh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=AN(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:s.reduce((p,{paramName:v,isOptional:w},_)=>{if(v==="*"){let R=h[_]||"";u=l.slice(0,l.length-R.length).replace(/(.)\/+$/,"$1")}const S=h[_];return w&&!S?p[v]=void 0:p[v]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:u,pattern:n}}function AN(n,e=!1,t=!0){vr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,g)=>(s.push({paramName:h,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function RN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function zs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function NN(n,e="/"){let{pathname:t,search:s="",hash:a=""}=typeof n=="string"?yl(n):n;return{pathname:t?t.startsWith("/")?t:CN(t,e):e,search:kN(s),hash:ON(a)}}function CN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function ig(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ny(n){let e=IN(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Cy(n,e,t,s=!1){let a;typeof n=="string"?a=yl(n):(a={...n},Et(!a.pathname||!a.pathname.includes("?"),ig("?","pathname","search",a)),Et(!a.pathname||!a.pathname.includes("#"),ig("#","pathname","hash",a)),Et(!a.search||!a.search.includes("#"),ig("#","search","hash",a)));let l=n===""||a.pathname==="",u=l?"/":a.pathname,h;if(u==null)h=t;else{let w=e.length-1;if(!s&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),w-=1;a.pathname=_.join("/")}h=w>=0?e[w]:"/"}let g=NN(a,h),p=u&&u!=="/"&&u.endsWith("/"),v=(l||u===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(p||v)&&(g.pathname+="/"),g}var Ms=n=>n.join("/").replace(/\/\/+/g,"/"),DN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),kN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ON=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function PN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Qx=["POST","PUT","PATCH","DELETE"];new Set(Qx);var jN=["GET",...Qx];new Set(jN);var vl=T.createContext(null);vl.displayName="DataRouter";var yf=T.createContext(null);yf.displayName="DataRouterState";var Wx=T.createContext({isTransitioning:!1});Wx.displayName="ViewTransition";var MN=T.createContext(new Map);MN.displayName="Fetchers";var VN=T.createContext(null);VN.displayName="Await";var kr=T.createContext(null);kr.displayName="Navigation";var Eu=T.createContext(null);Eu.displayName="Location";var Or=T.createContext({outlet:null,matches:[],isDataRoute:!1});Or.displayName="Route";var Iy=T.createContext(null);Iy.displayName="RouteError";function LN(n,{relative:e}={}){Et(bl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=T.useContext(kr),{hash:a,pathname:l,search:u}=Tu(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:Ms([t,l])),s.createHref({pathname:h,search:u,hash:a})}function bl(){return T.useContext(Eu)!=null}function Pr(){return Et(bl(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(Eu).location}var Yx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Xx(n){T.useContext(kr).static||T.useLayoutEffect(n)}function Ks(){let{isDataRoute:n}=T.useContext(Or);return n?ZN():UN()}function UN(){Et(bl(),"useNavigate() may be used only in the context of a <Router> component.");let n=T.useContext(vl),{basename:e,navigator:t}=T.useContext(kr),{matches:s}=T.useContext(Or),{pathname:a}=Pr(),l=JSON.stringify(Ny(s)),u=T.useRef(!1);return Xx(()=>{u.current=!0}),T.useCallback((g,p={})=>{if(vr(u.current,Yx),!u.current)return;if(typeof g=="number"){t.go(g);return}let v=Cy(g,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ms([e,v.pathname])),(p.replace?t.replace:t.push)(v,p.state,p)},[e,t,l,a,n])}T.createContext(null);function zN(){let{matches:n}=T.useContext(Or),e=n[n.length-1];return e?e.params:{}}function Tu(n,{relative:e}={}){let{matches:t}=T.useContext(Or),{pathname:s}=Pr(),a=JSON.stringify(Ny(t));return T.useMemo(()=>Cy(n,JSON.parse(a),s,e==="path"),[n,a,s,e])}function BN(n,e){return Zx(n,e)}function Zx(n,e,t,s){var P;Et(bl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=T.useContext(kr),{matches:l}=T.useContext(Or),u=l[l.length-1],h=u?u.params:{},g=u?u.pathname:"/",p=u?u.pathnameBase:"/",v=u&&u.route;{let B=v&&v.path||"";Jx(g,!v||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let w=Pr(),_;if(e){let B=typeof e=="string"?yl(e):e;Et(p==="/"||((P=B.pathname)==null?void 0:P.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${B.pathname}" was given in the \`location\` prop.`),_=B}else _=w;let S=_.pathname||"/",R=S;if(p!=="/"){let B=p.replace(/^\//,"").split("/");R="/"+S.replace(/^\//,"").split("/").slice(B.length).join("/")}let C=Gx(n,{pathname:R});vr(v||C!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),vr(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=$N(C&&C.map(B=>Object.assign({},B,{params:Object.assign({},h,B.params),pathname:Ms([p,a.encodeLocation?a.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?p:Ms([p,a.encodeLocation?a.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),l,t,s);return e&&k?T.createElement(Eu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},k):k}function FN(){let n=XN(),e=PN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=T.createElement(T.Fragment,null,T.createElement("p",null,"💿 Hey developer 👋"),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:l},"ErrorBoundary")," or"," ",T.createElement("code",{style:l},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),t?T.createElement("pre",{style:a},t):null,u)}var qN=T.createElement(FN,null),HN=class extends T.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?T.createElement(Or.Provider,{value:this.props.routeContext},T.createElement(Iy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function GN({routeContext:n,match:e,children:t}){let s=T.useContext(vl);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(Or.Provider,{value:n},t)}function $N(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let g=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);Et(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,g+1))}let u=!1,h=-1;if(t)for(let g=0;g<a.length;g++){let p=a[g];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=g),p.route.id){let{loaderData:v,errors:w}=t,_=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!w||w[p.route.id]===void 0);if(p.route.lazy||_){u=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((g,p,v)=>{let w,_=!1,S=null,R=null;t&&(w=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||qN,u&&(h<0&&v===0?(Jx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,R=null):h===v&&(_=!0,R=p.route.hydrateFallbackElement||null)));let C=e.concat(a.slice(0,v+1)),k=()=>{let P;return w?P=S:_?P=R:p.route.Component?P=T.createElement(p.route.Component,null):p.route.element?P=p.route.element:P=g,T.createElement(GN,{match:p,routeContext:{outlet:g,matches:C,isDataRoute:t!=null},children:P})};return t&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?T.createElement(HN,{location:t.location,revalidation:t.revalidation,component:S,error:w,children:k(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):k()},null)}function Dy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KN(n){let e=T.useContext(vl);return Et(e,Dy(n)),e}function QN(n){let e=T.useContext(yf);return Et(e,Dy(n)),e}function WN(n){let e=T.useContext(Or);return Et(e,Dy(n)),e}function ky(n){let e=WN(n),t=e.matches[e.matches.length-1];return Et(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function YN(){return ky("useRouteId")}function XN(){var s;let n=T.useContext(Iy),e=QN("useRouteError"),t=ky("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function ZN(){let{router:n}=KN("useNavigate"),e=ky("useNavigate"),t=T.useRef(!1);return Xx(()=>{t.current=!0}),T.useCallback(async(a,l={})=>{vr(t.current,Yx),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var v1={};function Jx(n,e,t){!e&&!v1[n]&&(v1[n]=!0,vr(!1,t))}T.memo(JN);function JN({routes:n,future:e,state:t}){return Zx(n,void 0,t,e)}function b1({to:n,replace:e,state:t,relative:s}){Et(bl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=T.useContext(kr);vr(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=T.useContext(Or),{pathname:u}=Pr(),h=Ks(),g=Cy(n,Ny(l),u,s==="path"),p=JSON.stringify(g);return T.useEffect(()=>{h(JSON.parse(p),{replace:e,state:t,relative:s})},[h,p,s,e,t]),null}function pr(n){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eC({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:a,static:l=!1}){Et(!bl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=T.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);typeof t=="string"&&(t=yl(t));let{pathname:g="/",search:p="",hash:v="",state:w=null,key:_="default"}=t,S=T.useMemo(()=>{let R=zs(g,u);return R==null?null:{location:{pathname:R,search:p,hash:v,state:w,key:_},navigationType:s}},[u,g,p,v,w,_,s]);return vr(S!=null,`<Router basename="${u}"> is not able to match the URL "${g}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:T.createElement(kr.Provider,{value:h},T.createElement(Eu.Provider,{children:e,value:S}))}function tC({children:n,location:e}){return BN(Fg(n),e)}function Fg(n,e=[]){let t=[];return T.Children.forEach(n,(s,a)=>{if(!T.isValidElement(s))return;let l=[...e,a];if(s.type===T.Fragment){t.push.apply(t,Fg(s.props.children,l));return}Et(s.type===pr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!s.props.index||!s.props.children,"An index route cannot have child routes.");let u={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=Fg(s.props.children,l)),t.push(u)}),t}var kh="get",Oh="application/x-www-form-urlencoded";function vf(n){return n!=null&&typeof n.tagName=="string"}function nC(n){return vf(n)&&n.tagName.toLowerCase()==="button"}function rC(n){return vf(n)&&n.tagName.toLowerCase()==="form"}function sC(n){return vf(n)&&n.tagName.toLowerCase()==="input"}function iC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function aC(n,e){return n.button===0&&(!e||e==="_self")&&!iC(n)}function qg(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let s=n[t];return e.concat(Array.isArray(s)?s.map(a=>[t,a]):[[t,s]])},[]))}function oC(n,e){let t=qg(n);return e&&e.forEach((s,a)=>{t.has(a)||e.getAll(a).forEach(l=>{t.append(a,l)})}),t}var fh=null;function lC(){if(fh===null)try{new FormData(document.createElement("form"),0),fh=!1}catch{fh=!0}return fh}var cC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ag(n){return n!=null&&!cC.has(n)?(vr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Oh}"`),null):n}function uC(n,e){let t,s,a,l,u;if(rC(n)){let h=n.getAttribute("action");s=h?zs(h,e):null,t=n.getAttribute("method")||kh,a=ag(n.getAttribute("enctype"))||Oh,l=new FormData(n)}else if(nC(n)||sC(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=n.getAttribute("formaction")||h.getAttribute("action");if(s=g?zs(g,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||kh,a=ag(n.getAttribute("formenctype"))||ag(h.getAttribute("enctype"))||Oh,l=new FormData(h,n),!lC()){let{name:p,type:v,value:w}=n;if(v==="image"){let _=p?`${p}.`:"";l.append(`${_}x`,"0"),l.append(`${_}y`,"0")}else p&&l.append(p,w)}}else{if(vf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=kh,s=null,a=Oh,u=n}return l&&a==="text/plain"&&(u=l,l=void 0),{action:s,method:t.toLowerCase(),encType:a,formData:l,body:u}}function Oy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function dC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function fC(n,e,t){let s=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await dC(l,t);return u.links?u.links():[]}return[]}));return yC(s.flat(1).filter(hC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function _1(n,e,t,s,a,l){let u=(g,p)=>t[p]?g.route.id!==t[p].route.id:!0,h=(g,p)=>{var v;return t[p].pathname!==g.pathname||((v=t[p].route.path)==null?void 0:v.endsWith("*"))&&t[p].params["*"]!==g.params["*"]};return l==="assets"?e.filter((g,p)=>u(g,p)||h(g,p)):l==="data"?e.filter((g,p)=>{var w;let v=s.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(u(g,p)||h(g,p))return!0;if(g.route.shouldRevalidate){let _=g.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(n,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function mC(n,e,{includeHydrateFallback:t}={}){return pC(n.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function pC(n){return[...new Set(n)]}function gC(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function yC(n,e){let t=new Set;return new Set(e),n.reduce((s,a)=>{let l=JSON.stringify(gC(a));return t.has(l)||(t.add(l),s.push({key:l,link:a})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var vC=new Set([100,101,204,205]);function bC(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&zs(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function eE(){let n=T.useContext(vl);return Oy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function _C(){let n=T.useContext(yf);return Oy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Py=T.createContext(void 0);Py.displayName="FrameworkContext";function tE(){let n=T.useContext(Py);return Oy(n,"You must render this element inside a <HydratedRouter> element"),n}function wC(n,e){let t=T.useContext(Py),[s,a]=T.useState(!1),[l,u]=T.useState(!1),{onFocus:h,onBlur:g,onMouseEnter:p,onMouseLeave:v,onTouchStart:w}=e,_=T.useRef(null);T.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let C=P=>{P.forEach(B=>{u(B.isIntersecting)})},k=new IntersectionObserver(C,{threshold:.5});return _.current&&k.observe(_.current),()=>{k.disconnect()}}},[n]),T.useEffect(()=>{if(s){let C=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(C)}}},[s]);let S=()=>{a(!0)},R=()=>{a(!1),u(!1)};return t?n!=="intent"?[l,_,{}]:[l,_,{onFocus:qc(h,S),onBlur:qc(g,R),onMouseEnter:qc(p,S),onMouseLeave:qc(v,R),onTouchStart:qc(w,S)}]:[!1,_,{}]}function qc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function xC({page:n,...e}){let{router:t}=eE(),s=T.useMemo(()=>Gx(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?T.createElement(TC,{page:n,matches:s,...e}):null}function EC(n){let{manifest:e,routeModules:t}=tE(),[s,a]=T.useState([]);return T.useEffect(()=>{let l=!1;return fC(n,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[n,e,t]),s}function TC({page:n,matches:e,...t}){let s=Pr(),{manifest:a,routeModules:l}=tE(),{basename:u}=eE(),{loaderData:h,matches:g}=_C(),p=T.useMemo(()=>_1(n,e,g,a,s,"data"),[n,e,g,a,s]),v=T.useMemo(()=>_1(n,e,g,a,s,"assets"),[n,e,g,a,s]),w=T.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let R=new Set,C=!1;if(e.forEach(P=>{var H;let B=a.routes[P.route.id];!B||!B.hasLoader||(!p.some(M=>M.route.id===P.route.id)&&P.route.id in h&&((H=l[P.route.id])!=null&&H.shouldRevalidate)||B.hasClientLoader?C=!0:R.add(P.route.id))}),R.size===0)return[];let k=bC(n,u);return C&&R.size>0&&k.searchParams.set("_routes",e.filter(P=>R.has(P.route.id)).map(P=>P.route.id).join(",")),[k.pathname+k.search]},[u,h,s,a,p,e,n,l]),_=T.useMemo(()=>mC(v,a),[v,a]),S=EC(v);return T.createElement(T.Fragment,null,w.map(R=>T.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),_.map(R=>T.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),S.map(({key:R,link:C})=>T.createElement("link",{key:R,...C})))}function SC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var nE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nE&&(window.__reactRouterVersion="7.6.1")}catch{}function AC({basename:n,children:e,window:t}){let s=T.useRef();s.current==null&&(s.current=dN({window:t,v5Compat:!0}));let a=s.current,[l,u]=T.useState({action:a.action,location:a.location}),h=T.useCallback(g=>{T.startTransition(()=>u(g))},[u]);return T.useLayoutEffect(()=>a.listen(h),[a,h]),T.createElement(eC,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var rE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oi=T.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:a,reloadDocument:l,replace:u,state:h,target:g,to:p,preventScrollReset:v,viewTransition:w,..._},S){let{basename:R}=T.useContext(kr),C=typeof p=="string"&&rE.test(p),k,P=!1;if(typeof p=="string"&&C&&(k=p,nE))try{let O=new URL(window.location.href),L=p.startsWith("//")?new URL(O.protocol+p):new URL(p),z=zs(L.pathname,R);L.origin===O.origin&&z!=null?p=z+L.search+L.hash:P=!0}catch{vr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=LN(p,{relative:a}),[H,M,K]=wC(s,_),ne=IC(p,{replace:u,state:h,target:g,preventScrollReset:v,relative:a,viewTransition:w});function I(O){e&&e(O),O.defaultPrevented||ne(O)}let A=T.createElement("a",{..._,...K,href:k||B,onClick:P||l?e:I,ref:SC(S,M),target:g,"data-discover":!C&&t==="render"?"true":void 0});return H&&!C?T.createElement(T.Fragment,null,A,T.createElement(xC,{page:B})):A});Oi.displayName="Link";var RC=T.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:a=!1,style:l,to:u,viewTransition:h,children:g,...p},v){let w=Tu(u,{relative:p.relative}),_=Pr(),S=T.useContext(yf),{navigator:R,basename:C}=T.useContext(kr),k=S!=null&&jC(w)&&h===!0,P=R.encodeLocation?R.encodeLocation(w).pathname:w.pathname,B=_.pathname,H=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(B=B.toLowerCase(),H=H?H.toLowerCase():null,P=P.toLowerCase()),H&&C&&(H=zs(H,C)||H);const M=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let K=B===P||!a&&B.startsWith(P)&&B.charAt(M)==="/",ne=H!=null&&(H===P||!a&&H.startsWith(P)&&H.charAt(P.length)==="/"),I={isActive:K,isPending:ne,isTransitioning:k},A=K?e:void 0,O;typeof s=="function"?O=s(I):O=[s,K?"active":null,ne?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let L=typeof l=="function"?l(I):l;return T.createElement(Oi,{...p,"aria-current":A,className:O,ref:v,style:L,to:u,viewTransition:h},typeof g=="function"?g(I):g)});RC.displayName="NavLink";var NC=T.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:a,state:l,method:u=kh,action:h,onSubmit:g,relative:p,preventScrollReset:v,viewTransition:w,..._},S)=>{let R=OC(),C=PC(h,{relative:p}),k=u.toLowerCase()==="get"?"get":"post",P=typeof h=="string"&&rE.test(h),B=H=>{if(g&&g(H),H.defaultPrevented)return;H.preventDefault();let M=H.nativeEvent.submitter,K=(M==null?void 0:M.getAttribute("formmethod"))||u;R(M||H.currentTarget,{fetcherKey:e,method:K,navigate:t,replace:a,state:l,relative:p,preventScrollReset:v,viewTransition:w})};return T.createElement("form",{ref:S,method:k,action:C,onSubmit:s?g:B,..._,"data-discover":!P&&n==="render"?"true":void 0})});NC.displayName="Form";function CC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sE(n){let e=T.useContext(vl);return Et(e,CC(n)),e}function IC(n,{target:e,replace:t,state:s,preventScrollReset:a,relative:l,viewTransition:u}={}){let h=Ks(),g=Pr(),p=Tu(n,{relative:l});return T.useCallback(v=>{if(aC(v,e)){v.preventDefault();let w=t!==void 0?t:lu(g)===lu(p);h(n,{replace:w,state:s,preventScrollReset:a,relative:l,viewTransition:u})}},[g,h,p,t,s,e,n,a,l,u])}function iE(n){vr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=T.useRef(qg(n)),t=T.useRef(!1),s=Pr(),a=T.useMemo(()=>oC(s.search,t.current?null:e.current),[s.search]),l=Ks(),u=T.useCallback((h,g)=>{const p=qg(typeof h=="function"?h(a):h);t.current=!0,l("?"+p,g)},[l,a]);return[a,u]}var DC=0,kC=()=>`__${String(++DC)}__`;function OC(){let{router:n}=sE("useSubmit"),{basename:e}=T.useContext(kr),t=YN();return T.useCallback(async(s,a={})=>{let{action:l,method:u,encType:h,formData:g,body:p}=uC(s,e);if(a.navigate===!1){let v=a.fetcherKey||kC();await n.fetch(v,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:g,body:p,formMethod:a.method||u,formEncType:a.encType||h,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:g,body:p,formMethod:a.method||u,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function PC(n,{relative:e}={}){let{basename:t}=T.useContext(kr),s=T.useContext(Or);Et(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Tu(n||".",{relative:e})},u=Pr();if(n==null){l.search=u.search;let h=new URLSearchParams(l.search),g=h.getAll("index");if(g.some(v=>v==="")){h.delete("index"),g.filter(w=>w).forEach(w=>h.append("index",w));let v=h.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ms([t,l.pathname])),lu(l)}function jC(n,e={}){let t=T.useContext(Wx);Et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=sE("useViewTransitionState"),a=Tu(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=zs(t.currentLocation.pathname,s)||t.currentLocation.pathname,u=zs(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Gh(a.pathname,u)!=null||Gh(a.pathname,l)!=null}[...vC];var aE=Hx();const MC=Ry(aE);/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=()=>{};var w1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},LC=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],h=n[t++],g=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},lE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,h=u?n[a+1]:0,g=a+2<n.length,p=g?n[a+2]:0,v=l>>2,w=(l&3)<<4|h>>4;let _=(h&15)<<2|p>>6,S=p&63;g||(S=64,u||(_=64)),s.push(t[v],t[w],t[_],t[S])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(oE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):LC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const w=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||p==null||w==null)throw new UC;const _=l<<2|h>>4;if(s.push(_),p!==64){const S=h<<4&240|p>>2;if(s.push(S),w!==64){const R=p<<6&192|w;s.push(R)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class UC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zC=function(n){const e=oE(n);return lE.encodeByteArray(e,!0)},$h=function(n){return zC(n).replace(/\./g,"")},cE=function(n){try{return lE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=()=>BC().__FIREBASE_DEFAULTS__,qC=()=>{if(typeof process>"u"||typeof w1>"u")return;const n=w1.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},HC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&cE(n[1]);return e&&JSON.parse(e)},bf=()=>{try{return VC()||FC()||qC()||HC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},uE=n=>{var e,t;return(t=(e=bf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},GC=n=>{const e=uE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},dE=()=>{var n;return(n=bf())===null||n===void 0?void 0:n.config},hE=n=>{var e;return(e=bf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[$h(JSON.stringify(t)),$h(JSON.stringify(u)),""].join(".")}const Zc={};function QC(){const n={prod:[],emulator:[]};for(const e of Object.keys(Zc))Zc[e]?n.emulator.push(e):n.prod.push(e);return n}function WC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let x1=!1;function mE(n,e){if(typeof window>"u"||typeof document>"u"||!_l(window.location.host)||Zc[n]===e||Zc[n]||x1)return;Zc[n]=e;function t(_){return`__firebase__banner__${_}`}const s="__firebase__banner",l=QC().prod.length>0;function u(){const _=document.getElementById(s);_&&_.remove()}function h(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function g(_,S){_.setAttribute("width","24"),_.setAttribute("id",S),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function p(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{x1=!0,u()},_}function v(_,S){_.setAttribute("id",S),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function w(){const _=WC(s),S=t("text"),R=document.getElementById(S)||document.createElement("span"),C=t("learnmore"),k=document.getElementById(C)||document.createElement("a"),P=t("preprendIcon"),B=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const H=_.element;h(H),v(k,C);const M=p();g(B,P),H.append(B,R,k,M),document.body.appendChild(H)}l?(R.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dn())}function XC(){var n;const e=(n=bf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function eI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tI(){const n=Dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nI(){return!XC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rI(){try{return typeof indexedDB=="object"}catch{return!1}}function sI(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="FirebaseError";class Qs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=iI,Object.setPrototypeOf(this,Qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Su.prototype.create)}}class Su{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?aI(l,s):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new Qs(a,h,s)}}function aI(n,e){return n.replace(oI,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const oI=/\{\$([^}]+)}/g;function lI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function La(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],u=e[a];if(E1(l)&&E1(u)){if(!La(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function E1(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Gc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function $c(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function cI(n,e){const t=new uI(n,e);return t.subscribe.bind(t)}class uI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");dI(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=og),a.error===void 0&&(a.error=og),a.complete===void 0&&(a.complete=og);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function og(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(n){return n&&n._delegate?n._delegate:n}class Ua{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new $C;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mI(e))try{this.getOrInitializeService({instanceIdentifier:Oa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=Oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oa){return this.instances.has(e)}getOptions(e=Oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);s===h&&u.resolve(a)}return a}onInit(e,t){var s;const a=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:fI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Oa){return this.component?this.component.multipleInstances?e:Oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fI(n){return n===Oa?void 0:n}function mI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($e||($e={}));const gI={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},yI=$e.INFO,vI={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},bI=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=vI[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jy{constructor(e){this.name=e,this._logLevel=yI,this._logHandler=bI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const _I=(n,e)=>e.some(t=>n instanceof t);let T1,S1;function wI(){return T1||(T1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xI(){return S1||(S1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pE=new WeakMap,Hg=new WeakMap,gE=new WeakMap,lg=new WeakMap,My=new WeakMap;function EI(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Pi(n.result)),a()},u=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&pE.set(t,n)}).catch(()=>{}),My.set(e,n),e}function TI(n){if(Hg.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Hg.set(n,e)}let Gg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Hg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||gE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Pi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function SI(n){Gg=n(Gg)}function AI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(cg(this),e,...t);return gE.set(s,e.sort?e.sort():[e]),Pi(s)}:xI().includes(n)?function(...e){return n.apply(cg(this),e),Pi(pE.get(this))}:function(...e){return Pi(n.apply(cg(this),e))}}function RI(n){return typeof n=="function"?AI(n):(n instanceof IDBTransaction&&TI(n),_I(n,wI())?new Proxy(n,Gg):n)}function Pi(n){if(n instanceof IDBRequest)return EI(n);if(lg.has(n))return lg.get(n);const e=RI(n);return e!==n&&(lg.set(n,e),My.set(e,n)),e}const cg=n=>My.get(n);function NI(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),h=Pi(u);return s&&u.addEventListener("upgradeneeded",g=>{s(Pi(u.result),g.oldVersion,g.newVersion,Pi(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),h.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const CI=["get","getKey","getAll","getAllKeys","count"],II=["put","add","delete","clear"],ug=new Map;function A1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ug.get(e))return ug.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=II.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||CI.includes(t)))return;const l=async function(u,...h){const g=this.transaction(u,a?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),a&&g.done]))[0]};return ug.set(e,l),l}SI(n=>({...n,get:(e,t,s)=>A1(e,t)||n.get(e,t,s),has:(e,t)=>!!A1(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function kI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $g="@firebase/app",R1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new jy("@firebase/app"),OI="@firebase/app-compat",PI="@firebase/analytics-compat",jI="@firebase/analytics",MI="@firebase/app-check-compat",VI="@firebase/app-check",LI="@firebase/auth",UI="@firebase/auth-compat",zI="@firebase/database",BI="@firebase/data-connect",FI="@firebase/database-compat",qI="@firebase/functions",HI="@firebase/functions-compat",GI="@firebase/installations",$I="@firebase/installations-compat",KI="@firebase/messaging",QI="@firebase/messaging-compat",WI="@firebase/performance",YI="@firebase/performance-compat",XI="@firebase/remote-config",ZI="@firebase/remote-config-compat",JI="@firebase/storage",e4="@firebase/storage-compat",t4="@firebase/firestore",n4="@firebase/ai",r4="@firebase/firestore-compat",s4="firebase",i4="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="[DEFAULT]",a4={[$g]:"fire-core",[OI]:"fire-core-compat",[jI]:"fire-analytics",[PI]:"fire-analytics-compat",[VI]:"fire-app-check",[MI]:"fire-app-check-compat",[LI]:"fire-auth",[UI]:"fire-auth-compat",[zI]:"fire-rtdb",[BI]:"fire-data-connect",[FI]:"fire-rtdb-compat",[qI]:"fire-fn",[HI]:"fire-fn-compat",[GI]:"fire-iid",[$I]:"fire-iid-compat",[KI]:"fire-fcm",[QI]:"fire-fcm-compat",[WI]:"fire-perf",[YI]:"fire-perf-compat",[XI]:"fire-rc",[ZI]:"fire-rc-compat",[JI]:"fire-gcs",[e4]:"fire-gcs-compat",[t4]:"fire-fst",[r4]:"fire-fst-compat",[n4]:"fire-vertex","fire-js":"fire-js",[s4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=new Map,o4=new Map,Qg=new Map;function N1(n,e){try{n.container.addComponent(e)}catch(t){Bs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function il(n){const e=n.name;if(Qg.has(e))return Bs.debug(`There were multiple attempts to register component ${e}.`),!1;Qg.set(e,n);for(const t of Kh.values())N1(t,n);for(const t of o4.values())N1(t,n);return!0}function Vy(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Jn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ji=new Su("app","Firebase",l4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ua("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=i4;function yE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Kg,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw ji.create("bad-app-name",{appName:String(a)});if(t||(t=dE()),!t)throw ji.create("no-options");const l=Kh.get(a);if(l){if(La(t,l.options)&&La(s,l.config))return l;throw ji.create("duplicate-app",{appName:a})}const u=new pI(a);for(const g of Qg.values())u.addComponent(g);const h=new c4(t,s,u);return Kh.set(a,h),h}function vE(n=Kg){const e=Kh.get(n);if(!e&&n===Kg&&dE())return yE();if(!e)throw ji.create("no-app",{appName:n});return e}function Mi(n,e,t){var s;let a=(s=a4[n])!==null&&s!==void 0?s:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${a}" with version "${e}":`];l&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bs.warn(h.join(" "));return}il(new Ua(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4="firebase-heartbeat-database",d4=1,cu="firebase-heartbeat-store";let dg=null;function bE(){return dg||(dg=NI(u4,d4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ji.create("idb-open",{originalErrorMessage:n.message})})),dg}async function h4(n){try{const t=(await bE()).transaction(cu),s=await t.objectStore(cu).get(_E(n));return await t.done,s}catch(e){if(e instanceof Qs)Bs.warn(e.message);else{const t=ji.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bs.warn(t.message)}}}async function C1(n,e){try{const s=(await bE()).transaction(cu,"readwrite");await s.objectStore(cu).put(e,_E(n)),await s.done}catch(t){if(t instanceof Qs)Bs.warn(t.message);else{const s=ji.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Bs.warn(s.message)}}}function _E(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=1024,m4=30;class p4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new y4(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=I1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>m4){const u=v4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Bs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=I1(),{heartbeatsToSend:s,unsentEntries:a}=g4(this._heartbeatsCache.heartbeats),l=$h(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Bs.warn(t),""}}}function I1(){return new Date().toISOString().substring(0,10)}function g4(n,e=f4){const t=[];let s=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),D1(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),D1(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class y4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rI()?sI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await h4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return C1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return C1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function D1(n){return $h(JSON.stringify({version:2,heartbeats:n})).length}function v4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(n){il(new Ua("platform-logger",e=>new DI(e),"PRIVATE")),il(new Ua("heartbeat",e=>new p4(e),"PRIVATE")),Mi($g,R1,n),Mi($g,R1,"esm2017"),Mi("fire-js","")}b4("");var Jr=function(){return Jr=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++){t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Jr.apply(this,arguments)};function Ru(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function _4(n,e,t){if(t||arguments.length===2)for(var s=0,a=e.length,l;s<a;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return n.concat(l||Array.prototype.slice.call(e))}function wE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const w4=wE,xE=new Su("auth","Firebase",wE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=new jy("@firebase/auth");function x4(n,...e){Qh.logLevel<=$e.WARN&&Qh.warn(`Auth (${wl}): ${n}`,...e)}function Ph(n,...e){Qh.logLevel<=$e.ERROR&&Qh.error(`Auth (${wl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(n,...e){throw Uy(n,...e)}function Nr(n,...e){return Uy(n,...e)}function Ly(n,e,t){const s=Object.assign(Object.assign({},w4()),{[e]:t});return new Su("auth","Firebase",s).create(e,{appName:n.name})}function Vs(n){return Ly(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function E4(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&br(n,"argument-error"),Ly(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Uy(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return xE.create(n,...e)}function Ne(n,e,...t){if(!n)throw Uy(e,...t)}function Ps(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ph(e),new Error(e)}function Fs(n,e){n||Ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function T4(){return k1()==="http:"||k1()==="https:"}function k1(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(T4()||JC()||"connection"in navigator)?navigator.onLine:!0}function A4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fs(t>e,"Short delay should be less than long delay!"),this.isMobile=YC()||eI()}get(){return S4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(n,e){Fs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],C4=new Nu(3e4,6e4);function Ws(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function is(n,e,t,s,a={}){return TE(n,a,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const h=Au(Object.assign({key:n.config.apiKey},u)).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:g},l);return ZC()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&_l(n.emulatorConfig.host)&&(p.credentials="include"),EE.fetch()(await SE(n,n.config.apiHost,t,h),p)})}async function TE(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},R4),e);try{const a=new D4(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw mh(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[g,p]=h.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw mh(n,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw mh(n,"email-already-in-use",u);if(g==="USER_DISABLED")throw mh(n,"user-disabled",u);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Ly(n,v,p);br(n,v)}}catch(a){if(a instanceof Qs)throw a;br(n,"network-request-failed",{message:String(a)})}}async function Cu(n,e,t,s,a={}){const l=await is(n,e,t,s,a);return"mfaPendingCredential"in l&&br(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function SE(n,e,t,s){const a=`${e}${t}?${s}`,l=n,u=l.config.emulator?zy(n.config,a):`${n.config.apiScheme}://${a}`;return N4.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function I4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class D4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Nr(this.auth,"network-request-failed")),C4.get())})}}function mh(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Nr(n,e,s);return a.customData._tokenResponse=t,a}function O1(n){return n!==void 0&&n.enterprise!==void 0}class k4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return I4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function O4(n,e){return is(n,"GET","/v2/recaptchaConfig",Ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(n,e){return is(n,"POST","/v1/accounts:delete",e)}async function Wh(n,e){return is(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function j4(n,e=!1){const t=Tt(n),s=await t.getIdToken(e),a=By(s);Ne(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:Jc(hg(a.auth_time)),issuedAtTime:Jc(hg(a.iat)),expirationTime:Jc(hg(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function hg(n){return Number(n)*1e3}function By(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Ph("JWT malformed, contained fewer than 3 sections"),null;try{const a=cE(t);return a?JSON.parse(a):(Ph("Failed to decode base64 JWT payload"),null)}catch(a){return Ph("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function P1(n){const e=By(n);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Qs&&M4(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function M4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jc(this.lastLoginAt),this.creationTime=Jc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yh(n){var e;const t=n.auth,s=await n.getIdToken(),a=await al(n,Wh(t,{idToken:s}));Ne(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?AE(l.providerUserInfo):[],h=U4(n.providerData,u),g=n.isAnonymous,p=!(n.email&&l.passwordHash)&&!(h!=null&&h.length),v=g?p:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Yg(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,w)}async function L4(n){const e=Tt(n);await Yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function U4(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function AE(n){return n.map(e=>{var{providerId:t}=e,s=Ru(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z4(n,e){const t=await TE(n,{},async()=>{const s=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await SE(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:h,body:s};return n.emulatorConfig&&_l(n.emulatorConfig.host)&&(g.credentials="include"),EE.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function B4(n,e){return is(n,"POST","/v2/accounts:revokeToken",Ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):P1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=P1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await z4(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,u=new Jo;return s&&(Ne(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(Ne(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Ne(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return Ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(n,e){Ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Rr{constructor(e){var{uid:t,auth:s,stsTokenManager:a}=e,l=Ru(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new V4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Yg(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await al(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return j4(this,e)}reload(){return L4(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Yh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jn(this.auth.app))return Promise.reject(Vs(this.auth));const e=await this.getIdToken();return await al(this,P4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,a,l,u,h,g,p,v;const w=(s=t.displayName)!==null&&s!==void 0?s:void 0,_=(a=t.email)!==null&&a!==void 0?a:void 0,S=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,R=(u=t.photoURL)!==null&&u!==void 0?u:void 0,C=(h=t.tenantId)!==null&&h!==void 0?h:void 0,k=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,P=(p=t.createdAt)!==null&&p!==void 0?p:void 0,B=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:H,emailVerified:M,isAnonymous:K,providerData:ne,stsTokenManager:I}=t;Ne(H&&I,e,"internal-error");const A=Jo.fromJSON(this.name,I);Ne(typeof H=="string",e,"internal-error"),Si(w,e.name),Si(_,e.name),Ne(typeof M=="boolean",e,"internal-error"),Ne(typeof K=="boolean",e,"internal-error"),Si(S,e.name),Si(R,e.name),Si(C,e.name),Si(k,e.name),Si(P,e.name),Si(B,e.name);const O=new Rr({uid:H,auth:e,email:_,emailVerified:M,displayName:w,isAnonymous:K,photoURL:R,phoneNumber:S,tenantId:C,stsTokenManager:A,createdAt:P,lastLoginAt:B});return ne&&Array.isArray(ne)&&(O.providerData=ne.map(L=>Object.assign({},L))),k&&(O._redirectEventId=k),O}static async _fromIdTokenResponse(e,t,s=!1){const a=new Jo;a.updateFromServerResponse(t);const l=new Rr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Yh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Ne(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?AE(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new Jo;h.updateFromIdToken(s);const g=new Rr({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Yg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=new Map;function js(n){Fs(n instanceof Function,"Expected a class definition");let e=j1.get(n);return e?(Fs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,j1.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}RE.type="NONE";const M1=RE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(n,e,t){return`firebase:${n}:${e}:${t}`}class el{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=jh(this.userKey,a.apiKey,l),this.fullPersistenceKey=jh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Wh(this.auth,{idToken:e}).catch(()=>{});return t?Rr._fromGetAccountInfoResponse(this.auth,t,e):null}return Rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new el(js(M1),e,s);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||js(M1);const u=jh(s,e.config.apiKey,e.name);let h=null;for(const p of t)try{const v=await p._get(u);if(v){let w;if(typeof v=="string"){const _=await Wh(e,{idToken:v}).catch(()=>{});if(!_)break;w=await Rr._fromGetAccountInfoResponse(e,_,v)}else w=Rr._fromJSON(e,v);p!==l&&(h=w),l=p;break}}catch{}const g=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new el(l,e,s):(l=g[0],h&&await l._set(u,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new el(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OE(e))return"Blackberry";if(PE(e))return"Webos";if(CE(e))return"Safari";if((e.includes("chrome/")||IE(e))&&!e.includes("edge/"))return"Chrome";if(kE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function NE(n=Dn()){return/firefox\//i.test(n)}function CE(n=Dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IE(n=Dn()){return/crios\//i.test(n)}function DE(n=Dn()){return/iemobile/i.test(n)}function kE(n=Dn()){return/android/i.test(n)}function OE(n=Dn()){return/blackberry/i.test(n)}function PE(n=Dn()){return/webos/i.test(n)}function Fy(n=Dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function F4(n=Dn()){var e;return Fy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function q4(){return tI()&&document.documentMode===10}function jE(n=Dn()){return Fy(n)||kE(n)||PE(n)||OE(n)||/windows phone/i.test(n)||DE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(n,e=[]){let t;switch(n){case"Browser":t=V1(Dn());break;case"Worker":t=`${V1(Dn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${wl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,h)=>{try{const g=e(l);u(g)}catch(g){h(g)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G4(n,e={}){return is(n,"GET","/v2/passwordPolicy",Ws(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=6;class K4{constructor(e){var t,s,a,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:$4,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,a,l,u,h;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(a=g.containsLowercaseLetter)!==null&&a!==void 0?a:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(u=g.containsNumericCharacter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(h=g.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),g}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L1(this),this.idTokenSubscription=new L1(this),this.beforeStateQueue=new H4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=js(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await el.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Wh(this,{idToken:e}),s=await Rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Jn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let a=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=a==null?void 0:a._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===h)&&(g!=null&&g.user)&&(a=g.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=A4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jn(this.app))return Promise.reject(Vs(this));const t=e?Tt(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jn(this.app)?Promise.reject(Vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jn(this.app)?Promise.reject(Vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(js(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await G4(this),t=new K4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Su("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await B4(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&js(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await el.create(this,[js(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,a);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ME(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&x4(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Wi(n){return Tt(n)}class L1{constructor(e){this.auth=e,this.observer=null,this.addObserver=cI(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function W4(n){_f=n}function VE(n){return _f.loadJS(n)}function Y4(){return _f.recaptchaEnterpriseScript}function X4(){return _f.gapiScript}function Z4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class J4{constructor(){this.enterprise=new eD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class eD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const tD="recaptcha-enterprise",LE="NO_RECAPTCHA";class nD{constructor(e){this.type=tD,this.auth=Wi(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,h)=>{O4(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new k4(g);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,u(p.siteKey)}}).catch(g=>{h(g)})})}function a(l,u,h){const g=window.grecaptcha;O1(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(p=>{u(p)}).catch(()=>{u(LE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new J4().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{s(this.auth).then(h=>{if(!t&&O1(window.grecaptcha))a(h,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Y4();g.length!==0&&(g+=h),VE(g).then(()=>{a(h,l,u)}).catch(p=>{u(p)})}}).catch(h=>{u(h)})})}}async function U1(n,e,t,s=!1,a=!1){const l=new nD(n);let u;if(a)u=LE;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const g=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const g=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return s?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Xg(n,e,t,s,a){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await U1(n,e,t,t==="getOobCode");return s(n,u)}else return s(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await U1(n,e,t,t==="getOobCode");return s(n,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(n,e){const t=Vy(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(La(l,e??{}))return a;br(a,"already-initialized")}return t.initialize({options:e})}function sD(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(js);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function iD(n,e,t){const s=Wi(n);Ne(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=UE(e),{host:u,port:h}=aD(e),g=h===null?"":`:${h}`,p={url:`${l}//${u}${g}/`},v=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Ne(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ne(La(p,s.config.emulator)&&La(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,_l(u)?(fE(`${l}//${u}${g}`),mE("Auth",!0)):oD()}function UE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function aD(n){const e=UE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:z1(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:z1(u)}}}function z1(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function oD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ps("not implemented")}_getIdTokenResponse(e){return Ps("not implemented")}_linkToIdToken(e,t){return Ps("not implemented")}_getReauthenticationResolver(e){return Ps("not implemented")}}async function lD(n,e){return is(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(n,e){return Cu(n,"POST","/v1/accounts:signInWithPassword",Ws(n,e))}async function uD(n,e){return is(n,"POST","/v1/accounts:sendOobCode",Ws(n,e))}async function dD(n,e){return uD(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(n,e){return Cu(n,"POST","/v1/accounts:signInWithEmailLink",Ws(n,e))}async function fD(n,e){return Cu(n,"POST","/v1/accounts:signInWithEmailLink",Ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends qy{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new uu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new uu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xg(e,t,"signInWithPassword",cD);case"emailLink":return hD(e,{email:this._email,oobCode:this._password});default:br(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xg(e,s,"signUpPassword",lD);case"emailLink":return fD(e,{idToken:t,email:this._email,oobCode:this._password});default:br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(n,e){return Cu(n,"POST","/v1/accounts:signInWithIdp",Ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="http://localhost";class za extends qy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new za(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a}=t,l=Ru(t,["providerId","signInMethod"]);if(!s||!a)return null;const u=new za(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return tl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,tl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tl(e,t)}buildRequest(){const e={requestUri:mD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Au(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gD(n){const e=Gc($c(n)).link,t=e?Gc($c(e)).deep_link_id:null,s=Gc($c(n)).deep_link_id;return(s?Gc($c(s)).link:null)||s||t||e||n}class Hy{constructor(e){var t,s,a,l,u,h;const g=Gc($c(e)),p=(t=g.apiKey)!==null&&t!==void 0?t:null,v=(s=g.oobCode)!==null&&s!==void 0?s:null,w=pD((a=g.mode)!==null&&a!==void 0?a:null);Ne(p&&v&&w,"argument-error"),this.apiKey=p,this.operation=w,this.code=v,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=g.lang)!==null&&u!==void 0?u:null,this.tenantId=(h=g.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=gD(e);try{return new Hy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.providerId=xl.PROVIDER_ID}static credential(e,t){return uu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Hy.parseLink(t);return Ne(s,"argument-error"),uu._fromEmailAndCode(e,s.code,s.tenantId)}}xl.PROVIDER_ID="password";xl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends Gy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends Iu{constructor(){super("facebook.com")}static credential(e){return za._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ni.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return za._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return es.credential(t,s)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Iu{constructor(){super("github.com")}static credential(e){return za._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.GITHUB_SIGN_IN_METHOD="github.com";Ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Iu{constructor(){super("twitter.com")}static credential(e,t){return za._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ii.credential(t,s)}catch{return null}}}Ii.TWITTER_SIGN_IN_METHOD="twitter.com";Ii.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(n,e){return Cu(n,"POST","/v1/accounts:signUp",Ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await Rr._fromIdTokenResponse(e,s,a),u=B1(s);return new Ba({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=B1(s);return new Ba({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function B1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends Qs{constructor(e,t,s,a){var l;super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Xh.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Xh(e,t,s,a)}}function zE(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Xh._fromErrorAndOperation(n,l,e,s):l})}async function vD(n,e,t=!1){const s=await al(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ba._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(n,e,t=!1){const{auth:s}=n;if(Jn(s.app))return Promise.reject(Vs(s));const a="reauthenticate";try{const l=await al(n,zE(s,a,e,n),t);Ne(l.idToken,s,"internal-error");const u=By(l.idToken);Ne(u,s,"internal-error");const{sub:h}=u;return Ne(n.uid===h,s,"user-mismatch"),Ba._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&br(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BE(n,e,t=!1){if(Jn(n.app))return Promise.reject(Vs(n));const s="signIn",a=await zE(n,s,e),l=await Ba._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}async function _D(n,e){return BE(Wi(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(n,e,t){var s;Ne(((s=t.url)===null||s===void 0?void 0:s.length)>0,n,"invalid-continue-uri"),Ne(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Ne(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Ne(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Ne(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FE(n){const e=Wi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function qE(n,e,t){if(Jn(n.app))return Promise.reject(Vs(n));const s=Wi(n),u=await Xg(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yD).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&FE(n),g}),h=await Ba._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(h.user),h}function xD(n,e,t){return Jn(n.app)?Promise.reject(Vs(n)):_D(Tt(n),xl.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&FE(n),s})}async function HE(n,e){const t=Tt(n),a={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&wD(t.auth,a,e);const{email:l}=await dD(t.auth,a);l!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(n,e){return is(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(n,{displayName:e,photoURL:t}){const s=Tt(n),l={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await al(s,ED(s.auth,l));s.displayName=u.displayName||null,s.photoURL=u.photoUrl||null;const h=s.providerData.find(({providerId:g})=>g==="password");h&&(h.displayName=s.displayName,h.photoURL=s.photoURL),await s._updateTokensIfNecessary(u)}function SD(n,e,t,s){return Tt(n).onIdTokenChanged(e,t,s)}function AD(n,e,t){return Tt(n).beforeAuthStateChanged(e,t)}function RD(n,e,t,s){return Tt(n).onAuthStateChanged(e,t,s)}function ND(n){return Tt(n).signOut()}const Zh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zh,"1"),this.storage.removeItem(Zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=1e3,ID=10;class $E extends GE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,g)=>{this.notifyListeners(u,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);q4()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,ID):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},CD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$E.type="LOCAL";const DD=$E;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE extends GE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}KE.type="SESSION";const QE=KE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new wf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const h=Array.from(u).map(async p=>p(t.origin,l)),g=await kD(h);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,g)=>{const p=$y("",20);a.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(w){const _=w;if(_.data.eventId===p)switch(_.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(_.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return window}function PD(n){ts().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(){return typeof ts().WorkerGlobalScope<"u"&&typeof ts().importScripts=="function"}async function jD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MD(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function VD(){return WE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="firebaseLocalStorageDb",LD=1,Jh="firebaseLocalStorage",XE="fbase_key";class Du{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xf(n,e){return n.transaction([Jh],e?"readwrite":"readonly").objectStore(Jh)}function UD(){const n=indexedDB.deleteDatabase(YE);return new Du(n).toPromise()}function Zg(){const n=indexedDB.open(YE,LD);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Jh,{keyPath:XE})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Jh)?e(s):(s.close(),await UD(),e(await Zg()))})})}async function F1(n,e,t){const s=xf(n,!0).put({[XE]:e,value:t});return new Du(s).toPromise()}async function zD(n,e){const t=xf(n,!1).get(e),s=await new Du(t).toPromise();return s===void 0?null:s.value}function q1(n,e){const t=xf(n,!0).delete(e);return new Du(t).toPromise()}const BD=800,FD=3;class ZE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>FD)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wf._getInstance(VD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await jD(),!this.activeServiceWorker)return;this.sender=new OD(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zg();return await F1(e,Zh,"1"),await q1(e,Zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>F1(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>zD(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>q1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=xf(a,!1).getAll();return new Du(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZE.type="LOCAL";const qD=ZE;new Nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(n,e){return e?js(e):(Ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky extends qy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function HD(n){return BE(n.auth,new Ky(n),n.bypassAuthState)}function GD(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),bD(t,new Ky(n),n.bypassAuthState)}async function $D(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),vD(t,new Ky(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HD;case"linkViaPopup":case"linkViaRedirect":return $D;case"reauthViaPopup":case"reauthViaRedirect":return GD;default:br(this.auth,"internal-error")}}resolve(e){Fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=new Nu(2e3,1e4);async function QD(n,e,t){if(Jn(n.app))return Promise.reject(Nr(n,"operation-not-supported-in-this-environment"));const s=Wi(n);E4(n,e,Gy);const a=JE(s,t);return new Pa(s,"signInViaPopup",e,a).executeNotNull()}class Pa extends eT{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,Pa.currentPopupAction&&Pa.currentPopupAction.cancel(),Pa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Fs(this.filter.length===1,"Popup operations only handle one event");const e=$y();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KD.get())};e()}}Pa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="pendingRedirect",Mh=new Map;class YD extends eT{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Mh.get(this.auth._key());if(!e){try{const s=await XD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Mh.set(this.auth._key(),e)}return this.bypassAuthState||Mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XD(n,e){const t=ek(e),s=JD(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function ZD(n,e){Mh.set(n._key(),e)}function JD(n){return js(n._redirectPersistence)}function ek(n){return jh(WD,n.config.apiKey,n.name)}async function tk(n,e,t=!1){if(Jn(n.app))return Promise.reject(Vs(n));const s=Wi(n),a=JE(s,e),u=await new YD(s,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=10*60*1e3;class rk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!tT(e)){const a=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Nr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nk&&this.cachedEventUids.clear(),this.cachedEventUids.has(H1(e))}saveEventToCache(e){this.cachedEventUids.add(H1(e)),this.lastProcessedEventTime=Date.now()}}function H1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function tT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(n,e={}){return is(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ok=/^https?/;async function lk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ik(n);for(const t of e)try{if(ck(t))return}catch{}br(n,"unauthorized-domain")}function ck(n){const e=Wg(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!ok.test(t))return!1;if(ak.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=new Nu(3e4,6e4);function G1(){const n=ts().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function dk(n){return new Promise((e,t)=>{var s,a,l;function u(){G1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{G1(),t(Nr(n,"network-request-failed"))},timeout:uk.get()})}if(!((a=(s=ts().gapi)===null||s===void 0?void 0:s.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=ts().gapi)===null||l===void 0)&&l.load)u();else{const h=Z4("iframefcb");return ts()[h]=()=>{gapi.load?u():t(Nr(n,"network-request-failed"))},VE(`${X4()}?onload=${h}`).catch(g=>t(g))}}).catch(e=>{throw Vh=null,e})}let Vh=null;function hk(n){return Vh=Vh||dk(n),Vh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=new Nu(5e3,15e3),mk="__/auth/iframe",pk="emulator/auth/iframe",gk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vk(n){const e=n.config;Ne(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?zy(e,pk):`https://${n.config.authDomain}/${mk}`,s={apiKey:e.apiKey,appName:n.name,v:wl},a=yk.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Au(s).slice(1)}`}async function bk(n){const e=await hk(n),t=ts().gapi;return Ne(t,n,"internal-error"),e.open({where:document.body,url:vk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gk,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=Nr(n,"network-request-failed"),h=ts().setTimeout(()=>{l(u)},fk.get());function g(){ts().clearTimeout(h),a(s)}s.ping(g).then(g,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wk=500,xk=600,Ek="_blank",Tk="http://localhost";class $1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Sk(n,e,t,s=wk,a=xk){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const g=Object.assign(Object.assign({},_k),{width:s.toString(),height:a.toString(),top:l,left:u}),p=Dn().toLowerCase();t&&(h=IE(p)?Ek:t),NE(p)&&(e=e||Tk,g.scrollbars="yes");const v=Object.entries(g).reduce((_,[S,R])=>`${_}${S}=${R},`,"");if(F4(p)&&h!=="_self")return Ak(e||"",h),new $1(null);const w=window.open(e||"",h,v);Ne(w,n,"popup-blocked");try{w.focus()}catch{}return new $1(w)}function Ak(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="__/auth/handler",Nk="emulator/auth/handler",Ck=encodeURIComponent("fac");async function K1(n,e,t,s,a,l){Ne(n.config.authDomain,n,"auth-domain-config-required"),Ne(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:wl,eventId:a};if(e instanceof Gy){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",lI(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(e instanceof Iu){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const g=await n._getAppCheckToken(),p=g?`#${Ck}=${encodeURIComponent(g)}`:"";return`${Ik(n)}?${Au(h).slice(1)}${p}`}function Ik({config:n}){return n.emulator?zy(n,Nk):`https://${n.authDomain}/${Rk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="webStorageSupport";class Dk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QE,this._completeRedirectFn=tk,this._overrideRedirectResult=ZD}async _openPopup(e,t,s,a){var l;Fs((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await K1(e,t,s,Wg(),a);return Sk(e,u,$y())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await K1(e,t,s,Wg(),a);return PD(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Fs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await bk(e),s=new rk(e);return t.register("authEvent",a=>(Ne(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fg,{type:fg},a=>{var l;const u=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[fg];u!==void 0&&t(!!u),br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jE()||CE()||Fy()}}const kk=Dk;var Q1="@firebase/auth",W1="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jk(n){il(new Ua("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;Ne(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ME(n)},p=new Q4(s,a,l,g);return sD(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),il(new Ua("auth-internal",e=>{const t=Wi(e.getProvider("auth").getImmediate());return(s=>new Ok(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mi(Q1,W1,Pk(n)),Mi(Q1,W1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=5*60,Vk=hE("authIdTokenMaxAge")||Mk;let Y1=null;const Lk=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Vk)return;const a=t==null?void 0:t.token;Y1!==a&&(Y1=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Uk(n=vE()){const e=Vy(n,"auth");if(e.isInitialized())return e.getImmediate();const t=rD(n,{popupRedirectResolver:kk,persistence:[qD,DD,QE]}),s=hE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=Lk(l.toString());AD(t,u,()=>u(t.currentUser)),SD(t,h=>u(h))}}const a=uE("auth");return a&&iD(t,`http://${a}`),t}function zk(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}W4({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=Nr("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",zk().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jk("Browser");var Bk="firebase",Fk="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mi(Bk,Fk,"app");var X1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vi,nT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,A){function O(){}O.prototype=A.prototype,I.D=A.prototype,I.prototype=new O,I.prototype.constructor=I,I.C=function(L,z,F){for(var j=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)j[Me-2]=arguments[Me];return A.prototype[z].apply(L,j)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(I,A,O){O||(O=0);var L=Array(16);if(typeof A=="string")for(var z=0;16>z;++z)L[z]=A.charCodeAt(O++)|A.charCodeAt(O++)<<8|A.charCodeAt(O++)<<16|A.charCodeAt(O++)<<24;else for(z=0;16>z;++z)L[z]=A[O++]|A[O++]<<8|A[O++]<<16|A[O++]<<24;A=I.g[0],O=I.g[1],z=I.g[2];var F=I.g[3],j=A+(F^O&(z^F))+L[0]+3614090360&4294967295;A=O+(j<<7&4294967295|j>>>25),j=F+(z^A&(O^z))+L[1]+3905402710&4294967295,F=A+(j<<12&4294967295|j>>>20),j=z+(O^F&(A^O))+L[2]+606105819&4294967295,z=F+(j<<17&4294967295|j>>>15),j=O+(A^z&(F^A))+L[3]+3250441966&4294967295,O=z+(j<<22&4294967295|j>>>10),j=A+(F^O&(z^F))+L[4]+4118548399&4294967295,A=O+(j<<7&4294967295|j>>>25),j=F+(z^A&(O^z))+L[5]+1200080426&4294967295,F=A+(j<<12&4294967295|j>>>20),j=z+(O^F&(A^O))+L[6]+2821735955&4294967295,z=F+(j<<17&4294967295|j>>>15),j=O+(A^z&(F^A))+L[7]+4249261313&4294967295,O=z+(j<<22&4294967295|j>>>10),j=A+(F^O&(z^F))+L[8]+1770035416&4294967295,A=O+(j<<7&4294967295|j>>>25),j=F+(z^A&(O^z))+L[9]+2336552879&4294967295,F=A+(j<<12&4294967295|j>>>20),j=z+(O^F&(A^O))+L[10]+4294925233&4294967295,z=F+(j<<17&4294967295|j>>>15),j=O+(A^z&(F^A))+L[11]+2304563134&4294967295,O=z+(j<<22&4294967295|j>>>10),j=A+(F^O&(z^F))+L[12]+1804603682&4294967295,A=O+(j<<7&4294967295|j>>>25),j=F+(z^A&(O^z))+L[13]+4254626195&4294967295,F=A+(j<<12&4294967295|j>>>20),j=z+(O^F&(A^O))+L[14]+2792965006&4294967295,z=F+(j<<17&4294967295|j>>>15),j=O+(A^z&(F^A))+L[15]+1236535329&4294967295,O=z+(j<<22&4294967295|j>>>10),j=A+(z^F&(O^z))+L[1]+4129170786&4294967295,A=O+(j<<5&4294967295|j>>>27),j=F+(O^z&(A^O))+L[6]+3225465664&4294967295,F=A+(j<<9&4294967295|j>>>23),j=z+(A^O&(F^A))+L[11]+643717713&4294967295,z=F+(j<<14&4294967295|j>>>18),j=O+(F^A&(z^F))+L[0]+3921069994&4294967295,O=z+(j<<20&4294967295|j>>>12),j=A+(z^F&(O^z))+L[5]+3593408605&4294967295,A=O+(j<<5&4294967295|j>>>27),j=F+(O^z&(A^O))+L[10]+38016083&4294967295,F=A+(j<<9&4294967295|j>>>23),j=z+(A^O&(F^A))+L[15]+3634488961&4294967295,z=F+(j<<14&4294967295|j>>>18),j=O+(F^A&(z^F))+L[4]+3889429448&4294967295,O=z+(j<<20&4294967295|j>>>12),j=A+(z^F&(O^z))+L[9]+568446438&4294967295,A=O+(j<<5&4294967295|j>>>27),j=F+(O^z&(A^O))+L[14]+3275163606&4294967295,F=A+(j<<9&4294967295|j>>>23),j=z+(A^O&(F^A))+L[3]+4107603335&4294967295,z=F+(j<<14&4294967295|j>>>18),j=O+(F^A&(z^F))+L[8]+1163531501&4294967295,O=z+(j<<20&4294967295|j>>>12),j=A+(z^F&(O^z))+L[13]+2850285829&4294967295,A=O+(j<<5&4294967295|j>>>27),j=F+(O^z&(A^O))+L[2]+4243563512&4294967295,F=A+(j<<9&4294967295|j>>>23),j=z+(A^O&(F^A))+L[7]+1735328473&4294967295,z=F+(j<<14&4294967295|j>>>18),j=O+(F^A&(z^F))+L[12]+2368359562&4294967295,O=z+(j<<20&4294967295|j>>>12),j=A+(O^z^F)+L[5]+4294588738&4294967295,A=O+(j<<4&4294967295|j>>>28),j=F+(A^O^z)+L[8]+2272392833&4294967295,F=A+(j<<11&4294967295|j>>>21),j=z+(F^A^O)+L[11]+1839030562&4294967295,z=F+(j<<16&4294967295|j>>>16),j=O+(z^F^A)+L[14]+4259657740&4294967295,O=z+(j<<23&4294967295|j>>>9),j=A+(O^z^F)+L[1]+2763975236&4294967295,A=O+(j<<4&4294967295|j>>>28),j=F+(A^O^z)+L[4]+1272893353&4294967295,F=A+(j<<11&4294967295|j>>>21),j=z+(F^A^O)+L[7]+4139469664&4294967295,z=F+(j<<16&4294967295|j>>>16),j=O+(z^F^A)+L[10]+3200236656&4294967295,O=z+(j<<23&4294967295|j>>>9),j=A+(O^z^F)+L[13]+681279174&4294967295,A=O+(j<<4&4294967295|j>>>28),j=F+(A^O^z)+L[0]+3936430074&4294967295,F=A+(j<<11&4294967295|j>>>21),j=z+(F^A^O)+L[3]+3572445317&4294967295,z=F+(j<<16&4294967295|j>>>16),j=O+(z^F^A)+L[6]+76029189&4294967295,O=z+(j<<23&4294967295|j>>>9),j=A+(O^z^F)+L[9]+3654602809&4294967295,A=O+(j<<4&4294967295|j>>>28),j=F+(A^O^z)+L[12]+3873151461&4294967295,F=A+(j<<11&4294967295|j>>>21),j=z+(F^A^O)+L[15]+530742520&4294967295,z=F+(j<<16&4294967295|j>>>16),j=O+(z^F^A)+L[2]+3299628645&4294967295,O=z+(j<<23&4294967295|j>>>9),j=A+(z^(O|~F))+L[0]+4096336452&4294967295,A=O+(j<<6&4294967295|j>>>26),j=F+(O^(A|~z))+L[7]+1126891415&4294967295,F=A+(j<<10&4294967295|j>>>22),j=z+(A^(F|~O))+L[14]+2878612391&4294967295,z=F+(j<<15&4294967295|j>>>17),j=O+(F^(z|~A))+L[5]+4237533241&4294967295,O=z+(j<<21&4294967295|j>>>11),j=A+(z^(O|~F))+L[12]+1700485571&4294967295,A=O+(j<<6&4294967295|j>>>26),j=F+(O^(A|~z))+L[3]+2399980690&4294967295,F=A+(j<<10&4294967295|j>>>22),j=z+(A^(F|~O))+L[10]+4293915773&4294967295,z=F+(j<<15&4294967295|j>>>17),j=O+(F^(z|~A))+L[1]+2240044497&4294967295,O=z+(j<<21&4294967295|j>>>11),j=A+(z^(O|~F))+L[8]+1873313359&4294967295,A=O+(j<<6&4294967295|j>>>26),j=F+(O^(A|~z))+L[15]+4264355552&4294967295,F=A+(j<<10&4294967295|j>>>22),j=z+(A^(F|~O))+L[6]+2734768916&4294967295,z=F+(j<<15&4294967295|j>>>17),j=O+(F^(z|~A))+L[13]+1309151649&4294967295,O=z+(j<<21&4294967295|j>>>11),j=A+(z^(O|~F))+L[4]+4149444226&4294967295,A=O+(j<<6&4294967295|j>>>26),j=F+(O^(A|~z))+L[11]+3174756917&4294967295,F=A+(j<<10&4294967295|j>>>22),j=z+(A^(F|~O))+L[2]+718787259&4294967295,z=F+(j<<15&4294967295|j>>>17),j=O+(F^(z|~A))+L[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(z+(j<<21&4294967295|j>>>11))&4294967295,I.g[2]=I.g[2]+z&4294967295,I.g[3]=I.g[3]+F&4294967295}s.prototype.u=function(I,A){A===void 0&&(A=I.length);for(var O=A-this.blockSize,L=this.B,z=this.h,F=0;F<A;){if(z==0)for(;F<=O;)a(this,I,F),F+=this.blockSize;if(typeof I=="string"){for(;F<A;)if(L[z++]=I.charCodeAt(F++),z==this.blockSize){a(this,L),z=0;break}}else for(;F<A;)if(L[z++]=I[F++],z==this.blockSize){a(this,L),z=0;break}}this.h=z,this.o+=A},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;var O=8*this.o;for(A=I.length-8;A<I.length;++A)I[A]=O&255,O/=256;for(this.u(I),I=Array(16),A=O=0;4>A;++A)for(var L=0;32>L;L+=8)I[O++]=this.g[A]>>>L&255;return I};function l(I,A){var O=h;return Object.prototype.hasOwnProperty.call(O,I)?O[I]:O[I]=A(I)}function u(I,A){this.h=A;for(var O=[],L=!0,z=I.length-1;0<=z;z--){var F=I[z]|0;L&&F==A||(O[z]=F,L=!1)}this.g=O}var h={};function g(I){return-128<=I&&128>I?l(I,function(A){return new u([A|0],0>A?-1:0)}):new u([I|0],0>I?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return w;if(0>I)return k(p(-I));for(var A=[],O=1,L=0;I>=O;L++)A[L]=I/O|0,O*=4294967296;return new u(A,0)}function v(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return k(v(I.substring(1),A));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=p(Math.pow(A,8)),L=w,z=0;z<I.length;z+=8){var F=Math.min(8,I.length-z),j=parseInt(I.substring(z,z+F),A);8>F?(F=p(Math.pow(A,F)),L=L.j(F).add(p(j))):(L=L.j(O),L=L.add(p(j)))}return L}var w=g(0),_=g(1),S=g(16777216);n=u.prototype,n.m=function(){if(C(this))return-k(this).m();for(var I=0,A=1,O=0;O<this.g.length;O++){var L=this.i(O);I+=(0<=L?L:4294967296+L)*A,A*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R(this))return"0";if(C(this))return"-"+k(this).toString(I);for(var A=p(Math.pow(I,6)),O=this,L="";;){var z=M(O,A).g;O=P(O,z.j(A));var F=((0<O.g.length?O.g[0]:O.h)>>>0).toString(I);if(O=z,R(O))return F+L;for(;6>F.length;)F="0"+F;L=F+L}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function R(I){if(I.h!=0)return!1;for(var A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function C(I){return I.h==-1}n.l=function(I){return I=P(this,I),C(I)?-1:R(I)?0:1};function k(I){for(var A=I.g.length,O=[],L=0;L<A;L++)O[L]=~I.g[L];return new u(O,~I.h).add(_)}n.abs=function(){return C(this)?k(this):this},n.add=function(I){for(var A=Math.max(this.g.length,I.g.length),O=[],L=0,z=0;z<=A;z++){var F=L+(this.i(z)&65535)+(I.i(z)&65535),j=(F>>>16)+(this.i(z)>>>16)+(I.i(z)>>>16);L=j>>>16,F&=65535,j&=65535,O[z]=j<<16|F}return new u(O,O[O.length-1]&-2147483648?-1:0)};function P(I,A){return I.add(k(A))}n.j=function(I){if(R(this)||R(I))return w;if(C(this))return C(I)?k(this).j(k(I)):k(k(this).j(I));if(C(I))return k(this.j(k(I)));if(0>this.l(S)&&0>I.l(S))return p(this.m()*I.m());for(var A=this.g.length+I.g.length,O=[],L=0;L<2*A;L++)O[L]=0;for(L=0;L<this.g.length;L++)for(var z=0;z<I.g.length;z++){var F=this.i(L)>>>16,j=this.i(L)&65535,Me=I.i(z)>>>16,Ce=I.i(z)&65535;O[2*L+2*z]+=j*Ce,B(O,2*L+2*z),O[2*L+2*z+1]+=F*Ce,B(O,2*L+2*z+1),O[2*L+2*z+1]+=j*Me,B(O,2*L+2*z+1),O[2*L+2*z+2]+=F*Me,B(O,2*L+2*z+2)}for(L=0;L<A;L++)O[L]=O[2*L+1]<<16|O[2*L];for(L=A;L<2*A;L++)O[L]=0;return new u(O,0)};function B(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function H(I,A){this.g=I,this.h=A}function M(I,A){if(R(A))throw Error("division by zero");if(R(I))return new H(w,w);if(C(I))return A=M(k(I),A),new H(k(A.g),k(A.h));if(C(A))return A=M(I,k(A)),new H(k(A.g),A.h);if(30<I.g.length){if(C(I)||C(A))throw Error("slowDivide_ only works with positive integers.");for(var O=_,L=A;0>=L.l(I);)O=K(O),L=K(L);var z=ne(O,1),F=ne(L,1);for(L=ne(L,2),O=ne(O,2);!R(L);){var j=F.add(L);0>=j.l(I)&&(z=z.add(O),F=j),L=ne(L,1),O=ne(O,1)}return A=P(I,z.j(A)),new H(z,A)}for(z=w;0<=I.l(A);){for(O=Math.max(1,Math.floor(I.m()/A.m())),L=Math.ceil(Math.log(O)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),F=p(O),j=F.j(A);C(j)||0<j.l(I);)O-=L,F=p(O),j=F.j(A);R(F)&&(F=_),z=z.add(F),I=P(I,j)}return new H(z,I)}n.A=function(I){return M(this,I).h},n.and=function(I){for(var A=Math.max(this.g.length,I.g.length),O=[],L=0;L<A;L++)O[L]=this.i(L)&I.i(L);return new u(O,this.h&I.h)},n.or=function(I){for(var A=Math.max(this.g.length,I.g.length),O=[],L=0;L<A;L++)O[L]=this.i(L)|I.i(L);return new u(O,this.h|I.h)},n.xor=function(I){for(var A=Math.max(this.g.length,I.g.length),O=[],L=0;L<A;L++)O[L]=this.i(L)^I.i(L);return new u(O,this.h^I.h)};function K(I){for(var A=I.g.length+1,O=[],L=0;L<A;L++)O[L]=I.i(L)<<1|I.i(L-1)>>>31;return new u(O,I.h)}function ne(I,A){var O=A>>5;A%=32;for(var L=I.g.length-O,z=[],F=0;F<L;F++)z[F]=0<A?I.i(F+O)>>>A|I.i(F+O+1)<<32-A:I.i(F+O);return new u(z,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,nT=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=v,Vi=u}).apply(typeof X1<"u"?X1:typeof self<"u"?self:typeof window<"u"?window:{});var ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rT,Kc,sT,Lh,Jg,iT,aT,oT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,b,x){return d==Array.prototype||d==Object.prototype||(d[b]=x.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ph=="object"&&ph];for(var b=0;b<d.length;++b){var x=d[b];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=t(this);function a(d,b){if(b)e:{var x=s;d=d.split(".");for(var D=0;D<d.length-1;D++){var W=d[D];if(!(W in x))break e;x=x[W]}d=d[d.length-1],D=x[d],b=b(D),b!=D&&b!=null&&e(x,d,{configurable:!0,writable:!0,value:b})}}function l(d,b){d instanceof String&&(d+="");var x=0,D=!1,W={next:function(){if(!D&&x<d.length){var te=x++;return{value:b(te,d[te]),done:!1}}return D=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}a("Array.prototype.values",function(d){return d||function(){return l(this,function(b,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function g(d){var b=typeof d;return b=b!="object"?b:d?Array.isArray(d)?"array":b:"null",b=="array"||b=="object"&&typeof d.length=="number"}function p(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function v(d,b,x){return d.call.apply(d.bind,arguments)}function w(d,b,x){if(!d)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,D),d.apply(b,W)}}return function(){return d.apply(b,arguments)}}function _(d,b,x){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,_.apply(null,arguments)}function S(d,b){var x=Array.prototype.slice.call(arguments,1);return function(){var D=x.slice();return D.push.apply(D,arguments),d.apply(this,D)}}function R(d,b){function x(){}x.prototype=b.prototype,d.aa=b.prototype,d.prototype=new x,d.prototype.constructor=d,d.Qb=function(D,W,te){for(var me=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)me[Qe-2]=arguments[Qe];return b.prototype[W].apply(D,me)}}function C(d){const b=d.length;if(0<b){const x=Array(b);for(let D=0;D<b;D++)x[D]=d[D];return x}return[]}function k(d,b){for(let x=1;x<arguments.length;x++){const D=arguments[x];if(g(D)){const W=d.length||0,te=D.length||0;d.length=W+te;for(let me=0;me<te;me++)d[W+me]=D[me]}else d.push(D)}}class P{constructor(b,x){this.i=b,this.j=x,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function B(d){return/^[\s\xa0]*$/.test(d)}function H(){var d=h.navigator;return d&&(d=d.userAgent)?d:""}function M(d){return M[" "](d),d}M[" "]=function(){};var K=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ne(d,b,x){for(const D in d)b.call(x,d[D],D,d)}function I(d,b){for(const x in d)b.call(void 0,d[x],x,d)}function A(d){const b={};for(const x in d)b[x]=d[x];return b}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(d,b){let x,D;for(let W=1;W<arguments.length;W++){D=arguments[W];for(x in D)d[x]=D[x];for(let te=0;te<O.length;te++)x=O[te],Object.prototype.hasOwnProperty.call(D,x)&&(d[x]=D[x])}}function z(d){var b=1;d=d.split(":");const x=[];for(;0<b&&d.length;)x.push(d.shift()),b--;return d.length&&x.push(d.join(":")),x}function F(d){h.setTimeout(()=>{throw d},0)}function j(){var d=Re;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class Me{constructor(){this.h=this.g=null}add(b,x){const D=Ce.get();D.set(b,x),this.h?this.h.next=D:this.g=D,this.h=D}}var Ce=new P(()=>new Y,d=>d.reset());class Y{constructor(){this.next=this.g=this.h=null}set(b,x){this.h=b,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ue=!1,Re=new Me,U=()=>{const d=h.Promise.resolve(void 0);he=()=>{d.then(G)}};var G=()=>{for(var d;d=j();){try{d.h.call(d.g)}catch(x){F(x)}var b=Ce;b.j(d),100>b.h&&(b.h++,d.next=b.g,b.g=d)}ue=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};h.addEventListener("test",x,b),h.removeEventListener("test",x,b)}catch{}return d}();function de(d,b){if(Q.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var x=this.type=d.type,D=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget){if(K){e:{try{M(b.nodeName);var W=!0;break e}catch{}W=!1}W||(b=null)}}else x=="mouseover"?b=d.fromElement:x=="mouseout"&&(b=d.toElement);this.relatedTarget=b,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:fe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&de.aa.h.call(this)}}R(de,Q);var fe={2:"touch",3:"pen",4:"mouse"};de.prototype.h=function(){de.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function Dt(d,b,x,D,W){this.listener=d,this.proxy=null,this.src=b,this.type=x,this.capture=!!D,this.ha=W,this.key=++Ue,this.da=this.fa=!1}function rt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function xe(d){this.src=d,this.g={},this.h=0}xe.prototype.add=function(d,b,x,D,W){var te=d.toString();d=this.g[te],d||(d=this.g[te]=[],this.h++);var me=ve(d,b,D,W);return-1<me?(b=d[me],x||(b.fa=!1)):(b=new Dt(b,this.src,te,!!D,W),b.fa=x,d.push(b)),b};function ye(d,b){var x=b.type;if(x in d.g){var D=d.g[x],W=Array.prototype.indexOf.call(D,b,void 0),te;(te=0<=W)&&Array.prototype.splice.call(D,W,1),te&&(rt(b),d.g[x].length==0&&(delete d.g[x],d.h--))}}function ve(d,b,x,D){for(var W=0;W<d.length;++W){var te=d[W];if(!te.da&&te.listener==b&&te.capture==!!x&&te.ha==D)return W}return-1}var lt="closure_lm_"+(1e6*Math.random()|0),Mt={};function Ln(d,b,x,D,W){if(Array.isArray(b)){for(var te=0;te<b.length;te++)Ln(d,b[te],x,D,W);return null}return x=Hu(x),d&&d[Te]?d.K(b,x,p(D)?!!D.capture:!1,W):pn(d,b,x,!1,D,W)}function pn(d,b,x,D,W,te){if(!b)throw Error("Invalid event type");var me=p(W)?!!W.capture:!!W,Qe=Xa(d);if(Qe||(d[lt]=Qe=new xe(d)),x=Qe.add(b,x,D,me,te),x.proxy)return x;if(D=os(),x.proxy=D,D.src=d,D.listener=x,d.addEventListener)se||(W=me),W===void 0&&(W=!1),d.addEventListener(b.toString(),D,W);else if(d.attachEvent)d.attachEvent(Zi(b.toString()),D);else if(d.addListener&&d.removeListener)d.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return x}function os(){function d(x){return b.call(d.src,d.listener,x)}const b=em;return d}function Ys(d,b,x,D,W){if(Array.isArray(b))for(var te=0;te<b.length;te++)Ys(d,b[te],x,D,W);else D=p(D)?!!D.capture:!!D,x=Hu(x),d&&d[Te]?(d=d.i,b=String(b).toString(),b in d.g&&(te=d.g[b],x=ve(te,x,D,W),-1<x&&(rt(te[x]),Array.prototype.splice.call(te,x,1),te.length==0&&(delete d.g[b],d.h--)))):d&&(d=Xa(d))&&(b=d.g[b.toString()],d=-1,b&&(d=ve(b,x,D,W)),(x=-1<d?b[d]:null)&&Ya(x))}function Ya(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[Te])ye(b.i,d);else{var x=d.type,D=d.proxy;b.removeEventListener?b.removeEventListener(x,D,d.capture):b.detachEvent?b.detachEvent(Zi(x),D):b.addListener&&b.removeListener&&b.removeListener(D),(x=Xa(b))?(ye(x,d),x.h==0&&(x.src=null,b[lt]=null)):rt(d)}}}function Zi(d){return d in Mt?Mt[d]:Mt[d]="on"+d}function em(d,b){if(d.da)d=!0;else{b=new de(b,this);var x=d.listener,D=d.ha||d.src;d.fa&&Ya(d),d=x.call(D,b)}return d}function Xa(d){return d=d[lt],d instanceof xe?d:null}var Pl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hu(d){return typeof d=="function"?d:(d[Pl]||(d[Pl]=function(b){return d.handleEvent(b)}),d[Pl])}function Nt(){re.call(this),this.i=new xe(this),this.M=this,this.F=null}R(Nt,re),Nt.prototype[Te]=!0,Nt.prototype.removeEventListener=function(d,b,x,D){Ys(this,d,b,x,D)};function it(d,b){var x,D=d.F;if(D)for(x=[];D;D=D.F)x.push(D);if(d=d.M,D=b.type||b,typeof b=="string")b=new Q(b,d);else if(b instanceof Q)b.target=b.target||d;else{var W=b;b=new Q(D,d),L(b,W)}if(W=!0,x)for(var te=x.length-1;0<=te;te--){var me=b.g=x[te];W=Hn(me,D,!0,b)&&W}if(me=b.g=d,W=Hn(me,D,!0,b)&&W,W=Hn(me,D,!1,b)&&W,x)for(te=0;te<x.length;te++)me=b.g=x[te],W=Hn(me,D,!1,b)&&W}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var d=this.i,b;for(b in d.g){for(var x=d.g[b],D=0;D<x.length;D++)rt(x[D]);delete d.g[b],d.h--}}this.F=null},Nt.prototype.K=function(d,b,x,D){return this.i.add(String(d),b,!1,x,D)},Nt.prototype.L=function(d,b,x,D){return this.i.add(String(d),b,!0,x,D)};function Hn(d,b,x,D){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();for(var W=!0,te=0;te<b.length;++te){var me=b[te];if(me&&!me.da&&me.capture==x){var Qe=me.listener,Qt=me.ha||me.src;me.fa&&ye(d.i,me),W=Qe.call(Qt,D)!==!1&&W}}return W&&!D.defaultPrevented}function An(d,b,x){if(typeof d=="function")x&&(d=_(d,x));else if(d&&typeof d.handleEvent=="function")d=_(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:h.setTimeout(d,b||0)}function Gu(d){d.g=An(()=>{d.g=null,d.i&&(d.i=!1,Gu(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class tm extends re{constructor(b,x){super(),this.m=b,this.l=x,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Gu(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ji(d){re.call(this),this.h=d,this.g={}}R(Ji,re);var ea=[];function ta(d){ne(d.g,function(b,x){this.g.hasOwnProperty(x)&&Ya(b)},d),d.g={}}Ji.prototype.N=function(){Ji.aa.N.call(this),ta(this)},Ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wr=h.JSON.stringify,Za=h.JSON.parse,na=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function jl(){}jl.prototype.h=null;function Ml(d){return d.h||(d.h=d.i())}function Vl(){}var ls={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cs(){Q.call(this,"d")}R(cs,Q);function Ll(){Q.call(this,"c")}R(Ll,Q);var Mr={},Ul=null;function Xs(){return Ul=Ul||new Nt}Mr.La="serverreachability";function Ja(d){Q.call(this,Mr.La,d)}R(Ja,Q);function Zs(d){const b=Xs();it(b,new Ja(b))}Mr.STAT_EVENT="statevent";function $u(d,b){Q.call(this,Mr.STAT_EVENT,d),this.stat=b}R($u,Q);function _t(d){const b=Xs();it(b,new $u(b,d))}Mr.Ma="timingevent";function Kt(d,b){Q.call(this,Mr.Ma,d),this.size=b}R(Kt,Q);function Vt(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},b)}function rr(){this.g=!0}rr.prototype.xa=function(){this.g=!1};function zl(d,b,x,D,W,te){d.info(function(){if(d.g)if(te)for(var me="",Qe=te.split("&"),Qt=0;Qt<Qe.length;Qt++){var We=Qe[Qt].split("=");if(1<We.length){var rn=We[0];We=We[1];var Wt=rn.split("_");me=2<=Wt.length&&Wt[1]=="type"?me+(rn+"="+We+"&"):me+(rn+"=redacted&")}}else me=null;else me=te;return"XMLHTTP REQ ("+D+") [attempt "+W+"]: "+b+`
`+x+`
`+me})}function nm(d,b,x,D,W,te,me){d.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+W+"]: "+b+`
`+x+`
`+te+" "+me})}function Js(d,b,x,D){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+ra(d,x)+(D?" "+D:"")})}function Ku(d,b){d.info(function(){return"TIMEOUT: "+b})}rr.prototype.info=function(){};function ra(d,b){if(!d.g)return b;if(!b)return null;try{var x=JSON.parse(b);if(x){for(d=0;d<x.length;d++)if(Array.isArray(x[d])){var D=x[d];if(!(2>D.length)){var W=D[1];if(Array.isArray(W)&&!(1>W.length)){var te=W[0];if(te!="noop"&&te!="stop"&&te!="close")for(var me=1;me<W.length;me++)W[me]=""}}}}return wr(x)}catch{return b}}var ei={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},us={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vr;function Lr(){}R(Lr,jl),Lr.prototype.g=function(){return new XMLHttpRequest},Lr.prototype.i=function(){return{}},Vr=new Lr;function kn(d,b,x,D){this.j=d,this.i=b,this.l=x,this.R=D||1,this.U=new Ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kt}function kt(){this.i=null,this.g="",this.h=!1}var Bl={},eo={};function xr(d,b,x){d.L=1,d.v=la(Gn(b)),d.m=x,d.P=!0,ds(d,null)}function ds(d,b){d.F=Date.now(),sa(d),d.A=Gn(d.v);var x=d.A,D=d.R;Array.isArray(D)||(D=[String(D)]),Kl(x.i,"t",D),d.C=0,x=d.j.J,d.h=new kt,d.g=cd(d.j,x?b:null,!d.m),0<d.O&&(d.M=new tm(_(d.Y,d,d.g),d.O)),b=d.U,x=d.g,D=d.ca;var W="readystatechange";Array.isArray(W)||(W&&(ea[0]=W.toString()),W=ea);for(var te=0;te<W.length;te++){var me=Ln(x,W[te],D||b.handleEvent,!1,b.h||b);if(!me)break;b.g[me.key]=me}b=d.H?A(d.H):{},d.m?(d.u||(d.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,b)):(d.u="GET",d.g.ea(d.A,d.u,null,b)),Zs(),zl(d.i,d.u,d.A,d.l,d.R,d.m)}kn.prototype.ca=function(d){d=d.target;const b=this.M;b&&or(d)==3?b.j():this.Y(d)},kn.prototype.Y=function(d){try{if(d==this.g)e:{const Wt=or(this.g);var b=this.g.Ba();const bs=this.g.Z();if(!(3>Wt)&&(Wt!=3||this.g&&(this.h.h||this.g.oa()||td(this.g)))){this.J||Wt!=4||b==7||(b==8||0>=bs?Zs(3):Zs(2)),ti(this);var x=this.g.Z();this.X=x;t:if(Qu(this)){var D=td(this.g);d="";var W=D.length,te=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),Ur(this);var me="";break t}this.h.i=new h.TextDecoder}for(b=0;b<W;b++)this.h.h=!0,d+=this.h.i.decode(D[b],{stream:!(te&&b==W-1)});D.length=0,this.h.g+=d,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=x==200,nm(this.i,this.u,this.A,this.l,this.R,Wt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Qt=this.g;if((Qe=Qt.g?Qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Qe)){var We=Qe;break t}}We=null}if(x=We)Js(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ia(this,x);else{this.o=!1,this.s=3,_t(12),gn(this),Ur(this);break e}}if(this.P){x=!0;let yn;for(;!this.J&&this.C<me.length;)if(yn=Wu(this,me),yn==eo){Wt==4&&(this.s=4,_t(14),x=!1),Js(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Bl){this.s=4,_t(15),Js(this.i,this.l,me,"[Invalid Chunk]"),x=!1;break}else Js(this.i,this.l,yn,null),ia(this,yn);if(Qu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||me.length!=0||this.h.h||(this.s=1,_t(16),x=!1),this.o=this.o&&x,!x)Js(this.i,this.l,me,"[Invalid Chunked Response]"),gn(this),Ur(this);else if(0<me.length&&!this.W){this.W=!0;var rn=this.j;rn.g==this&&rn.ba&&!rn.M&&(rn.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),ga(rn),rn.M=!0,_t(11))}}else Js(this.i,this.l,me,null),ia(this,me);Wt==4&&gn(this),this.o&&!this.J&&(Wt==4?ad(this.j,this):(this.o=!1,sa(this)))}else om(this.g),x==400&&0<me.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),gn(this),Ur(this)}}}catch{}finally{}};function Qu(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Wu(d,b){var x=d.C,D=b.indexOf(`
`,x);return D==-1?eo:(x=Number(b.substring(x,D)),isNaN(x)?Bl:(D+=1,D+x>b.length?eo:(b=b.slice(D,D+x),d.C=D+x,b)))}kn.prototype.cancel=function(){this.J=!0,gn(this)};function sa(d){d.S=Date.now()+d.I,Yu(d,d.I)}function Yu(d,b){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Vt(_(d.ba,d),b)}function ti(d){d.B&&(h.clearTimeout(d.B),d.B=null)}kn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Ku(this.i,this.A),this.L!=2&&(Zs(),_t(17)),gn(this),this.s=2,Ur(this)):Yu(this,this.S-d)};function Ur(d){d.j.G==0||d.J||ad(d.j,d)}function gn(d){ti(d);var b=d.M;b&&typeof b.ma=="function"&&b.ma(),d.M=null,ta(d.U),d.g&&(b=d.g,d.g=null,b.abort(),b.ma())}function ia(d,b){try{var x=d.j;if(x.G!=0&&(x.g==d||Fl(x.h,d))){if(!d.K&&Fl(x.h,d)&&x.G==3){try{var D=x.Da.g.parse(b)}catch{D=null}if(Array.isArray(D)&&D.length==3){var W=D;if(W[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<d.F)fo(x),uo(x);else break e;Zl(x),_t(18)}}else x.za=W[1],0<x.za-x.T&&37500>W[2]&&x.F&&x.v==0&&!x.C&&(x.C=Vt(_(x.Za,x),6e3));if(1>=no(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else vs(x,11)}else if((d.K||x.g==d)&&fo(x),!B(b))for(W=x.Da.g.parse(b),b=0;b<W.length;b++){let We=W[b];if(x.T=We[0],We=We[1],x.G==2)if(We[0]=="c"){x.K=We[1],x.ia=We[2];const rn=We[3];rn!=null&&(x.la=rn,x.j.info("VER="+x.la));const Wt=We[4];Wt!=null&&(x.Aa=Wt,x.j.info("SVER="+x.Aa));const bs=We[5];bs!=null&&typeof bs=="number"&&0<bs&&(D=1.5*bs,x.L=D,x.j.info("backChannelRequestTimeoutMs_="+D)),D=x;const yn=d.g;if(yn){const $r=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($r){var te=D.h;te.g||$r.indexOf("spdy")==-1&&$r.indexOf("quic")==-1&&$r.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(ro(te,te.h),te.h=null))}if(D.D){const ec=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;ec&&(D.ya=ec,ct(D.I,D.D,ec))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-d.F,x.j.info("Handshake RTT: "+x.R+"ms")),D=x;var me=d;if(D.qa=ld(D,D.J?D.ia:null,D.W),me.K){On(D.h,me);var Qe=me,Qt=D.L;Qt&&(Qe.I=Qt),Qe.B&&(ti(Qe),sa(Qe)),D.g=me}else sd(D);0<x.i.length&&ho(x)}else We[0]!="stop"&&We[0]!="close"||vs(x,7);else x.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?vs(x,7):Yl(x):We[0]!="noop"&&x.l&&x.l.ta(We),x.v=0)}}Zs(4)}catch{}}var Xu=class{constructor(d,b){this.g=d,this.map=b}};function hs(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function to(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function no(d){return d.h?1:d.g?d.g.size:0}function Fl(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function ro(d,b){d.g?d.g.add(b):d.h=b}function On(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}hs.prototype.cancel=function(){if(this.i=ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ql(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const x of d.g.values())b=b.concat(x.D);return b}return C(d.i)}function rm(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(g(d)){for(var b=[],x=d.length,D=0;D<x;D++)b.push(d[D]);return b}b=[],x=0;for(D in d)b[x++]=d[D];return b}function so(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(g(d)||typeof d=="string"){var b=[];d=d.length;for(var x=0;x<d;x++)b.push(x);return b}b=[],x=0;for(const D in d)b[x++]=D;return b}}}function Hl(d,b){if(d.forEach&&typeof d.forEach=="function")d.forEach(b,void 0);else if(g(d)||typeof d=="string")Array.prototype.forEach.call(d,b,void 0);else for(var x=so(d),D=rm(d),W=D.length,te=0;te<W;te++)b.call(void 0,D[te],x&&x[te],d)}var aa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sm(d,b){if(d){d=d.split("&");for(var x=0;x<d.length;x++){var D=d[x].indexOf("="),W=null;if(0<=D){var te=d[x].substring(0,D);W=d[x].substring(D+1)}else te=d[x];b(te,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Lt(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Lt){this.h=d.h,oa(this,d.j),this.o=d.o,this.g=d.g,ni(this,d.s),this.l=d.l;var b=d.i,x=new ms;x.i=b.i,b.g&&(x.g=new Map(b.g),x.h=b.h),fs(this,x),this.m=d.m}else d&&(b=String(d).match(aa))?(this.h=!1,oa(this,b[1]||"",!0),this.o=sr(b[2]||""),this.g=sr(b[3]||"",!0),ni(this,b[4]),this.l=sr(b[5]||"",!0),fs(this,b[6]||"",!0),this.m=sr(b[7]||"")):(this.h=!1,this.i=new ms(null,this.h))}Lt.prototype.toString=function(){var d=[],b=this.j;b&&d.push(ca(b,Gl,!0),":");var x=this.g;return(x||b=="file")&&(d.push("//"),(b=this.o)&&d.push(ca(b,Gl,!0),"@"),d.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&d.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(ca(x,x.charAt(0)=="/"?im:$l,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",ca(x,io)),d.join("")};function Gn(d){return new Lt(d)}function oa(d,b,x){d.j=x?sr(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function ni(d,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);d.s=b}else d.s=null}function fs(d,b,x){b instanceof ms?(d.i=b,Ju(d.i,d.h)):(x||(b=ca(b,am)),d.i=new ms(b,d.h))}function ct(d,b,x){d.i.set(b,x)}function la(d){return ct(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function sr(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ca(d,b,x){return typeof d=="string"?(d=encodeURI(d).replace(b,Zu),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Zu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Gl=/[#\/\?@]/g,$l=/[#\?:]/g,im=/[#\?]/g,am=/[#\?@]/g,io=/#/g;function ms(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function ir(d){d.g||(d.g=new Map,d.h=0,d.i&&sm(d.i,function(b,x){d.add(decodeURIComponent(b.replace(/\+/g," ")),x)}))}n=ms.prototype,n.add=function(d,b){ir(this),this.i=null,d=zr(this,d);var x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(b),this.h+=1,this};function ps(d,b){ir(d),b=zr(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function gs(d,b){return ir(d),b=zr(d,b),d.g.has(b)}n.forEach=function(d,b){ir(this),this.g.forEach(function(x,D){x.forEach(function(W){d.call(b,W,D,this)},this)},this)},n.na=function(){ir(this);const d=Array.from(this.g.values()),b=Array.from(this.g.keys()),x=[];for(let D=0;D<b.length;D++){const W=d[D];for(let te=0;te<W.length;te++)x.push(b[D])}return x},n.V=function(d){ir(this);let b=[];if(typeof d=="string")gs(this,d)&&(b=b.concat(this.g.get(zr(this,d))));else{d=Array.from(this.g.values());for(let x=0;x<d.length;x++)b=b.concat(d[x])}return b},n.set=function(d,b){return ir(this),this.i=null,d=zr(this,d),gs(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},n.get=function(d,b){return d?(d=this.V(d),0<d.length?String(d[0]):b):b};function Kl(d,b,x){ps(d,b),0<x.length&&(d.i=null,d.g.set(zr(d,b),C(x)),d.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(var x=0;x<b.length;x++){var D=b[x];const te=encodeURIComponent(String(D)),me=this.V(D);for(D=0;D<me.length;D++){var W=te;me[D]!==""&&(W+="="+encodeURIComponent(String(me[D]))),d.push(W)}}return this.i=d.join("&")};function zr(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function Ju(d,b){b&&!d.j&&(ir(d),d.i=null,d.g.forEach(function(x,D){var W=D.toLowerCase();D!=W&&(ps(this,D),Kl(this,W,x))},d)),d.j=b}function ua(d,b){const x=new rr;if(h.Image){const D=new Image;D.onload=S(ar,x,"TestLoadImage: loaded",!0,b,D),D.onerror=S(ar,x,"TestLoadImage: error",!1,b,D),D.onabort=S(ar,x,"TestLoadImage: abort",!1,b,D),D.ontimeout=S(ar,x,"TestLoadImage: timeout",!1,b,D),h.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=d}else b(!1)}function Er(d,b){const x=new rr,D=new AbortController,W=setTimeout(()=>{D.abort(),ar(x,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:D.signal}).then(te=>{clearTimeout(W),te.ok?ar(x,"TestPingServer: ok",!0,b):ar(x,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(W),ar(x,"TestPingServer: error",!1,b)})}function ar(d,b,x,D,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),D(x)}catch{}}function da(){this.g=new na}function Br(d,b,x){const D=x||"";try{Hl(d,function(W,te){let me=W;p(W)&&(me=wr(W)),b.push(D+te+"="+encodeURIComponent(me))})}catch(W){throw b.push(D+"type="+encodeURIComponent("_badmap")),W}}function ri(d){this.l=d.Ub||null,this.j=d.eb||!1}R(ri,jl),ri.prototype.g=function(){return new ys(this.l,this.j)},ri.prototype.i=function(d){return function(){return d}}({});function ys(d,b){Nt.call(this),this.D=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(ys,Nt),n=ys.prototype,n.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=b,this.readyState=1,qr(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(b.body=d),(this.D||h).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,qr(this)),this.g&&(this.readyState=3,qr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ql(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ql(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?Fr(this):qr(this),this.readyState==3&&Ql(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Fr(this))},n.Qa=function(d){this.g&&(this.response=d,Fr(this))},n.ga=function(){this.g&&Fr(this)};function Fr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,qr(d)}n.setRequestHeader=function(d,b){this.u.append(d,b)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var x=b.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=b.next();return d.join(`\r
`)};function qr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Wl(d){let b="";return ne(d,function(x,D){b+=D,b+=":",b+=x,b+=`\r
`}),b}function nn(d,b,x){e:{for(D in x){var D=!1;break e}D=!0}D||(x=Wl(x),typeof d=="string"?x!=null&&encodeURIComponent(String(x)):ct(d,b,x))}function st(d){Nt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(st,Nt);var ao=/^https?$/i,ha=["POST","PUT"];n=st.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,b,x,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vr.g(),this.v=this.o?Ml(this.o):Ml(Vr),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(te){ed(this,te);return}if(d=x||"",x=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var W in D)x.set(W,D[W]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const te of D.keys())x.set(te,D.get(te));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(x.keys()).find(te=>te.toLowerCase()=="content-type"),W=h.FormData&&d instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ha,b,void 0))||D||W||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,me]of x)this.g.setRequestHeader(te,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fa(this),this.u=!0,this.g.send(d),this.u=!1}catch(te){ed(this,te)}};function ed(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.m=5,oo(d),Hr(d)}function oo(d){d.A||(d.A=!0,it(d,"complete"),it(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,it(this,"complete"),it(this,"abort"),Hr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hr(this,!0)),st.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?lo(this):this.bb())},n.bb=function(){lo(this)};function lo(d){if(d.h&&typeof u<"u"&&(!d.v[1]||or(d)!=4||d.Z()!=2)){if(d.u&&or(d)==4)An(d.Ea,0,d);else if(it(d,"readystatechange"),or(d)==4){d.h=!1;try{const me=d.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var x;if(!(x=b)){var D;if(D=me===0){var W=String(d.D).match(aa)[1]||null;!W&&h.self&&h.self.location&&(W=h.self.location.protocol.slice(0,-1)),D=!ao.test(W?W.toLowerCase():"")}x=D}if(x)it(d,"complete"),it(d,"success");else{d.m=6;try{var te=2<or(d)?d.g.statusText:""}catch{te=""}d.l=te+" ["+d.Z()+"]",oo(d)}}finally{Hr(d)}}}}function Hr(d,b){if(d.g){fa(d);const x=d.g,D=d.v[0]?()=>{}:null;d.g=null,d.v=null,b||it(d,"ready");try{x.onreadystatechange=D}catch{}}}function fa(d){d.I&&(h.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function or(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),Za(b)}};function td(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function om(d){const b={};d=(d.g&&2<=or(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<d.length;D++){if(B(d[D]))continue;var x=z(d[D]);const W=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const te=b[W]||[];b[W]=te,te.push(x)}I(b,function(D){return D.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ma(d,b,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||b}function co(d){this.Aa=0,this.i=[],this.j=new rr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ma("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ma("baseRetryDelayMs",5e3,d),this.cb=ma("retryDelaySeedMs",1e4,d),this.Wa=ma("forwardChannelMaxRetries",2,d),this.wa=ma("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new hs(d&&d.concurrentRequestLimit),this.Da=new da,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=co.prototype,n.la=8,n.G=1,n.connect=function(d,b,x,D){_t(0),this.W=d,this.H=b||{},x&&D!==void 0&&(this.H.OSID=x,this.H.OAID=D),this.F=this.X,this.I=ld(this,null,this.W),ho(this)};function Yl(d){if(nd(d),d.G==3){var b=d.U++,x=Gn(d.I);if(ct(x,"SID",d.K),ct(x,"RID",b),ct(x,"TYPE","terminate"),pa(d,x),b=new kn(d,d.j,b),b.L=2,b.v=la(Gn(x)),x=!1,h.navigator&&h.navigator.sendBeacon)try{x=h.navigator.sendBeacon(b.v.toString(),"")}catch{}!x&&h.Image&&(new Image().src=b.v,x=!0),x||(b.g=cd(b.j,null),b.g.ea(b.v)),b.F=Date.now(),sa(b)}od(d)}function uo(d){d.g&&(ga(d),d.g.cancel(),d.g=null)}function nd(d){uo(d),d.u&&(h.clearTimeout(d.u),d.u=null),fo(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&h.clearTimeout(d.s),d.s=null)}function ho(d){if(!to(d.h)&&!d.s){d.s=!0;var b=d.Ga;he||U(),ue||(he(),ue=!0),Re.add(b,d),d.B=0}}function lm(d,b){return no(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=b.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Vt(_(d.Ga,d,b),Jl(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const W=new kn(this,this.j,d);let te=this.o;if(this.S&&(te?(te=A(te),L(te,this.S)):te=this.S),this.m!==null||this.O||(W.H=te,te=null),this.P)e:{for(var b=0,x=0;x<this.i.length;x++){t:{var D=this.i[x];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(b+=D,4096<b){b=x;break e}if(b===4096||x===this.i.length-1){b=x+1;break e}}b=1e3}else b=1e3;b=rd(this,W,b),x=Gn(this.I),ct(x,"RID",d),ct(x,"CVER",22),this.D&&ct(x,"X-HTTP-Session-Id",this.D),pa(this,x),te&&(this.O?b="headers="+encodeURIComponent(String(Wl(te)))+"&"+b:this.m&&nn(x,this.m,te)),ro(this.h,W),this.Ua&&ct(x,"TYPE","init"),this.P?(ct(x,"$req",b),ct(x,"SID","null"),W.T=!0,xr(W,x,null)):xr(W,x,b),this.G=2}}else this.G==3&&(d?Xl(this,d):this.i.length==0||to(this.h)||Xl(this))};function Xl(d,b){var x;b?x=b.l:x=d.U++;const D=Gn(d.I);ct(D,"SID",d.K),ct(D,"RID",x),ct(D,"AID",d.T),pa(d,D),d.m&&d.o&&nn(D,d.m,d.o),x=new kn(d,d.j,x,d.B+1),d.m===null&&(x.H=d.o),b&&(d.i=b.D.concat(d.i)),b=rd(d,x,1e3),x.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),ro(d.h,x),xr(x,D,b)}function pa(d,b){d.H&&ne(d.H,function(x,D){ct(b,D,x)}),d.l&&Hl({},function(x,D){ct(b,D,x)})}function rd(d,b,x){x=Math.min(d.i.length,x);var D=d.l?_(d.l.Na,d.l,d):null;e:{var W=d.i;let te=-1;for(;;){const me=["count="+x];te==-1?0<x?(te=W[0].g,me.push("ofs="+te)):te=0:me.push("ofs="+te);let Qe=!0;for(let Qt=0;Qt<x;Qt++){let We=W[Qt].g;const rn=W[Qt].map;if(We-=te,0>We)te=Math.max(0,W[Qt].g-100),Qe=!1;else try{Br(rn,me,"req"+We+"_")}catch{D&&D(rn)}}if(Qe){D=me.join("&");break e}}}return d=d.i.splice(0,x),b.D=d,D}function sd(d){if(!d.g&&!d.u){d.Y=1;var b=d.Fa;he||U(),ue||(he(),ue=!0),Re.add(b,d),d.v=0}}function Zl(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Vt(_(d.Fa,d),Jl(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,id(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Vt(_(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),uo(this),id(this))};function ga(d){d.A!=null&&(h.clearTimeout(d.A),d.A=null)}function id(d){d.g=new kn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var b=Gn(d.qa);ct(b,"RID","rpc"),ct(b,"SID",d.K),ct(b,"AID",d.T),ct(b,"CI",d.F?"0":"1"),!d.F&&d.ja&&ct(b,"TO",d.ja),ct(b,"TYPE","xmlhttp"),pa(d,b),d.m&&d.o&&nn(b,d.m,d.o),d.L&&(d.g.I=d.L);var x=d.g;d=d.ia,x.L=1,x.v=la(Gn(b)),x.m=null,x.P=!0,ds(x,d)}n.Za=function(){this.C!=null&&(this.C=null,uo(this),Zl(this),_t(19))};function fo(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function ad(d,b){var x=null;if(d.g==b){fo(d),ga(d),d.g=null;var D=2}else if(Fl(d.h,b))x=b.D,On(d.h,b),D=1;else return;if(d.G!=0){if(b.o)if(D==1){x=b.m?b.m.length:0,b=Date.now()-b.F;var W=d.B;D=Xs(),it(D,new Kt(D,x)),ho(d)}else sd(d);else if(W=b.s,W==3||W==0&&0<b.X||!(D==1&&lm(d,b)||D==2&&Zl(d)))switch(x&&0<x.length&&(b=d.h,b.i=b.i.concat(x)),W){case 1:vs(d,5);break;case 4:vs(d,10);break;case 3:vs(d,6);break;default:vs(d,2)}}}function Jl(d,b){let x=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(x*=2),x*b}function vs(d,b){if(d.j.info("Error code "+b),b==2){var x=_(d.fb,d),D=d.Xa;const W=!D;D=new Lt(D||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||oa(D,"https"),la(D),W?ua(D.toString(),x):Er(D.toString(),x)}else _t(2);d.G=0,d.l&&d.l.sa(b),od(d),nd(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function od(d){if(d.G=0,d.ka=[],d.l){const b=ql(d.h);(b.length!=0||d.i.length!=0)&&(k(d.ka,b),k(d.ka,d.i),d.h.i.length=0,C(d.i),d.i.length=0),d.l.ra()}}function ld(d,b,x){var D=x instanceof Lt?Gn(x):new Lt(x);if(D.g!="")b&&(D.g=b+"."+D.g),ni(D,D.s);else{var W=h.location;D=W.protocol,b=b?b+"."+W.hostname:W.hostname,W=+W.port;var te=new Lt(null);D&&oa(te,D),b&&(te.g=b),W&&ni(te,W),x&&(te.l=x),D=te}return x=d.D,b=d.ya,x&&b&&ct(D,x,b),ct(D,"VER",d.la),pa(d,D),D}function cd(d,b,x){if(b&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Ca&&!d.pa?new st(new ri({eb:x})):new st(d.pa),b.Ha(d.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ud(){}n=ud.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function mo(){}mo.prototype.g=function(d,b){return new Pn(d,b)};function Pn(d,b){Nt.call(this),this.g=new co(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(d?d["X-WebChannel-Client-Profile"]=b.va:d={"X-WebChannel-Client-Profile":b.va}),this.g.S=d,(d=b&&b.Sb)&&!B(d)&&(this.g.m=d),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!B(b)&&(this.g.D=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new Gr(this)}R(Pn,Nt),Pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){Yl(this.g)},Pn.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.u&&(x={},x.__data__=wr(d),d=x);b.i.push(new Xu(b.Ya++,d)),b.G==3&&ho(b)},Pn.prototype.N=function(){this.g.l=null,delete this.j,Yl(this.g),delete this.g,Pn.aa.N.call(this)};function dd(d){cs.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){e:{for(const x in b){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}R(dd,cs);function hd(){Ll.call(this),this.status=1}R(hd,Ll);function Gr(d){this.g=d}R(Gr,ud),Gr.prototype.ua=function(){it(this.g,"a")},Gr.prototype.ta=function(d){it(this.g,new dd(d))},Gr.prototype.sa=function(d){it(this.g,new hd)},Gr.prototype.ra=function(){it(this.g,"b")},mo.prototype.createWebChannel=mo.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,oT=function(){return new mo},aT=function(){return Xs()},iT=Mr,Jg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ei.NO_ERROR=0,ei.TIMEOUT=8,ei.HTTP_ERROR=6,Lh=ei,us.COMPLETE="complete",sT=us,Vl.EventType=ls,ls.OPEN="a",ls.CLOSE="b",ls.ERROR="c",ls.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,Kc=Vl,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,rT=st}).apply(typeof ph<"u"?ph:typeof self<"u"?self:typeof window<"u"?window:{});const Z1="@firebase/firestore",J1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let In=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=new jy("@firebase/firestore");function Qo(){return Fa.logLevel}function ge(n,...e){if(Fa.logLevel<=$e.DEBUG){const t=e.map(Qy);Fa.debug(`Firestore (${El}): ${n}`,...t)}}function qs(n,...e){if(Fa.logLevel<=$e.ERROR){const t=e.map(Qy);Fa.error(`Firestore (${El}): ${n}`,...t)}}function Hs(n,...e){if(Fa.logLevel<=$e.WARN){const t=e.map(Qy);Fa.warn(`Firestore (${El}): ${n}`,...t)}}function Qy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,lT(n,s,t)}function lT(n,e,t){let s=`FIRESTORE (${El}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw qs(s),new Error(s)}function Ze(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||lT(e,a,s)}function je(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Qs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(In.UNAUTHENTICATED))}shutdown(){}}class qk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Hk{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0,42304);let s=this.i;const a=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new ns;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ns,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},h=g=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(g=>h(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?h(g):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ns)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ze(typeof s.accessToken=="string",31837,{l:s}),new cT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new In(e)}}class Gk{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=In.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $k{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Gk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(In.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ew{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0,3512);const s=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ew(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ew(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=Qk(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function Fe(n,e){return n<e?-1:n>e?1:0}function ey(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=n.codePointAt(t),a=e.codePointAt(t);if(s!==a){if(s<128&&a<128)return Fe(s,a);{const l=dT(),u=Wk(l.encode(tw(n,t)),l.encode(tw(e,t)));return u!==0?u:Fe(s,a)}}t+=s>65535?2:1}return Fe(n.length,e.length)}function tw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Wk(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Fe(n[t],e[t]);return Fe(n.length,e.length)}function ol(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="__name__";class Zr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ie(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Zr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Zr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Fe(e.length,t.length)}static compareSegments(e,t){const s=Zr.isNumericId(e),a=Zr.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Zr.extractNumericId(e).compare(Zr.extractNumericId(t)):ey(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vi.fromString(e.substring(4,e.length-2))}}class ft extends Zr{construct(e,t,s){return new ft(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new ft(t)}static emptyPath(){return new ft([])}}const Yk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends Zr{construct(e,t,s){return new hn(e,t,s)}static isValidIdentifier(e){return Yk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nw}static keyField(){return new hn([nw])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new pe(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new pe(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(s+=h,a++):(l(),a++)}if(l(),u)throw new pe(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(t)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(ft.fromString(e))}static fromName(e){return new Ae(ft.fromString(e).popFirst(5))}static empty(){return new Ae(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(n,e,t){if(!t)throw new pe(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fT(n,e,t,s){if(e===!0&&s===!0)throw new pe(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rw(n){if(!Ae.isDocumentKey(n))throw new pe(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sw(n){if(Ae.isDocumentKey(n))throw new pe(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Tf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function En(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Tf(n);throw new pe(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(n,e){const t={typeString:n};return e&&(t.value=e),t}function ku(n,e){if(!mT(n))throw new pe(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(a&&typeof u!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new pe(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=-62135596800,aw=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*aw);return new yt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<iw)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aw}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ku(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:Gt("string",yt._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new yt(0,0))}static max(){return new Oe(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=-1;function Xk(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Oe.fromTimestamp(s===1e9?new yt(t+1,0):new yt(t,s));return new Bi(a,Ae.empty(),e)}function Zk(n){return new Bi(n.readTime,n.key,du)}class Bi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Bi(Oe.min(),Ae.empty(),du)}static max(){return new Bi(Oe.max(),Ae.empty(),du)}}function Jk(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==eO)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,s)=>{t(e)})}static reject(e){return new ce((t,s)=>{s(e)})}static waitFor(e){return new ce((t,s)=>{let a=0,l=0,u=!1;e.forEach(h=>{++a,h.next(()=>{++l,u&&l===a&&t()},g=>s(g))}),u=!0,l===a&&t()})}static or(e){let t=ce.resolve(!1);for(const s of e)t=t.next(a=>a?ce.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new ce((s,a)=>{const l=e.length,u=new Array(l);let h=0;for(let g=0;g<l;g++){const p=g;t(e[p]).next(v=>{u[p]=v,++h,h===l&&s(u)},v=>a(v))}})}static doWhile(e,t){return new ce((s,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):s()};l()})}}function nO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Sl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Sf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=-1;function Ou(n){return n==null}function ef(n){return n===0&&1/n==-1/0}function rO(n){return typeof n=="number"&&Number.isInteger(n)&&!ef(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="";function sO(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ow(e)),e=iO(n.get(t),e);return ow(e)}function iO(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case pT:t+="";break;default:t+=l}}return t}function ow(n){return n+pT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||wn.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gh(this.root,e,this.comparator,!0)}}class gh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??wn.RED,this.left=a??wn.EMPTY,this.right=l??wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new wn(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return wn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new wn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cw(this.data.getIterator())}getIteratorFrom(e){return new cw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new en(this.comparator);return t.data=e,t}}class cw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new er([])}unionWith(e){let t=new en(hn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new er(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ol(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new yT("Invalid base64 string: "+l):l}}(e);return new mn(t)}static fromUint8Array(e){const t=function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l}(e);return new mn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const aO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fi(n){if(Ze(!!n,39018),typeof n=="string"){let e=0;const t=aO.exec(n);if(Ze(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:jt(n.seconds),nanos:jt(n.nanos)}}function jt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qi(n){return typeof n=="string"?mn.fromBase64String(n):mn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="server_timestamp",bT="__type__",_T="__previous_value__",wT="__local_write_time__";function Yy(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[bT])===null||t===void 0?void 0:t.stringValue)===vT}function Af(n){const e=n.mapValue.fields[_T];return Yy(e)?Af(e):e}function hu(n){const e=Fi(n.mapValue.fields[wT].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,t,s,a,l,u,h,g,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=v}}const tf="(default)";class ll{constructor(e,t){this.projectId=e,this.database=t||tf}static empty(){return new ll("","")}get isDefaultDatabase(){return this.database===tf}isEqual(e){return e instanceof ll&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="__type__",lO="__max__",yh={mapValue:{}},ET="__vector__",nf="value";function Hi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yy(n)?4:uO(n)?9007199254740991:cO(n)?10:11:Ie(28295,{value:n})}function ss(n,e){if(n===e)return!0;const t=Hi(n);if(t!==Hi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hu(n).isEqual(hu(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Fi(a.timestampValue),h=Fi(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return qi(a.bytesValue).isEqual(qi(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return jt(a.geoPointValue.latitude)===jt(l.geoPointValue.latitude)&&jt(a.geoPointValue.longitude)===jt(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return jt(a.integerValue)===jt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=jt(a.doubleValue),h=jt(l.doubleValue);return u===h?ef(u)===ef(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return ol(n.arrayValue.values||[],e.arrayValue.values||[],ss);case 10:case 11:return function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(lw(u)!==lw(h))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(h[g]===void 0||!ss(u[g],h[g])))return!1;return!0}(n,e);default:return Ie(52216,{left:n})}}function fu(n,e){return(n.values||[]).find(t=>ss(t,e))!==void 0}function cl(n,e){if(n===e)return 0;const t=Hi(n),s=Hi(e);if(t!==s)return Fe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return function(l,u){const h=jt(l.integerValue||l.doubleValue),g=jt(u.integerValue||u.doubleValue);return h<g?-1:h>g?1:h===g?0:isNaN(h)?isNaN(g)?0:-1:1}(n,e);case 3:return uw(n.timestampValue,e.timestampValue);case 4:return uw(hu(n),hu(e));case 5:return ey(n.stringValue,e.stringValue);case 6:return function(l,u){const h=qi(l),g=qi(u);return h.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(l,u){const h=l.split("/"),g=u.split("/");for(let p=0;p<h.length&&p<g.length;p++){const v=Fe(h[p],g[p]);if(v!==0)return v}return Fe(h.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,u){const h=Fe(jt(l.latitude),jt(u.latitude));return h!==0?h:Fe(jt(l.longitude),jt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return dw(n.arrayValue,e.arrayValue);case 10:return function(l,u){var h,g,p,v;const w=l.fields||{},_=u.fields||{},S=(h=w[nf])===null||h===void 0?void 0:h.arrayValue,R=(g=_[nf])===null||g===void 0?void 0:g.arrayValue,C=Fe(((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0,((v=R==null?void 0:R.values)===null||v===void 0?void 0:v.length)||0);return C!==0?C:dw(S,R)}(n.mapValue,e.mapValue);case 11:return function(l,u){if(l===yh.mapValue&&u===yh.mapValue)return 0;if(l===yh.mapValue)return 1;if(u===yh.mapValue)return-1;const h=l.fields||{},g=Object.keys(h),p=u.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let w=0;w<g.length&&w<v.length;++w){const _=ey(g[w],v[w]);if(_!==0)return _;const S=cl(h[g[w]],p[v[w]]);if(S!==0)return S}return Fe(g.length,v.length)}(n.mapValue,e.mapValue);default:throw Ie(23264,{le:t})}}function uw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=Fi(n),s=Fi(e),a=Fe(t.seconds,s.seconds);return a!==0?a:Fe(t.nanos,s.nanos)}function dw(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=cl(t[a],s[a]);if(l)return l}return Fe(t.length,s.length)}function ul(n){return ty(n)}function ty(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=Fi(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return qi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ae.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=ty(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${ty(t.fields[u])}`;return a+"}"}(n.mapValue):Ie(61005,{value:n})}function Uh(n){switch(Hi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Af(n);return e?16+Uh(e):16;case 5:return 2*n.stringValue.length;case 6:return qi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,l)=>a+Uh(l),0)}(n.arrayValue);case 10:case 11:return function(s){let a=0;return Yi(s.fields,(l,u)=>{a+=l.length+Uh(u)}),a}(n.mapValue);default:throw Ie(13486,{value:n})}}function hw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ny(n){return!!n&&"integerValue"in n}function Xy(n){return!!n&&"arrayValue"in n}function fw(n){return!!n&&"nullValue"in n}function mw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zh(n){return!!n&&"mapValue"in n}function cO(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[xT])===null||t===void 0?void 0:t.stringValue)===ET}function eu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Yi(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=eu(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=eu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function uO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===lO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!zh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(t)}setAll(e){let t=hn.emptyPath(),s={},a=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,s,a),s={},a=[],t=h.popLast()}u?s[h.lastSegment()]=eu(u):a.push(h.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());zh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ss(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];zh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Yi(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new Vn(eu(this.value))}}function TT(n){const e=[];return Yi(n.fields,(t,s)=>{const a=new hn([t]);if(zh(s)){const l=TT(s.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)}),new er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,s,a,l,u,h){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new cn(e,0,Oe.min(),Oe.min(),Oe.min(),Vn.empty(),0)}static newFoundDocument(e,t,s,a){return new cn(e,1,t,Oe.min(),s,a,0)}static newNoDocument(e,t){return new cn(e,2,t,Oe.min(),Oe.min(),Vn.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,Oe.min(),Oe.min(),Vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t){this.position=e,this.inclusive=t}}function pw(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?s=Ae.comparator(Ae.fromName(u.referenceValue),t.key):s=cl(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function gw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ss(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,t="asc"){this.field=e,this.dir=t}}function dO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{}class qt extends ST{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new fO(e,t,s):t==="array-contains"?new gO(e,s):t==="in"?new yO(e,s):t==="not-in"?new vO(e,s):t==="array-contains-any"?new bO(e,s):new qt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new mO(e,s):new pO(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(cl(t,this.value)):t!==null&&Hi(this.value)===Hi(t)&&this.matchesComparison(cl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dr extends ST{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Dr(e,t)}matches(e){return AT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function AT(n){return n.op==="and"}function RT(n){return hO(n)&&AT(n)}function hO(n){for(const e of n.filters)if(e instanceof Dr)return!1;return!0}function ry(n){if(n instanceof qt)return n.field.canonicalString()+n.op.toString()+ul(n.value);if(RT(n))return n.filters.map(e=>ry(e)).join(",");{const e=n.filters.map(t=>ry(t)).join(",");return`${n.op}(${e})`}}function NT(n,e){return n instanceof qt?function(s,a){return a instanceof qt&&s.op===a.op&&s.field.isEqual(a.field)&&ss(s.value,a.value)}(n,e):n instanceof Dr?function(s,a){return a instanceof Dr&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((l,u,h)=>l&&NT(u,a.filters[h]),!0):!1}(n,e):void Ie(19439)}function CT(n){return n instanceof qt?function(t){return`${t.field.canonicalString()} ${t.op} ${ul(t.value)}`}(n):n instanceof Dr?function(t){return t.op.toString()+" {"+t.getFilters().map(CT).join(" ,")+"}"}(n):"Filter"}class fO extends qt{constructor(e,t,s){super(e,t,s),this.key=Ae.fromName(s.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class mO extends qt{constructor(e,t){super(e,"in",t),this.keys=IT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class pO extends qt{constructor(e,t){super(e,"not-in",t),this.keys=IT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function IT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Ae.fromName(s.referenceValue))}class gO extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xy(t)&&fu(t.arrayValue,this.value)}}class yO extends qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fu(this.value.arrayValue,t)}}class vO extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fu(this.value.arrayValue,t)}}class bO extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>fu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,t=null,s=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Pe=null}}function yw(n,e=null,t=[],s=[],a=null,l=null,u=null){return new _O(n,e,t,s,a,l,u)}function Zy(n){const e=je(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>ry(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),Ou(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>ul(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>ul(s)).join(",")),e.Pe=t}return e.Pe}function Jy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gw(n.startAt,e.startAt)&&gw(n.endAt,e.endAt)}function sy(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,t=null,s=[],a=[],l=null,u="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function wO(n,e,t,s,a,l,u,h){return new Al(n,e,t,s,a,l,u,h)}function Rf(n){return new Al(n)}function vw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function DT(n){return n.collectionGroup!==null}function tu(n){const e=je(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new en(hn.comparator);return u.filters.forEach(g=>{g.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new mu(l,s))}),t.has(hn.keyField().canonicalString())||e.Te.push(new mu(hn.keyField(),s))}return e.Te}function rs(n){const e=je(n);return e.Ie||(e.Ie=xO(e,tu(n))),e.Ie}function xO(n,e){if(n.limitType==="F")return yw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new mu(a.field,l)});const t=n.endAt?new rf(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new rf(n.startAt.position,n.startAt.inclusive):null;return yw(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function iy(n,e){const t=n.filters.concat([e]);return new Al(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function sf(n,e,t){return new Al(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nf(n,e){return Jy(rs(n),rs(e))&&n.limitType===e.limitType}function kT(n){return`${Zy(rs(n))}|lt:${n.limitType}`}function Wo(n){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(a=>CT(a)).join(", ")}]`),Ou(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>ul(a)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>ul(a)).join(",")),`Target(${s})`}(rs(n))}; limitType=${n.limitType})`}function Cf(n,e){return e.isFoundDocument()&&function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ae.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(n,e)&&function(s,a){for(const l of tu(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(s,a){return!(s.startAt&&!function(u,h,g){const p=pw(u,h,g);return u.inclusive?p<=0:p<0}(s.startAt,tu(s),a)||s.endAt&&!function(u,h,g){const p=pw(u,h,g);return u.inclusive?p>=0:p>0}(s.endAt,tu(s),a))}(n,e)}function EO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function OT(n){return(e,t)=>{let s=!1;for(const a of tu(n)){const l=TO(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function TO(n,e,t){const s=n.field.isKeyField()?Ae.comparator(e.key,t.key):function(l,u,h){const g=u.data.field(l),p=h.data.field(l);return g!==null&&p!==null?cl(g,p):Ie(42886)}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Yi(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return gT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=new At(Ae.comparator);function Gs(){return SO}const PT=new At(Ae.comparator);function Qc(...n){let e=PT;for(const t of n)e=e.insert(t.key,t);return e}function jT(n){let e=PT;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ja(){return nu()}function MT(){return nu()}function nu(){return new Ga(n=>n.toString(),(n,e)=>n.isEqual(e))}const AO=new At(Ae.comparator),RO=new en(Ae.comparator);function Ke(...n){let e=RO;for(const t of n)e=e.add(t);return e}const NO=new en(Fe);function CO(){return NO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ef(e)?"-0":e}}function VT(n){return{integerValue:""+n}}function LT(n,e){return rO(e)?VT(e):ev(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this._=void 0}}function IO(n,e,t){return n instanceof pu?function(a,l){const u={fields:{[bT]:{stringValue:vT},[wT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Yy(l)&&(l=Af(l)),l&&(u.fields[_T]=l),{mapValue:u}}(t,e):n instanceof gu?zT(n,e):n instanceof yu?BT(n,e):function(a,l){const u=UT(a,l),h=bw(u)+bw(a.Ee);return ny(u)&&ny(a.Ee)?VT(h):ev(a.serializer,h)}(n,e)}function DO(n,e,t){return n instanceof gu?zT(n,e):n instanceof yu?BT(n,e):t}function UT(n,e){return n instanceof vu?function(s){return ny(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class pu extends If{}class gu extends If{constructor(e){super(),this.elements=e}}function zT(n,e){const t=FT(e);for(const s of n.elements)t.some(a=>ss(a,s))||t.push(s);return{arrayValue:{values:t}}}class yu extends If{constructor(e){super(),this.elements=e}}function BT(n,e){let t=FT(e);for(const s of n.elements)t=t.filter(a=>!ss(a,s));return{arrayValue:{values:t}}}class vu extends If{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function bw(n){return jt(n.integerValue||n.doubleValue)}function FT(n){return Xy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,t){this.field=e,this.transform=t}}function kO(n,e){return n.field.isEqual(e.field)&&function(s,a){return s instanceof gu&&a instanceof gu||s instanceof yu&&a instanceof yu?ol(s.elements,a.elements,ss):s instanceof vu&&a instanceof vu?ss(s.Ee,a.Ee):s instanceof pu&&a instanceof pu}(n.transform,e.transform)}class OO{constructor(e,t){this.version=e,this.transformResults=t}}class Ht{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ht}static exists(e){return new Ht(void 0,e)}static updateTime(e){return new Ht(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Df{}function HT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ju(n.key,Ht.none()):new Pu(n.key,n.data,Ht.none());{const t=n.data,s=Vn.empty();let a=new en(hn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new Xi(n.key,s,new er(a.toArray()),Ht.none())}}function PO(n,e,t){n instanceof Pu?function(a,l,u){const h=a.value.clone(),g=ww(a.fieldTransforms,l,u.transformResults);h.setAll(g),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Xi?function(a,l,u){if(!Bh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=ww(a.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(GT(a)),g.setAll(h),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function ru(n,e,t,s){return n instanceof Pu?function(l,u,h,g){if(!Bh(l.precondition,u))return h;const p=l.value.clone(),v=xw(l.fieldTransforms,g,u);return p.setAll(v),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(n,e,t,s):n instanceof Xi?function(l,u,h,g){if(!Bh(l.precondition,u))return h;const p=xw(l.fieldTransforms,g,u),v=u.data;return v.setAll(GT(l)),v.setAll(p),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(w=>w.field))}(n,e,t,s):function(l,u,h){return Bh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function jO(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=UT(s.transform,a||null);l!=null&&(t===null&&(t=Vn.empty()),t.set(s.field,l))}return t||null}function _w(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&ol(s,a,(l,u)=>kO(l,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Pu extends Df{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Xi extends Df{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function GT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function ww(n,e,t){const s=new Map;Ze(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,h=e.data.field(l.field);s.set(l.field,DO(u,h,t[a]))}return s}function xw(n,e,t){const s=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);s.set(a.field,IO(l,u,e))}return s}class ju extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $T extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&PO(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ru(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ru(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=MT();return this.mutations.forEach(a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(a.key)?null:h;const g=HT(u,h);g!==null&&s.set(a.key,g),u.isValidDocument()||u.convertToNoDocument(Oe.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ke())}isEqual(e){return this.batchId===e.batchId&&ol(this.mutations,e.mutations,(t,s)=>_w(t,s))&&ol(this.baseMutations,e.baseMutations,(t,s)=>_w(t,s))}}class tv{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){Ze(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let a=function(){return AO}();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new tv(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VO=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Xe;function KT(n){switch(n){case ie.OK:return Ie(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function QT(n){if(n===void 0)return qs("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Bt.OK:return ie.OK;case Bt.CANCELLED:return ie.CANCELLED;case Bt.UNKNOWN:return ie.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return ie.INTERNAL;case Bt.UNAVAILABLE:return ie.UNAVAILABLE;case Bt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Bt.NOT_FOUND:return ie.NOT_FOUND;case Bt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Bt.ABORTED:return ie.ABORTED;case Bt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Bt.DATA_LOSS:return ie.DATA_LOSS;default:return Ie(39323,{code:n})}}(Xe=Bt||(Bt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=new Vi([4294967295,4294967295],0);function Ew(n){const e=dT().encode(n),t=new nT;return t.update(e),new Uint8Array(t.digest())}function Tw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Vi([t,s],0),new Vi([a,l],0)]}class nv{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Wc(`Invalid padding: ${t}`);if(s<0)throw new Wc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Wc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Wc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Vi.fromNumber(this.fe)}pe(e,t,s){let a=e.add(t.multiply(Vi.fromNumber(s)));return a.compare(UO)===1&&(a=new Vi([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Ew(e),[s,a]=Tw(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(s,a,l);if(!this.ye(u))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new nv(l,a,t);return s.forEach(h=>u.insert(h)),u}insert(e){if(this.fe===0)return;const t=Ew(e),[s,a]=Tw(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(s,a,l);this.we(u)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new kf(Oe.min(),a,new At(Fe),Gs(),Ke())}}class Mu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Mu(s,t,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=a}}class WT{constructor(e,t){this.targetId=e,this.De=t}}class YT{constructor(e,t,s=mn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Sw{constructor(){this.ve=0,this.Ce=Aw(),this.Fe=mn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ke(),t=Ke(),s=Ke();return this.Ce.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ie(38017,{changeType:l})}}),new Mu(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=Aw()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class zO{constructor(e){this.We=e,this.Ge=new Map,this.ze=Gs(),this.je=vh(),this.Je=vh(),this.He=new At(Fe)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:Ie(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((s,a)=>{this.nt(a)&&t(a)})}it(e){const t=e.targetId,s=e.De.count,a=this.st(t);if(a){const l=a.target;if(sy(l))if(s===0){const u=new Ae(l.path);this.Xe(t,u,cn.newNoDocument(u,Oe.min()))}else Ze(s===1,20013,{expectedCount:s});else{const u=this.ot(t);if(u!==s){const h=this._t(e),g=h?this.ut(h,e,u):1;if(g!==0){this.rt(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,p)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let u,h;try{u=qi(s).toUint8Array()}catch(g){if(g instanceof yT)return Hs("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{h=new nv(u,a,l)}catch(g){return Hs(g instanceof Wc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return h.fe===0?null:h}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let a=0;return s.forEach(l=>{const u=this.We.lt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.Xe(t,l,null),a++)}),a}Pt(e){const t=new Map;this.Ge.forEach((l,u)=>{const h=this.st(u);if(h){if(l.current&&sy(h.target)){const g=new Ae(h.target.path);this.Tt(g).has(u)||this.It(u,g)||this.Xe(u,g,cn.newNoDocument(g,e))}l.Ne&&(t.set(u,l.Le()),l.ke())}});let s=Ke();this.Je.forEach((l,u)=>{let h=!0;u.forEachWhile(g=>{const p=this.st(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(s=s.add(l))}),this.ze.forEach((l,u)=>u.setReadTime(e));const a=new kf(e,t,this.He,this.ze,s);return this.ze=Gs(),this.je=vh(),this.Je=vh(),this.He=new At(Fe),a}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Sw,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new en(Fe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new en(Fe),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Sw),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function vh(){return new At(Ae.comparator)}function Aw(){return new At(Ae.comparator)}const BO={asc:"ASCENDING",desc:"DESCENDING"},FO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qO={and:"AND",or:"OR"};class HO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ay(n,e){return n.useProto3Json||Ou(e)?e:{value:e}}function af(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function GO(n,e){return af(n,e.toTimestamp())}function tr(n){return Ze(!!n,49232),Oe.fromTimestamp(function(t){const s=Fi(t);return new yt(s.seconds,s.nanos)}(n))}function rv(n,e){return oy(n,e).canonicalString()}function oy(n,e){const t=function(a){return new ft(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function ZT(n){const e=ft.fromString(n);return Ze(sS(e),10190,{key:e.toString()}),e}function of(n,e){return rv(n.databaseId,e.path)}function su(n,e){const t=ZT(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae(eS(t))}function JT(n,e){return rv(n.databaseId,e)}function $O(n){const e=ZT(n);return e.length===4?ft.emptyPath():eS(e)}function ly(n){return new ft(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eS(n){return Ze(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Rw(n,e,t){return{name:of(n,e),fields:t.value.mapValue.fields}}function KO(n,e){return"found"in e?function(s,a){Ze(!!a.found,43571),a.found.name,a.found.updateTime;const l=su(s,a.found.name),u=tr(a.found.updateTime),h=a.found.createTime?tr(a.found.createTime):Oe.min(),g=new Vn({mapValue:{fields:a.found.fields}});return cn.newFoundDocument(l,u,h,g)}(n,e):"missing"in e?function(s,a){Ze(!!a.missing,3894),Ze(!!a.readTime,22933);const l=su(s,a.missing),u=tr(a.readTime);return cn.newNoDocument(l,u)}(n,e):Ie(7234,{result:e})}function QO(n,e){let t;if("targetChange"in e){e.targetChange;const s=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ie(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,v){return p.useProto3Json?(Ze(v===void 0||typeof v=="string",58123),mn.fromBase64String(v||"")):(Ze(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),mn.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(p){const v=p.code===void 0?ie.UNKNOWN:QT(p.code);return new pe(v,p.message||"")}(u);t=new YT(s,a,l,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=su(n,s.document.name),l=tr(s.document.updateTime),u=s.document.createTime?tr(s.document.createTime):Oe.min(),h=new Vn({mapValue:{fields:s.document.fields}}),g=cn.newFoundDocument(a,l,u,h),p=s.targetIds||[],v=s.removedTargetIds||[];t=new Fh(p,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=su(n,s.document),l=s.readTime?tr(s.readTime):Oe.min(),u=cn.newNoDocument(a,l),h=s.removedTargetIds||[];t=new Fh([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=su(n,s.document),l=s.removedTargetIds||[];t=new Fh([],l,a,null)}else{if(!("filter"in e))return Ie(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new LO(a,l),h=s.targetId;t=new WT(h,u)}}return t}function tS(n,e){let t;if(e instanceof Pu)t={update:Rw(n,e.key,e.value)};else if(e instanceof ju)t={delete:of(n,e.key)};else if(e instanceof Xi)t={update:Rw(n,e.key,e.data),updateMask:rP(e.fieldMask)};else{if(!(e instanceof $T))return Ie(16599,{Rt:e.type});t={verify:of(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,u){const h=u.transform;if(h instanceof pu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof gu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof yu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof vu)return{fieldPath:u.field.canonicalString(),increment:h.Ee};throw Ie(20930,{transform:u.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:GO(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ie(27497)}(n,e.precondition)),t}function WO(n,e){return n&&n.length>0?(Ze(e!==void 0,14353),n.map(t=>function(a,l){let u=a.updateTime?tr(a.updateTime):tr(l);return u.isEqual(Oe.min())&&(u=tr(l)),new OO(u,a.transformResults||[])}(t,e))):[]}function YO(n,e){return{documents:[JT(n,e.path)]}}function XO(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=JT(n,a);const l=function(p){if(p.length!==0)return rS(Dr.create(p,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(p){if(p.length!==0)return p.map(v=>function(_){return{field:Yo(_.field),direction:eP(_.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=ay(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{Vt:t,parent:a}}function ZO(n){let e=$O(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){Ze(s===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(w){const _=nS(w);return _ instanceof Dr&&RT(_)?_.getFilters():[_]}(t.where));let u=[];t.orderBy&&(u=function(w){return w.map(_=>function(R){return new mu(Xo(R.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(_))}(t.orderBy));let h=null;t.limit&&(h=function(w){let _;return _=typeof w=="object"?w.value:w,Ou(_)?null:_}(t.limit));let g=null;t.startAt&&(g=function(w){const _=!!w.before,S=w.values||[];return new rf(S,_)}(t.startAt));let p=null;return t.endAt&&(p=function(w){const _=!w.before,S=w.values||[];return new rf(S,_)}(t.endAt)),wO(e,a,u,l,h,"F",g,p)}function JO(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Xo(t.unaryFilter.field);return qt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Xo(t.unaryFilter.field);return qt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Xo(t.unaryFilter.field);return qt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Xo(t.unaryFilter.field);return qt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}}(n):n.fieldFilter!==void 0?function(t){return qt.create(Xo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Dr.create(t.compositeFilter.filters.map(s=>nS(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}}(t.compositeFilter.op))}(n):Ie(30097,{filter:n})}function eP(n){return BO[n]}function tP(n){return FO[n]}function nP(n){return qO[n]}function Yo(n){return{fieldPath:n.canonicalString()}}function Xo(n){return hn.fromServerFormat(n.fieldPath)}function rS(n){return n instanceof qt?function(t){if(t.op==="=="){if(mw(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NAN"}};if(fw(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mw(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NOT_NAN"}};if(fw(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yo(t.field),op:tP(t.op),value:t.value}}}(n):n instanceof Dr?function(t){const s=t.getFilters().map(a=>rS(a));return s.length===1?s[0]:{compositeFilter:{op:nP(t.op),filters:s}}}(n):Ie(54877,{filter:n})}function rP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t,s,a,l=Oe.min(),u=Oe.min(),h=mn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=g}withSequenceNumber(e){return new Di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.gt=e}}function iP(n){const e=ZO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this.Dn=new oP}addToCollectionParentIndex(e,t){return this.Dn.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Bi.min())}updateCollectionGroup(e,t,s){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class oP{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new en(ft.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new en(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iS=41943040;class Fn{static withCacheSize(e){return new Fn(e,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(iS,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new dl(0)}static ur(){return new dl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="LruGarbageCollector",lP=1048576;function Iw([n,e],[t,s]){const a=Fe(n,t);return a===0?Fe(e,s):a}class cP{constructor(e){this.Tr=e,this.buffer=new en(Iw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Iw(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uP{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ge(Cw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Sl(t)?ge(Cw,"Ignoring IndexedDB error during garbage collection: ",t):await Tl(t)}await this.Rr(3e5)})}}class dP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return ce.resolve(Sf.ue);const s=new cP(t);return this.Vr.forEachTarget(e,a=>s.Er(a.sequenceNumber)).next(()=>this.Vr.gr(e,a=>s.Er(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(Nw)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nw):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,a,l,u,h,g,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),a=this.params.maximumSequenceNumbersToCollect):a=w,u=Date.now(),this.nthSequenceNumber(e,a))).next(w=>(s=w,h=Date.now(),this.removeTargets(e,s,t))).next(w=>(l=w,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(w=>(p=Date.now(),Qo()<=$e.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(g-h)+`ms
	Removed ${w} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:w})))}}function hP(n,e){return new dP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this.changes=new Ga(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ce.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(s!==null&&ru(s.mutation,a,er.empty(),yt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Ke()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Ke()){const a=ja();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let u=Qc();return l.forEach((h,g)=>{u=u.insert(h,g.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const s=ja();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Ke()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,s,a){let l=Gs();const u=nu(),h=function(){return nu()}();return t.forEach((g,p)=>{const v=s.get(p.key);a.has(p.key)&&(v===void 0||v.mutation instanceof Xi)?l=l.insert(p.key,p):v!==void 0?(u.set(p.key,v.mutation.getFieldMask()),ru(v.mutation,p,v.mutation.getFieldMask(),yt.now())):u.set(p.key,er.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((p,v)=>u.set(p,v)),t.forEach((p,v)=>{var w;return h.set(p,new mP(v,(w=u.get(p))!==null&&w!==void 0?w:null))}),h))}recalculateAndSaveOverlays(e,t){const s=nu();let a=new At((u,h)=>u-h),l=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(g=>{const p=t.get(g);if(p===null)return;let v=s.get(g)||er.empty();v=h.applyToLocalView(p,v),s.set(g,v);const w=(a.get(h.batchId)||Ke()).add(g);a=a.insert(h.batchId,w)})}).next(()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),p=g.key,v=g.value,w=MT();v.forEach(_=>{if(!l.has(_)){const S=HT(t.get(_),s.get(_));S!==null&&w.set(_,S),l=l.add(_)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,w))}return ce.waitFor(u)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,a){return function(u){return Ae.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):DT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):ce.resolve(ja());let h=du,g=l;return u.next(p=>ce.forEach(p,(v,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),l.get(v)?ce.resolve():this.remoteDocumentCache.getEntry(e,v).next(_=>{g=g.insert(v,_)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,g,p,Ke())).next(v=>({batchId:h,changes:jT(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next(s=>{let a=Qc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let u=Qc();return this.indexManager.getCollectionParents(e,l).next(h=>ce.forEach(h,g=>{const p=function(w,_){return new Al(_,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,a).next(v=>{v.forEach((w,_)=>{u=u.insert(w,_)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a))).next(u=>{l.forEach((g,p)=>{const v=p.getKey();u.get(v)===null&&(u=u.insert(v,cn.newInvalidDocument(v)))});let h=Qc();return u.forEach((g,p)=>{const v=l.get(g);v!==void 0&&ru(v.mutation,p,er.empty(),yt.now()),Cf(t,p)&&(h=h.insert(g,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ce.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(a){return{id:a.id,version:a.version,createTime:tr(a.createTime)}}(t)),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(a){return{name:a.name,query:iP(a.bundledQuery),readTime:tr(a.readTime)}}(t)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(){this.overlays=new At(Ae.comparator),this.kr=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ja();return ce.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.wt(e,t,l)}),ce.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.kr.get(s);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(s)),ce.resolve()}getOverlaysForCollection(e,t,s){const a=ja(),l=t.length+1,u=new Ae(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const g=h.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>s&&a.set(g.getKey(),g)}return ce.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new At((p,v)=>p-v);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let v=l.get(p.largestBatchId);v===null&&(v=ja(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=ja(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((p,v)=>h.set(p,v)),!(h.size()>=a)););return ce.resolve(h)}wt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.kr.get(a.largestBatchId).delete(s.key);this.kr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new VO(t,s));let l=this.kr.get(t);l===void 0&&(l=Ke(),this.kr.set(t,l)),this.kr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.qr=new en(ln.Qr),this.$r=new en(ln.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new ln(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Wr(new ln(e,t))}Gr(e,t){e.forEach(s=>this.removeReference(s,t))}zr(e){const t=new Ae(new ft([])),s=new ln(t,e),a=new ln(t,e+1),l=[];return this.$r.forEachInRange([s,a],u=>{this.Wr(u),l.push(u.key)}),l}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ae(new ft([])),s=new ln(t,e),a=new ln(t,e+1);let l=Ke();return this.$r.forEachInRange([s,a],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new ln(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class ln{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ae.comparator(e.key,t.key)||Fe(e.Hr,t.Hr)}static Ur(e,t){return Fe(e.Hr,t.Hr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new en(ln.Qr)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new MO(l,t,s,a);this.mutationQueue.push(u);for(const h of a)this.Yr=this.Yr.add(new ln(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ce.resolve(u)}lookupMutationBatch(e,t){return ce.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),l=a<0?0:a;return ce.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?Wy:this.er-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new ln(t,0),a=new ln(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,a],u=>{const h=this.Zr(u.Hr);l.push(h)}),ce.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new en(Fe);return t.forEach(a=>{const l=new ln(a,0),u=new ln(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,u],h=>{s=s.add(h.Hr)})}),ce.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Ae.isDocumentKey(l)||(l=l.child(""));const u=new ln(new Ae(l),0);let h=new en(Fe);return this.Yr.forEachWhile(g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===a&&(h=h.add(g.Hr)),!0)},u),ce.resolve(this.ei(h))}ei(e){const t=[];return e.forEach(s=>{const a=this.Zr(s);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){Ze(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return ce.forEach(t.mutations,a=>{const l=new ln(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Yr=s})}rr(e){}containsKey(e,t){const s=new ln(t,0),a=this.Yr.firstAfterOrEqual(s);return ce.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.ni=e,this.docs=function(){return new At(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,u=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ce.resolve(s?s.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let s=Gs();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():cn.newInvalidDocument(a))}),ce.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=Gs();const u=t.path,h=new Ae(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(h);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||Jk(Zk(v),s)<=0||(a.has(v.key)||Cf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ce.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Ie(9500)}ri(e,t){return ce.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new wP(this)}getSize(e){return ce.resolve(this.size)}}class wP extends fP{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(s)}),ce.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.persistence=e,this.ii=new Ga(t=>Zy(t),Jy),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.si=0,this.oi=new sv,this.targetCount=0,this._i=dl.ar()}forEachTarget(e,t){return this.ii.forEach((s,a)=>t(a)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),ce.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new dl(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.hr(t),ce.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.ii.forEach((u,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.ii.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)}),ce.waitFor(l).next(()=>a)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return ce.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),ce.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(u=>{l.push(a.markPotentiallyOrphaned(e,u))}),ce.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return ce.resolve(s)}containsKey(e,t){return ce.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,t){this.ai={},this.overlays={},this.ui=new Sf(0),this.ci=!1,this.ci=!0,this.li=new vP,this.referenceDelegate=e(this),this.hi=new xP(this),this.indexManager=new aP,this.remoteDocumentCache=function(a){return new _P(a)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new sP(t),this.Ti=new gP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new bP(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){ge("MemoryPersistence","Starting transaction:",e);const a=new EP(this.ui.next());return this.referenceDelegate.Ii(),s(a).next(l=>this.referenceDelegate.di(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ei(e,t){return ce.or(Object.values(this.ai).map(s=>()=>s.containsKey(e,t)))}}class EP extends tO{constructor(e){super(),this.currentSequenceNumber=e}}class iv{constructor(e){this.persistence=e,this.Ai=new sv,this.Ri=null}static Vi(e){return new iv(e)}get mi(){if(this.Ri)return this.Ri;throw Ie(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),ce.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(a=>this.mi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.mi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.mi,s=>{const a=Ae.fromPath(s);return this.fi(e,a).next(l=>{l||t.removeEntry(a,Oe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return ce.or([()=>ce.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class lf{constructor(e,t){this.persistence=e,this.gi=new Ga(s=>sO(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=hP(this,t)}static Vi(e,t){return new lf(e,t)}Ii(){}di(e){return ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}yr(e){let t=0;return this.gr(e,s=>{t++}).next(()=>t)}gr(e,t){return ce.forEach(this.gi,(s,a)=>this.Sr(e,s,a).next(l=>l?ce.resolve():t(a)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ri(e,u=>this.Sr(e,u,t).next(h=>{h||(s++,l.removeEntry(u,Oe.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ce.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),ce.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ce.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uh(e.data.value)),t}Sr(e,t,s){return ce.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return ce.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=a}static Es(e,t){let s=Ke(),a=Ke();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new av(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return nI()?8:nO(Dn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ps(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.ys(e,t,a,s).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new TP;return this.ws(e,t,u).next(h=>{if(l.result=h,this.Rs)return this.Ss(e,t,u,h.size)})}).next(()=>l.result)}Ss(e,t,s,a){return s.documentReadCount<this.Vs?(Qo()<=$e.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Wo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ce.resolve()):(Qo()<=$e.DEBUG&&ge("QueryEngine","Query:",Wo(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.fs*a?(Qo()<=$e.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Wo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rs(t))):ce.resolve())}ps(e,t){if(vw(t))return ce.resolve(null);let s=rs(t);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=sf(t,null,"F"),s=rs(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const u=Ke(...l);return this.gs.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,s).next(g=>{const p=this.bs(t,h);return this.Ds(t,p,u,g.readTime)?this.ps(e,sf(t,null,"F")):this.vs(e,p,t,g)}))})))}ys(e,t,s,a){return vw(t)||a.isEqual(Oe.min())?ce.resolve(null):this.gs.getDocuments(e,s).next(l=>{const u=this.bs(t,l);return this.Ds(t,u,s,a)?ce.resolve(null):(Qo()<=$e.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Wo(t)),this.vs(e,u,t,Xk(a,du)).next(h=>h))})}bs(e,t){let s=new en(OT(e));return t.forEach((a,l)=>{Cf(e,l)&&(s=s.add(l))}),s}Ds(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ws(e,t,s){return Qo()<=$e.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Wo(t)),this.gs.getDocumentsMatchingQuery(e,t,Bi.min(),s)}vs(e,t,s,a){return this.gs.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="LocalStore",AP=3e8;class RP{constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new At(Fe),this.Ms=new Ga(l=>Zy(l),Jy),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pP(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function NP(n,e,t,s){return new RP(n,e,t,s)}async function oS(n,e){const t=je(n);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const u=[],h=[];let g=Ke();for(const p of a){u.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of l){h.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next(p=>({Bs:p,removedBatchIds:u,addedBatchIds:h}))})})}function CP(n,e){const t=je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return function(h,g,p,v){const w=p.batch,_=w.keys();let S=ce.resolve();return _.forEach(R=>{S=S.next(()=>v.getEntry(g,R)).next(C=>{const k=p.docVersions.get(R);Ze(k!==null,48541),C.version.compareTo(k)<0&&(w.applyToRemoteDocument(C,p),C.isValidDocument()&&(C.setReadTime(p.commitVersion),v.addEntry(C)))})}),S.next(()=>h.mutationQueue.removeMutationBatch(g,w))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(h){let g=Ke();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(g=g.add(h.batch.mutations[p].key));return g}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function lS(n){const e=je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function IP(n,e){const t=je(n),s=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const h=[];e.targetChanges.forEach((v,w)=>{const _=a.get(w);if(!_)return;h.push(t.hi.removeMatchingKeys(l,v.removedDocuments,w).next(()=>t.hi.addMatchingKeys(l,v.addedDocuments,w)));let S=_.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?S=S.withResumeToken(mn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):v.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(v.resumeToken,s)),a=a.insert(w,S),function(C,k,P){return C.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=AP?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(_,S,v)&&h.push(t.hi.updateTargetData(l,S))});let g=Gs(),p=Ke();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),h.push(DP(l,u,e.documentUpdates).next(v=>{g=v.Ls,p=v.ks})),!s.isEqual(Oe.min())){const v=t.hi.getLastRemoteSnapshotVersion(l).next(w=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,s));h.push(v)}return ce.waitFor(h).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,p)).next(()=>g)}).then(l=>(t.Fs=a,l))}function DP(n,e,t){let s=Ke(),a=Ke();return t.forEach(l=>s=s.add(l)),e.getEntries(n,s).next(l=>{let u=Gs();return t.forEach((h,g)=>{const p=l.get(h);g.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),g.isNoDocument()&&g.version.isEqual(Oe.min())?(e.removeEntry(h,g.readTime),u=u.insert(h,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),u=u.insert(h,g)):ge(ov,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",g.version)}),{Ls:u,ks:a}})}function kP(n,e){const t=je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Wy),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function OP(n,e){const t=je(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.hi.getTargetData(s,e).next(l=>l?(a=l,ce.resolve(a)):t.hi.allocateTargetId(s).next(u=>(a=new Di(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Fs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s})}async function cy(n,e,t){const s=je(n),a=s.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,u=>s.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!Sl(u))throw u;ge(ov,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(a.target)}function Dw(n,e,t){const s=je(n);let a=Oe.min(),l=Ke();return s.persistence.runTransaction("Execute query","readwrite",u=>function(g,p,v){const w=je(g),_=w.Ms.get(v);return _!==void 0?ce.resolve(w.Fs.get(_)):w.hi.getTargetData(p,v)}(s,u,rs(e)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(u,h.targetId).next(g=>{l=g})}).next(()=>s.Cs.getDocumentsMatchingQuery(u,e,t?a:Oe.min(),t?l:Ke())).next(h=>(PP(s,EO(e),h),{documents:h,qs:l})))}function PP(n,e,t){let s=n.xs.get(e)||Oe.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),n.xs.set(e,s)}class kw{constructor(){this.activeTargetIds=CO()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jP{constructor(){this.Fo=new kw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new kw,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="ConnectivityMonitor";class Pw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ge(Ow,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ge(Ow,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh=null;function uy(){return bh===null?bh=function(){return 268435456+Math.round(2147483648*Math.random())}():bh++,"0x"+bh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="RestConnection",VP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LP{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.Ko=this.databaseId.database===tf?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,l){const u=uy(),h=this.Go(e,t.toUriEncodedString());ge(mg,`Sending RPC '${e}' ${u}:`,h,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,a,l);const{host:p}=new URL(h),v=_l(p);return this.jo(e,h,g,s,v).then(w=>(ge(mg,`Received RPC '${e}' ${u}: `,w),w),w=>{throw Hs(mg,`RPC '${e}' ${u} failed with error: `,w,"url: ",h,"request:",s),w})}Jo(e,t,s,a,l,u){return this.Wo(e,t,s,a,l)}zo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+El}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}Go(e,t){const s=VP[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class zP extends LP{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,a,l){const u=uy();return new Promise((h,g)=>{const p=new rT;p.setWithCredentials(!0),p.listenOnce(sT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Lh.NO_ERROR:const w=p.getResponseJson();ge(Cn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),h(w);break;case Lh.TIMEOUT:ge(Cn,`RPC '${e}' ${u} timed out`),g(new pe(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Lh.HTTP_ERROR:const _=p.getStatus();if(ge(Cn,`RPC '${e}' ${u} failed with status:`,_,"response text:",p.getResponseText()),_>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S==null?void 0:S.error;if(R&&R.status&&R.message){const C=function(P){const B=P.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(B)>=0?B:ie.UNKNOWN}(R.status);g(new pe(C,R.message))}else g(new pe(ie.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new pe(ie.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{c_:e,streamId:u,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{ge(Cn,`RPC '${e}' ${u} completed.`)}});const v=JSON.stringify(a);ge(Cn,`RPC '${e}' ${u} sending request:`,a),p.send(t,"POST",v,s,15)})}P_(e,t,s){const a=uy(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=oT(),h=aT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");ge(Cn,`Creating RPC '${e}' stream ${a}: ${v}`,g);const w=u.createWebChannel(v,g);this.T_(w);let _=!1,S=!1;const R=new UP({Ho:k=>{S?ge(Cn,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(_||(ge(Cn,`Opening RPC '${e}' stream ${a} transport.`),w.open(),_=!0),ge(Cn,`RPC '${e}' stream ${a} sending:`,k),w.send(k))},Yo:()=>w.close()}),C=(k,P,B)=>{k.listen(P,H=>{try{B(H)}catch(M){setTimeout(()=>{throw M},0)}})};return C(w,Kc.EventType.OPEN,()=>{S||(ge(Cn,`RPC '${e}' stream ${a} transport opened.`),R.s_())}),C(w,Kc.EventType.CLOSE,()=>{S||(S=!0,ge(Cn,`RPC '${e}' stream ${a} transport closed`),R.__(),this.I_(w))}),C(w,Kc.EventType.ERROR,k=>{S||(S=!0,Hs(Cn,`RPC '${e}' stream ${a} transport errored. Name:`,k.name,"Message:",k.message),R.__(new pe(ie.UNAVAILABLE,"The operation could not be completed")))}),C(w,Kc.EventType.MESSAGE,k=>{var P;if(!S){const B=k.data[0];Ze(!!B,16349);const H=B,M=(H==null?void 0:H.error)||((P=H[0])===null||P===void 0?void 0:P.error);if(M){ge(Cn,`RPC '${e}' stream ${a} received error:`,M);const K=M.status;let ne=function(O){const L=Bt[O];if(L!==void 0)return QT(L)}(K),I=M.message;ne===void 0&&(ne=ie.INTERNAL,I="Unknown error status: "+K+" with message "+M.message),S=!0,R.__(new pe(ne,I)),w.close()}else ge(Cn,`RPC '${e}' stream ${a} received:`,B),R.a_(B)}}),C(h,iT.STAT_EVENT,k=>{k.stat===Jg.PROXY?ge(Cn,`RPC '${e}' stream ${a} detected buffering proxy`):k.stat===Jg.NOPROXY&&ge(Cn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{R.o_()},0),R}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function pg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(n){return new HO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=a,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-s);a>0&&ge("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="PersistentStream";class cS{constructor(e,t,s,a,l,u,h,g){this.Fi=e,this.w_=s,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new lv(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(qs(t.toString()),qs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.b_===t&&this.W_(s,a)},s=>{e(()=>{const a=new pe(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(a)})})}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(a=>{s(()=>this.G_(a))}),this.stream.onMessage(a=>{s(()=>++this.C_==1?this.j_(a):this.onNext(a))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ge(jw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ge(jw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BP extends cS{constructor(e,t,s,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=QO(this.serializer,e),s=function(l){if(!("targetChange"in l))return Oe.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Oe.min():u.readTime?tr(u.readTime):Oe.min()}(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=ly(this.serializer),t.addTarget=function(l,u){let h;const g=u.target;if(h=sy(g)?{documents:YO(l,g)}:{query:XO(l,g).Vt},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=XT(l,u.resumeToken);const p=ay(l,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(Oe.min())>0){h.readTime=af(l,u.snapshotVersion.toTimestamp());const p=ay(l,u.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const s=JO(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=ly(this.serializer),t.removeTarget=e,this.k_(t)}}class FP extends cS{constructor(e,t,s,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=WO(e.writeResults,e.commitTime),s=tr(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=ly(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>tS(this.serializer,s))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{}class HP extends qP{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Wo(e,oy(t,s),a,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(ie.UNKNOWN,l.toString())})}Jo(e,t,s,a,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Jo(e,oy(t,s),a,u,h,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(ie.UNKNOWN,u.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class GP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(qs(t),this._a=!1):ge("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa="RemoteStore";class $P{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(u=>{s.enqueueAndForget(async()=>{$a(this)&&(ge(qa,"Restarting streams for network reachability change."),await async function(g){const p=je(g);p.Ia.add(4),await Vu(p),p.Aa.set("Unknown"),p.Ia.delete(4),await Pf(p)}(this))})}),this.Aa=new GP(s,a)}}async function Pf(n){if($a(n))for(const e of n.da)await e(!0)}async function Vu(n){for(const e of n.da)await e(!1)}function uS(n,e){const t=je(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),hv(t)?dv(t):Rl(t).x_()&&uv(t,e))}function cv(n,e){const t=je(n),s=Rl(t);t.Ta.delete(e),s.x_()&&dS(t,e),t.Ta.size===0&&(s.x_()?s.B_():$a(t)&&t.Aa.set("Unknown"))}function uv(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rl(n).H_(e)}function dS(n,e){n.Ra.$e(e),Rl(n).Y_(e)}function dv(n){n.Ra=new zO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Rl(n).start(),n.Aa.aa()}function hv(n){return $a(n)&&!Rl(n).M_()&&n.Ta.size>0}function $a(n){return je(n).Ia.size===0}function hS(n){n.Ra=void 0}async function KP(n){n.Aa.set("Online")}async function QP(n){n.Ta.forEach((e,t)=>{uv(n,e)})}async function WP(n,e){hS(n),hv(n)?(n.Aa.la(e),dv(n)):n.Aa.set("Unknown")}async function YP(n,e,t){if(n.Aa.set("Online"),e instanceof YT&&e.state===2&&e.cause)try{await async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ta.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ta.delete(h),a.Ra.removeTarget(h))}(n,e)}catch(s){ge(qa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await cf(n,s)}else if(e instanceof Fh?n.Ra.Ye(e):e instanceof WT?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Oe.min()))try{const s=await lS(n.localStore);t.compareTo(s)>=0&&await function(l,u){const h=l.Ra.Pt(u);return h.targetChanges.forEach((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ta.get(p);v&&l.Ta.set(p,v.withResumeToken(g.resumeToken,u))}}),h.targetMismatches.forEach((g,p)=>{const v=l.Ta.get(g);if(!v)return;l.Ta.set(g,v.withResumeToken(mn.EMPTY_BYTE_STRING,v.snapshotVersion)),dS(l,g);const w=new Di(v.target,g,p,v.sequenceNumber);uv(l,w)}),l.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(s){ge(qa,"Failed to raise snapshot:",s),await cf(n,s)}}async function cf(n,e,t){if(!Sl(e))throw e;n.Ia.add(1),await Vu(n),n.Aa.set("Offline"),t||(t=()=>lS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge(qa,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Pf(n)})}function fS(n,e){return e().catch(t=>cf(n,t,e))}async function jf(n){const e=je(n),t=Gi(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Wy;for(;XP(e);)try{const a=await kP(e.localStore,s);if(a===null){e.Pa.length===0&&t.B_();break}s=a.batchId,ZP(e,a)}catch(a){await cf(e,a)}mS(e)&&pS(e)}function XP(n){return $a(n)&&n.Pa.length<10}function ZP(n,e){n.Pa.push(e);const t=Gi(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function mS(n){return $a(n)&&!Gi(n).M_()&&n.Pa.length>0}function pS(n){Gi(n).start()}async function JP(n){Gi(n).na()}async function ej(n){const e=Gi(n);for(const t of n.Pa)e.X_(t.mutations)}async function tj(n,e,t){const s=n.Pa.shift(),a=tv.from(s,e,t);await fS(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await jf(n)}async function nj(n,e){e&&Gi(n).Z_&&await async function(s,a){if(function(u){return KT(u)&&u!==ie.ABORTED}(a.code)){const l=s.Pa.shift();Gi(s).N_(),await fS(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a)),await jf(s)}}(n,e),mS(n)&&pS(n)}async function Mw(n,e){const t=je(n);t.asyncQueue.verifyOperationInProgress(),ge(qa,"RemoteStore received new credentials");const s=$a(t);t.Ia.add(3),await Vu(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Pf(t)}async function rj(n,e){const t=je(n);e?(t.Ia.delete(2),await Pf(t)):e||(t.Ia.add(2),await Vu(t),t.Aa.set("Unknown"))}function Rl(n){return n.Va||(n.Va=function(t,s,a){const l=je(t);return l.ia(),new BP(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{Zo:KP.bind(null,n),e_:QP.bind(null,n),n_:WP.bind(null,n),J_:YP.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),hv(n)?dv(n):n.Aa.set("Unknown")):(await n.Va.stop(),hS(n))})),n.Va}function Gi(n){return n.ma||(n.ma=function(t,s,a){const l=je(t);return l.ia(),new FP(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:JP.bind(null,n),n_:nj.bind(null,n),ea:ej.bind(null,n),ta:tj.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await jf(n)):(await n.ma.stop(),n.Pa.length>0&&(ge(qa,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const u=Date.now()+s,h=new fv(e,t,u,a,l);return h.start(s),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mv(n,e){if(qs("AsyncQueue",`${e}: ${n}`),Sl(n))return new pe(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{static emptySet(e){return new nl(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ae.comparator(t.key,s.key):(t,s)=>Ae.comparator(t.key,s.key),this.keyedMap=Qc(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new nl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(){this.fa=new At(Ae.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ie(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,s)=>{e.push(s)}),e}}class hl{constructor(e,t,s,a,l,u,h,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,a,l){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new hl(e,t,nl.emptySet(t),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class ij{constructor(){this.queries=Lw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const a=je(t),l=a.queries;a.queries=Lw(),l.forEach((u,h)=>{for(const g of h.wa)g.onError(s)})})(this,new pe(ie.ABORTED,"Firestore shutting down"))}}function Lw(){return new Ga(n=>kT(n),Nf)}async function pv(n,e){const t=je(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.ba()&&(s=2):(l=new sj,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await t.onListen(a,!0);break;case 1:l.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=mv(u,`Initialization of query '${Wo(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&yv(t)}async function gv(n,e){const t=je(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const u=l.wa.indexOf(e);u>=0&&(l.wa.splice(u,1),l.wa.length===0?a=e.ba()?0:1:!l.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function aj(n,e){const t=je(n);let s=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const h of u.wa)h.Ca(a)&&(s=!0);u.ya=a}}s&&yv(t)}function oj(n,e,t){const s=je(n),a=s.queries.get(e);if(a)for(const l of a.wa)l.onError(t);s.queries.delete(e)}function yv(n){n.Da.forEach(e=>{e.next()})}var dy,Uw;(Uw=dy||(dy={})).Fa="default",Uw.Cache="cache";class vv{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new hl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==dy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.key=e}}class yS{constructor(e){this.key=e}}class lj{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ke(),this.mutatedKeys=Ke(),this.Xa=OT(e),this.eu=new nl(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new Vw,a=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((v,w)=>{const _=a.get(v),S=Cf(this.query,w)?w:null,R=!!_&&this.mutatedKeys.has(_.key),C=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let k=!1;_&&S?_.data.isEqual(S.data)?R!==C&&(s.track({type:3,doc:S}),k=!0):this.iu(_,S)||(s.track({type:2,doc:S}),k=!0,(g&&this.Xa(S,g)>0||p&&this.Xa(S,p)<0)&&(h=!0)):!_&&S?(s.track({type:0,doc:S}),k=!0):_&&!S&&(s.track({type:1,doc:_}),k=!0,(g||p)&&(h=!0)),k&&(S?(u=u.add(S),l=C?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{eu:u,ru:s,Ds:h,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort((v,w)=>function(S,R){const C=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{At:k})}};return C(S)-C(R)}(v.type,w.type)||this.Xa(v.doc,w.doc)),this.su(s),a=a!=null&&a;const h=t&&!a?this.ou():[],g=this.Za.size===0&&this.current&&!a?1:0,p=g!==this.Ya;return this.Ya=g,u.length!==0||p?{snapshot:new hl(this.query,e.eu,l,u,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Vw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ke(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const t=[];return e.forEach(s=>{this.Za.has(s)||t.push(new yS(s))}),this.Za.forEach(s=>{e.has(s)||t.push(new gS(s))}),t}uu(e){this.Ha=e.qs,this.Za=Ke();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return hl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const bv="SyncEngine";class cj{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class uj{constructor(e){this.key=e,this.lu=!1}}class dj{constructor(e,t,s,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Ga(h=>kT(h),Nf),this.Tu=new Map,this.Iu=new Set,this.du=new At(Ae.comparator),this.Eu=new Map,this.Au=new sv,this.Ru={},this.Vu=new Map,this.mu=dl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function hj(n,e,t=!0){const s=ES(n);let a;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.cu()):a=await vS(s,e,t,!0),a}async function fj(n,e){const t=ES(n);await vS(t,e,!0,!1)}async function vS(n,e,t,s){const a=await OP(n.localStore,rs(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let h;return s&&(h=await mj(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&uS(n.remoteStore,a),h}async function mj(n,e,t,s,a){n.gu=(w,_,S)=>async function(C,k,P,B){let H=k.view.nu(P);H.Ds&&(H=await Dw(C.localStore,k.query,!1).then(({documents:I})=>k.view.nu(I,H)));const M=B&&B.targetChanges.get(k.targetId),K=B&&B.targetMismatches.get(k.targetId)!=null,ne=k.view.applyChanges(H,C.isPrimaryClient,M,K);return Bw(C,k.targetId,ne._u),ne.snapshot}(n,w,_,S);const l=await Dw(n.localStore,e,!0),u=new lj(e,l.qs),h=u.nu(l.documents),g=Mu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),p=u.applyChanges(h,n.isPrimaryClient,g);Bw(n,t,p._u);const v=new cj(e,t,u);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),p.snapshot}async function pj(n,e,t){const s=je(n),a=s.Pu.get(e),l=s.Tu.get(a.targetId);if(l.length>1)return s.Tu.set(a.targetId,l.filter(u=>!Nf(u,e))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await cy(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),t&&cv(s.remoteStore,a.targetId),hy(s,a.targetId)}).catch(Tl)):(hy(s,a.targetId),await cy(s.localStore,a.targetId,!0))}async function gj(n,e){const t=je(n),s=t.Pu.get(e),a=t.Tu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),cv(t.remoteStore,s.targetId))}async function yj(n,e,t){const s=Tj(n);try{const a=await function(u,h){const g=je(u),p=yt.now(),v=h.reduce((S,R)=>S.add(R.key),Ke());let w,_;return g.persistence.runTransaction("Locally write mutations","readwrite",S=>{let R=Gs(),C=Ke();return g.Os.getEntries(S,v).next(k=>{R=k,R.forEach((P,B)=>{B.isValidDocument()||(C=C.add(P))})}).next(()=>g.localDocuments.getOverlayedDocuments(S,R)).next(k=>{w=k;const P=[];for(const B of h){const H=jO(B,w.get(B.key).overlayedDocument);H!=null&&P.push(new Xi(B.key,H,TT(H.value.mapValue),Ht.exists(!0)))}return g.mutationQueue.addMutationBatch(S,p,P,h)}).next(k=>{_=k;const P=k.applyToLocalDocumentSet(w,C);return g.documentOverlayCache.saveOverlays(S,k.batchId,P)})}).then(()=>({batchId:_.batchId,changes:jT(w)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(u,h,g){let p=u.Ru[u.currentUser.toKey()];p||(p=new At(Fe)),p=p.insert(h,g),u.Ru[u.currentUser.toKey()]=p}(s,a.batchId,t),await Lu(s,a.changes),await jf(s.remoteStore)}catch(a){const l=mv(a,"Failed to persist write");t.reject(l)}}async function bS(n,e){const t=je(n);try{const s=await IP(t.localStore,e);e.targetChanges.forEach((a,l)=>{const u=t.Eu.get(l);u&&(Ze(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.lu=!0:a.modifiedDocuments.size>0?Ze(u.lu,14607):a.removedDocuments.size>0&&(Ze(u.lu,42227),u.lu=!1))}),await Lu(t,s,e)}catch(s){await Tl(s)}}function zw(n,e,t){const s=je(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Pu.forEach((l,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)}),function(u,h){const g=je(u);g.onlineState=h;let p=!1;g.queries.forEach((v,w)=>{for(const _ of w.wa)_.va(h)&&(p=!0)}),p&&yv(g)}(s.eventManager,e),a.length&&s.hu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function vj(n,e,t){const s=je(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Eu.get(e),l=a&&a.key;if(l){let u=new At(Ae.comparator);u=u.insert(l,cn.newNoDocument(l,Oe.min()));const h=Ke().add(l),g=new kf(Oe.min(),new Map,new At(Fe),u,h);await bS(s,g),s.du=s.du.remove(l),s.Eu.delete(e),_v(s)}else await cy(s.localStore,e,!1).then(()=>hy(s,e,t)).catch(Tl)}async function bj(n,e){const t=je(n),s=e.batch.batchId;try{const a=await CP(t.localStore,e);wS(t,s,null),_S(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Lu(t,a)}catch(a){await Tl(a)}}async function _j(n,e,t){const s=je(n);try{const a=await function(u,h){const g=je(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return g.mutationQueue.lookupMutationBatch(p,h).next(w=>(Ze(w!==null,37113),v=w.keys(),g.mutationQueue.removeMutationBatch(p,w))).next(()=>g.mutationQueue.performConsistencyCheck(p)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(p,v,h)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>g.localDocuments.getDocuments(p,v))})}(s.localStore,e);wS(s,e,t),_S(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Lu(s,a)}catch(a){await Tl(a)}}function _S(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function wS(n,e,t){const s=je(n);let a=s.Ru[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Ru[s.currentUser.toKey()]=a}}function hy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Tu.get(e))n.Pu.delete(s),t&&n.hu.pu(s,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(s=>{n.Au.containsKey(s)||xS(n,s)})}function xS(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(cv(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),_v(n))}function Bw(n,e,t){for(const s of t)s instanceof gS?(n.Au.addReference(s.key,e),wj(n,s)):s instanceof yS?(ge(bv,"Document no longer in limbo: "+s.key),n.Au.removeReference(s.key,e),n.Au.containsKey(s.key)||xS(n,s.key)):Ie(19791,{yu:s})}function wj(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Iu.has(s)||(ge(bv,"New document in limbo: "+t),n.Iu.add(s),_v(n))}function _v(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ae(ft.fromString(e)),s=n.mu.next();n.Eu.set(s,new uj(t)),n.du=n.du.insert(t,s),uS(n.remoteStore,new Di(rs(Rf(t.path)),s,"TargetPurposeLimboResolution",Sf.ue))}}async function Lu(n,e,t){const s=je(n),a=[],l=[],u=[];s.Pu.isEmpty()||(s.Pu.forEach((h,g)=>{u.push(s.gu(g,e,t).then(p=>{var v;if((p||t)&&s.isPrimaryClient){const w=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))===null||v===void 0?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(p){a.push(p);const w=av.Es(g.targetId,p);l.push(w)}}))}),await Promise.all(u),s.hu.J_(a),await async function(g,p){const v=je(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ce.forEach(p,_=>ce.forEach(_.Is,S=>v.persistence.referenceDelegate.addReference(w,_.targetId,S)).next(()=>ce.forEach(_.ds,S=>v.persistence.referenceDelegate.removeReference(w,_.targetId,S)))))}catch(w){if(!Sl(w))throw w;ge(ov,"Failed to update sequence numbers: "+w)}for(const w of p){const _=w.targetId;if(!w.fromCache){const S=v.Fs.get(_),R=S.snapshotVersion,C=S.withLastLimboFreeSnapshotVersion(R);v.Fs=v.Fs.insert(_,C)}}}(s.localStore,l))}async function xj(n,e){const t=je(n);if(!t.currentUser.isEqual(e)){ge(bv,"User change. New user:",e.toKey());const s=await oS(t.localStore,e);t.currentUser=e,function(l,u){l.Vu.forEach(h=>{h.forEach(g=>{g.reject(new pe(ie.CANCELLED,u))})}),l.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Lu(t,s.Bs)}}function Ej(n,e){const t=je(n),s=t.Eu.get(e);if(s&&s.lu)return Ke().add(s.key);{let a=Ke();const l=t.Tu.get(e);if(!l)return a;for(const u of l){const h=t.Pu.get(u);a=a.unionWith(h.view.tu)}return a}}function ES(n){const e=je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ej.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vj.bind(null,e),e.hu.J_=aj.bind(null,e.eventManager),e.hu.pu=oj.bind(null,e.eventManager),e}function Tj(n){const e=je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_j.bind(null,e),e}class uf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Of(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return NP(this.persistence,new SP,e.initialUser,this.serializer)}Du(e){return new aS(iv.Vi,this.serializer)}bu(e){return new jP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uf.provider={build:()=>new uf};class Sj extends uf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ze(this.persistence.referenceDelegate instanceof lf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new uP(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new aS(s=>lf.Vi(s,t),this.serializer)}}class fy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>zw(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=xj.bind(null,this.syncEngine),await rj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ij}()}createDatastore(e){const t=Of(e.databaseInfo.databaseId),s=function(l){return new zP(l)}(e.databaseInfo);return function(l,u,h,g){return new HP(l,u,h,g)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,a,l,u,h){return new $P(s,a,l,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>zw(this.syncEngine,t,0),function(){return Pw.C()?new Pw:new MP}())}createSyncEngine(e,t){return function(a,l,u,h,g,p,v){const w=new dj(a,l,u,h,g,p);return v&&(w.fu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=je(a);ge(qa,"RemoteStore shutting down."),l.Ia.add(5),await Vu(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}fy.provider={build:()=>new fy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):qs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new pe(ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,l){const u=je(a),h={documents:l.map(w=>of(u.serializer,w))},g=await u.Jo("BatchGetDocuments",u.serializer.databaseId,ft.emptyPath(),h,l.length),p=new Map;g.forEach(w=>{const _=KO(u.serializer,w);p.set(_.key.toString(),_)});const v=[];return l.forEach(w=>{const _=p.get(w.toString());Ze(!!_,55234,{key:w}),v.push(_)}),v}(this.datastore,e);return t.forEach(s=>this.recordVersion(s)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new ju(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,s)=>{const a=Ae.fromPath(s);this.mutations.push(new $T(a,this.precondition(a)))}),await async function(s,a){const l=je(s),u={writes:a.map(h=>tS(l.serializer,h))};await l.Wo("Commit",l.serializer.databaseId,ft.emptyPath(),u)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ie(50498,{Wu:e.constructor.name});t=Oe.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new pe(ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Oe.min())?Ht.exists(!1):Ht.updateTime(t):Ht.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Oe.min()))throw new pe(ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ht.updateTime(t)}return Ht.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,t,s,a,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=l,this.Gu=s.maxAttempts,this.F_=new lv(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new Aj(this.datastore),t=this.Ju(e);t&&t.then(s=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(s)}).catch(a=>{this.Hu(a)}))}).catch(s=>{this.Hu(s)})})}Ju(e){try{const t=this.updateFunction(e);return!Ou(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!KT(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="FirestoreClient";class Nj{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=In.UNAUTHENTICATED,this.clientId=Ef.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async u=>{ge($i,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(s,u=>(ge($i,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=mv(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function gg(n,e){n.asyncQueue.verifyOperationInProgress(),ge($i,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(async a=>{s.isEqual(a)||(await oS(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>{Hs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ge("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(a=>{Hs("Terminating Firestore due to IndexedDb database deletion failed",a)})}),n._offlineComponents=e}async function Fw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Cj(n);ge($i,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>Mw(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,a)=>Mw(e.remoteStore,a)),n._onlineComponents=e}async function Cj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge($i,"Using user provided OfflineComponentProvider");try{await gg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Hs("Error using user provided cache. Falling back to memory cache: "+t),await gg(n,new uf)}}else ge($i,"Using default OfflineComponentProvider"),await gg(n,new Sj(void 0));return n._offlineComponents}async function xv(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge($i,"Using user provided OnlineComponentProvider"),await Fw(n,n._uninitializedComponentsProvider._online)):(ge($i,"Using default OnlineComponentProvider"),await Fw(n,new fy))),n._onlineComponents}function Ij(n){return xv(n).then(e=>e.syncEngine)}function Dj(n){return xv(n).then(e=>e.datastore)}async function df(n){const e=await xv(n),t=e.eventManager;return t.onListen=hj.bind(null,e.syncEngine),t.onUnlisten=pj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=gj.bind(null,e.syncEngine),t}function kj(n,e,t={}){const s=new ns;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,h,g,p){const v=new wv({next:_=>{v.Ou(),u.enqueueAndForget(()=>gv(l,w));const S=_.docs.has(h);!S&&_.fromCache?p.reject(new pe(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&_.fromCache&&g&&g.source==="server"?p.reject(new pe(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(_)},error:_=>p.reject(_)}),w=new vv(Rf(h.path),v,{includeMetadataChanges:!0,ka:!0});return pv(l,w)}(await df(n),n.asyncQueue,e,t,s)),s.promise}function Oj(n,e,t={}){const s=new ns;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,h,g,p){const v=new wv({next:_=>{v.Ou(),u.enqueueAndForget(()=>gv(l,w)),_.fromCache&&g.source==="server"?p.reject(new pe(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(_)},error:_=>p.reject(_)}),w=new vv(h,v,{includeMetadataChanges:!0,ka:!0});return pv(l,w)}(await df(n),n.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="firestore.googleapis.com",Hw=!0;class Gw{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=SS,this.ssl=Hw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Hw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lP)throw new pe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TS((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mf{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new uT;switch(s.type){case"firstParty":return new $k(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=qw.get(t);s&&(ge("ComponentProvider","Removing Datastore"),qw.delete(t),s.terminate())}(this),Promise.resolve()}}function AS(n,e,t,s={}){var a;n=En(n,Mf);const l=_l(e),u=n._getSettings(),h=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),g=`${e}:${t}`;l&&(fE(`https://${g}`),mE("Firestore",!0)),u.host!==SS&&u.host!==g&&Hs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},u),{host:g,ssl:l,emulatorOptions:s});if(!La(p,h)&&(n._setSettings(p),s.mockUserToken)){let v,w;if(typeof s.mockUserToken=="string")v=s.mockUserToken,w=In.MOCK_USER;else{v=KC(s.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const _=s.mockUserToken.sub||s.mockUserToken.user_id;if(!_)throw new pe(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new In(_)}n._authCredentials=new qk(new cT(v,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new as(this.firestore,e,this._query)}}class xt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(ku(t,xt._jsonSchema))return new xt(e,s||null,new Ae(ft.fromString(t.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:Gt("string",xt._jsonSchemaVersion),referencePath:Gt("string")};class Ls extends as{constructor(e,t,s){super(e,t,Rf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new Ae(e))}withConverter(e){return new Ls(this.firestore,e,this._path)}}function vt(n,e,...t){if(n=Tt(n),hT("collection","path",e),n instanceof Mf){const s=ft.fromString(e,...t);return sw(s),new Ls(n,null,s)}{if(!(n instanceof xt||n instanceof Ls))throw new pe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ft.fromString(e,...t));return sw(s),new Ls(n.firestore,null,s)}}function Tn(n,e,...t){if(n=Tt(n),arguments.length===1&&(e=Ef.newId()),hT("doc","path",e),n instanceof Mf){const s=ft.fromString(e,...t);return rw(s),new xt(n,null,new Ae(s))}{if(!(n instanceof xt||n instanceof Ls))throw new pe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ft.fromString(e,...t));return rw(s),new xt(n.firestore,n instanceof Ls?n.converter:null,new Ae(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="AsyncQueue";class Kw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new lv(this,"async_queue_retry"),this.oc=()=>{const s=pg();s&&ge($w,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=pg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=pg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new ns;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Sl(e))throw e;ge($w,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(s=>{throw this.tc=s,this.nc=!1,qs("INTERNAL UNHANDLED ERROR: ",Qw(s)),s}).then(s=>(this.nc=!1,s))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=fv.createAndSchedule(this,e,t,s,l=>this.lc(l));return this.ec.push(a),a}ac(){this.tc&&Ie(47125,{hc:Qw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Qw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(n){return function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1}(n,["next","error","complete"])}class _r extends Mf{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Kw,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kw(e),this._firestoreClient=void 0,await e}}}function RS(n,e){const t=typeof n=="object"?n:vE(),s=typeof n=="string"?n:tf,a=Vy(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=GC("firestore");l&&AS(a,...l)}return a}function Ka(n){if(n._terminated)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Pj(n),n._firestoreClient}function Pj(n){var e,t,s;const a=n._freezeSettings(),l=function(h,g,p,v){return new oO(h,g,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,TS(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new Nj(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(h){const g=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(g),_online:g}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qn(mn.fromBase64String(e))}catch(t){throw new pe(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qn(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ku(e,qn._jsonSchema))return qn.fromBase64String(e.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:Gt("string",qn._jsonSchemaVersion),bytes:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cr._jsonSchemaVersion}}static fromJSON(e){if(ku(e,Cr._jsonSchema))return new Cr(e.latitude,e.longitude)}}Cr._jsonSchemaVersion="firestore/geoPoint/1.0",Cr._jsonSchema={type:Gt("string",Cr._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ir._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ku(e,Ir._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Ir(e.vectorValues);throw new pe(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ir._jsonSchemaVersion="firestore/vectorValue/1.0",Ir._jsonSchema={type:Gt("string",Ir._jsonSchemaVersion),vectorValues:Gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=/^__.*__$/;class Mj{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Xi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pu(e,this.data,t,this.fieldTransforms)}}class NS{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Xi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ec:n})}}class Ev{constructor(e,t,s,a,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Ev(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.fc(e),a}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return hf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(CS(this.Ec)&&jj.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Vj{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Of(e)}Dc(e,t,s,a=!1){return new Ev({Ec:e,methodName:t,bc:s,path:hn.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cl(n){const e=n._freezeSettings(),t=Of(n._databaseId);return new Vj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Vf(n,e,t,s,a,l={}){const u=n.Dc(l.merge||l.mergeFields?2:0,e,t,a);Nv("Data must be an object, but it was:",u,s);const h=IS(s,u);let g,p;if(l.merge)g=new er(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const w of l.mergeFields){const _=my(e,w,t);if(!u.contains(_))throw new pe(ie.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);kS(v,_)||v.push(_)}g=new er(v),p=u.fieldTransforms.filter(w=>g.covers(w.field))}else g=null,p=u.fieldTransforms;return new Mj(new Vn(h),g,p)}class Lf extends Nl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lf}}class Tv extends Nl{_toFieldTransform(e){return new qT(e.path,new pu)}isEqual(e){return e instanceof Tv}}class Sv extends Nl{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){const t=new vu(e.serializer,LT(e.serializer,this.Cc));return new qT(e.path,t)}isEqual(e){return e instanceof Sv&&this.Cc===e.Cc}}function Av(n,e,t,s){const a=n.Dc(1,e,t);Nv("Data must be an object, but it was:",a,s);const l=[],u=Vn.empty();Yi(s,(g,p)=>{const v=Cv(e,g,t);p=Tt(p);const w=a.gc(v);if(p instanceof Lf)l.push(v);else{const _=Uu(p,w);_!=null&&(l.push(v),u.set(v,_))}});const h=new er(l);return new NS(u,h,a.fieldTransforms)}function Rv(n,e,t,s,a,l){const u=n.Dc(1,e,t),h=[my(e,s,t)],g=[a];if(l.length%2!=0)throw new pe(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<l.length;_+=2)h.push(my(e,l[_])),g.push(l[_+1]);const p=[],v=Vn.empty();for(let _=h.length-1;_>=0;--_)if(!kS(p,h[_])){const S=h[_];let R=g[_];R=Tt(R);const C=u.gc(S);if(R instanceof Lf)p.push(S);else{const k=Uu(R,C);k!=null&&(p.push(S),v.set(S,k))}}const w=new er(p);return new NS(v,w,u.fieldTransforms)}function Lj(n,e,t,s=!1){return Uu(t,n.Dc(s?4:3,e))}function Uu(n,e){if(DS(n=Tt(n)))return Nv("Unsupported field value:",e,n),IS(n,e);if(n instanceof Nl)return function(s,a){if(!CS(a.Ec))throw a.wc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(s,a){const l=[];let u=0;for(const h of s){let g=Uu(h,a.yc(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}}(n,e)}return function(s,a){if((s=Tt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return LT(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=yt.fromDate(s);return{timestampValue:af(a.serializer,l)}}if(s instanceof yt){const l=new yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:af(a.serializer,l)}}if(s instanceof Cr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof qn)return{bytesValue:XT(a.serializer,s._byteString)};if(s instanceof xt){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:rv(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Ir)return function(u,h){return{mapValue:{fields:{[xT]:{stringValue:ET},[nf]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw h.wc("VectorValues must only contain numeric values.");return ev(h.serializer,p)})}}}}}}(s,a);throw a.wc(`Unsupported field value: ${Tf(s)}`)}(n,e)}function IS(n,e){const t={};return gT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yi(n,(s,a)=>{const l=Uu(a,e.Vc(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function DS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof Cr||n instanceof qn||n instanceof xt||n instanceof Nl||n instanceof Ir)}function Nv(n,e,t){if(!DS(t)||!mT(t)){const s=Tf(t);throw s==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+s)}}function my(n,e,t){if((e=Tt(e))instanceof Qa)return e._internalPath;if(typeof e=="string")return Cv(n,e);throw hf("Field path arguments must be of type string or ",n,!1,void 0,t)}const Uj=new RegExp("[~\\*/\\[\\]]");function Cv(n,e,t){if(e.search(Uj)>=0)throw hf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qa(...e.split("."))._internalPath}catch{throw hf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hf(n,e,t,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${s}`),u&&(g+=` in document ${a}`),g+=")"),new pe(ie.INVALID_ARGUMENT,h+n+g)}function kS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Uf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class zj extends ff{data(){return super.data()}}function Uf(n,e){return typeof e=="string"?Cv(n,e):e instanceof Qa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Iv{}class zf extends Iv{}function fn(n,e,...t){let s=[];e instanceof Iv&&s.push(e),s=s.concat(t),function(l){const u=l.filter(g=>g instanceof Bf).length,h=l.filter(g=>g instanceof zu).length;if(u>1||u>0&&h>0)throw new pe(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)n=a._apply(n);return n}class zu extends zf{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new zu(e,t,s)}_apply(e){const t=this._parse(e);return PS(e._query,t),new as(e.firestore,e.converter,iy(e._query,t))}_parse(e){const t=Cl(e.firestore);return function(l,u,h,g,p,v,w){let _;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new pe(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Xw(w,v);const R=[];for(const C of w)R.push(Yw(g,l,C));_={arrayValue:{values:R}}}else _=Yw(g,l,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Xw(w,v),_=Lj(h,u,w,v==="in"||v==="not-in");return qt.create(p,v,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function bt(n,e,t){const s=e,a=Uf("where",n);return zu._create(a,s,t)}class Bf extends Iv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Bf(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Dr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let u=a;const h=l.getFlattenedFilters();for(const g of h)PS(u,g),u=iy(u,g)}(e._query,t),new as(e.firestore,e.converter,iy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ff extends zf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ff(e,t)}_apply(e){const t=function(a,l,u){if(a.startAt!==null)throw new pe(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new pe(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mu(l,u)}(e._query,this._field,this._direction);return new as(e.firestore,e.converter,function(a,l){const u=a.explicitOrderBy.concat([l]);return new Al(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function Ki(n,e="asc"){const t=e,s=Uf("orderBy",n);return Ff._create(s,t)}class qf extends zf{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new qf(e,t,s)}_apply(e){return new as(e.firestore,e.converter,sf(e._query,this._limit,this._limitType))}}function Dv(n){return qf._create("limit",n,"F")}function Yw(n,e,t){if(typeof(t=Tt(t))=="string"){if(t==="")throw new pe(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DT(e)&&t.indexOf("/")!==-1)throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ft.fromString(t));if(!Ae.isDocumentKey(s))throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return hw(n,new Ae(s))}if(t instanceof xt)return hw(n,t._key);throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tf(t)}.`)}function Xw(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PS(n,e){const t=function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class kv{convertValue(e,t="none"){switch(Hi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Yi(e,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,a;const l=(a=(s=(t=e.fields)===null||t===void 0?void 0:t[nf].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(u=>jt(u.doubleValue));return new Ir(l)}convertGeoPoint(e){return new Cr(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Af(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(hu(e));default:return null}}convertTimestamp(e){const t=Fi(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ft.fromString(e);Ze(sS(s),9688,{name:e});const a=new ll(s.get(1),s.get(3)),l=new Ae(s.popFirst(5));return a.isEqual(t)||qs(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Bj extends kv{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}class Ma{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Us extends ff{constructor(e,t,s,a,l,u){super(e,t,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Uf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Us._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Us._jsonSchemaVersion="firestore/documentSnapshot/1.0",Us._jsonSchema={type:Gt("string",Us._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class iu extends Us{data(e={}){return super.data(e)}}class Li{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ma(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new iu(this._firestore,this._userDataWriter,s.key,s,new Ma(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(h=>{const g=new iu(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Ma(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>l||h.type!==3).map(h=>{const g=new iu(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Ma(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,v=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:Fj(h.type),doc:g,oldIndex:p,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Li._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ef.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Fj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(n){n=En(n,xt);const e=En(n.firestore,_r);return kj(Ka(e),n._key).then(t=>jS(e,n,t))}Li._jsonSchemaVersion="firestore/querySnapshot/1.0",Li._jsonSchema={type:Gt("string",Li._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class Gf extends kv{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}function $s(n){n=En(n,as);const e=En(n.firestore,_r),t=Ka(e),s=new Gf(e);return OS(n._query),Oj(t,n._query).then(a=>new Li(e,s,n,a))}function mf(n,e,t){n=En(n,xt);const s=En(n.firestore,_r),a=Hf(n.converter,e,t);return Il(s,[Vf(Cl(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Ht.none())])}function $f(n,e,t,...s){n=En(n,xt);const a=En(n.firestore,_r),l=Cl(a);let u;return u=typeof(e=Tt(e))=="string"||e instanceof Qa?Rv(l,"updateDoc",n._key,e,t,s):Av(l,"updateDoc",n._key,e),Il(a,[u.toMutation(n._key,Ht.exists(!0))])}function Ov(n){return Il(En(n.firestore,_r),[new ju(n._key,Ht.none())])}function fl(n,e){const t=En(n.firestore,_r),s=Tn(n),a=Hf(n.converter,e);return Il(t,[Vf(Cl(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,Ht.exists(!1))]).then(()=>s)}function yr(n,...e){var t,s,a;n=Tt(n);let l={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||Ww(e[u])||(l=e[u++]);const h={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Ww(e[u])){const w=e[u];e[u]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[u+1]=(s=w.error)===null||s===void 0?void 0:s.bind(w),e[u+2]=(a=w.complete)===null||a===void 0?void 0:a.bind(w)}let g,p,v;if(n instanceof xt)p=En(n.firestore,_r),v=Rf(n._key.path),g={next:w=>{e[u]&&e[u](jS(p,n,w))},error:e[u+1],complete:e[u+2]};else{const w=En(n,as);p=En(w.firestore,_r),v=w._query;const _=new Gf(p);g={next:S=>{e[u]&&e[u](new Li(p,_,w,S))},error:e[u+1],complete:e[u+2]},OS(n._query)}return function(_,S,R,C){const k=new wv(C),P=new vv(S,k,R);return _.asyncQueue.enqueueAndForget(async()=>pv(await df(_),P)),()=>{k.Ou(),_.asyncQueue.enqueueAndForget(async()=>gv(await df(_),P))}}(Ka(p),v,h,g)}function Il(n,e){return function(s,a){const l=new ns;return s.asyncQueue.enqueueAndForget(async()=>yj(await Ij(s),a,l)),l.promise}(Ka(n),e)}function jS(n,e,t){const s=t.docs.get(e._key),a=new Gf(n);return new Us(n,a,e._key,s,new Ma(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cl(e)}set(e,t,s){this._verifyNotCommitted();const a=ki(e,this._firestore),l=Hf(a.converter,t,s),u=Vf(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,s);return this._mutations.push(u.toMutation(a._key,Ht.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=ki(e,this._firestore);let u;return u=typeof(t=Tt(t))=="string"||t instanceof Qa?Rv(this._dataReader,"WriteBatch.update",l._key,t,s,a):Av(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,Ht.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ki(e,this._firestore);return this._mutations=this._mutations.concat(new ju(t._key,Ht.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ki(n,e){if((n=Tt(n)).firestore!==e)throw new pe(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cl(e)}get(e){const t=ki(e,this._firestore),s=new Bj(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||a.length!==1)return Ie(24041);const l=a[0];if(l.isFoundDocument())return new ff(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new ff(this._firestore,s,t._key,null,t.converter);throw Ie(18433,{doc:l})})}set(e,t,s){const a=ki(e,this._firestore),l=Hf(a.converter,t,s),u=Vf(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,s);return this._transaction.set(a._key,u),this}update(e,t,s,...a){const l=ki(e,this._firestore);let u;return u=typeof(t=Tt(t))=="string"||t instanceof Qa?Rv(this._dataReader,"Transaction.update",l._key,t,s,a):Av(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=ki(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS extends Hj{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ki(e,this._firestore),s=new Gf(this._firestore);return super.get(e).then(a=>new Us(this._firestore,s,t._key,a._document,new Ma(!1,!1),t.converter))}}function LS(n,e,t){n=En(n,_r);const s=Object.assign(Object.assign({},qj),t);return function(l){if(l.maxAttempts<1)throw new pe(ie.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(l,u,h){const g=new ns;return l.asyncQueue.enqueueAndForget(async()=>{const p=await Dj(l);new Rj(l.asyncQueue,p,h,u,g).zu()}),g.promise}(Ka(n),a=>e(new VS(n,a)),s)}function Sn(){return new Tv("serverTimestamp")}function US(n){return new Sv("increment",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(n){return Ka(n=En(n,_r)),new MS(n,e=>Il(n,e))}(function(e,t=!0){(function(a){El=a})(wl),il(new Ua("firestore",(s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),h=new _r(new Hk(s.getProvider("auth-internal")),new Kk(u,s.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ll(p.options.projectId,v)}(u,a),u);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h},"PUBLIC").setMultipleInstances(!0)),Mi(Z1,J1,e),Mi(Z1,J1,"esm2017")})();const Gj=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:kv,Bytes:qn,CollectionReference:Ls,DocumentReference:xt,DocumentSnapshot:Us,FieldPath:Qa,FieldValue:Nl,Firestore:_r,FirestoreError:pe,GeoPoint:Cr,Query:as,QueryCompositeFilterConstraint:Bf,QueryConstraint:zf,QueryDocumentSnapshot:iu,QueryFieldFilterConstraint:zu,QueryLimitConstraint:qf,QueryOrderByConstraint:Ff,QuerySnapshot:Li,SnapshotMetadata:Ma,Timestamp:yt,Transaction:VS,VectorValue:Ir,WriteBatch:MS,_AutoId:Ef,_ByteString:mn,_DatabaseId:ll,_DocumentKey:Ae,_EmptyAuthCredentialsProvider:uT,_FieldPath:hn,_cast:En,_logWarn:Hs,_validateIsNotUsedTogether:fT,addDoc:fl,collection:vt,connectFirestoreEmulator:AS,deleteDoc:Ov,doc:Tn,ensureFirestoreConfigured:Ka,executeWrite:Il,getDoc:Wa,getDocs:$s,getFirestore:RS,increment:US,limit:Dv,onSnapshot:yr,orderBy:Ki,query:fn,runTransaction:LS,serverTimestamp:Sn,setDoc:mf,updateDoc:$f,where:bt,writeBatch:zS},Symbol.toStringTag,{value:"Module"}));/*! Capacitor: https://capacitorjs.com/ - MIT License */const $j=n=>{const e=new Map;e.set("web",{name:"web"});const t=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},s=(l,u)=>{t.platforms.set(l,u)},a=l=>{t.platforms.has(l)&&(t.currentPlatform=t.platforms.get(l))};return t.addPlatform=s,t.setPlatform=a,t},Kj=n=>n.CapacitorPlatforms=$j(n),BS=Kj(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});BS.addPlatform;BS.setPlatform;var ml;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(ml||(ml={}));class yg extends Error{constructor(e,t,s){super(e),this.message=e,this.code=t,this.data=s}}const Qj=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},Wj=n=>{var e,t,s,a,l;const u=n.CapacitorCustomPlatform||null,h=n.Capacitor||{},g=h.Plugins=h.Plugins||{},p=n.CapacitorPlatforms,v=()=>u!==null?u.name:Qj(n),w=((e=p==null?void 0:p.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||v,_=()=>w()!=="web",S=((t=p==null?void 0:p.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||_,R=I=>{const A=M.get(I);return!!(A!=null&&A.platforms.has(w())||P(I))},C=((s=p==null?void 0:p.currentPlatform)===null||s===void 0?void 0:s.isPluginAvailable)||R,k=I=>{var A;return(A=h.PluginHeaders)===null||A===void 0?void 0:A.find(O=>O.name===I)},P=((a=p==null?void 0:p.currentPlatform)===null||a===void 0?void 0:a.getPluginHeader)||k,B=I=>n.console.error(I),H=(I,A,O)=>Promise.reject(`${O} does not have an implementation of "${A}".`),M=new Map,K=(I,A={})=>{const O=M.get(I);if(O)return console.warn(`Capacitor plugin "${I}" already registered. Cannot register plugins twice.`),O.proxy;const L=w(),z=P(I);let F;const j=async()=>(!F&&L in A?F=typeof A[L]=="function"?F=await A[L]():F=A[L]:u!==null&&!F&&"web"in A&&(F=typeof A.web=="function"?F=await A.web():F=A.web),F),Me=(U,G)=>{var re,Q;if(z){const se=z==null?void 0:z.methods.find(de=>G===de.name);if(se)return se.rtype==="promise"?de=>h.nativePromise(I,G.toString(),de):(de,fe)=>h.nativeCallback(I,G.toString(),de,fe);if(U)return(re=U[G])===null||re===void 0?void 0:re.bind(U)}else{if(U)return(Q=U[G])===null||Q===void 0?void 0:Q.bind(U);throw new yg(`"${I}" plugin is not implemented on ${L}`,ml.Unimplemented)}},Ce=U=>{let G;const re=(...Q)=>{const se=j().then(de=>{const fe=Me(de,U);if(fe){const Te=fe(...Q);return G=Te==null?void 0:Te.remove,Te}else throw new yg(`"${I}.${U}()" is not implemented on ${L}`,ml.Unimplemented)});return U==="addListener"&&(se.remove=async()=>G()),se};return re.toString=()=>`${U.toString()}() { [capacitor code] }`,Object.defineProperty(re,"name",{value:U,writable:!1,configurable:!1}),re},Y=Ce("addListener"),he=Ce("removeListener"),ue=(U,G)=>{const re=Y({eventName:U},G),Q=async()=>{const de=await re;he({eventName:U,callbackId:de},G)},se=new Promise(de=>re.then(()=>de({remove:Q})));return se.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Q()},se},Re=new Proxy({},{get(U,G){switch(G){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return z?ue:Y;case"removeListener":return he;default:return Ce(G)}}});return g[I]=Re,M.set(I,{name:I,proxy:Re,platforms:new Set([...Object.keys(A),...z?[L]:[]])}),Re},ne=((l=p==null?void 0:p.currentPlatform)===null||l===void 0?void 0:l.registerPlugin)||K;return h.convertFileSrc||(h.convertFileSrc=I=>I),h.getPlatform=w,h.handleError=B,h.isNativePlatform=S,h.isPluginAvailable=C,h.pluginMethodNoop=H,h.registerPlugin=ne,h.Exception=yg,h.DEBUG=!!h.DEBUG,h.isLoggingEnabled=!!h.isLoggingEnabled,h.platform=h.getPlatform(),h.isNative=h.isNativePlatform(),h},Yj=n=>n.Capacitor=Wj(n),bu=Yj(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),FS=bu.registerPlugin;bu.Plugins;class qS{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a);const l=async()=>this.removeListener(e,t),u=Promise.resolve({remove:l});return Object.defineProperty(u,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await l()}}),u}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const s=this.listeners[e];s&&s.forEach(a=>a(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:s=>{this.notifyListeners(t,s)}}}unimplemented(e="not implemented"){return new bu.Exception(e,ml.Unimplemented)}unavailable(e="not available"){return new bu.Exception(e,ml.Unavailable)}async removeListener(e,t){const s=this.listeners[e];if(!s)return;const a=s.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const Zw=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Jw=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Xj extends qS{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[a,l]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=Jw(a).trim(),l=Jw(l).trim(),t[a]=l}),t}async setCookie(e){try{const t=Zw(e.key),s=Zw(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,l=(e.path||"/").replace("path=",""),u=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${s||""}${a}; path=${l}; ${u};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}FS("CapacitorCookies",{web:()=>new Xj});const Zj=async n=>new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{const a=s.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},s.onerror=a=>t(a),s.readAsDataURL(n)}),Jj=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(a=>a.toLocaleLowerCase()).reduce((a,l,u)=>(a[l]=n[e[u]],a),{})},eM=(n,e=!0)=>n?Object.entries(n).reduce((s,a)=>{const[l,u]=a;let h,g;return Array.isArray(u)?(g="",u.forEach(p=>{h=e?encodeURIComponent(p):p,g+=`${l}=${h}&`}),g.slice(0,-1)):(h=e?encodeURIComponent(u):u,g=`${l}=${h}`),`${s}&${g}`},"").substr(1):null,tM=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),a=Jj(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(a.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[u,h]of Object.entries(n.data||{}))l.set(u,h);t.body=l.toString()}else if(a.includes("multipart/form-data")||n.data instanceof FormData){const l=new FormData;if(n.data instanceof FormData)n.data.forEach((h,g)=>{l.append(g,h)});else for(const h of Object.keys(n.data))l.append(h,n.data[h]);t.body=l;const u=new Headers(t.headers);u.delete("content-type"),t.headers=u}else(a.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class nM extends qS{async request(e){const t=tM(e,e.webFetchExtra),s=eM(e.params,e.shouldEncodeUrlParams),a=s?`${e.url}?${s}`:e.url,l=await fetch(a,t),u=l.headers.get("content-type")||"";let{responseType:h="text"}=l.ok?e:{};u.includes("application/json")&&(h="json");let g,p;switch(h){case"arraybuffer":case"blob":p=await l.blob(),g=await Zj(p);break;case"json":g=await l.json();break;case"document":case"text":default:g=await l.text()}const v={};return l.headers.forEach((w,_)=>{v[_]=w}),{data:g,headers:v,status:l.status,url:l.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}FS("CapacitorHttp",{web:()=>new nM});const rM={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,...bu.isNativePlatform()?{}:{}},HS=yE(rM),Le=RS(HS),Zo=Uk(HS),Pv=new es;Pv.setCustomParameters({prompt:"select_account"});Pv.addScope("https://www.googleapis.com/auth/spreadsheets.readonly");const GS=new es;GS.addScope("email");GS.addScope("profile");const Yc={CUSTOMER:"customer",WAITER:"waiter",ADMIN:"admin"},sM=async(n,e,t,s=Yc.CUSTOMER)=>{try{console.log("Starting account creation for:",n);const l=(await qE(Zo,n,e)).user;console.log("User created with UID:",l.uid);try{console.log("Updating profile with display name:",t),await TD(l,{displayName:t}),console.log("Profile updated successfully")}catch(u){console.error("Error updating profile:",u)}try{console.log("Sending email verification..."),await HE(l,{url:`${window.location.origin}/restaurant`,handleCodeInApp:!0}),console.log("Verification email sent successfully")}catch(u){console.error("Error sending verification email:",u)}try{console.log("Creating user profile in Firestore..."),await $S(l,s,!1,t),console.log("User profile created in Firestore")}catch(u){console.error("Error creating user profile in Firestore:",u)}return{success:!0,user:{uid:l.uid,email:l.email,emailVerified:l.emailVerified,displayName:t,photoURL:l.photoURL,role:s},message:"Account created successfully! "+(l.emailVerified?"Your email has been verified.":"Please check your email to verify your account. If you don't see it, please check your spam folder.")}}catch(a){return console.error("Account creation error:",a),{success:!1,error:a.message}}},$S=async(n,e,t=!1,s=null)=>{try{const a=Tn(Le,"users",n.uid),l=await Wa(a),u={uid:n.uid,email:n.email,displayName:s||n.displayName||(t?"Anonymous User":"User"),photoURL:n.photoURL,role:e,isAnonymous:t,lastLoginAt:Sn(),updatedAt:Sn()};return l.exists()?await mf(a,u,{merge:!0}):(u.createdAt=Sn(),await mf(a,u)),u}catch(a){throw console.error("Error creating user profile:",a),a}},KS=async n=>{try{console.log("Getting user profile for UID:",n);const e=Tn(Le,"users",n),t=await Wa(e);if(t.exists()){const s=t.data();return console.log("Retrieved user data:",{...s,uid:t.id}),{...s,uid:t.id}}else return console.log("No user profile found for UID:",n),null}catch(e){return console.error("Error getting user profile:",e),null}},QS=T.createContext();function Bu(){return T.useContext(QS)}function iM({children:n}){const[e,t]=T.useState(null),[s,a]=T.useState(!0),l=async w=>{if(!w)return t(null),a(!1),null;try{const _=await KS(w.uid),S={uid:w.uid,email:w.email,emailVerified:w.emailVerified,displayName:w.displayName||(_==null?void 0:_.displayName),photoURL:w.photoURL,role:(_==null?void 0:_.role)||Yc.CUSTOMER,isAdmin:(_==null?void 0:_.role)===Yc.ADMIN,requiresVerification:!w.emailVerified&&(_==null?void 0:_.role)===Yc.ADMIN};return t(S),S}catch(_){console.error("Error updating user profile:",_);const S={uid:w.uid,email:w.email,displayName:w.displayName,photoURL:w.photoURL,role:Yc.CUSTOMER,isAdmin:!1};return t(S),S}finally{a(!1)}};T.useEffect(()=>{console.log("Setting up auth state listener...");const w=RD(Zo,async _=>{if(console.log("Auth state changed. User:",_?_.email:"No user"),_){console.log("User found, updating profile...");try{await l(_),console.log("User profile updated:",e)}catch(S){console.error("Error updating user profile:",S)}}else console.log("No user, resetting state"),t(null),a(!1)});return()=>{console.log("Cleaning up auth state listener"),w()}},[]);const u=(w,_)=>qE(Zo,w,_),h=(w,_)=>xD(Zo,w,_),g=()=>QD(Zo,Pv),p=()=>ND(Zo),v={currentUser:e,isAuthenticated:!!e,isAdmin:(e==null?void 0:e.isAdmin)||!1,loading:s,signup:u,login:h,loginWithGoogle:g,logout:p,updateUserProfile:l};return m.jsx(QS.Provider,{value:v,children:!s&&n})}/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),ex=n=>{const e=oM(n);return e.charAt(0).toUpperCase()+e.slice(1)},WS=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),lM=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=T.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:u,...h},g)=>T.createElement("svg",{ref:g,...cM,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:WS("lucide",a),...!l&&!lM(h)&&{"aria-hidden":"true"},...h},[...u.map(([p,v])=>T.createElement(p,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(n,e)=>{const t=T.forwardRef(({className:s,...a},l)=>T.createElement(uM,{ref:l,iconNode:e,className:WS(`lucide-${aM(ex(n))}`,`lucide-${n}`,s),...a}));return t.displayName=ex(n),t};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],py=Je("arrow-left",dM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],fM=Je("bug",hM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],pM=Je("chart-column",mM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],yM=Je("check",gM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ui=Je("circle-alert",vM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_h=Je("circle-check-big",bM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],gy=Je("clipboard-list",_M);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],pf=Je("clock",wM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],EM=Je("code",xM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],SM=Je("copy",TM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],RM=Je("credit-card",AM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]],CM=Je("delete",NM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],YS=Je("dollar-sign",IM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],kM=Je("file-text",DM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],PM=Je("globe",OM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],MM=Je("info",jM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Va=Je("loader-circle",VM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],UM=Je("log-out",LM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rl=Je("plus",zM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],jv=Je("qr-code",BM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],qM=Je("receipt",FM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Kf=Je("refresh-cw",HM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"9",y2:"21",key:"1ib60c"}],["line",{x1:"15",x2:"15",y1:"9",y2:"21",key:"1n26ft"}]],$M=Je("sheet",GM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],QM=Je("shopping-bag",KM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],YM=Je("smartphone",WM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],tx=Je("square-pen",XM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],XS=Je("trash-2",ZM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],yy=Je("user",JM);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],au=Je("users",e6);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],ZS=Je("utensils",t6);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],r6=Je("wifi-off",n6);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],i6=Je("wifi",s6);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],JS=Je("x",a6),o6="modulepreload",l6=function(n){return"/"+n},nx={},c6=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let u=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));a=u(t.map(p=>{if(p=l6(p),p in nx)return;nx[p]=!0;const v=p.endsWith(".css"),w=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${w}`))return;const _=document.createElement("link");if(_.rel=v?"stylesheet":o6,v||(_.as="script"),_.crossOrigin="",_.href=p,g&&_.setAttribute("nonce",g),document.head.appendChild(_),v)return new Promise((S,R)=>{_.addEventListener("load",S),_.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})},u6={create:n=>({name:n.name||"",pin:n.pin||"",restaurantId:n.restaurantId||"",role:"waiter",createdAt:null,updatedAt:null}),validate:n=>{const e=[];return n.name||e.push("Waiter name is required"),(!n.pin||!/^\d{4}$/.test(n.pin))&&e.push("A 4-digit PIN is required"),n.restaurantId||e.push("Restaurant ID is required"),{isValid:e.length===0,errors:e}}},vy={CATEGORIES:{FOOD:"food",DRINKS:"drinks",APPETIZERS:"appetizers",DESSERTS:"desserts",SPECIALS:"specials"},create:n=>({name:n.name||"",description:n.description||"",price:parseFloat(n.price)||0,category:n.category||vy.CATEGORIES.FOOD,available:n.available!==!1,imageUrl:n.imageUrl||"",allergens:n.allergens||[],preparationTime:parseInt(n.preparationTime)||0,restaurantId:n.restaurantId||"",createdAt:null,updatedAt:null}),validate:n=>{const e=[];return n.name||e.push("Item name is required"),n.price<=0&&e.push("Price must be greater than 0"),Object.values(vy.CATEGORIES).includes(n.category)||e.push("Invalid category"),n.restaurantId||e.push("Restaurant ID is required"),{isValid:e.length===0,errors:e}}},_u="tabs",d6="orders",Qf="restaurants",Qi="waiters",Mv="menuItems",h6=(n,e)=>{if(!n)return()=>{};const t=fn(vt(Le,_u),bt("restaurantId","==",n),Ki("createdAt","desc"));return yr(t,s=>{const a=[];s.forEach(l=>{a.push({id:l.id,...l.data()})}),e(a)})},f6=async n=>{const e=Tn(Le,Qf,n.restaurantId),t=vt(Le,_u),s=n.createdBy==="customer";if(!s&&(!n.waiterName||!n.waiterId))throw new Error("Waiter assignment is required for manual tab creation.");try{const a=await LS(Le,async h=>{var C;const g=await h.get(e);if(!g.exists())throw new Error("Restaurant not found!");const p=g.data();let v=p.dailyTabCounter||0;const w=(C=p.lastTabReset)==null?void 0:C.toDate(),_=new Date;!w||w.toDateString()!==_.toDateString()?v=1:v++;const S=Tn(t),R=s?"inactive":"active";return h.set(S,{...n,status:R,total:0,orderCount:0,createdAt:Sn(),updatedAt:Sn(),referenceNumber:String(v),waiterName:s?"":n.waiterName||"",waiterId:s?"":n.waiterId||""}),h.update(e,{dailyTabCounter:v,lastTabReset:_}),{id:S.id}}),l=Tn(Le,_u,a.id),u=await Wa(l);if(u.exists())return{id:u.id,...u.data()};throw new Error("Could not retrieve newly created tab after transaction.")}catch(a){throw console.error("Error creating tab in transaction:",a),a}},m6=(n,e)=>{const t=Tn(Le,_u,n);return yr(t,s=>{s.exists()&&e({id:s.id,...s.data()})})},p6=(n,e)=>{const t=fn(vt(Le,d6),bt("tabId","==",n),Ki("createdAt","asc"));return yr(t,s=>{const a=s.docs.map(l=>({id:l.id,...l.data()}));e(a)})},rx=(n,e)=>{if(!n)return console.error("subscribeToActiveTabs: restaurantId is required"),e([]),()=>{};console.log(`[subscribeToActiveTabs] Setting up listener for active tabs in restaurant: ${n}`);const t=fn(vt(Le,_u),bt("restaurantId","==",n),bt("status","==","active"),Ki("createdAt","desc"));return yr(t,s=>{console.log(`[subscribeToActiveTabs] Received ${s.size} active tabs`);const a=s.docs.map(l=>({id:l.id,...l.data()}));e(a)},s=>{console.error("[subscribeToActiveTabs] Error:",s),console.error("Error in subscribeToActiveTabs:",s),e([])})},g6=async n=>{try{const e={...n,createdAt:Sn(),updatedAt:Sn(),isActive:!0,dailyTabCounter:0,lastTabReset:Sn()};return{id:(await fl(vt(Le,Qf),e)).id,...e}}catch(e){throw console.error("Error creating restaurant:",e),new Error("Failed to create restaurant")}},by=async n=>{try{const e=fn(vt(Le,Qf),bt("ownerId","==",n),Dv(1)),t=await $s(e);if(t.empty)return null;const s=t.docs[0];return{id:s.id,...s.data()}}catch(e){throw console.error("Error getting restaurant by owner:",e),e}},eA=async n=>{try{const e=Tn(Le,Qf,n),t=await Wa(e);return t.exists()?{id:t.id,...t.data()}:null}catch(e){throw console.error("Error getting restaurant by ID:",e),e}},sx=async()=>{try{console.log("Testing Firestore connection...");const n=Tn(Le,"connectionTest","test");return await mf(n,{timestamp:new Date().toISOString()},{merge:!0}),console.log("Firestore connection successful"),!0}catch(n){return console.error("Firestore connection test failed:",n),!1}},tA=async()=>{try{console.log("[checkWaitersCollection] Fetching all waiters...");const n=vt(Le,Qi),e=await $s(n),t=[];return e.forEach(s=>{console.log(`[checkWaitersCollection] Found waiter ${s.id}:`,s.data()),t.push({id:s.id,...s.data()})}),console.log(`[checkWaitersCollection] Returning ${t.length} waiters`),t}catch(n){throw console.error("[checkWaitersCollection] Error:",n),n}},y6=async(n,e)=>{try{if(!n||e===void 0||e===null)return console.error("Missing required parameters for getWaiterByPin"),null;const t=e.toString();console.log(`Looking for waiter with PIN: ${t} (type: ${typeof t})`);const s=fn(vt(Le,Qi),bt("restaurantId","==",n),bt("pin","==",t),Dv(1)),a=await $s(s);if(a.empty){console.log("No waiter found with the provided PIN");const u=fn(vt(Le,Qi),bt("restaurantId","==",n)),h=await $s(u);return console.log("All waiters in this restaurant:"),h.forEach(g=>{console.log(`- ${g.data().name}: PIN='${g.data().pin}' (type: ${typeof g.data().pin})`)}),null}const l=a.docs[0];return{id:l.id,...l.data()}}catch(t){throw console.error("Error getting waiter by PIN:",t),t}},ix=async n=>{try{if(!n)return console.error("No waiter ID provided"),null;const e=Tn(Le,Qi,n),t=await Wa(e);return t.exists()?{id:t.id,...t.data()}:(console.log("No waiter found with ID:",n),null)}catch(e){throw console.error("Error getting waiter by ID:",e),e}},v6=async n=>{if(console.log(`[getWaiters] Starting to fetch waiters for restaurant: ${n}`),!n)throw console.error("[getWaiters] No restaurantId provided"),new Error("Restaurant ID is required to fetch waiters");try{console.log(`[getWaiters] Querying waiters for restaurant: ${n}`);const e=fn(vt(Le,Qi),bt("restaurantId","==",n),Ki("name")),t=await $s(e);return console.log(`[getWaiters] Found ${t.docs.length} waiters for restaurant ${n}`),t.docs.map(a=>{const l=a.data();return console.log(`[getWaiters] Waiter ${a.id}:`,l),{id:a.id,...l}})}catch(e){console.error("[getWaiters] Error in main query:",e);try{console.log("[getWaiters] Falling back to client-side filtering");const t=await tA();console.log(`[getWaiters] Found ${t.length} total waiters in collection`);const s=t.filter(a=>a.restaurantId===n);return console.log(`[getWaiters] Filtered to ${s.length} waiters for restaurant ${n}`),s}catch(t){throw console.error("[getWaiters] Error in fallback query:",t),new Error(`Failed to load waiters: ${t.message}`)}}},b6=async n=>{try{const e={...u6.create(n),createdAt:Sn(),updatedAt:Sn()};return{id:(await fl(vt(Le,Qi),e)).id,...e}}catch(e){throw console.error("Error creating waiter:",e),e}},_6=(n,e)=>{console.log("subscribeToWaiters called with restaurantId:",n);try{const t=fn(vt(Le,Qi),bt("restaurantId","==",n),Ki("name","asc"));return console.log("Query created, setting up snapshot listener..."),yr(t,s=>{console.log("Received waiters snapshot with",s.size,"documents");const a=s.docs.map(l=>({id:l.id,...l.data()}));console.log("Mapped waiters:",a),e(a)},s=>{console.error("Error in waiters snapshot listener:",s),e([])})}catch(t){throw console.error("Error in subscribeToWaiters:",t),e([]),t}},w6=async n=>{try{await Ov(Tn(Le,Qi,n))}catch(e){throw console.error("Error deleting waiter:",e),e}},x6=async n=>{try{console.log("Creating menu item with data:",n);const e={...vy.create(n),createdAt:Sn(),updatedAt:Sn()};console.log("Processed menu item data:",e);const t=await fl(vt(Le,Mv),e);return console.log("Menu item created with ID:",t.id),{id:t.id,...e}}catch(e){throw console.error("Error creating menu item:",e),e}},E6=async(n,e)=>{try{console.log("Updating menu item:",n,"with data:",e);const t=Tn(Le,Mv,n),s={...e,updatedAt:Sn()};console.log("Final update data with timestamp:",s),await $f(t,s),console.log("Menu item updated successfully");const a=await Wa(t);return a.exists()?{id:a.id,...a.data()}:null}catch(t){throw console.error("Error in updateMenuItem:",{error:t,itemId:n,itemData:e,errorMessage:t.message,errorStack:t.stack}),t}},T6=async n=>{try{await Ov(Tn(Le,Mv,n))}catch(e){throw console.error("Error deleting menu item:",e),e}};function ax(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function S6(...n){return e=>{let t=!1;const s=n.map(a=>{const l=ax(a,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let a=0;a<s.length;a++){const l=s[a];typeof l=="function"?l():ax(n[a],null)}}}}function nr(...n){return T.useCallback(S6(...n),n)}function wu(n){const e=A6(n),t=T.forwardRef((s,a)=>{const{children:l,...u}=s,h=T.Children.toArray(l),g=h.find(N6);if(g){const p=g.props.children,v=h.map(w=>w===g?T.Children.count(p)>1?T.Children.only(null):T.isValidElement(p)?p.props.children:null:w);return m.jsx(e,{...u,ref:a,children:T.isValidElement(p)?T.cloneElement(p,void 0,v):null})}return m.jsx(e,{...u,ref:a,children:l})});return t.displayName=`${n}.Slot`,t}var nA=wu("Slot");function A6(n){const e=T.forwardRef((t,s)=>{const{children:a,...l}=t,u=T.isValidElement(a)?I6(a):void 0,h=nr(u,s);if(T.isValidElement(a)){const g=C6(l,a.props);return a.type!==T.Fragment&&(g.ref=h),T.cloneElement(a,g)}return T.Children.count(a)>1?T.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var R6=Symbol("radix.slottable");function N6(n){return T.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===R6}function C6(n,e){const t={...e};for(const s in e){const a=n[s],l=e[s];/^on[A-Z]/.test(s)?a&&l?t[s]=(...h)=>{const g=l(...h);return a(...h),g}:a&&(t[s]=a):s==="style"?t[s]={...a,...l}:s==="className"&&(t[s]=[a,l].filter(Boolean).join(" "))}return{...n,...t}}function I6(n){var s,a;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(a=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:a.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function rA(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=rA(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function sA(){for(var n,e,t=0,s="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=rA(n))&&(s&&(s+=" "),s+=e);return s}const ox=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,lx=sA,Vv=(n,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return lx(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:a,defaultVariants:l}=e,u=Object.keys(a).map(p=>{const v=t==null?void 0:t[p],w=l==null?void 0:l[p];if(v===null)return null;const _=ox(v)||ox(w);return a[p][_]}),h=t&&Object.entries(t).reduce((p,v)=>{let[w,_]=v;return _===void 0||(p[w]=_),p},{}),g=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((p,v)=>{let{class:w,className:_,...S}=v;return Object.entries(S).every(R=>{let[C,k]=R;return Array.isArray(k)?k.includes({...l,...h}[C]):{...l,...h}[C]===k})?[...p,w,_]:p},[]);return lx(n,u,g,t==null?void 0:t.class,t==null?void 0:t.className)},Lv="-",D6=n=>{const e=O6(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:u=>{const h=u.split(Lv);return h[0]===""&&h.length!==1&&h.shift(),iA(h,e)||k6(u)},getConflictingClassGroupIds:(u,h)=>{const g=t[u]||[];return h&&s[u]?[...g,...s[u]]:g}}},iA=(n,e)=>{var u;if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),a=s?iA(n.slice(1),s):void 0;if(a)return a;if(e.validators.length===0)return;const l=n.join(Lv);return(u=e.validators.find(({validator:h})=>h(l)))==null?void 0:u.classGroupId},cx=/^\[(.+)\]$/,k6=n=>{if(cx.test(n)){const e=cx.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},O6=n=>{const{theme:e,classGroups:t}=n,s={nextPart:new Map,validators:[]};for(const a in t)_y(t[a],s,a,e);return s},_y=(n,e,t,s)=>{n.forEach(a=>{if(typeof a=="string"){const l=a===""?e:ux(e,a);l.classGroupId=t;return}if(typeof a=="function"){if(P6(a)){_y(a(s),e,t,s);return}e.validators.push({validator:a,classGroupId:t});return}Object.entries(a).forEach(([l,u])=>{_y(u,ux(e,l),t,s)})})},ux=(n,e)=>{let t=n;return e.split(Lv).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},P6=n=>n.isThemeGetter,j6=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const a=(l,u)=>{t.set(l,u),e++,e>n&&(e=0,s=t,t=new Map)};return{get(l){let u=t.get(l);if(u!==void 0)return u;if((u=s.get(l))!==void 0)return a(l,u),u},set(l,u){t.has(l)?t.set(l,u):a(l,u)}}},wy="!",xy=":",M6=xy.length,V6=n=>{const{prefix:e,experimentalParseClassName:t}=n;let s=a=>{const l=[];let u=0,h=0,g=0,p;for(let R=0;R<a.length;R++){let C=a[R];if(u===0&&h===0){if(C===xy){l.push(a.slice(g,R)),g=R+M6;continue}if(C==="/"){p=R;continue}}C==="["?u++:C==="]"?u--:C==="("?h++:C===")"&&h--}const v=l.length===0?a:a.substring(g),w=L6(v),_=w!==v,S=p&&p>g?p-g:void 0;return{modifiers:l,hasImportantModifier:_,baseClassName:w,maybePostfixModifierPosition:S}};if(e){const a=e+xy,l=s;s=u=>u.startsWith(a)?l(u.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(t){const a=s;s=l=>t({className:l,parseClassName:a})}return s},L6=n=>n.endsWith(wy)?n.substring(0,n.length-1):n.startsWith(wy)?n.substring(1):n,U6=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const a=[];let l=[];return s.forEach(u=>{u[0]==="["||e[u]?(a.push(...l.sort(),u),l=[]):l.push(u)}),a.push(...l.sort()),a}},z6=n=>({cache:j6(n.cacheSize),parseClassName:V6(n),sortModifiers:U6(n),...D6(n)}),B6=/\s+/,F6=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:l}=e,u=[],h=n.trim().split(B6);let g="";for(let p=h.length-1;p>=0;p-=1){const v=h[p],{isExternal:w,modifiers:_,hasImportantModifier:S,baseClassName:R,maybePostfixModifierPosition:C}=t(v);if(w){g=v+(g.length>0?" "+g:g);continue}let k=!!C,P=s(k?R.substring(0,C):R);if(!P){if(!k){g=v+(g.length>0?" "+g:g);continue}if(P=s(R),!P){g=v+(g.length>0?" "+g:g);continue}k=!1}const B=l(_).join(":"),H=S?B+wy:B,M=H+P;if(u.includes(M))continue;u.push(M);const K=a(P,k);for(let ne=0;ne<K.length;++ne){const I=K[ne];u.push(H+I)}g=v+(g.length>0?" "+g:g)}return g};function q6(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=aA(e))&&(s&&(s+=" "),s+=t);return s}const aA=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=aA(n[s]))&&(t&&(t+=" "),t+=e);return t};function H6(n,...e){let t,s,a,l=u;function u(g){const p=e.reduce((v,w)=>w(v),n());return t=z6(p),s=t.cache.get,a=t.cache.set,l=h,h(g)}function h(g){const p=s(g);if(p)return p;const v=F6(g,t);return a(g,v),v}return function(){return l(q6.apply(null,arguments))}}const Zt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},oA=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,lA=/^\((?:(\w[\w-]*):)?(.+)\)$/i,G6=/^\d+\/\d+$/,$6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,K6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Q6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,W6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Y6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qo=n=>G6.test(n),Be=n=>!!n&&!Number.isNaN(Number(n)),Ai=n=>!!n&&Number.isInteger(Number(n)),vg=n=>n.endsWith("%")&&Be(n.slice(0,-1)),Os=n=>$6.test(n),X6=()=>!0,Z6=n=>K6.test(n)&&!Q6.test(n),cA=()=>!1,J6=n=>W6.test(n),e3=n=>Y6.test(n),t3=n=>!_e(n)&&!we(n),n3=n=>Dl(n,hA,cA),_e=n=>oA.test(n),ka=n=>Dl(n,fA,Z6),bg=n=>Dl(n,o3,Be),dx=n=>Dl(n,uA,cA),r3=n=>Dl(n,dA,e3),wh=n=>Dl(n,mA,J6),we=n=>lA.test(n),Hc=n=>kl(n,fA),s3=n=>kl(n,l3),hx=n=>kl(n,uA),i3=n=>kl(n,hA),a3=n=>kl(n,dA),xh=n=>kl(n,mA,!0),Dl=(n,e,t)=>{const s=oA.exec(n);return s?s[1]?e(s[1]):t(s[2]):!1},kl=(n,e,t=!1)=>{const s=lA.exec(n);return s?s[1]?e(s[1]):t:!1},uA=n=>n==="position"||n==="percentage",dA=n=>n==="image"||n==="url",hA=n=>n==="length"||n==="size"||n==="bg-size",fA=n=>n==="length",o3=n=>n==="number",l3=n=>n==="family-name",mA=n=>n==="shadow",c3=()=>{const n=Zt("color"),e=Zt("font"),t=Zt("text"),s=Zt("font-weight"),a=Zt("tracking"),l=Zt("leading"),u=Zt("breakpoint"),h=Zt("container"),g=Zt("spacing"),p=Zt("radius"),v=Zt("shadow"),w=Zt("inset-shadow"),_=Zt("text-shadow"),S=Zt("drop-shadow"),R=Zt("blur"),C=Zt("perspective"),k=Zt("aspect"),P=Zt("ease"),B=Zt("animate"),H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],K=()=>[...M(),we,_e],ne=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],A=()=>[we,_e,g],O=()=>[qo,"full","auto",...A()],L=()=>[Ai,"none","subgrid",we,_e],z=()=>["auto",{span:["full",Ai,we,_e]},Ai,we,_e],F=()=>[Ai,"auto",we,_e],j=()=>["auto","min","max","fr",we,_e],Me=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ce=()=>["start","end","center","stretch","center-safe","end-safe"],Y=()=>["auto",...A()],he=()=>[qo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],ue=()=>[n,we,_e],Re=()=>[...M(),hx,dx,{position:[we,_e]}],U=()=>["no-repeat",{repeat:["","x","y","space","round"]}],G=()=>["auto","cover","contain",i3,n3,{size:[we,_e]}],re=()=>[vg,Hc,ka],Q=()=>["","none","full",p,we,_e],se=()=>["",Be,Hc,ka],de=()=>["solid","dashed","dotted","double"],fe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Te=()=>[Be,vg,hx,dx],Ue=()=>["","none",R,we,_e],Dt=()=>["none",Be,we,_e],rt=()=>["none",Be,we,_e],xe=()=>[Be,we,_e],ye=()=>[qo,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Os],breakpoint:[Os],color:[X6],container:[Os],"drop-shadow":[Os],ease:["in","out","in-out"],font:[t3],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Os],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Os],shadow:[Os],spacing:["px",Be],text:[Os],"text-shadow":[Os],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",qo,_e,we,k]}],container:["container"],columns:[{columns:[Be,_e,we,h]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:K()}],overflow:[{overflow:ne()}],"overflow-x":[{"overflow-x":ne()}],"overflow-y":[{"overflow-y":ne()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[Ai,"auto",we,_e]}],basis:[{basis:[qo,"full","auto",h,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Be,qo,"auto","initial","none",_e]}],grow:[{grow:["",Be,we,_e]}],shrink:[{shrink:["",Be,we,_e]}],order:[{order:[Ai,"first","last","none",we,_e]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:z()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:z()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":j()}],"auto-rows":[{"auto-rows":j()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...Me(),"normal"]}],"justify-items":[{"justify-items":[...Ce(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ce()]}],"align-content":[{content:["normal",...Me()]}],"align-items":[{items:[...Ce(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ce(),{baseline:["","last"]}]}],"place-content":[{"place-content":Me()}],"place-items":[{"place-items":[...Ce(),"baseline"]}],"place-self":[{"place-self":["auto",...Ce()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:Y()}],mx:[{mx:Y()}],my:[{my:Y()}],ms:[{ms:Y()}],me:[{me:Y()}],mt:[{mt:Y()}],mr:[{mr:Y()}],mb:[{mb:Y()}],ml:[{ml:Y()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:he()}],w:[{w:[h,"screen",...he()]}],"min-w":[{"min-w":[h,"screen","none",...he()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[u]},...he()]}],h:[{h:["screen","lh",...he()]}],"min-h":[{"min-h":["screen","lh","none",...he()]}],"max-h":[{"max-h":["screen","lh",...he()]}],"font-size":[{text:["base",t,Hc,ka]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,we,bg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",vg,_e]}],"font-family":[{font:[s3,_e,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,we,_e]}],"line-clamp":[{"line-clamp":[Be,"none",we,bg]}],leading:[{leading:[l,...A()]}],"list-image":[{"list-image":["none",we,_e]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",we,_e]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ue()}],"text-color":[{text:ue()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...de(),"wavy"]}],"text-decoration-thickness":[{decoration:[Be,"from-font","auto",we,ka]}],"text-decoration-color":[{decoration:ue()}],"underline-offset":[{"underline-offset":[Be,"auto",we,_e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",we,_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",we,_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Re()}],"bg-repeat":[{bg:U()}],"bg-size":[{bg:G()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ai,we,_e],radial:["",we,_e],conic:[Ai,we,_e]},a3,r3]}],"bg-color":[{bg:ue()}],"gradient-from-pos":[{from:re()}],"gradient-via-pos":[{via:re()}],"gradient-to-pos":[{to:re()}],"gradient-from":[{from:ue()}],"gradient-via":[{via:ue()}],"gradient-to":[{to:ue()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:se()}],"border-w-x":[{"border-x":se()}],"border-w-y":[{"border-y":se()}],"border-w-s":[{"border-s":se()}],"border-w-e":[{"border-e":se()}],"border-w-t":[{"border-t":se()}],"border-w-r":[{"border-r":se()}],"border-w-b":[{"border-b":se()}],"border-w-l":[{"border-l":se()}],"divide-x":[{"divide-x":se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...de(),"hidden","none"]}],"divide-style":[{divide:[...de(),"hidden","none"]}],"border-color":[{border:ue()}],"border-color-x":[{"border-x":ue()}],"border-color-y":[{"border-y":ue()}],"border-color-s":[{"border-s":ue()}],"border-color-e":[{"border-e":ue()}],"border-color-t":[{"border-t":ue()}],"border-color-r":[{"border-r":ue()}],"border-color-b":[{"border-b":ue()}],"border-color-l":[{"border-l":ue()}],"divide-color":[{divide:ue()}],"outline-style":[{outline:[...de(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Be,we,_e]}],"outline-w":[{outline:["",Be,Hc,ka]}],"outline-color":[{outline:ue()}],shadow:[{shadow:["","none",v,xh,wh]}],"shadow-color":[{shadow:ue()}],"inset-shadow":[{"inset-shadow":["none",w,xh,wh]}],"inset-shadow-color":[{"inset-shadow":ue()}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ue()}],"ring-offset-w":[{"ring-offset":[Be,ka]}],"ring-offset-color":[{"ring-offset":ue()}],"inset-ring-w":[{"inset-ring":se()}],"inset-ring-color":[{"inset-ring":ue()}],"text-shadow":[{"text-shadow":["none",_,xh,wh]}],"text-shadow-color":[{"text-shadow":ue()}],opacity:[{opacity:[Be,we,_e]}],"mix-blend":[{"mix-blend":[...fe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":fe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Be]}],"mask-image-linear-from-pos":[{"mask-linear-from":Te()}],"mask-image-linear-to-pos":[{"mask-linear-to":Te()}],"mask-image-linear-from-color":[{"mask-linear-from":ue()}],"mask-image-linear-to-color":[{"mask-linear-to":ue()}],"mask-image-t-from-pos":[{"mask-t-from":Te()}],"mask-image-t-to-pos":[{"mask-t-to":Te()}],"mask-image-t-from-color":[{"mask-t-from":ue()}],"mask-image-t-to-color":[{"mask-t-to":ue()}],"mask-image-r-from-pos":[{"mask-r-from":Te()}],"mask-image-r-to-pos":[{"mask-r-to":Te()}],"mask-image-r-from-color":[{"mask-r-from":ue()}],"mask-image-r-to-color":[{"mask-r-to":ue()}],"mask-image-b-from-pos":[{"mask-b-from":Te()}],"mask-image-b-to-pos":[{"mask-b-to":Te()}],"mask-image-b-from-color":[{"mask-b-from":ue()}],"mask-image-b-to-color":[{"mask-b-to":ue()}],"mask-image-l-from-pos":[{"mask-l-from":Te()}],"mask-image-l-to-pos":[{"mask-l-to":Te()}],"mask-image-l-from-color":[{"mask-l-from":ue()}],"mask-image-l-to-color":[{"mask-l-to":ue()}],"mask-image-x-from-pos":[{"mask-x-from":Te()}],"mask-image-x-to-pos":[{"mask-x-to":Te()}],"mask-image-x-from-color":[{"mask-x-from":ue()}],"mask-image-x-to-color":[{"mask-x-to":ue()}],"mask-image-y-from-pos":[{"mask-y-from":Te()}],"mask-image-y-to-pos":[{"mask-y-to":Te()}],"mask-image-y-from-color":[{"mask-y-from":ue()}],"mask-image-y-to-color":[{"mask-y-to":ue()}],"mask-image-radial":[{"mask-radial":[we,_e]}],"mask-image-radial-from-pos":[{"mask-radial-from":Te()}],"mask-image-radial-to-pos":[{"mask-radial-to":Te()}],"mask-image-radial-from-color":[{"mask-radial-from":ue()}],"mask-image-radial-to-color":[{"mask-radial-to":ue()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[Be]}],"mask-image-conic-from-pos":[{"mask-conic-from":Te()}],"mask-image-conic-to-pos":[{"mask-conic-to":Te()}],"mask-image-conic-from-color":[{"mask-conic-from":ue()}],"mask-image-conic-to-color":[{"mask-conic-to":ue()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Re()}],"mask-repeat":[{mask:U()}],"mask-size":[{mask:G()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",we,_e]}],filter:[{filter:["","none",we,_e]}],blur:[{blur:Ue()}],brightness:[{brightness:[Be,we,_e]}],contrast:[{contrast:[Be,we,_e]}],"drop-shadow":[{"drop-shadow":["","none",S,xh,wh]}],"drop-shadow-color":[{"drop-shadow":ue()}],grayscale:[{grayscale:["",Be,we,_e]}],"hue-rotate":[{"hue-rotate":[Be,we,_e]}],invert:[{invert:["",Be,we,_e]}],saturate:[{saturate:[Be,we,_e]}],sepia:[{sepia:["",Be,we,_e]}],"backdrop-filter":[{"backdrop-filter":["","none",we,_e]}],"backdrop-blur":[{"backdrop-blur":Ue()}],"backdrop-brightness":[{"backdrop-brightness":[Be,we,_e]}],"backdrop-contrast":[{"backdrop-contrast":[Be,we,_e]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Be,we,_e]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Be,we,_e]}],"backdrop-invert":[{"backdrop-invert":["",Be,we,_e]}],"backdrop-opacity":[{"backdrop-opacity":[Be,we,_e]}],"backdrop-saturate":[{"backdrop-saturate":[Be,we,_e]}],"backdrop-sepia":[{"backdrop-sepia":["",Be,we,_e]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",we,_e]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Be,"initial",we,_e]}],ease:[{ease:["linear","initial",P,we,_e]}],delay:[{delay:[Be,we,_e]}],animate:[{animate:["none",B,we,_e]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,we,_e]}],"perspective-origin":[{"perspective-origin":K()}],rotate:[{rotate:Dt()}],"rotate-x":[{"rotate-x":Dt()}],"rotate-y":[{"rotate-y":Dt()}],"rotate-z":[{"rotate-z":Dt()}],scale:[{scale:rt()}],"scale-x":[{"scale-x":rt()}],"scale-y":[{"scale-y":rt()}],"scale-z":[{"scale-z":rt()}],"scale-3d":["scale-3d"],skew:[{skew:xe()}],"skew-x":[{"skew-x":xe()}],"skew-y":[{"skew-y":xe()}],transform:[{transform:[we,_e,"","none","gpu","cpu"]}],"transform-origin":[{origin:K()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ye()}],"translate-x":[{"translate-x":ye()}],"translate-y":[{"translate-y":ye()}],"translate-z":[{"translate-z":ye()}],"translate-none":["translate-none"],accent:[{accent:ue()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ue()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",we,_e]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",we,_e]}],fill:[{fill:["none",...ue()]}],"stroke-w":[{stroke:[Be,Hc,ka,bg]}],stroke:[{stroke:["none",...ue()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},u3=H6(c3);function Rt(...n){return u3(sA(n))}const d3=Vv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Ee({className:n,variant:e,size:t,asChild:s=!1,...a}){const l=s?nA:"button";return m.jsx(l,{"data-slot":"button",className:Rt(d3({variant:e,size:t,className:n})),...a})}function tt({className:n,...e}){return m.jsx("div",{"data-slot":"card",className:Rt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",n),...e})}function un({className:n,...e}){return m.jsx("div",{"data-slot":"card-header",className:Rt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),...e})}function dn({className:n,...e}){return m.jsx("div",{"data-slot":"card-title",className:Rt("leading-none font-semibold",n),...e})}function xn({className:n,...e}){return m.jsx("div",{"data-slot":"card-description",className:Rt("text-muted-foreground text-sm",n),...e})}function pt({className:n,...e}){return m.jsx("div",{"data-slot":"card-content",className:Rt("px-6",n),...e})}const h3=Vv("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Xc({className:n,variant:e,asChild:t=!1,...s}){const a=t?nA:"span";return m.jsx(a,{"data-slot":"badge",className:Rt(h3({variant:e}),n),...s})}var f3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$t=f3.reduce((n,e)=>{const t=wu(`Primitive.${e}`),s=T.forwardRef((a,l)=>{const{asChild:u,...h}=a,g=u?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(g,{...h,ref:l})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function m3(n,e){n&&aE.flushSync(()=>n.dispatchEvent(e))}var p3="Separator",fx="horizontal",g3=["horizontal","vertical"],pA=T.forwardRef((n,e)=>{const{decorative:t,orientation:s=fx,...a}=n,l=y3(s)?s:fx,h=t?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return m.jsx($t.div,{"data-orientation":l,...h,...a,ref:e})});pA.displayName=p3;function y3(n){return g3.includes(n)}var v3=pA;function b3({className:n,orientation:e="horizontal",decorative:t=!0,...s}){return m.jsx(v3,{"data-slot":"separator-root",decorative:t,orientation:e,className:Rt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...s})}function _3(){const[n]=iE(),[e,t]=T.useState("loading"),[s,a]=T.useState(null),[l,u]=T.useState([]),[h,g]=T.useState(null),[p,v]=T.useState(""),[w,_]=T.useState(!1);return T.useEffect(()=>{const S=n.get("restaurantId"),R=sessionStorage.getItem(`tabId-${S}`);if(!S){t("scan");return}(async()=>{try{const k=await eA(S);if(!k){v("Restaurant not found. The QR code may be invalid."),t("error");return}g(k);let P=null;if(R){const{getDoc:H,doc:M}=await c6(async()=>{const{getDoc:ne,doc:I}=await Promise.resolve().then(()=>Gj);return{getDoc:ne,doc:I}},[]),K=await H(M(Le,"tabs",R));K.exists()&&(P={id:K.id,...K.data()})}if(P&&(P.status==="active"||P.status==="pending")){a(P),t("tab");return}const B=await f6({restaurantId:k.id,restaurantName:k.name});a(B),sessionStorage.setItem(`tabId-${S}`,B.id),t("tab")}catch(k){console.error(k),v("Failed to create a new tab. Please try again."),t("error")}})()},[n]),T.useEffect(()=>{if(!(s!=null&&s.id))return;const S=m6(s.id,a),R=p6(s.id,u);return()=>{S(),R()}},[s==null?void 0:s.id]),e==="loading"?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"Opening Your Tab..."})]})}):e==="error"?m.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:m.jsxs(tt,{className:"w-full max-w-sm text-center border-red-500",children:[m.jsx(un,{children:m.jsx(dn,{children:"Error"})}),m.jsxs(pt,{children:[m.jsx("p",{children:p}),m.jsx(Oi,{to:"/",children:m.jsx(Ee,{className:"w-full mt-4",children:"Go to Homepage"})})]})]})}):e==="scan"?m.jsx("div",{className:"min-h-screen bg-background p-4",children:m.jsxs("div",{className:"max-w-md mx-auto",children:[m.jsxs("div",{className:"flex items-center mb-6",children:[m.jsx(Oi,{to:"/",children:m.jsx(Ee,{variant:"ghost",size:"sm",className:"mr-2",children:m.jsx(py,{className:"w-4 h-4"})})}),m.jsx("h1",{className:"text-xl font-semibold",children:"Open a Tab"})]}),m.jsx(tt,{className:"text-center",children:m.jsxs(un,{children:[m.jsx(jv,{className:"w-24 h-24 text-primary mx-auto mb-4"}),m.jsx(dn,{children:"Scan a Restaurant's QR Code"}),m.jsx(xn,{children:"To open a tab, please scan the QR code provided by the restaurant."})]})})]})}):e==="tab"&&s?m.jsx("div",{className:"min-h-screen bg-background p-4",children:m.jsxs("div",{className:"max-w-md mx-auto",children:[m.jsxs("div",{className:"flex items-center mb-6",children:[m.jsx(Oi,{to:"/",children:m.jsx(Ee,{variant:"ghost",size:"sm",className:"mr-2",children:m.jsx(py,{className:"w-4 h-4"})})}),m.jsx("h1",{className:"text-xl font-semibold",children:"Your Tab"})]}),m.jsxs(tt,{children:[m.jsxs(un,{children:[m.jsx(dn,{children:h==null?void 0:h.name}),m.jsx(xn,{children:"Your tab is open! Show this number to your waiter to add orders."}),m.jsxs("div",{className:"pt-4 text-center",children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Your Tab Number"}),m.jsx("p",{className:"text-4xl font-bold tracking-widest text-primary bg-muted p-4 rounded-lg",children:s.referenceNumber})]})]}),m.jsxs(pt,{children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Your Orders"}),m.jsxs(Xc,{className:"bg-blue-100 text-blue-800 capitalize",children:[m.jsx(pf,{className:"w-4 h-4 mr-1"}),s.status.replace("_"," ")]})]}),m.jsxs("div",{className:"space-y-2 mb-4",children:[l.length===0&&m.jsx("p",{className:"text-center text-muted-foreground py-4",children:"Your orders will appear here once added by the waiter."}),l.map(S=>{var R;return m.jsxs("div",{className:"flex justify-between",children:[m.jsxs("div",{children:[m.jsxs("p",{className:"font-medium",children:[S.itemName," (x",S.quantity,")"]}),m.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(((R=S.createdAt)==null?void 0:R.seconds)*1e3).toLocaleTimeString()})]}),m.jsxs("p",{children:["$",(S.price*S.quantity).toFixed(2)]})]},S.id)})]}),m.jsx(b3,{className:"my-4"}),m.jsx("div",{className:"space-y-2",children:m.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[m.jsx("p",{children:"Total"}),m.jsxs("p",{children:["$",s.total.toFixed(2)]})]})}),m.jsxs(Ee,{className:"w-full mt-4",disabled:s.status!=="pending_acceptance",children:[m.jsx(qM,{className:"w-4 h-4 mr-2"}),"Proceed to Payment"]})]})]})]})}):null}function w3(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}Array(12).fill(0);let Ey=1;class x3{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s,...a}=e,l=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Ey++,u=this.toasts.find(g=>g.id===l),h=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),u?this.toasts=this.toasts.map(g=>g.id===l?(this.publish({...g,...e,id:l,title:s}),{...g,...e,id:l,dismissible:h,title:s}):g):this.addToast({title:s,...a,dismissible:h,id:l}),l},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let l=s!==void 0,u;const h=a.then(async p=>{if(u=["resolve",p],Jt.isValidElement(p))l=!1,this.create({id:s,type:"default",message:p});else if(T3(p)&&!p.ok){l=!1;const w=typeof t.error=="function"?await t.error(`HTTP error! status: ${p.status}`):t.error,_=typeof t.description=="function"?await t.description(`HTTP error! status: ${p.status}`):t.description,R=typeof w=="object"&&!Jt.isValidElement(w)?w:{message:w};this.create({id:s,type:"error",description:_,...R})}else if(p instanceof Error){l=!1;const w=typeof t.error=="function"?await t.error(p):t.error,_=typeof t.description=="function"?await t.description(p):t.description,R=typeof w=="object"&&!Jt.isValidElement(w)?w:{message:w};this.create({id:s,type:"error",description:_,...R})}else if(t.success!==void 0){l=!1;const w=typeof t.success=="function"?await t.success(p):t.success,_=typeof t.description=="function"?await t.description(p):t.description,R=typeof w=="object"&&!Jt.isValidElement(w)?w:{message:w};this.create({id:s,type:"success",description:_,...R})}}).catch(async p=>{if(u=["reject",p],t.error!==void 0){l=!1;const v=typeof t.error=="function"?await t.error(p):t.error,w=typeof t.description=="function"?await t.description(p):t.description,S=typeof v=="object"&&!Jt.isValidElement(v)?v:{message:v};this.create({id:s,type:"error",description:w,...S})}}).finally(()=>{l&&(this.dismiss(s),s=void 0),t.finally==null||t.finally.call(t)}),g=()=>new Promise((p,v)=>h.then(()=>u[0]==="reject"?v(u[1]):p(u[1])).catch(v));return typeof s!="string"&&typeof s!="number"?{unwrap:g}:Object.assign(s,{unwrap:g})},this.custom=(e,t)=>{const s=(t==null?void 0:t.id)||Ey++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const gr=new x3,E3=(n,e)=>{const t=(e==null?void 0:e.id)||Ey++;return gr.addToast({title:n,...e,id:t}),t},T3=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",S3=E3,A3=()=>gr.toasts,R3=()=>gr.getActiveToasts(),Eh=Object.assign(S3,{success:gr.success,info:gr.info,warning:gr.warning,error:gr.error,custom:gr.custom,message:gr.message,promise:gr.promise,dismiss:gr.dismiss,loading:gr.loading},{getHistory:A3,getToasts:R3});w3("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const mx=({tab:n,onClick:e,isActive:t})=>{var l;const s=typeof n.total=="number"?n.total:0,a=n.orderCount||0;return m.jsx(tt,{className:`w-32 h-20 flex flex-col items-center justify-center cursor-pointer hover:shadow-lg transition-shadow ${t?"border-l-4 border-l-green-500 bg-green-50":"border-l-4 border-l-gray-300 bg-gray-50"}`,onClick:e,children:m.jsxs(pt,{className:"flex flex-col items-center justify-center p-2 w-full",children:[m.jsxs("div",{className:"flex justify-between w-full items-center mb-1",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsxs("span",{className:"text-xs text-gray-700 font-medium",children:["Tab ",n.referenceNumber||((l=n.id)==null?void 0:l.substring(0,4))]}),m.jsx("span",{className:`ml-1 w-2 h-2 rounded-full ${t?"bg-green-500":"bg-gray-400"}`})]}),a>0&&m.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${t?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:[a," ",a===1?"order":"orders"]})]}),m.jsxs("div",{className:`font-bold text-lg ${t?"text-gray-900":"text-gray-600"}`,children:["$",s.toFixed(2)]})]})})},N3=({waiter:n})=>{var U;const e=Ks(),{currentUser:t}=Bu(),[s,a]=T.useState(!1),[l,u]=T.useState([{menuItemId:"",quantity:1,notes:"",category:""}]),[h,g]=T.useState(""),[p,v]=T.useState([]),[w,_]=T.useState([]),[S,R]=T.useState([]),[C,k]=T.useState([]),[P,B]=T.useState([]),[H,M]=T.useState(""),[K,ne]=T.useState(!0),[I,A]=T.useState(""),[O,L]=T.useState(!1),z=T.useRef(null),F=T.useRef(null),j=T.useRef(null),Me=T.useRef(null),Ce={id:(n==null?void 0:n.id)||(t==null?void 0:t.uid)||"",name:(n==null?void 0:n.name)||(t==null?void 0:t.displayName)||"Waiter",restaurantId:(n==null?void 0:n.restaurantId)||""},Y=Ce.restaurantId;T.useEffect(()=>{if(!Y){ne(!1);return}console.log("[Menu Effect] Setting up menu listener for restaurant:",Y);const G=fn(vt(Le,"menuItems"),bt("restaurantId","==",Y)),re=yr(G,Q=>{console.log("[Menu Listener] Snapshot received. Size:",Q.size);const se=Q.docs.map(fe=>({id:fe.id,...fe.data(),price:parseFloat(fe.data().price)||0}));v(se);const de=["All",...Array.from(new Set(se.map(fe=>fe.category).filter(Boolean))).sort()];_(de),ne(!1)},Q=>{console.error("[Menu Listener] Error:",Q),A(`Error loading menu: ${Q.message}`),ne(!1)});return Me.current=re,()=>{console.log("[Menu Effect] Cleaning up menu listener"),Me.current&&Me.current()}},[Y]),T.useEffect(()=>{if(!Y)return;console.log("[All Tabs Effect] Setting up listener for all tabs in restaurant:",Y);const G=fn(vt(Le,"tabs"),bt("restaurantId","==",Y)),re=yr(G,Q=>{console.log("[All Tabs Listener] Snapshot received. Size:",Q.size);const se=[];Q.forEach(de=>{const fe=de.data();se.push({id:de.id,...fe,referenceNumber:fe.referenceNumber||fe.tableNumber||`TAB-${de.id.substring(0,4).toUpperCase()}`,total:typeof fe.total=="number"?fe.total:0,waiterName:fe.waiterName||"Unassigned"})}),R(se),console.log("[All Tabs Effect] All tabs updated:",se.length)},Q=>{console.error("[All Tabs Listener] Error:",Q),A(`Error loading tabs: ${Q.message}`)});return z.current=re,()=>{console.log("[All Tabs Effect] Cleaning up all tabs listener"),z.current&&z.current()}},[Y]),T.useEffect(()=>{if(!Ce.id||!Y)return;console.log("[My Active Tabs Effect] Setting up listener for active tabs assigned to waiter:",Ce.id);const G=fn(vt(Le,"tabs"),bt("restaurantId","==",Y),bt("status","==","active"),bt("waiterId","==",Ce.id)),re=yr(G,Q=>{console.log("[My Active Tabs Listener] Snapshot received. Size:",Q.size);const se=[];Q.forEach(de=>{const fe=de.data();se.push({id:de.id,...fe,referenceNumber:fe.referenceNumber||fe.tableNumber||`TAB-${de.id.substring(0,4).toUpperCase()}`,total:typeof fe.total=="number"?fe.total:0,waiterName:fe.waiterName||"Unassigned"})}),k(se),console.log("[My Active Tabs Effect] My active tabs updated:",se.length)},Q=>{console.error("[My Active Tabs Listener] Error:",Q),A(`Error loading your active tabs: ${Q.message}`)});return F.current=re,()=>{console.log("[My Active Tabs Effect] Cleaning up my active tabs listener"),F.current&&F.current()}},[Ce.id,Y]),T.useEffect(()=>{if(C.length===0){B([]);return}const G=C.map(se=>se.id);console.log("[My Orders Effect] Setting up listener for orders in tabs:",G);const re=fn(vt(Le,"orders"),bt("tabId","in",G),bt("status","in",["pending","preparing","ready"])),Q=yr(re,se=>{console.log("[My Orders Listener] Snapshot received. Size:",se.size);const de=[];se.forEach(fe=>{de.push({id:fe.id,...fe.data()})}),B(de),console.log("[My Orders Effect] My orders updated:",de.length)},se=>{console.error("[My Orders Listener] Error:",se)});return j.current=Q,()=>{console.log("[My Orders Effect] Cleaning up my orders listener"),j.current&&j.current()}},[C]);const he=T.useCallback(async G=>{try{console.log(`[updateTabTotal] Recalculating total for tab ${G}`);const re=await $s(fn(vt(Le,"orders"),bt("tabId","==",G)));let Q=0,se=0,de=0;re.forEach(Te=>{const Ue=Te.data();if(Ue.items&&Array.isArray(Ue.items)){const Dt=Ue.items.reduce((rt,xe)=>{const ye=(parseFloat(xe.price)||0)*(parseInt(xe.quantity)||1);return rt+ye},0);Q+=Dt,se++,de+=Ue.items.reduce((rt,xe)=>rt+(parseInt(xe.quantity)||1),0)}}),console.log(`[updateTabTotal] Tab ${G} - Total: $${Q.toFixed(2)}, Orders: ${se}, Items: ${de}`);const fe=Tn(Le,"tabs",G);return await $f(fe,{total:Q,orderCount:se,itemCount:de,updatedAt:new Date}),console.log(`[updateTabTotal] Successfully updated tab ${G}`),Q}catch(re){console.error(`[updateTabTotal] Error updating tab ${G}:`,re)}},[]),ue=T.useCallback(async G=>{if(G.preventDefault(),!H||!l.some(re=>re.menuItemId)){Eh.error("Please select a tab and at least one valid menu item");return}try{a(!0);const re=S.find(rt=>rt.id===H);if(!re)throw new Error("Selected tab not found");const Q=l.filter(rt=>rt.menuItemId).map(rt=>{const xe=p.find(ye=>ye.id===rt.menuItemId);return{menuItemId:rt.menuItemId,name:(xe==null?void 0:xe.name)||"Unknown Item",price:parseFloat(xe==null?void 0:xe.price)||0,quantity:parseInt(rt.quantity)||1,notes:rt.notes||""}});if(Q.length===0){Eh.error("No valid items to order.");return}const se=Q.reduce((rt,xe)=>rt+xe.price*xe.quantity,0),de=zS(Le),fe=Tn(vt(Le,"orders")),Te={id:fe.id,tabId:H,tabReferenceNumber:re.referenceNumber,items:Q,status:"pending",total:se,createdAt:new Date,updatedAt:new Date,waiterId:Ce.id,waiterName:Ce.name,restaurantId:Y,notes:h};de.set(fe,Te);const Ue=Tn(Le,"tabs",H),Dt={status:"active",waiterId:Ce.id,waiterName:Ce.name,updatedAt:new Date};de.update(Ue,Dt),console.log("[Order Submit] Committing batch write for new order..."),await de.commit(),console.log("[Order Submit] Batch write successful."),await he(H),u([{menuItemId:"",quantity:1,notes:"",category:""}]),g(""),M(""),L(!1),Eh.success("Order placed successfully!")}catch(re){console.error("[Order Submit] Error placing order:",re),Eh.error("Failed to place order: "+re.message)}finally{a(!1)}},[H,l,S,p,Ce,Y,h,he]),Re=S.filter(G=>G.status!=="active");return K?m.jsx("div",{className:"flex items-center justify-center min-h-screen",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):I?m.jsx("div",{className:"flex items-center justify-center min-h-screen",children:m.jsxs("div",{className:"text-center p-6 max-w-md",children:[m.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-4",children:m.jsx(Ui,{className:"w-6 h-6 text-red-600"})}),m.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error Loading Dashboard"}),m.jsx("p",{className:"text-gray-600 mb-4",children:I}),m.jsx(Ee,{onClick:()=>window.location.reload(),children:"Try Again"})]})}):m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx("header",{className:"bg-white shadow",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8 flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Waiter Dashboard"}),m.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Welcome, ",Ce.name]})]}),m.jsx("div",{className:"flex space-x-2",children:m.jsx(Ee,{variant:"outline",onClick:()=>e("/waiterhome"),children:"Exit"})})]})}),m.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"space-y-6 mb-8",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Your Active Tabs"}),m.jsx("div",{className:"flex flex-wrap gap-3",children:C.length>0?C.map(G=>m.jsx(mx,{tab:G,onClick:()=>{M(G.id),L(!0)},isActive:!0},G.id)):m.jsx("div",{className:"w-full text-center py-4 text-gray-500 bg-gray-50 rounded-lg",children:"No active tabs assigned to you"})})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Inactive Tabs (Available to All)"}),m.jsx("div",{className:"flex flex-wrap gap-3",children:Re.length>0?Re.map(G=>m.jsx(mx,{tab:G,onClick:()=>{M(G.id),L(!0)},isActive:!1},G.id)):m.jsx("div",{className:"w-full text-center py-4 text-gray-500 bg-gray-50 rounded-lg",children:"No inactive tabs available"})})]})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Orders for Your Tabs"}),P.length>0?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Object.entries(P.reduce((G,re)=>{const Q=re.tabId||"Unknown";return G[Q]||(G[Q]=[]),G[Q].push(re),G},{})).map(([G,re])=>{var de;const Q=C.find(fe=>fe.id===G),se=Q?Q.referenceNumber||((de=Q.id)==null?void 0:de.substring(0,4)):"Unknown Tab";return m.jsx(tt,{className:"overflow-hidden flex flex-col h-full",children:m.jsxs(pt,{className:"p-4 flex-1 flex flex-col",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsxs("h3",{className:"font-medium",children:["Tab ",se]}),m.jsxs("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-800",children:[re.length," ",re.length===1?"order":"orders"]})]}),m.jsx("div",{className:"space-y-2 mb-3 flex-1 overflow-y-auto",children:re.flatMap(fe=>(fe.items||[]).map((Te,Ue)=>m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsxs("span",{className:"font-medium",children:[Te.quantity,"x"]}),m.jsx("span",{className:"ml-2",children:Te.name}),Te.notes&&m.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",Te.notes,")"]})]}),m.jsxs("span",{children:["$",(Te.price*Te.quantity).toFixed(2)]})]},`${fe.id}-${Ue}`)))}),m.jsx("div",{className:"mt-auto pt-2 border-t border-gray-100",children:m.jsxs("div",{className:"flex justify-between font-medium",children:[m.jsx("span",{children:"Tab Total"}),m.jsxs("span",{children:["$",re.reduce((fe,Te)=>fe+(Te.total||0),0).toFixed(2)]})]})})]})},`tab-orders-${G}`)})}):m.jsx(tt,{children:m.jsxs(pt,{className:"p-6 text-center",children:[m.jsx("div",{className:"mx-auto w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:m.jsx(ZS,{className:"w-6 h-6 text-gray-400"})}),m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No orders for your tabs"}),m.jsx("p",{className:"text-gray-500",children:"Orders will appear here once you place them"})]})})]}),m.jsxs("div",{className:"mt-6",children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),m.jsx("div",{className:"grid grid-cols-1 gap-3",children:m.jsx(Ee,{variant:"outline",className:"h-auto py-3",onClick:()=>L(!0),children:m.jsxs("div",{className:"text-left",children:[m.jsx("div",{className:"font-medium",children:"New Order"}),m.jsx("div",{className:"text-xs text-gray-500",children:"Create a new order"})]})})})]}),O&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg flex flex-col w-full max-w-md max-h-[90vh]",children:[m.jsx("div",{className:"p-6 pb-0",children:m.jsx("h2",{className:"text-lg font-bold mb-4",children:"Create New Order"})}),m.jsx("div",{className:"overflow-y-auto px-6 flex-1",children:m.jsxs("form",{onSubmit:ue,children:[H&&m.jsxs("div",{className:"mb-4 p-2 bg-gray-100 rounded text-sm",children:[m.jsx("strong",{children:"Selected Tab:"})," ",((U=S.find(G=>G.id===H))==null?void 0:U.referenceNumber)||H]}),m.jsxs("div",{className:"space-y-4 mb-4 max-h-60 overflow-y-auto pr-2 -mr-2",children:[l.map((G,re)=>{const Q=p.find(se=>se.id===G.menuItemId);return m.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 relative",children:[l.length>1&&m.jsx("button",{type:"button",onClick:()=>{const se=[...l];se.splice(re,1),u(se)},className:"absolute top-2 right-2 text-gray-400 hover:text-red-500",children:"×"}),m.jsxs("div",{className:"mb-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),m.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",value:G.category,onChange:se=>{const de=[...l];de[re].category=se.target.value,de[re].menuItemId="",u(de)},required:!0,children:[m.jsx("option",{value:"",children:"-- Select Category --"}),w.map(se=>m.jsx("option",{value:se,children:se},se))]})]}),m.jsxs("div",{className:"mb-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Menu Item"}),m.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",value:G.menuItemId,onChange:se=>{const de=[...l];de[re].menuItemId=se.target.value,u(de)},required:!0,disabled:!G.category,children:[m.jsx("option",{value:"",children:"-- Select Menu Item --"}),G.category&&p.filter(se=>se.category===G.category).map(se=>{var de;return m.jsxs("option",{value:se.id,children:[se.name," ($",((de=se.price)==null?void 0:de.toFixed(2))||"0.00",")"]},se.id)})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),m.jsx("input",{type:"number",min:"1",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",required:!0,value:G.quantity,onChange:se=>{const de=[...l];de[re].quantity=parseInt(se.target.value)||1,u(de)}})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Notes"}),m.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",placeholder:"e.g., no onions",value:G.notes||"",onChange:se=>{const de=[...l];de[re].notes=se.target.value,u(de)}})]})]}),Q&&m.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Subtotal: $",(Q.price*(G.quantity||1)).toFixed(2)]})]},re)}),m.jsx(Ee,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>{u([...l,{menuItemId:"",quantity:1,notes:"",category:""}])},children:"+ Add Another Item"})]}),m.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg mb-4 text-sm",children:[m.jsx("div",{className:"font-medium mb-2",children:"Order Summary"}),m.jsx("div",{className:"space-y-1 mb-2 max-h-32 overflow-y-auto",children:l.filter(G=>G.menuItemId).map((G,re)=>{const Q=p.find(se=>se.id===G.menuItemId);return Q?m.jsxs("div",{className:"flex justify-between",children:[m.jsxs("div",{children:[G.quantity,"x ",Q.name,G.notes&&` (${G.notes})`]}),m.jsxs("div",{children:["$",(Q.price*G.quantity).toFixed(2)]})]},re):null})}),m.jsxs("div",{className:"border-t border-gray-200 pt-1 mt-2 font-medium flex justify-between",children:[m.jsx("span",{children:"Total:"}),m.jsxs("span",{children:["$",l.reduce((G,re)=>{const Q=p.find(se=>se.id===re.menuItemId);return G+((Q==null?void 0:Q.price)||0)*(re.quantity||1)},0).toFixed(2)]})]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Notes (Optional)"}),m.jsx("textarea",{className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",rows:"2",placeholder:"Special instructions for the kitchen",value:h,onChange:G=>g(G.target.value)})]}),m.jsx("div",{className:"sticky bottom-0 bg-white pt-4 pb-6 -mx-6 px-6 border-t border-gray-200",children:m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx(Ee,{variant:"outline",type:"button",onClick:()=>L(!1),size:"sm",children:"Cancel"}),m.jsx(Ee,{type:"submit",disabled:!H||!l.some(G=>G.menuItemId)||s,size:"sm",children:s?"Placing...":"Create Order"})]})})]})})]})})]})]})};function C3(n,e){const t=T.createContext(e),s=l=>{const{children:u,...h}=l,g=T.useMemo(()=>h,Object.values(h));return m.jsx(t.Provider,{value:g,children:u})};s.displayName=n+"Provider";function a(l){const u=T.useContext(t);if(u)return u;if(e!==void 0)return e;throw new Error(`\`${l}\` must be used within \`${n}\``)}return[s,a]}function Fu(n,e=[]){let t=[];function s(l,u){const h=T.createContext(u),g=t.length;t=[...t,u];const p=w=>{var P;const{scope:_,children:S,...R}=w,C=((P=_==null?void 0:_[n])==null?void 0:P[g])||h,k=T.useMemo(()=>R,Object.values(R));return m.jsx(C.Provider,{value:k,children:S})};p.displayName=l+"Provider";function v(w,_){var C;const S=((C=_==null?void 0:_[n])==null?void 0:C[g])||h,R=T.useContext(S);if(R)return R;if(u!==void 0)return u;throw new Error(`\`${w}\` must be used within \`${l}\``)}return[p,v]}const a=()=>{const l=t.map(u=>T.createContext(u));return function(h){const g=(h==null?void 0:h[n])||l;return T.useMemo(()=>({[`__scope${n}`]:{...h,[n]:g}}),[h,g])}};return a.scopeName=n,[s,I3(a,...e)]}function I3(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(l){const u=s.reduce((h,{useScope:g,scopeName:p})=>{const w=g(l)[`__scope${p}`];return{...h,...w}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return t.scopeName=e.scopeName,t}function tn(n,e,{checkForDefaultPrevented:t=!0}={}){return function(a){if(n==null||n(a),t===!1||!a.defaultPrevented)return e==null?void 0:e(a)}}var pl=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},D3=qx[" useInsertionEffect ".trim().toString()]||pl;function Wf({prop:n,defaultProp:e,onChange:t=()=>{},caller:s}){const[a,l,u]=k3({defaultProp:e,onChange:t}),h=n!==void 0,g=h?n:a;{const v=T.useRef(n!==void 0);T.useEffect(()=>{const w=v.current;w!==h&&console.warn(`${s} is changing from ${w?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=h},[h,s])}const p=T.useCallback(v=>{var w;if(h){const _=O3(v)?v(n):v;_!==n&&((w=u.current)==null||w.call(u,_))}else l(v)},[h,n,l,u]);return[g,p]}function k3({defaultProp:n,onChange:e}){const[t,s]=T.useState(n),a=T.useRef(t),l=T.useRef(e);return D3(()=>{l.current=e},[e]),T.useEffect(()=>{var u;a.current!==t&&((u=l.current)==null||u.call(l,t),a.current=t)},[t,a]),[t,s,l]}function O3(n){return typeof n=="function"}function P3(n){const e=T.useRef({value:n,previous:n});return T.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}function j3(n){const[e,t]=T.useState(void 0);return pl(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const l=a[0];let u,h;if("borderBoxSize"in l){const g=l.borderBoxSize,p=Array.isArray(g)?g[0]:g;u=p.inlineSize,h=p.blockSize}else u=n.offsetWidth,h=n.offsetHeight;t({width:u,height:h})});return s.observe(n,{box:"border-box"}),()=>s.unobserve(n)}else t(void 0)},[n]),e}function M3(n,e){return T.useReducer((t,s)=>e[t][s]??t,n)}var Ol=n=>{const{present:e,children:t}=n,s=V3(e),a=typeof t=="function"?t({present:s.isPresent}):T.Children.only(t),l=nr(s.ref,L3(a));return typeof t=="function"||s.isPresent?T.cloneElement(a,{ref:l}):null};Ol.displayName="Presence";function V3(n){const[e,t]=T.useState(),s=T.useRef(null),a=T.useRef(n),l=T.useRef("none"),u=n?"mounted":"unmounted",[h,g]=M3(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const p=Th(s.current);l.current=h==="mounted"?p:"none"},[h]),pl(()=>{const p=s.current,v=a.current;if(v!==n){const _=l.current,S=Th(p);n?g("MOUNT"):S==="none"||(p==null?void 0:p.display)==="none"?g("UNMOUNT"):g(v&&_!==S?"ANIMATION_OUT":"UNMOUNT"),a.current=n}},[n,g]),pl(()=>{if(e){let p;const v=e.ownerDocument.defaultView??window,w=S=>{const C=Th(s.current).includes(S.animationName);if(S.target===e&&C&&(g("ANIMATION_END"),!a.current)){const k=e.style.animationFillMode;e.style.animationFillMode="forwards",p=v.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=k)})}},_=S=>{S.target===e&&(l.current=Th(s.current))};return e.addEventListener("animationstart",_),e.addEventListener("animationcancel",w),e.addEventListener("animationend",w),()=>{v.clearTimeout(p),e.removeEventListener("animationstart",_),e.removeEventListener("animationcancel",w),e.removeEventListener("animationend",w)}}else g("ANIMATION_END")},[e,g]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:T.useCallback(p=>{s.current=p?getComputedStyle(p):null,t(p)},[])}}function Th(n){return(n==null?void 0:n.animationName)||"none"}function L3(n){var s,a;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(a=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:a.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Yf="Checkbox",[U3,lL]=Fu(Yf),[z3,Uv]=U3(Yf);function B3(n){const{__scopeCheckbox:e,checked:t,children:s,defaultChecked:a,disabled:l,form:u,name:h,onCheckedChange:g,required:p,value:v="on",internal_do_not_use_render:w}=n,[_,S]=Wf({prop:t,defaultProp:a??!1,onChange:g,caller:Yf}),[R,C]=T.useState(null),[k,P]=T.useState(null),B=T.useRef(!1),H=R?!!u||!!R.closest("form"):!0,M={checked:_,disabled:l,setChecked:S,control:R,setControl:C,name:h,form:u,value:v,hasConsumerStoppedPropagationRef:B,required:p,defaultChecked:zi(a)?!1:a,isFormControl:H,bubbleInput:k,setBubbleInput:P};return m.jsx(z3,{scope:e,...M,children:F3(w)?w(M):s})}var gA="CheckboxTrigger",yA=T.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...s},a)=>{const{control:l,value:u,disabled:h,checked:g,required:p,setControl:v,setChecked:w,hasConsumerStoppedPropagationRef:_,isFormControl:S,bubbleInput:R}=Uv(gA,n),C=nr(a,v),k=T.useRef(g);return T.useEffect(()=>{const P=l==null?void 0:l.form;if(P){const B=()=>w(k.current);return P.addEventListener("reset",B),()=>P.removeEventListener("reset",B)}},[l,w]),m.jsx($t.button,{type:"button",role:"checkbox","aria-checked":zi(g)?"mixed":g,"aria-required":p,"data-state":EA(g),"data-disabled":h?"":void 0,disabled:h,value:u,...s,ref:C,onKeyDown:tn(e,P=>{P.key==="Enter"&&P.preventDefault()}),onClick:tn(t,P=>{w(B=>zi(B)?!0:!B),R&&S&&(_.current=P.isPropagationStopped(),_.current||P.stopPropagation())})})});yA.displayName=gA;var vA=T.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:s,checked:a,defaultChecked:l,required:u,disabled:h,value:g,onCheckedChange:p,form:v,...w}=n;return m.jsx(B3,{__scopeCheckbox:t,checked:a,defaultChecked:l,disabled:h,required:u,onCheckedChange:p,name:s,form:v,value:g,internal_do_not_use_render:({isFormControl:_})=>m.jsxs(m.Fragment,{children:[m.jsx(yA,{...w,ref:e,__scopeCheckbox:t}),_&&m.jsx(xA,{__scopeCheckbox:t})]})})});vA.displayName=Yf;var bA="CheckboxIndicator",_A=T.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:s,...a}=n,l=Uv(bA,t);return m.jsx(Ol,{present:s||zi(l.checked)||l.checked===!0,children:m.jsx($t.span,{"data-state":EA(l.checked),"data-disabled":l.disabled?"":void 0,...a,ref:e,style:{pointerEvents:"none",...n.style}})})});_A.displayName=bA;var wA="CheckboxBubbleInput",xA=T.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:l,defaultChecked:u,required:h,disabled:g,name:p,value:v,form:w,bubbleInput:_,setBubbleInput:S}=Uv(wA,n),R=nr(t,S),C=P3(l),k=j3(s);T.useEffect(()=>{const B=_;if(!B)return;const H=window.HTMLInputElement.prototype,K=Object.getOwnPropertyDescriptor(H,"checked").set,ne=!a.current;if(C!==l&&K){const I=new Event("click",{bubbles:ne});B.indeterminate=zi(l),K.call(B,zi(l)?!1:l),B.dispatchEvent(I)}},[_,C,l,a]);const P=T.useRef(zi(l)?!1:l);return m.jsx($t.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??P.current,required:h,disabled:g,name:p,value:v,form:w,...e,tabIndex:-1,ref:R,style:{...e.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});xA.displayName=wA;function F3(n){return typeof n=="function"}function zi(n){return n==="indeterminate"}function EA(n){return zi(n)?"indeterminate":n?"checked":"unchecked"}function _g({className:n,...e}){return m.jsx(vA,{"data-slot":"checkbox",className:Rt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:m.jsx(_A,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:m.jsx(yM,{className:"size-3.5"})})})}function q3(n){const e=n+"CollectionProvider",[t,s]=Fu(e),[a,l]=t(e,{collectionRef:{current:null},itemMap:new Map}),u=C=>{const{scope:k,children:P}=C,B=Jt.useRef(null),H=Jt.useRef(new Map).current;return m.jsx(a,{scope:k,itemMap:H,collectionRef:B,children:P})};u.displayName=e;const h=n+"CollectionSlot",g=wu(h),p=Jt.forwardRef((C,k)=>{const{scope:P,children:B}=C,H=l(h,P),M=nr(k,H.collectionRef);return m.jsx(g,{ref:M,children:B})});p.displayName=h;const v=n+"CollectionItemSlot",w="data-radix-collection-item",_=wu(v),S=Jt.forwardRef((C,k)=>{const{scope:P,children:B,...H}=C,M=Jt.useRef(null),K=nr(k,M),ne=l(v,P);return Jt.useEffect(()=>(ne.itemMap.set(M,{ref:M,...H}),()=>void ne.itemMap.delete(M))),m.jsx(_,{[w]:"",ref:K,children:B})});S.displayName=v;function R(C){const k=l(n+"CollectionConsumer",C);return Jt.useCallback(()=>{const B=k.collectionRef.current;if(!B)return[];const H=Array.from(B.querySelectorAll(`[${w}]`));return Array.from(k.itemMap.values()).sort((ne,I)=>H.indexOf(ne.ref.current)-H.indexOf(I.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:u,Slot:p,ItemSlot:S},R,s]}var H3=qx[" useId ".trim().toString()]||(()=>{}),G3=0;function ou(n){const[e,t]=T.useState(H3());return pl(()=>{t(s=>s??String(G3++))},[n]),n||(e?`radix-${e}`:"")}function gl(n){const e=T.useRef(n);return T.useEffect(()=>{e.current=n}),T.useMemo(()=>(...t)=>{var s;return(s=e.current)==null?void 0:s.call(e,...t)},[])}var $3=T.createContext(void 0);function TA(n){const e=T.useContext($3);return n||e||"ltr"}var wg="rovingFocusGroup.onEntryFocus",K3={bubbles:!1,cancelable:!0},qu="RovingFocusGroup",[Ty,SA,Q3]=q3(qu),[W3,AA]=Fu(qu,[Q3]),[Y3,X3]=W3(qu),RA=T.forwardRef((n,e)=>m.jsx(Ty.Provider,{scope:n.__scopeRovingFocusGroup,children:m.jsx(Ty.Slot,{scope:n.__scopeRovingFocusGroup,children:m.jsx(Z3,{...n,ref:e})})}));RA.displayName=qu;var Z3=T.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:a=!1,dir:l,currentTabStopId:u,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:g,onEntryFocus:p,preventScrollOnEntryFocus:v=!1,...w}=n,_=T.useRef(null),S=nr(e,_),R=TA(l),[C,k]=Wf({prop:u,defaultProp:h??null,onChange:g,caller:qu}),[P,B]=T.useState(!1),H=gl(p),M=SA(t),K=T.useRef(!1),[ne,I]=T.useState(0);return T.useEffect(()=>{const A=_.current;if(A)return A.addEventListener(wg,H),()=>A.removeEventListener(wg,H)},[H]),m.jsx(Y3,{scope:t,orientation:s,dir:R,loop:a,currentTabStopId:C,onItemFocus:T.useCallback(A=>k(A),[k]),onItemShiftTab:T.useCallback(()=>B(!0),[]),onFocusableItemAdd:T.useCallback(()=>I(A=>A+1),[]),onFocusableItemRemove:T.useCallback(()=>I(A=>A-1),[]),children:m.jsx($t.div,{tabIndex:P||ne===0?-1:0,"data-orientation":s,...w,ref:S,style:{outline:"none",...n.style},onMouseDown:tn(n.onMouseDown,()=>{K.current=!0}),onFocus:tn(n.onFocus,A=>{const O=!K.current;if(A.target===A.currentTarget&&O&&!P){const L=new CustomEvent(wg,K3);if(A.currentTarget.dispatchEvent(L),!L.defaultPrevented){const z=M().filter(Y=>Y.focusable),F=z.find(Y=>Y.active),j=z.find(Y=>Y.id===C),Ce=[F,j,...z].filter(Boolean).map(Y=>Y.ref.current);IA(Ce,v)}}K.current=!1}),onBlur:tn(n.onBlur,()=>B(!1))})})}),NA="RovingFocusGroupItem",CA=T.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:a=!1,tabStopId:l,children:u,...h}=n,g=ou(),p=l||g,v=X3(NA,t),w=v.currentTabStopId===p,_=SA(t),{onFocusableItemAdd:S,onFocusableItemRemove:R,currentTabStopId:C}=v;return T.useEffect(()=>{if(s)return S(),()=>R()},[s,S,R]),m.jsx(Ty.ItemSlot,{scope:t,id:p,focusable:s,active:a,children:m.jsx($t.span,{tabIndex:w?0:-1,"data-orientation":v.orientation,...h,ref:e,onMouseDown:tn(n.onMouseDown,k=>{s?v.onItemFocus(p):k.preventDefault()}),onFocus:tn(n.onFocus,()=>v.onItemFocus(p)),onKeyDown:tn(n.onKeyDown,k=>{if(k.key==="Tab"&&k.shiftKey){v.onItemShiftTab();return}if(k.target!==k.currentTarget)return;const P=t5(k,v.orientation,v.dir);if(P!==void 0){if(k.metaKey||k.ctrlKey||k.altKey||k.shiftKey)return;k.preventDefault();let H=_().filter(M=>M.focusable).map(M=>M.ref.current);if(P==="last")H.reverse();else if(P==="prev"||P==="next"){P==="prev"&&H.reverse();const M=H.indexOf(k.currentTarget);H=v.loop?n5(H,M+1):H.slice(M+1)}setTimeout(()=>IA(H))}}),children:typeof u=="function"?u({isCurrentTabStop:w,hasTabStop:C!=null}):u})})});CA.displayName=NA;var J3={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function e5(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function t5(n,e,t){const s=e5(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return J3[s]}function IA(n,e=!1){const t=document.activeElement;for(const s of n)if(s===t||(s.focus({preventScroll:e}),document.activeElement!==t))return}function n5(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var r5=RA,s5=CA,Xf="Tabs",[i5,cL]=Fu(Xf,[AA]),DA=AA(),[a5,zv]=i5(Xf),kA=T.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,onValueChange:a,defaultValue:l,orientation:u="horizontal",dir:h,activationMode:g="automatic",...p}=n,v=TA(h),[w,_]=Wf({prop:s,onChange:a,defaultProp:l??"",caller:Xf});return m.jsx(a5,{scope:t,baseId:ou(),value:w,onValueChange:_,orientation:u,dir:v,activationMode:g,children:m.jsx($t.div,{dir:v,"data-orientation":u,...p,ref:e})})});kA.displayName=Xf;var OA="TabsList",PA=T.forwardRef((n,e)=>{const{__scopeTabs:t,loop:s=!0,...a}=n,l=zv(OA,t),u=DA(t);return m.jsx(r5,{asChild:!0,...u,orientation:l.orientation,dir:l.dir,loop:s,children:m.jsx($t.div,{role:"tablist","aria-orientation":l.orientation,...a,ref:e})})});PA.displayName=OA;var jA="TabsTrigger",MA=T.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,disabled:a=!1,...l}=n,u=zv(jA,t),h=DA(t),g=UA(u.baseId,s),p=zA(u.baseId,s),v=s===u.value;return m.jsx(s5,{asChild:!0,...h,focusable:!a,active:v,children:m.jsx($t.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":p,"data-state":v?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:g,...l,ref:e,onMouseDown:tn(n.onMouseDown,w=>{!a&&w.button===0&&w.ctrlKey===!1?u.onValueChange(s):w.preventDefault()}),onKeyDown:tn(n.onKeyDown,w=>{[" ","Enter"].includes(w.key)&&u.onValueChange(s)}),onFocus:tn(n.onFocus,()=>{const w=u.activationMode!=="manual";!v&&!a&&w&&u.onValueChange(s)})})})});MA.displayName=jA;var VA="TabsContent",LA=T.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,forceMount:a,children:l,...u}=n,h=zv(VA,t),g=UA(h.baseId,s),p=zA(h.baseId,s),v=s===h.value,w=T.useRef(v);return T.useEffect(()=>{const _=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(_)},[]),m.jsx(Ol,{present:a||v,children:({present:_})=>m.jsx($t.div,{"data-state":v?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":g,hidden:!_,id:p,tabIndex:0,...u,ref:e,style:{...n.style,animationDuration:w.current?"0s":void 0},children:_&&l})})});LA.displayName=VA;function UA(n,e){return`${n}-trigger-${e}`}function zA(n,e){return`${n}-content-${e}`}var o5=kA,l5=PA,c5=MA,u5=LA;function d5({className:n,...e}){return m.jsx(o5,{"data-slot":"tabs",className:Rt("flex flex-col gap-2",n),...e})}function h5({className:n,...e}){return m.jsx(l5,{"data-slot":"tabs-list",className:Rt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",n),...e})}function Sh({className:n,...e}){return m.jsx(c5,{"data-slot":"tabs-trigger",className:Rt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...e})}function Ah({className:n,...e}){return m.jsx(u5,{"data-slot":"tabs-content",className:Rt("flex-1 outline-none",n),...e})}function f5(n,e=globalThis==null?void 0:globalThis.document){const t=gl(n);T.useEffect(()=>{const s=a=>{a.key==="Escape"&&t(a)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var m5="DismissableLayer",Sy="dismissableLayer.update",p5="dismissableLayer.pointerDownOutside",g5="dismissableLayer.focusOutside",px,BA=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),FA=T.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:l,onInteractOutside:u,onDismiss:h,...g}=n,p=T.useContext(BA),[v,w]=T.useState(null),_=(v==null?void 0:v.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,S]=T.useState({}),R=nr(e,I=>w(I)),C=Array.from(p.layers),[k]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),P=C.indexOf(k),B=v?C.indexOf(v):-1,H=p.layersWithOutsidePointerEventsDisabled.size>0,M=B>=P,K=b5(I=>{const A=I.target,O=[...p.branches].some(L=>L.contains(A));!M||O||(a==null||a(I),u==null||u(I),I.defaultPrevented||h==null||h())},_),ne=_5(I=>{const A=I.target;[...p.branches].some(L=>L.contains(A))||(l==null||l(I),u==null||u(I),I.defaultPrevented||h==null||h())},_);return f5(I=>{B===p.layers.size-1&&(s==null||s(I),!I.defaultPrevented&&h&&(I.preventDefault(),h()))},_),T.useEffect(()=>{if(v)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(px=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(v)),p.layers.add(v),gx(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(_.body.style.pointerEvents=px)}},[v,_,t,p]),T.useEffect(()=>()=>{v&&(p.layers.delete(v),p.layersWithOutsidePointerEventsDisabled.delete(v),gx())},[v,p]),T.useEffect(()=>{const I=()=>S({});return document.addEventListener(Sy,I),()=>document.removeEventListener(Sy,I)},[]),m.jsx($t.div,{...g,ref:R,style:{pointerEvents:H?M?"auto":"none":void 0,...n.style},onFocusCapture:tn(n.onFocusCapture,ne.onFocusCapture),onBlurCapture:tn(n.onBlurCapture,ne.onBlurCapture),onPointerDownCapture:tn(n.onPointerDownCapture,K.onPointerDownCapture)})});FA.displayName=m5;var y5="DismissableLayerBranch",v5=T.forwardRef((n,e)=>{const t=T.useContext(BA),s=T.useRef(null),a=nr(e,s);return T.useEffect(()=>{const l=s.current;if(l)return t.branches.add(l),()=>{t.branches.delete(l)}},[t.branches]),m.jsx($t.div,{...n,ref:a})});v5.displayName=y5;function b5(n,e=globalThis==null?void 0:globalThis.document){const t=gl(n),s=T.useRef(!1),a=T.useRef(()=>{});return T.useEffect(()=>{const l=h=>{if(h.target&&!s.current){let g=function(){qA(p5,t,p,{discrete:!0})};const p={originalEvent:h};h.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=g,e.addEventListener("click",a.current,{once:!0})):g()}else e.removeEventListener("click",a.current);s.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",l),e.removeEventListener("click",a.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function _5(n,e=globalThis==null?void 0:globalThis.document){const t=gl(n),s=T.useRef(!1);return T.useEffect(()=>{const a=l=>{l.target&&!s.current&&qA(g5,t,{originalEvent:l},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function gx(){const n=new CustomEvent(Sy);document.dispatchEvent(n)}function qA(n,e,t,{discrete:s}){const a=t.originalEvent.target,l=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&a.addEventListener(n,e,{once:!0}),s?m3(a,l):a.dispatchEvent(l)}var xg="focusScope.autoFocusOnMount",Eg="focusScope.autoFocusOnUnmount",yx={bubbles:!1,cancelable:!0},w5="FocusScope",HA=T.forwardRef((n,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:l,...u}=n,[h,g]=T.useState(null),p=gl(a),v=gl(l),w=T.useRef(null),_=nr(e,C=>g(C)),S=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(s){let C=function(H){if(S.paused||!h)return;const M=H.target;h.contains(M)?w.current=M:Ri(w.current,{select:!0})},k=function(H){if(S.paused||!h)return;const M=H.relatedTarget;M!==null&&(h.contains(M)||Ri(w.current,{select:!0}))},P=function(H){if(document.activeElement===document.body)for(const K of H)K.removedNodes.length>0&&Ri(h)};document.addEventListener("focusin",C),document.addEventListener("focusout",k);const B=new MutationObserver(P);return h&&B.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",k),B.disconnect()}}},[s,h,S.paused]),T.useEffect(()=>{if(h){bx.add(S);const C=document.activeElement;if(!h.contains(C)){const P=new CustomEvent(xg,yx);h.addEventListener(xg,p),h.dispatchEvent(P),P.defaultPrevented||(x5(R5(GA(h)),{select:!0}),document.activeElement===C&&Ri(h))}return()=>{h.removeEventListener(xg,p),setTimeout(()=>{const P=new CustomEvent(Eg,yx);h.addEventListener(Eg,v),h.dispatchEvent(P),P.defaultPrevented||Ri(C??document.body,{select:!0}),h.removeEventListener(Eg,v),bx.remove(S)},0)}}},[h,p,v,S]);const R=T.useCallback(C=>{if(!t&&!s||S.paused)return;const k=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,P=document.activeElement;if(k&&P){const B=C.currentTarget,[H,M]=E5(B);H&&M?!C.shiftKey&&P===M?(C.preventDefault(),t&&Ri(H,{select:!0})):C.shiftKey&&P===H&&(C.preventDefault(),t&&Ri(M,{select:!0})):P===B&&C.preventDefault()}},[t,s,S.paused]);return m.jsx($t.div,{tabIndex:-1,...u,ref:_,onKeyDown:R})});HA.displayName=w5;function x5(n,{select:e=!1}={}){const t=document.activeElement;for(const s of n)if(Ri(s,{select:e}),document.activeElement!==t)return}function E5(n){const e=GA(n),t=vx(e,n),s=vx(e.reverse(),n);return[t,s]}function GA(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function vx(n,e){for(const t of n)if(!T5(t,{upTo:e}))return t}function T5(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function S5(n){return n instanceof HTMLInputElement&&"select"in n}function Ri(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&S5(n)&&e&&n.select()}}var bx=A5();function A5(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=_x(n,e),n.unshift(e)},remove(e){var t;n=_x(n,e),(t=n[0])==null||t.resume()}}}function _x(n,e){const t=[...n],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function R5(n){return n.filter(e=>e.tagName!=="A")}var N5="Portal",$A=T.forwardRef((n,e)=>{var h;const{container:t,...s}=n,[a,l]=T.useState(!1);pl(()=>l(!0),[]);const u=t||a&&((h=globalThis==null?void 0:globalThis.document)==null?void 0:h.body);return u?MC.createPortal(m.jsx($t.div,{...s,ref:e}),u):null});$A.displayName=N5;var Tg=0;function C5(){T.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??wx()),document.body.insertAdjacentElement("beforeend",n[1]??wx()),Tg++,()=>{Tg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Tg--}},[])}function wx(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var qh="right-scroll-bar-position",Hh="width-before-scroll-bar",I5="with-scroll-bars-hidden",D5="--removed-body-scroll-bar-size";function Sg(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function k5(n,e){var t=T.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(s){var a=t.value;a!==s&&(t.value=s,t.callback(s,a))}}}})[0];return t.callback=e,t.facade}var O5=typeof window<"u"?T.useLayoutEffect:T.useEffect,xx=new WeakMap;function P5(n,e){var t=k5(null,function(s){return n.forEach(function(a){return Sg(a,s)})});return O5(function(){var s=xx.get(t);if(s){var a=new Set(s),l=new Set(n),u=t.current;a.forEach(function(h){l.has(h)||Sg(h,null)}),l.forEach(function(h){a.has(h)||Sg(h,u)})}xx.set(t,n)},[n]),t}function j5(n){return n}function M5(n,e){e===void 0&&(e=j5);var t=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(l){var u=e(l,s);return t.push(u),function(){t=t.filter(function(h){return h!==u})}},assignSyncMedium:function(l){for(s=!0;t.length;){var u=t;t=[],u.forEach(l)}t={push:function(h){return l(h)},filter:function(){return t}}},assignMedium:function(l){s=!0;var u=[];if(t.length){var h=t;t=[],h.forEach(l),u=t}var g=function(){var v=u;u=[],v.forEach(l)},p=function(){return Promise.resolve().then(g)};p(),t={push:function(v){u.push(v),p()},filter:function(v){return u=u.filter(v),t}}}};return a}function V5(n){n===void 0&&(n={});var e=M5(null);return e.options=Jr({async:!0,ssr:!1},n),e}var KA=function(n){var e=n.sideCar,t=Ru(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return T.createElement(s,Jr({},t))};KA.isSideCarExport=!0;function L5(n,e){return n.useMedium(e),KA}var QA=V5(),Ag=function(){},Zf=T.forwardRef(function(n,e){var t=T.useRef(null),s=T.useState({onScrollCapture:Ag,onWheelCapture:Ag,onTouchMoveCapture:Ag}),a=s[0],l=s[1],u=n.forwardProps,h=n.children,g=n.className,p=n.removeScrollBar,v=n.enabled,w=n.shards,_=n.sideCar,S=n.noIsolation,R=n.inert,C=n.allowPinchZoom,k=n.as,P=k===void 0?"div":k,B=n.gapMode,H=Ru(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=_,K=P5([t,e]),ne=Jr(Jr({},H),a);return T.createElement(T.Fragment,null,v&&T.createElement(M,{sideCar:QA,removeScrollBar:p,shards:w,noIsolation:S,inert:R,setCallbacks:l,allowPinchZoom:!!C,lockRef:t,gapMode:B}),u?T.cloneElement(T.Children.only(h),Jr(Jr({},ne),{ref:K})):T.createElement(P,Jr({},ne,{className:g,ref:K}),h))});Zf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zf.classNames={fullWidth:Hh,zeroRight:qh};var U5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function z5(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=U5();return e&&n.setAttribute("nonce",e),n}function B5(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function F5(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var q5=function(){var n=0,e=null;return{add:function(t){n==0&&(e=z5())&&(B5(e,t),F5(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},H5=function(){var n=q5();return function(e,t){T.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},WA=function(){var n=H5(),e=function(t){var s=t.styles,a=t.dynamic;return n(s,a),null};return e},G5={left:0,top:0,right:0,gap:0},Rg=function(n){return parseInt(n||"",10)||0},$5=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],s=e[n==="padding"?"paddingTop":"marginTop"],a=e[n==="padding"?"paddingRight":"marginRight"];return[Rg(t),Rg(s),Rg(a)]},K5=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return G5;var e=$5(n),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},Q5=WA(),sl="data-scroll-locked",W5=function(n,e,t,s){var a=n.left,l=n.top,u=n.right,h=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(I5,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(h,"px ").concat(s,`;
  }
  body[`).concat(sl,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(h,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(qh,` {
    right: `).concat(h,"px ").concat(s,`;
  }
  
  .`).concat(Hh,` {
    margin-right: `).concat(h,"px ").concat(s,`;
  }
  
  .`).concat(qh," .").concat(qh,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Hh," .").concat(Hh,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(sl,`] {
    `).concat(D5,": ").concat(h,`px;
  }
`)},Ex=function(){var n=parseInt(document.body.getAttribute(sl)||"0",10);return isFinite(n)?n:0},Y5=function(){T.useEffect(function(){return document.body.setAttribute(sl,(Ex()+1).toString()),function(){var n=Ex()-1;n<=0?document.body.removeAttribute(sl):document.body.setAttribute(sl,n.toString())}},[])},X5=function(n){var e=n.noRelative,t=n.noImportant,s=n.gapMode,a=s===void 0?"margin":s;Y5();var l=T.useMemo(function(){return K5(a)},[a]);return T.createElement(Q5,{styles:W5(l,!e,a,t?"":"!important")})},Ay=!1;if(typeof window<"u")try{var Rh=Object.defineProperty({},"passive",{get:function(){return Ay=!0,!0}});window.addEventListener("test",Rh,Rh),window.removeEventListener("test",Rh,Rh)}catch{Ay=!1}var Ho=Ay?{passive:!1}:!1,Z5=function(n){return n.tagName==="TEXTAREA"},YA=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Z5(n)&&t[e]==="visible")},J5=function(n){return YA(n,"overflowY")},eV=function(n){return YA(n,"overflowX")},Tx=function(n,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=XA(n,s);if(a){var l=ZA(n,s),u=l[1],h=l[2];if(u>h)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},tV=function(n){var e=n.scrollTop,t=n.scrollHeight,s=n.clientHeight;return[e,t,s]},nV=function(n){var e=n.scrollLeft,t=n.scrollWidth,s=n.clientWidth;return[e,t,s]},XA=function(n,e){return n==="v"?J5(e):eV(e)},ZA=function(n,e){return n==="v"?tV(e):nV(e)},rV=function(n,e){return n==="h"&&e==="rtl"?-1:1},sV=function(n,e,t,s,a){var l=rV(n,window.getComputedStyle(e).direction),u=l*s,h=t.target,g=e.contains(h),p=!1,v=u>0,w=0,_=0;do{var S=ZA(n,h),R=S[0],C=S[1],k=S[2],P=C-k-l*R;(R||P)&&XA(n,h)&&(w+=P,_+=R),h instanceof ShadowRoot?h=h.host:h=h.parentNode}while(!g&&h!==document.body||g&&(e.contains(h)||e===h));return(v&&Math.abs(w)<1||!v&&Math.abs(_)<1)&&(p=!0),p},Nh=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Sx=function(n){return[n.deltaX,n.deltaY]},Ax=function(n){return n&&"current"in n?n.current:n},iV=function(n,e){return n[0]===e[0]&&n[1]===e[1]},aV=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},oV=0,Go=[];function lV(n){var e=T.useRef([]),t=T.useRef([0,0]),s=T.useRef(),a=T.useState(oV++)[0],l=T.useState(WA)[0],u=T.useRef(n);T.useEffect(function(){u.current=n},[n]),T.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(a));var C=_4([n.lockRef.current],(n.shards||[]).map(Ax),!0).filter(Boolean);return C.forEach(function(k){return k.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),C.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(a))})}}},[n.inert,n.lockRef.current,n.shards]);var h=T.useCallback(function(C,k){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!u.current.allowPinchZoom;var P=Nh(C),B=t.current,H="deltaX"in C?C.deltaX:B[0]-P[0],M="deltaY"in C?C.deltaY:B[1]-P[1],K,ne=C.target,I=Math.abs(H)>Math.abs(M)?"h":"v";if("touches"in C&&I==="h"&&ne.type==="range")return!1;var A=Tx(I,ne);if(!A)return!0;if(A?K=I:(K=I==="v"?"h":"v",A=Tx(I,ne)),!A)return!1;if(!s.current&&"changedTouches"in C&&(H||M)&&(s.current=K),!K)return!0;var O=s.current||K;return sV(O,k,C,O==="h"?H:M)},[]),g=T.useCallback(function(C){var k=C;if(!(!Go.length||Go[Go.length-1]!==l)){var P="deltaY"in k?Sx(k):Nh(k),B=e.current.filter(function(K){return K.name===k.type&&(K.target===k.target||k.target===K.shadowParent)&&iV(K.delta,P)})[0];if(B&&B.should){k.cancelable&&k.preventDefault();return}if(!B){var H=(u.current.shards||[]).map(Ax).filter(Boolean).filter(function(K){return K.contains(k.target)}),M=H.length>0?h(k,H[0]):!u.current.noIsolation;M&&k.cancelable&&k.preventDefault()}}},[]),p=T.useCallback(function(C,k,P,B){var H={name:C,delta:k,target:P,should:B,shadowParent:cV(P)};e.current.push(H),setTimeout(function(){e.current=e.current.filter(function(M){return M!==H})},1)},[]),v=T.useCallback(function(C){t.current=Nh(C),s.current=void 0},[]),w=T.useCallback(function(C){p(C.type,Sx(C),C.target,h(C,n.lockRef.current))},[]),_=T.useCallback(function(C){p(C.type,Nh(C),C.target,h(C,n.lockRef.current))},[]);T.useEffect(function(){return Go.push(l),n.setCallbacks({onScrollCapture:w,onWheelCapture:w,onTouchMoveCapture:_}),document.addEventListener("wheel",g,Ho),document.addEventListener("touchmove",g,Ho),document.addEventListener("touchstart",v,Ho),function(){Go=Go.filter(function(C){return C!==l}),document.removeEventListener("wheel",g,Ho),document.removeEventListener("touchmove",g,Ho),document.removeEventListener("touchstart",v,Ho)}},[]);var S=n.removeScrollBar,R=n.inert;return T.createElement(T.Fragment,null,R?T.createElement(l,{styles:aV(a)}):null,S?T.createElement(X5,{gapMode:n.gapMode}):null)}function cV(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const uV=L5(QA,lV);var JA=T.forwardRef(function(n,e){return T.createElement(Zf,Jr({},n,{ref:e,sideCar:uV}))});JA.classNames=Zf.classNames;var dV=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},$o=new WeakMap,Ch=new WeakMap,Ih={},Ng=0,e2=function(n){return n&&(n.host||e2(n.parentNode))},hV=function(n,e){return e.map(function(t){if(n.contains(t))return t;var s=e2(t);return s&&n.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},fV=function(n,e,t,s){var a=hV(e,Array.isArray(n)?n:[n]);Ih[t]||(Ih[t]=new WeakMap);var l=Ih[t],u=[],h=new Set,g=new Set(a),p=function(w){!w||h.has(w)||(h.add(w),p(w.parentNode))};a.forEach(p);var v=function(w){!w||g.has(w)||Array.prototype.forEach.call(w.children,function(_){if(h.has(_))v(_);else try{var S=_.getAttribute(s),R=S!==null&&S!=="false",C=($o.get(_)||0)+1,k=(l.get(_)||0)+1;$o.set(_,C),l.set(_,k),u.push(_),C===1&&R&&Ch.set(_,!0),k===1&&_.setAttribute(t,"true"),R||_.setAttribute(s,"true")}catch(P){console.error("aria-hidden: cannot operate on ",_,P)}})};return v(e),h.clear(),Ng++,function(){u.forEach(function(w){var _=$o.get(w)-1,S=l.get(w)-1;$o.set(w,_),l.set(w,S),_||(Ch.has(w)||w.removeAttribute(s),Ch.delete(w)),S||w.removeAttribute(t)}),Ng--,Ng||($o=new WeakMap,$o=new WeakMap,Ch=new WeakMap,Ih={})}},mV=function(n,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(n)?n:[n]),a=dV(n);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live]"))),fV(s,a,t,"aria-hidden")):function(){return null}},Jf="Dialog",[t2,uL]=Fu(Jf),[pV,jr]=t2(Jf),n2=n=>{const{__scopeDialog:e,children:t,open:s,defaultOpen:a,onOpenChange:l,modal:u=!0}=n,h=T.useRef(null),g=T.useRef(null),[p,v]=Wf({prop:s,defaultProp:a??!1,onChange:l,caller:Jf});return m.jsx(pV,{scope:e,triggerRef:h,contentRef:g,contentId:ou(),titleId:ou(),descriptionId:ou(),open:p,onOpenChange:v,onOpenToggle:T.useCallback(()=>v(w=>!w),[v]),modal:u,children:t})};n2.displayName=Jf;var r2="DialogTrigger",gV=T.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,a=jr(r2,t),l=nr(e,a.triggerRef);return m.jsx($t.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":qv(a.open),...s,ref:l,onClick:tn(n.onClick,a.onOpenToggle)})});gV.displayName=r2;var Bv="DialogPortal",[yV,s2]=t2(Bv,{forceMount:void 0}),i2=n=>{const{__scopeDialog:e,forceMount:t,children:s,container:a}=n,l=jr(Bv,e);return m.jsx(yV,{scope:e,forceMount:t,children:T.Children.map(s,u=>m.jsx(Ol,{present:t||l.open,children:m.jsx($A,{asChild:!0,container:a,children:u})}))})};i2.displayName=Bv;var gf="DialogOverlay",a2=T.forwardRef((n,e)=>{const t=s2(gf,n.__scopeDialog),{forceMount:s=t.forceMount,...a}=n,l=jr(gf,n.__scopeDialog);return l.modal?m.jsx(Ol,{present:s||l.open,children:m.jsx(bV,{...a,ref:e})}):null});a2.displayName=gf;var vV=wu("DialogOverlay.RemoveScroll"),bV=T.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,a=jr(gf,t);return m.jsx(JA,{as:vV,allowPinchZoom:!0,shards:[a.contentRef],children:m.jsx($t.div,{"data-state":qv(a.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),Ha="DialogContent",o2=T.forwardRef((n,e)=>{const t=s2(Ha,n.__scopeDialog),{forceMount:s=t.forceMount,...a}=n,l=jr(Ha,n.__scopeDialog);return m.jsx(Ol,{present:s||l.open,children:l.modal?m.jsx(_V,{...a,ref:e}):m.jsx(wV,{...a,ref:e})})});o2.displayName=Ha;var _V=T.forwardRef((n,e)=>{const t=jr(Ha,n.__scopeDialog),s=T.useRef(null),a=nr(e,t.contentRef,s);return T.useEffect(()=>{const l=s.current;if(l)return mV(l)},[]),m.jsx(l2,{...n,ref:a,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:tn(n.onCloseAutoFocus,l=>{var u;l.preventDefault(),(u=t.triggerRef.current)==null||u.focus()}),onPointerDownOutside:tn(n.onPointerDownOutside,l=>{const u=l.detail.originalEvent,h=u.button===0&&u.ctrlKey===!0;(u.button===2||h)&&l.preventDefault()}),onFocusOutside:tn(n.onFocusOutside,l=>l.preventDefault())})}),wV=T.forwardRef((n,e)=>{const t=jr(Ha,n.__scopeDialog),s=T.useRef(!1),a=T.useRef(!1);return m.jsx(l2,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var u,h;(u=n.onCloseAutoFocus)==null||u.call(n,l),l.defaultPrevented||(s.current||(h=t.triggerRef.current)==null||h.focus(),l.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:l=>{var g,p;(g=n.onInteractOutside)==null||g.call(n,l),l.defaultPrevented||(s.current=!0,l.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const u=l.target;((p=t.triggerRef.current)==null?void 0:p.contains(u))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&a.current&&l.preventDefault()}})}),l2=T.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:l,...u}=n,h=jr(Ha,t),g=T.useRef(null),p=nr(e,g);return C5(),m.jsxs(m.Fragment,{children:[m.jsx(HA,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:l,children:m.jsx(FA,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":qv(h.open),...u,ref:p,onDismiss:()=>h.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(xV,{titleId:h.titleId}),m.jsx(TV,{contentRef:g,descriptionId:h.descriptionId})]})]})}),Fv="DialogTitle",c2=T.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,a=jr(Fv,t);return m.jsx($t.h2,{id:a.titleId,...s,ref:e})});c2.displayName=Fv;var u2="DialogDescription",d2=T.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,a=jr(u2,t);return m.jsx($t.p,{id:a.descriptionId,...s,ref:e})});d2.displayName=u2;var h2="DialogClose",f2=T.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,a=jr(h2,t);return m.jsx($t.button,{type:"button",...s,ref:e,onClick:tn(n.onClick,()=>a.onOpenChange(!1))})});f2.displayName=h2;function qv(n){return n?"open":"closed"}var m2="DialogTitleWarning",[dL,p2]=C3(m2,{contentName:Ha,titleName:Fv,docsSlug:"dialog"}),xV=({titleId:n})=>{const e=p2(m2),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return T.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},EV="DialogDescriptionWarning",TV=({contentRef:n,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${p2(EV).contentName}}.`;return T.useEffect(()=>{var l;const a=(l=n.current)==null?void 0:l.getAttribute("aria-describedby");e&&a&&(document.getElementById(e)||console.warn(s))},[s,n,e]),null},SV=n2,AV=i2,g2=a2,y2=o2,v2=c2,b2=d2,RV=f2;const _2=SV,NV=AV,w2=T.forwardRef(({className:n,...e},t)=>m.jsx(g2,{ref:t,className:Rt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));w2.displayName=g2.displayName;const Hv=T.forwardRef(({className:n,children:e,...t},s)=>m.jsxs(NV,{children:[m.jsx(w2,{}),m.jsxs(y2,{ref:s,className:Rt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,m.jsxs(RV,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[m.jsx(JS,{className:"h-4 w-4"}),m.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Hv.displayName=y2.displayName;const Gv=({className:n,...e})=>m.jsx("div",{className:Rt("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});Gv.displayName="DialogHeader";const x2=({className:n,...e})=>m.jsx("div",{className:Rt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});x2.displayName="DialogFooter";const $v=T.forwardRef(({className:n,...e},t)=>m.jsx(v2,{ref:t,className:Rt("text-lg font-semibold leading-none tracking-tight",n),...e}));$v.displayName=v2.displayName;const Kv=T.forwardRef(({className:n,...e},t)=>m.jsx(b2,{ref:t,className:Rt("text-sm text-muted-foreground",n),...e}));Kv.displayName=b2.displayName;const CV=Vv("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Rx({className:n,variant:e,...t}){return m.jsx("div",{"data-slot":"alert",role:"alert",className:Rt(CV({variant:e}),n),...t})}function Nx({className:n,...e}){return m.jsx("div",{"data-slot":"alert-description",className:Rt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",n),...e})}function Mn({className:n,type:e,...t}){return m.jsx("input",{type:e,"data-slot":"input",className:Rt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}var IV="Label",E2=T.forwardRef((n,e)=>m.jsx($t.label,{...n,ref:e,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||((a=n.onMouseDown)==null||a.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));E2.displayName=IV;var DV=E2;function Ft({className:n,...e}){return m.jsx(DV,{"data-slot":"label",className:Rt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}function kV({restaurant:n}){console.log("WaiterManager rendered with restaurant:",n);const[e,t]=T.useState([]),[s,a]=T.useState(!1),[l,u]=T.useState({name:"",pin:""}),[h,g]=T.useState(""),[p,v]=T.useState([]),[w,_]=T.useState(!0),[S,R]=T.useState(!0);if(!n||!n.id)return m.jsxs("div",{className:"p-6 text-center",children:[m.jsx(Ui,{className:"w-12 h-12 mx-auto text-yellow-500 mb-4"}),m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Restaurant Information Required"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"Unable to load waiter information. Please ensure you're logged in and have selected a restaurant."}),m.jsxs(Ee,{variant:"outline",onClick:()=>window.location.reload(),children:[m.jsx(Kf,{className:"w-4 h-4 mr-2"}),"Refresh Page"]})]});T.useEffect(()=>{if(console.log("useEffect triggered with restaurant:",n),!(n!=null&&n.id)){console.error("No restaurant ID available"),g("No restaurant selected"),_(!1);return}_(!0),g(""),console.log("Subscribing to waiters and tabs for restaurant:",n.id);let ne=()=>{},I=()=>{};return(async()=>{try{ne=_6(n.id,O=>{console.log("Received waiters data:",O),t(O),R(!1),_(!1)}),I=h6(n.id,O=>{console.log("Received tabs data:",O),v(O)})}catch(O){console.error("Error setting up subscriptions:",O),g("Failed to load data. Please refresh the page."),_(!1)}})(),()=>{console.log("Cleaning up subscriptions");try{typeof ne=="function"&&ne(),typeof I=="function"&&I()}catch(O){console.error("Error cleaning up subscriptions:",O)}}},[n==null?void 0:n.id]);const C=ne=>{const I=p.filter(j=>j.waiterId===ne),A=I.filter(j=>j.status==="active"),O=I.filter(j=>j.status==="completed"),L=I.reduce((j,Me)=>j+(Me.total||0),0),z=O.reduce((j,Me)=>j+(Me.total||0),0),F=A.reduce((j,Me)=>j+(Me.total||0),0);return{totalTabs:I.length,activeTabs:A.length,completedTabs:O.length,totalSales:L,totalPaid:z,totalOutstanding:F}},k=async()=>{if(!l.name.trim()||!/^\d{4}$/.test(l.pin)){g("Please enter a name and a 4-digit PIN.");return}g("");try{await b6({...l,restaurantId:n.id}),u({name:"",pin:""}),a(!1)}catch{g("Failed to add waiter. Please try again.")}},P=async ne=>{if(window.confirm("Are you sure you want to delete this waiter? This action cannot be undone."))try{await w6(ne)}catch{g("Failed to delete waiter. Please try again.")}},B=e.length,H=p.filter(ne=>ne.status==="active").length;p.filter(ne=>ne.status==="completed").length;const M=p.reduce((ne,I)=>ne+(I.total||0),0);p.filter(ne=>ne.status==="completed").reduce((ne,I)=>ne+(I.total||0),0);const K=p.filter(ne=>ne.status!=="completed").reduce((ne,I)=>ne+(I.total||0),0);return console.log("WaiterManager state:",{loading:w,initialLoad:S,waitersCount:e.length,tabsCount:p.length}),w?m.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[m.jsx(Va,{className:"w-12 h-12 animate-spin text-primary"}),m.jsx("p",{className:"text-muted-foreground",children:"Loading waiter data..."})]}):m.jsxs("div",{className:"space-y-6",children:[h&&m.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(Ui,{className:"h-5 w-5 text-red-500"})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-red-700",children:h})})]})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[m.jsx(tt,{children:m.jsx(pt,{className:"p-4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(au,{className:"w-6 h-6 text-blue-600 mr-3"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-2xl font-bold",children:B}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Waiters"})]})]})})}),m.jsx(tt,{children:m.jsx(pt,{className:"p-4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(pf,{className:"w-6 h-6 text-amber-600 mr-3"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-2xl font-bold",children:H}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Tabs"})]})]})})}),m.jsx(tt,{children:m.jsx(pt,{className:"p-4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(YS,{className:"w-6 h-6 text-green-600 mr-3"}),m.jsxs("div",{children:[m.jsxs("p",{className:"text-2xl font-bold",children:["Ksh ",M.toFixed(2)]}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Sales"})]})]})})}),m.jsx(tt,{children:m.jsx(pt,{className:"p-4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(RM,{className:"w-6 h-6 text-red-600 mr-3"}),m.jsxs("div",{children:[m.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["Ksh ",K.toFixed(2)]}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Outstanding"})]})]})})})]}),m.jsxs(tt,{children:[m.jsx(un,{children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx(dn,{children:"Waiters"}),m.jsx(xn,{children:"Manage your waitstaff and view their performance"})]}),m.jsxs(Ee,{onClick:()=>a(!s),children:[m.jsx(rl,{className:"w-4 h-4 mr-2"}),s?"Cancel":"Add Waiter"]})]})}),m.jsxs(pt,{className:"space-y-6",children:[s&&m.jsxs(tt,{className:"mb-6",children:[m.jsxs(un,{children:[m.jsx(dn,{children:"Add New Waiter"}),m.jsx(xn,{children:"Create a new waiter account with a unique PIN"})]}),m.jsxs(pt,{className:"space-y-4",children:[h&&m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:h}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ft,{htmlFor:"waiterName",children:"Waiter Name"}),m.jsx(Mn,{id:"waiterName",value:l.name,onChange:ne=>u({...l,name:ne.target.value}),placeholder:"e.g., John Doe",className:"w-full"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ft,{htmlFor:"waiterPin",children:"4-Digit PIN"}),m.jsx(Mn,{id:"waiterPin",type:"password",inputMode:"numeric",maxLength:4,value:l.pin,onChange:ne=>u({...l,pin:ne.target.value.replace(/\D/g,"")}),placeholder:"e.g., 1234",className:"w-full"})]})]}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[m.jsx(Ee,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),m.jsxs(Ee,{onClick:k,disabled:!l.name||l.pin.length!==4,children:[m.jsx(rl,{className:"w-4 h-4 mr-2"}),"Add Waiter"]})]})]})]}),e.length===0?m.jsxs("div",{className:"text-center py-8 border-2 border-dashed rounded-lg",children:[m.jsx(au,{className:"w-12 h-12 mx-auto text-gray-400 mb-2"}),m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No waiters yet"}),m.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Get started by adding your first waiter"}),m.jsxs(Ee,{onClick:()=>a(!0),children:[m.jsx(rl,{className:"w-4 h-4 mr-2"}),"Add Waiter"]})]}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(ne=>{const I=C(ne.id);return m.jsx(tt,{className:"hover:shadow-md transition-shadow",children:m.jsxs(pt,{className:"p-0",children:[m.jsx("div",{className:"p-4 border-b",children:m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:m.jsx(yy,{className:"w-5 h-5 text-blue-600"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold",children:ne.name}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["PIN: ",ne.pin]})]})]}),m.jsx(Ee,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-destructive",onClick:()=>P(ne.id),children:m.jsx(XS,{className:"w-4 h-4"})})]})}),m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium",children:"Tabs"}),m.jsx("p",{className:"text-lg font-bold",children:I.totalTabs})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium",children:"Active"}),m.jsx("p",{className:"text-lg font-bold text-amber-600",children:I.activeTabs})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium",children:"Completed"}),m.jsx("p",{className:"text-lg font-bold text-green-600",children:I.completedTabs})]})]}),m.jsxs("div",{className:"mt-4 space-y-2",children:[m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-muted-foreground",children:"Total Sales"}),m.jsxs("span",{className:"font-medium",children:["Ksh ",I.totalSales.toFixed(2)]})]}),m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-muted-foreground",children:"Paid"}),m.jsxs("span",{className:"text-green-600 font-medium",children:["Ksh ",I.totalPaid.toFixed(2)]})]}),m.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[m.jsx("span",{className:"text-muted-foreground",children:"Outstanding"}),m.jsxs("span",{className:"text-red-600",children:["Ksh ",I.totalOutstanding.toFixed(2)]})]})]})]})]})},ne.id)})})]})]})]})}const T2=Object.freeze([{value:"food",label:"Food"},{value:"drinks",label:"Drinks"},{value:"appetizers",label:"Appetizers"},{value:"desserts",label:"Desserts"}]);console.log("Available categories:",T2);function OV({restaurant:n}){console.log("MenuManager rendering with restaurant:",n);const[e,t]=T.useState([]),[s,a]=T.useState(!1),[l,u]=T.useState(null),[h,g]=T.useState(!0),[p,v]=T.useState(null),{logInWithGoogle:w}=Bu(),[_,S]=T.useState({name:"",price:"",category:"food",description:"",available:!0,imageUrl:""});T.useEffect(()=>{if(console.log("Restaurant ID changed:",n==null?void 0:n.id),!(n!=null&&n.id)){console.log("No restaurant ID, skipping subscription"),t([]),g(!1),v("No restaurant selected");return}g(!0),v(null),console.log("Setting up menu subscription for restaurant:",n.id);const K=(async()=>{try{console.log("Trying with composite index...");const ne=fn(vt(Le,"menuItems"),bt("restaurantId","==",n.id),Ki("category","asc"),Ki("name","asc"));return yr(ne,I=>{const A=I.docs.map(O=>({id:O.id,...O.data()}));console.log("Received menu items (with index):",A),t(A),g(!1)},I=>{if(console.error("Error with composite index query:",I),I.code==="failed-precondition"){console.log("Composite index missing, trying without ordering...");const A=fn(vt(Le,"menuItems"),bt("restaurantId","==",n.id));return yr(A,O=>{const L=O.docs.map(z=>({id:z.id,...z.data()}));console.log("Received menu items (simple query):",L),t(L),g(!1)},O=>{console.error("Error with simple query:",O),v("Failed to load menu items"),g(!1)})}})}catch(ne){return console.error("Error setting up menu subscription:",ne),()=>{}}})();return()=>{console.log("Cleaning up menu subscription"),K&&typeof K.then=="function"?K.then(ne=>ne&&ne()):typeof K=="function"&&K()}},[n==null?void 0:n.id]);const R=async()=>{if(console.log("handleAddItem called with newItem:",_),!_.name.trim()||!_.price){console.log("Validation failed - missing name or price");return}try{console.log("Attempting to create menu item...");const M={name:_.name.trim(),description:(_.description||"").trim(),price:parseFloat(_.price),category:_.category||"food",available:!0,restaurantId:n.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("Calling createMenuItem with data:",M);const K=await x6(M);console.log("createMenuItem result:",K),S({name:"",price:"",category:"food",description:"",available:!0,imageUrl:""}),a(!1),console.log("Form reset and hidden")}catch(M){console.error("Error in handleAddItem:",{error:M,errorMessage:M.message,errorStack:M.stack,restaurantId:n==null?void 0:n.id}),alert(`Failed to add menu item: ${M.message}`)}},C=M=>{u(M),S({name:M.name,price:M.price,category:M.category,description:M.description||"",available:M.available!==!1,imageUrl:M.imageUrl||""}),a(!0)},k=M=>{S({name:`${M.name} (Copy)`,price:M.price,category:M.category,description:M.description||"",available:!0,imageUrl:M.imageUrl||""}),a(!0),u(null),setTimeout(()=>{const K=document.querySelector('form, [role="form"]');K&&K.scrollIntoView({behavior:"smooth",block:"start"})},100)},P=async()=>{if(!l||!_.name.trim()||!_.price){console.log("Validation failed - missing name, price, or editing item");return}try{console.log("Attempting to update menu item:",l.id);const M={name:_.name.trim(),description:(_.description||"").trim(),price:parseFloat(_.price),category:_.category||"food",available:_.available,updatedAt:new Date().toISOString()};console.log("Updating menu item with data:",M),await E6(l.id,M),S({name:"",price:"",category:"food",description:"",available:!0,imageUrl:""}),u(null),a(!1),console.log("Menu item updated successfully")}catch(M){console.error("Error updating menu item:",M),alert(`Failed to update menu item: ${M.message}`)}},B=async M=>{confirm("Are you sure you want to delete this menu item?")&&await T6(M)},H=async()=>{try{const M=await w();alert(`Successfully connected to Google as ${M.user.displayName}. Ready to import from Sheets! (API call to be implemented)`)}catch(M){console.error("Google Sheets connection error:",M),alert("Failed to connect to Google. Please try again.")}};return n?h?m.jsxs("div",{className:"flex justify-center items-center p-8",children:[m.jsx(Va,{className:"w-8 h-8 animate-spin text-primary"}),m.jsx("span",{className:"ml-2",children:"Loading menu items..."})]}):(e.reduce((M,K)=>(M[K.category]||(M[K.category]=[]),M[K.category].push(K),M),{}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Menu Management"}),m.jsxs(Ee,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),className:"flex items-center gap-2",children:[m.jsx(Kf,{className:"w-4 h-4"}),"Refresh"]})]}),s&&m.jsxs(tt,{className:"mb-6",children:[m.jsxs(un,{children:[m.jsx(dn,{children:"Add New Menu Item"}),m.jsx(xn,{children:"Enter the details for the new menu item"})]}),m.jsxs(pt,{className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ft,{htmlFor:"itemName",children:"Item Name *"}),m.jsx(Mn,{id:"itemName",placeholder:"e.g., Spaghetti Carbonara",value:_.name,onChange:M=>S({..._,name:M.target.value})})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ft,{htmlFor:"price",children:"Price *"}),m.jsx(Mn,{id:"price",type:"number",placeholder:"e.g., 12.99",min:"0",step:"0.01",value:_.price,onChange:M=>S({..._,price:M.target.value})})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ft,{htmlFor:"category",children:"Category"}),m.jsx("select",{id:"category",value:_.category,onChange:M=>S({..._,category:M.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:T2.map(M=>m.jsx("option",{value:M.value,children:M.label},M.value))})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ft,{htmlFor:"description",children:"Description"}),m.jsx(Mn,{id:"description",placeholder:"Short description (optional)",value:_.description,onChange:M=>S({..._,description:M.target.value})})]})]}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[m.jsx(Ee,{variant:"outline",onClick:()=>{a(!1),S({name:"",price:"",category:"food",description:""})},children:"Cancel"}),m.jsxs(Ee,{onClick:R,disabled:!_.name.trim()||!_.price,children:[m.jsx(rl,{className:"w-4 h-4 mr-2"})," Add Item"]})]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[m.jsx(tt,{className:"cursor-pointer hover:border-primary",onClick:()=>a(!0),children:m.jsxs(un,{className:"items-center text-center",children:[m.jsx(gy,{className:"w-8 h-8 text-primary mb-2"}),m.jsx(dn,{children:"Manual Entry"}),m.jsx(xn,{className:"text-xs",children:"Add items one by one using a form."})]})}),m.jsx(tt,{className:"cursor-pointer h-full hover:border-primary",onClick:H,children:m.jsxs(un,{className:"items-center text-center",children:[m.jsx($M,{className:"w-8 h-8 text-green-600 mb-2"}),m.jsx(dn,{children:"Google Sheet"}),m.jsx(xn,{className:"text-xs",children:"Connect and import from a Google Sheet."})]})}),m.jsx(tt,{className:"cursor-not-allowed bg-muted/50",children:m.jsxs(un,{className:"items-center text-center",children:[m.jsx(kM,{className:"w-8 h-8 text-muted-foreground mb-2"}),m.jsx(dn,{className:"text-muted-foreground",children:"Upload PDF (AI)"}),m.jsx(xn,{className:"text-xs",children:"Auto-extract items from a PDF menu. (Coming soon)"})]})}),m.jsx(tt,{className:"cursor-not-allowed bg-muted/50",children:m.jsxs(un,{className:"items-center text-center",children:[m.jsx(EM,{className:"w-8 h-8 text-muted-foreground mb-2"}),m.jsx(dn,{className:"text-muted-foreground",children:"API Sync"}),m.jsx(xn,{className:"text-xs",children:"Connect to your POS system. (Coming soon)"})]})})]}),(s||l)&&m.jsxs(tt,{className:"mb-6",children:[m.jsxs(un,{children:[m.jsx(dn,{children:l?"Edit Menu Item":"Add New Menu Item"}),m.jsx(xn,{children:l?"Update the menu item details":"Enter the details for the new menu item"})]}),m.jsxs(pt,{className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ft,{htmlFor:"itemName",children:"Item Name *"}),m.jsx(Mn,{id:"itemName",placeholder:"e.g., Margherita Pizza",value:_.name,onChange:M=>S({..._,name:M.target.value})})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ft,{htmlFor:"price",children:"Price *"}),m.jsx(Mn,{id:"price",type:"number",placeholder:"e.g., 12.99",value:_.price,onChange:M=>S({..._,price:M.target.value}),min:"0",step:"0.01"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"category",className:"block text-sm font-medium mb-1",children:"Category"}),m.jsxs("div",{className:"relative",children:[m.jsxs("select",{id:"category",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:_.category,onChange:M=>{console.log("Selected category:",M.target.value),S({..._,category:M.target.value})},children:[m.jsx("option",{value:"",children:"-- Select a category --"}),m.jsx("option",{value:"food",children:"Food"}),m.jsx("option",{value:"drinks",children:"Drinks"}),m.jsx("option",{value:"appetizers",children:"Appetizers"}),m.jsx("option",{value:"desserts",children:"Desserts"})]}),m.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:m.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),m.jsxs("div",{className:"mt-1 text-sm text-gray-500",children:["Current: ",_.category||"None selected"]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ft,{htmlFor:"description",children:"Description"}),m.jsx(Mn,{id:"description",placeholder:"Short description (optional)",value:_.description,onChange:M=>S({..._,description:M.target.value})})]})]}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[m.jsx(Ee,{variant:"outline",onClick:()=>{a(!1),u(null),S({name:"",price:"",category:"food",description:"",available:!0,imageUrl:""})},children:"Cancel"}),m.jsx(Ee,{onClick:l?P:R,disabled:!_.name.trim()||!_.price,className:l?"bg-blue-600 hover:bg-blue-700":"",children:l?m.jsxs(m.Fragment,{children:[m.jsx(tx,{className:"w-4 h-4 mr-2"}),"Update Item"]}):m.jsxs(m.Fragment,{children:[m.jsx(rl,{className:"w-4 h-4 mr-2"}),"Add Item"]})})]})]})]}),m.jsxs("div",{className:"space-y-4 pt-4",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h3",{className:"text-lg font-semibold",children:"Current Menu"}),m.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.length," ",e.length===1?"item":"items"," in menu"]})]}),p&&m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-;oiuy6ghhgtdfhregeteueiueueueyeyeyeyeueueueueieieeieureytythr3393i5uyuhyy86869797iu9uuiu979797iu679u6809u75790iii----====////////////''''';=-04 py-3 rounded relative",role:"alert",children:m.jsx("span",{className:"block sm:inline",children:p})}),e.length===0?m.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center",children:[m.jsx(gy,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),m.jsx("h3",{className:"text-lg font-medium",children:"No menu items yet"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by adding your first menu item"}),m.jsxs(Ee,{onClick:()=>a(!0),children:[m.jsx(rl,{className:"w-4 h-4 mr-2"})," Add Menu Item"]})]}):m.jsx("div",{className:"rounded-md border",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"border-b bg-muted/50",children:[m.jsx("th",{className:"text-left p-3 font-medium",children:"Name"}),m.jsx("th",{className:"text-left p-3 font-medium",children:"Description"}),m.jsx("th",{className:"text-right p-3 font-medium",children:"Price"}),m.jsx("th",{className:"text-center p-3 font-medium",children:"Category"}),m.jsx("th",{className:"text-center p-3 font-medium",children:"Status"}),m.jsx("th",{className:"text-right p-3 font-medium",children:"Actions"})]})}),m.jsx("tbody",{children:e.map(M=>m.jsxs("tr",{className:"border-b hover:bg-muted/20 transition-colors",children:[m.jsx("td",{className:"p-3 font-medium",children:m.jsxs("div",{className:"flex items-center",children:[M.imageUrl&&m.jsx("img",{src:M.imageUrl,alt:M.name,className:"w-10 h-10 rounded-md object-cover mr-3"}),m.jsx("span",{children:M.name})]})}),m.jsx("td",{className:"p-3 text-sm text-muted-foreground max-w-xs",children:m.jsx("p",{className:"line-clamp-2",children:M.description||"—"})}),m.jsxs("td",{className:"p-3 text-right font-medium",children:["$",parseFloat(M.price).toFixed(2)]}),m.jsx("td",{className:"p-3 text-center",children:m.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-muted text-muted-foreground capitalize",children:M.category})}),m.jsx("td",{className:"p-3 text-center",children:m.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M.available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:M.available?"Available":"Unavailable"})}),m.jsx("td",{className:"p-3 text-right",children:m.jsxs("div",{className:"flex justify-end space-x-1",children:[m.jsx(Ee,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>C(M),title:"Edit item",children:m.jsx(tx,{className:"h-4 w-4"})}),m.jsx(Ee,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-800",onClick:()=>k(M),title:"Duplicate item",children:m.jsx(SM,{className:"h-4 w-4"})}),m.jsx(Ee,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive hover:text-destructive",onClick:()=>B(M.id),children:m.jsx(XS,{className:"h-4 w-4"})})]})})]},M.id))})]})})]})]})):m.jsxs("div",{className:"flex justify-center items-center p-8",children:[m.jsx(Va,{className:"w-8 h-8 animate-spin text-primary"}),m.jsx("span",{className:"ml-2",children:"Loading restaurant data..."})]})}var Ko={},Cg={exports:{}},Ig,Cx;function PV(){if(Cx)return Ig;Cx=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ig=n,Ig}var Dg,Ix;function jV(){if(Ix)return Dg;Ix=1;var n=PV();function e(){}function t(){}return t.resetWarningCache=e,Dg=function(){function s(u,h,g,p,v,w){if(w!==n){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}s.isRequired=s;function a(){return s}var l={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},Dg}var Dx;function S2(){return Dx||(Dx=1,Cg.exports=jV()()),Cg.exports}var kg,kx;function A2(){return kx||(kx=1,kg={L:1,M:0,Q:3,H:2}),kg}var Og,Ox;function R2(){return Ox||(Ox=1,Og={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),Og}var Pg,Px;function MV(){if(Px)return Pg;Px=1;var n=R2();function e(t){this.mode=n.MODE_8BIT_BYTE,this.data=t}return e.prototype={getLength:function(t){return this.data.length},write:function(t){for(var s=0;s<this.data.length;s++)t.put(this.data.charCodeAt(s),8)}},Pg=e,Pg}var jg,jx;function VV(){if(jx)return jg;jx=1;var n=A2();function e(t,s){this.totalCount=t,this.dataCount=s}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,s){var a=e.getRsBlockTable(t,s);if(a==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+s);for(var l=a.length/3,u=new Array,h=0;h<l;h++)for(var g=a[h*3+0],p=a[h*3+1],v=a[h*3+2],w=0;w<g;w++)u.push(new e(p,v));return u},e.getRsBlockTable=function(t,s){switch(s){case n.L:return e.RS_BLOCK_TABLE[(t-1)*4+0];case n.M:return e.RS_BLOCK_TABLE[(t-1)*4+1];case n.Q:return e.RS_BLOCK_TABLE[(t-1)*4+2];case n.H:return e.RS_BLOCK_TABLE[(t-1)*4+3];default:return}},jg=e,jg}var Mg,Mx;function LV(){if(Mx)return Mg;Mx=1;function n(){this.buffer=new Array,this.length=0}return n.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var s=0;s<t;s++)this.putBit((e>>>t-s-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},Mg=n,Mg}var Vg,Vx;function N2(){if(Vx)return Vg;Vx=1;for(var n={glog:function(t){if(t<1)throw new Error("glog("+t+")");return n.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return n.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)n.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)n.EXP_TABLE[e]=n.EXP_TABLE[e-4]^n.EXP_TABLE[e-5]^n.EXP_TABLE[e-6]^n.EXP_TABLE[e-8];for(var e=0;e<255;e++)n.LOG_TABLE[n.EXP_TABLE[e]]=e;return Vg=n,Vg}var Lg,Lx;function C2(){if(Lx)return Lg;Lx=1;var n=N2();function e(t,s){if(t.length==null)throw new Error(t.length+"/"+s);for(var a=0;a<t.length&&t[a]==0;)a++;this.num=new Array(t.length-a+s);for(var l=0;l<t.length-a;l++)this.num[l]=t[l+a]}return e.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var s=new Array(this.getLength()+t.getLength()-1),a=0;a<this.getLength();a++)for(var l=0;l<t.getLength();l++)s[a+l]^=n.gexp(n.glog(this.get(a))+n.glog(t.get(l)));return new e(s,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var s=n.glog(this.get(0))-n.glog(t.get(0)),a=new Array(this.getLength()),l=0;l<this.getLength();l++)a[l]=this.get(l);for(var l=0;l<t.getLength();l++)a[l]^=n.gexp(n.glog(t.get(l))+s);return new e(a,0).mod(t)}},Lg=e,Lg}var Ug,Ux;function UV(){if(Ux)return Ug;Ux=1;var n=R2(),e=C2(),t=N2(),s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(l){for(var u=l<<10;a.getBCHDigit(u)-a.getBCHDigit(a.G15)>=0;)u^=a.G15<<a.getBCHDigit(u)-a.getBCHDigit(a.G15);return(l<<10|u)^a.G15_MASK},getBCHTypeNumber:function(l){for(var u=l<<12;a.getBCHDigit(u)-a.getBCHDigit(a.G18)>=0;)u^=a.G18<<a.getBCHDigit(u)-a.getBCHDigit(a.G18);return l<<12|u},getBCHDigit:function(l){for(var u=0;l!=0;)u++,l>>>=1;return u},getPatternPosition:function(l){return a.PATTERN_POSITION_TABLE[l-1]},getMask:function(l,u,h){switch(l){case s.PATTERN000:return(u+h)%2==0;case s.PATTERN001:return u%2==0;case s.PATTERN010:return h%3==0;case s.PATTERN011:return(u+h)%3==0;case s.PATTERN100:return(Math.floor(u/2)+Math.floor(h/3))%2==0;case s.PATTERN101:return u*h%2+u*h%3==0;case s.PATTERN110:return(u*h%2+u*h%3)%2==0;case s.PATTERN111:return(u*h%3+(u+h)%2)%2==0;default:throw new Error("bad maskPattern:"+l)}},getErrorCorrectPolynomial:function(l){for(var u=new e([1],0),h=0;h<l;h++)u=u.multiply(new e([1,t.gexp(h)],0));return u},getLengthInBits:function(l,u){if(1<=u&&u<10)switch(l){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:return 8;case n.MODE_KANJI:return 8;default:throw new Error("mode:"+l)}else if(u<27)switch(l){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+l)}else if(u<41)switch(l){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+l)}else throw new Error("type:"+u)},getLostPoint:function(l){for(var u=l.getModuleCount(),h=0,g=0;g<u;g++)for(var p=0;p<u;p++){for(var v=0,w=l.isDark(g,p),_=-1;_<=1;_++)if(!(g+_<0||u<=g+_))for(var S=-1;S<=1;S++)p+S<0||u<=p+S||_==0&&S==0||w==l.isDark(g+_,p+S)&&v++;v>5&&(h+=3+v-5)}for(var g=0;g<u-1;g++)for(var p=0;p<u-1;p++){var R=0;l.isDark(g,p)&&R++,l.isDark(g+1,p)&&R++,l.isDark(g,p+1)&&R++,l.isDark(g+1,p+1)&&R++,(R==0||R==4)&&(h+=3)}for(var g=0;g<u;g++)for(var p=0;p<u-6;p++)l.isDark(g,p)&&!l.isDark(g,p+1)&&l.isDark(g,p+2)&&l.isDark(g,p+3)&&l.isDark(g,p+4)&&!l.isDark(g,p+5)&&l.isDark(g,p+6)&&(h+=40);for(var p=0;p<u;p++)for(var g=0;g<u-6;g++)l.isDark(g,p)&&!l.isDark(g+1,p)&&l.isDark(g+2,p)&&l.isDark(g+3,p)&&l.isDark(g+4,p)&&!l.isDark(g+5,p)&&l.isDark(g+6,p)&&(h+=40);for(var C=0,p=0;p<u;p++)for(var g=0;g<u;g++)l.isDark(g,p)&&C++;var k=Math.abs(100*C/u/u-50)/5;return h+=k*10,h}};return Ug=a,Ug}var zg,zx;function zV(){if(zx)return zg;zx=1;var n=MV(),e=VV(),t=LV(),s=UV(),a=C2();function l(h,g){this.typeNumber=h,this.errorCorrectLevel=g,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var u=l.prototype;return u.addData=function(h){var g=new n(h);this.dataList.push(g),this.dataCache=null},u.isDark=function(h,g){if(h<0||this.moduleCount<=h||g<0||this.moduleCount<=g)throw new Error(h+","+g);return this.modules[h][g]},u.getModuleCount=function(){return this.moduleCount},u.make=function(){if(this.typeNumber<1){var h=1;for(h=1;h<40;h++){for(var g=e.getRSBlocks(h,this.errorCorrectLevel),p=new t,v=0,w=0;w<g.length;w++)v+=g[w].dataCount;for(var w=0;w<this.dataList.length;w++){var _=this.dataList[w];p.put(_.mode,4),p.put(_.getLength(),s.getLengthInBits(_.mode,h)),_.write(p)}if(p.getLengthInBits()<=v*8)break}this.typeNumber=h}this.makeImpl(!1,this.getBestMaskPattern())},u.makeImpl=function(h,g){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var p=0;p<this.moduleCount;p++){this.modules[p]=new Array(this.moduleCount);for(var v=0;v<this.moduleCount;v++)this.modules[p][v]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(h,g),this.typeNumber>=7&&this.setupTypeNumber(h),this.dataCache==null&&(this.dataCache=l.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,g)},u.setupPositionProbePattern=function(h,g){for(var p=-1;p<=7;p++)if(!(h+p<=-1||this.moduleCount<=h+p))for(var v=-1;v<=7;v++)g+v<=-1||this.moduleCount<=g+v||(0<=p&&p<=6&&(v==0||v==6)||0<=v&&v<=6&&(p==0||p==6)||2<=p&&p<=4&&2<=v&&v<=4?this.modules[h+p][g+v]=!0:this.modules[h+p][g+v]=!1)},u.getBestMaskPattern=function(){for(var h=0,g=0,p=0;p<8;p++){this.makeImpl(!0,p);var v=s.getLostPoint(this);(p==0||h>v)&&(h=v,g=p)}return g},u.createMovieClip=function(h,g,p){var v=h.createEmptyMovieClip(g,p),w=1;this.make();for(var _=0;_<this.modules.length;_++)for(var S=_*w,R=0;R<this.modules[_].length;R++){var C=R*w,k=this.modules[_][R];k&&(v.beginFill(0,100),v.moveTo(C,S),v.lineTo(C+w,S),v.lineTo(C+w,S+w),v.lineTo(C,S+w),v.endFill())}return v},u.setupTimingPattern=function(){for(var h=8;h<this.moduleCount-8;h++)this.modules[h][6]==null&&(this.modules[h][6]=h%2==0);for(var g=8;g<this.moduleCount-8;g++)this.modules[6][g]==null&&(this.modules[6][g]=g%2==0)},u.setupPositionAdjustPattern=function(){for(var h=s.getPatternPosition(this.typeNumber),g=0;g<h.length;g++)for(var p=0;p<h.length;p++){var v=h[g],w=h[p];if(this.modules[v][w]==null)for(var _=-2;_<=2;_++)for(var S=-2;S<=2;S++)_==-2||_==2||S==-2||S==2||_==0&&S==0?this.modules[v+_][w+S]=!0:this.modules[v+_][w+S]=!1}},u.setupTypeNumber=function(h){for(var g=s.getBCHTypeNumber(this.typeNumber),p=0;p<18;p++){var v=!h&&(g>>p&1)==1;this.modules[Math.floor(p/3)][p%3+this.moduleCount-8-3]=v}for(var p=0;p<18;p++){var v=!h&&(g>>p&1)==1;this.modules[p%3+this.moduleCount-8-3][Math.floor(p/3)]=v}},u.setupTypeInfo=function(h,g){for(var p=this.errorCorrectLevel<<3|g,v=s.getBCHTypeInfo(p),w=0;w<15;w++){var _=!h&&(v>>w&1)==1;w<6?this.modules[w][8]=_:w<8?this.modules[w+1][8]=_:this.modules[this.moduleCount-15+w][8]=_}for(var w=0;w<15;w++){var _=!h&&(v>>w&1)==1;w<8?this.modules[8][this.moduleCount-w-1]=_:w<9?this.modules[8][15-w-1+1]=_:this.modules[8][15-w-1]=_}this.modules[this.moduleCount-8][8]=!h},u.mapData=function(h,g){for(var p=-1,v=this.moduleCount-1,w=7,_=0,S=this.moduleCount-1;S>0;S-=2)for(S==6&&S--;;){for(var R=0;R<2;R++)if(this.modules[v][S-R]==null){var C=!1;_<h.length&&(C=(h[_]>>>w&1)==1);var k=s.getMask(g,v,S-R);k&&(C=!C),this.modules[v][S-R]=C,w--,w==-1&&(_++,w=7)}if(v+=p,v<0||this.moduleCount<=v){v-=p,p=-p;break}}},l.PAD0=236,l.PAD1=17,l.createData=function(h,g,p){for(var v=e.getRSBlocks(h,g),w=new t,_=0;_<p.length;_++){var S=p[_];w.put(S.mode,4),w.put(S.getLength(),s.getLengthInBits(S.mode,h)),S.write(w)}for(var R=0,_=0;_<v.length;_++)R+=v[_].dataCount;if(w.getLengthInBits()>R*8)throw new Error("code length overflow. ("+w.getLengthInBits()+">"+R*8+")");for(w.getLengthInBits()+4<=R*8&&w.put(0,4);w.getLengthInBits()%8!=0;)w.putBit(!1);for(;!(w.getLengthInBits()>=R*8||(w.put(l.PAD0,8),w.getLengthInBits()>=R*8));)w.put(l.PAD1,8);return l.createBytes(w,v)},l.createBytes=function(h,g){for(var p=0,v=0,w=0,_=new Array(g.length),S=new Array(g.length),R=0;R<g.length;R++){var C=g[R].dataCount,k=g[R].totalCount-C;v=Math.max(v,C),w=Math.max(w,k),_[R]=new Array(C);for(var P=0;P<_[R].length;P++)_[R][P]=255&h.buffer[P+p];p+=C;var B=s.getErrorCorrectPolynomial(k),H=new a(_[R],B.getLength()-1),M=H.mod(B);S[R]=new Array(B.getLength()-1);for(var P=0;P<S[R].length;P++){var K=P+M.getLength()-S[R].length;S[R][P]=K>=0?M.get(K):0}}for(var ne=0,P=0;P<g.length;P++)ne+=g[P].totalCount;for(var I=new Array(ne),A=0,P=0;P<v;P++)for(var R=0;R<g.length;R++)P<_[R].length&&(I[A++]=_[R][P]);for(var P=0;P<w;P++)for(var R=0;R<g.length;R++)P<S[R].length&&(I[A++]=S[R][P]);return I},zg=l,zg}var Dh={},Bx;function BV(){if(Bx)return Dh;Bx=1,Object.defineProperty(Dh,"__esModule",{value:!0});var n=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var w=arguments[v];for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(p[_]=w[_])}return p},e=S2(),t=l(e),s=xu(),a=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function u(p,v){var w={};for(var _ in p)v.indexOf(_)>=0||Object.prototype.hasOwnProperty.call(p,_)&&(w[_]=p[_]);return w}var h={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},g=(0,s.forwardRef)(function(p,v){var w=p.bgColor,_=p.bgD,S=p.fgD,R=p.fgColor,C=p.size,k=p.title,P=p.viewBoxSize,B=p.xmlns,H=B===void 0?"http://www.w3.org/2000/svg":B,M=u(p,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return a.default.createElement("svg",n({},M,{height:C,ref:v,viewBox:"0 0 "+P+" "+P,width:C,xmlns:H}),k?a.default.createElement("title",null,k):null,a.default.createElement("path",{d:_,fill:w}),a.default.createElement("path",{d:S,fill:R}))});return g.displayName="QRCodeSvg",g.propTypes=h,Dh.default=g,Dh}var Fx;function FV(){if(Fx)return Ko;Fx=1,Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.QRCode=void 0;var n=Object.assign||function(C){for(var k=1;k<arguments.length;k++){var P=arguments[k];for(var B in P)Object.prototype.hasOwnProperty.call(P,B)&&(C[B]=P[B])}return C},e=S2(),t=w(e),s=A2(),a=w(s),l=zV(),u=w(l),h=xu(),g=w(h),p=BV(),v=w(p);function w(C){return C&&C.__esModule?C:{default:C}}function _(C,k){var P={};for(var B in C)k.indexOf(B)>=0||Object.prototype.hasOwnProperty.call(C,B)&&(P[B]=C[B]);return P}var S={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},R=(0,h.forwardRef)(function(C,k){var P=C.bgColor,B=P===void 0?"#FFFFFF":P,H=C.fgColor,M=H===void 0?"#000000":H,K=C.level,ne=K===void 0?"L":K,I=C.size,A=I===void 0?256:I,O=C.value,L=_(C,["bgColor","fgColor","level","size","value"]),z=new u.default(-1,a.default[ne]);z.addData(O),z.make();var F=z.modules;return g.default.createElement(v.default,n({},L,{bgColor:B,bgD:F.map(function(j,Me){return j.map(function(Ce,Y){return Ce?"":"M "+Y+" "+Me+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:M,fgD:F.map(function(j,Me){return j.map(function(Ce,Y){return Ce?"M "+Y+" "+Me+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:k,size:A,viewBoxSize:F.length}))});return Ko.QRCode=R,R.displayName="QRCode",R.propTypes=S,Ko.default=R,Ko}var qV=FV();const HV=Ry(qV);function GV({open:n,onOpenChange:e,restaurant:t}){const[s,a]=T.useState(""),l=T.useRef(null);T.useEffect(()=>{if(n&&t){const p=`${window.location.origin}/landing?restaurantId=${t.id}`;a(p)}},[n,t]);const u=()=>{const g=l.current.querySelector("svg");if(!g)return;const p=new XMLSerializer().serializeToString(g),v=document.createElement("canvas"),w=v.getContext("2d"),_=new Image;_.onload=()=>{v.width=_.width,v.height=_.height,w.drawImage(_,0,0);const S=v.toDataURL("image/png"),R=document.createElement("a"),C=t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();R.download=`billo-qr-${C}.png`,R.href=S,R.click()},_.src=`data:image/svg+xml;base64,${btoa(p)}`},h=()=>{a(""),e(!1)};return m.jsx(_2,{open:n,onOpenChange:h,children:m.jsxs(Hv,{className:"sm:max-w-[425px]",children:[m.jsxs(Gv,{children:[m.jsx($v,{children:"Your Restaurant QR Code"}),m.jsx(Kv,{children:"Customers can scan this code to open a tab. Print and display it where customers can easily see it."})]}),m.jsx("div",{className:"grid gap-4 py-4",children:s?m.jsxs("div",{className:"p-4 bg-white rounded-md",ref:l,children:[m.jsx(HV,{value:s,size:256,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"}),m.jsx("p",{className:"text-center font-bold text-lg mt-2",children:t==null?void 0:t.name}),m.jsx("p",{className:"text-center text-muted-foreground",children:"Scan to open a tab"})]}):m.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"Generating QR Code..."})}),m.jsx(x2,{children:m.jsx(Ee,{onClick:u,disabled:!s,children:"Download QR Code"})})]})})}function $V({isAdminView:n=!1}){const e=Ks(),t=Pr(),{currentUser:s,login:a,loginWithGoogle:l,logout:u,isAdmin:h,loading:g}=Bu(),[p,v]=T.useState(!0),[w,_]=T.useState(!1),[S,R]=T.useState(!1),[C,k]=T.useState(""),[P,B]=T.useState(""),[H,M]=T.useState(!1),[K,ne]=T.useState(!0),[I,A]=T.useState(null),[O,L]=T.useState(""),[z,F]=T.useState([]),[j,Me]=T.useState([]),[Ce,Y]=T.useState(!1),[he,ue]=T.useState(!1),[Re,U]=T.useState({email:"",password:"",confirmPassword:""}),[G,re]=T.useState("");T.useRef(),T.useRef(),T.useRef(),T.useEffect(()=>{if(!(I!=null&&I.id))return;console.log("Loading active tabs for restaurant:",I.id);const xe=rx(I.id,ye=>{console.log("Active tabs updated:",ye),F(ye.map(ve=>{var lt;return{...ve,referenceNumber:ve.referenceNumber||ve.tableNumber||`#${ve.id.slice(-4)}`,waiterName:ve.waiterName||((lt=ve.waiter)==null?void 0:lt.name)||"Unassigned"}}))});return()=>xe()},[I==null?void 0:I.id]),T.useEffect(()=>{console.log("RestaurantDashboard - Current user:",s),console.log("RestaurantDashboard - isAdmin:",h),console.log("RestaurantDashboard - authLoading:",g)},[s,h,g]),T.useEffect(()=>{var xe;(xe=t.state)!=null&&xe.message&&(re(t.state.message),window.history.replaceState({},document.title)),!g&&!s&&!t.pathname.endsWith("/restaurant")&&(console.log("No user found, redirecting to /restaurant"),e("/restaurant",{state:{from:t.pathname,message:"Please log in to access this page"},replace:!0}))},[s,g,e,t]),T.useEffect(()=>{s&&h&&!s.emailVerified&&k("Please verify your email to access the admin dashboard. Check your inbox for the verification link.")},[s,h]),T.useEffect(()=>{!g&&!s&&n&&e("/restaurant",{replace:!0})},[s,g,n,e]),T.useEffect(()=>{if(g){console.log("Auth still loading, skipping verification check");return}(async()=>{if(console.log("Verifying user and checking redirection..."),console.log("Current path:",window.location.pathname),console.log("User object:",s),!s){console.log("No user found, showing login form");return}try{if(console.log("Checking user verification status..."),window.location.pathname==="/restaurant"){console.log("User is on the restaurant dashboard, no redirection needed");return}if(h&&!w){if(I===null){console.log("Waiting for restaurant data to load...");return}if(I&&Object.keys(I).length===0){console.log("Admin user needs to complete onboarding");return}}h&&!window.location.pathname.startsWith("/restaurant")&&(console.log("Admin user accessing non-restaurant path, redirecting to /restaurant"),e("/restaurant",{replace:!0}))}catch(ye){console.error("Error in verification check:",ye)}})()},[s,g,h,e,I,w]);const[Q,se]=T.useState({activeTabs:0,orders:0,sales:0,outstanding:0});T.useEffect(()=>{if(S){F(mockTabs),Me(mockPayments),ne(!1);return}if(s){ne(!0);let xe=()=>{};return(async()=>{try{const ve=await by(s.uid);A(ve),ve?(xe=rx(ve.id,lt=>{F(lt)}),Me([])):(F([]),Me([]))}catch{k("Could not load your restaurant data.")}finally{ne(!1)}})(),()=>xe()}},[s,S]),T.useEffect(()=>{console.log("Tabs data:",z);const xe=z.filter(Mt=>Mt.status==="active"),ye=xe.reduce((Mt,Ln)=>Mt+(Ln.total||0),0),ve=xe.reduce((Mt,Ln)=>{const pn=Ln.total||0,os=Ln.paid||0;return Mt+Math.max(pn-os,0)},0),lt=xe.reduce((Mt,Ln)=>Mt+(Ln.orderCount||0),0);se({activeTabs:xe.length,orders:lt,sales:ye,outstanding:ve})},[z]);const de=xe=>{const{name:ye,value:ve}=xe.target;U(lt=>({...lt,[ye]:ve})),C&&k(""),P&&B("")};async function fe(xe){var ye;try{if(k(""),M(!0),!xe)throw new Error("No user is currently signed in. Please sign in again.");if(console.log("Resending verification email to:",xe.email),await xe.reload(),xe.emailVerified){console.log("User is already verified, redirecting to /admin"),window.location.href="/admin";return}const ve=`${window.location.origin}/restaurant?verified=true`;await HE(xe,{url:ve,handleCodeInApp:!0}),console.log("Verification email sent with redirect URL:",ve),B("A new verification email has been sent. Please check your inbox and spam folder."),setTimeout(()=>{window.location.href="/admin"},5e3)}catch(ve){console.error("Error in handleResendVerification:",{code:ve.code,message:ve.message,stack:ve.stack});let lt="Failed to resend verification email. ";ve.code==="auth/too-many-requests"?lt="We have blocked all requests from this device due to unusual activity. Try again later.":ve.code==="auth/user-not-found"?lt="No user found with this email. Please sign up again.":ve.code==="auth/requires-recent-login"?lt="For security, please sign in again before requesting a new verification email.":ve.code==="auth/network-request-failed"?lt="Network error. Please check your internet connection and try again.":(ye=ve.message)!=null&&ye.includes("auth/missing-email")?lt="Email address is required. Please enter a valid email.":lt+=ve.message||"Please try again later or contact support if the problem persists.",k(lt)}finally{M(!1)}}async function Te(xe){if(xe.preventDefault(),!Re.email||!Re.password)return k("Please fill in all required fields");if(!p&&Re.password!==Re.confirmPassword)return k("Passwords do not match");try{if(k(""),B(""),M(!0),p){const{user:ye}=await a(Re.email,Re.password);P?loggedInUser.emailVerified?await by(loggedInUser.uid)?e("/restaurant"):setShowOnboarding(!0):(k("Please verify your email before logging in. Check your inbox for the verification email."),await u()):k(C||"Failed to log in. Please check your credentials and try again.")}else{const{success:ye,error:ve,user:lt}=await sM(Re.email,Re.password,"User","admin");if(ye)B(m.jsxs("div",{className:"space-y-4",children:[m.jsxs("p",{children:["Account created successfully! We've sent a verification email to ",Re.email,"."]}),m.jsxs("div",{className:"bg-blue-50 p-3 rounded-md border border-blue-100",children:[m.jsx("p",{className:"font-medium text-blue-800",children:"Important:"}),m.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Please check your inbox and verify your email to activate your account. If you don't see the email, please check your spam folder."}),m.jsx("button",{onClick:()=>fe(lt),className:"mt-2 text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center",disabled:H,children:H?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Resend verification email"})]})]})),U({email:Re.email,password:"",confirmPassword:""}),L(""),setTimeout(()=>{v(!0)},5e3);else{let Mt=ve||"Failed to create account. Please try again.";throw ve!=null&&ve.includes("email-already-in-use")?Mt="This email is already registered. Please log in or use a different email.":ve!=null&&ve.includes("weak-password")?Mt="Password is too weak. Please use at least 6 characters.":ve!=null&&ve.includes("invalid-email")&&(Mt="Please enter a valid email address."),new Error(Mt)}}}catch(ye){console.error("Auth error:",ye);let ve=ye.message;ve.includes("auth/email-already-in-use")?ve="This email is already registered. Please log in instead.":ve.includes("auth/weak-password")?ve="Password should be at least 6 characters":ve.includes("auth/invalid-email")?ve="Please enter a valid email address":(ve.includes("auth/user-not-found")||ve.includes("auth/wrong-password"))&&(ve="Invalid email or password"),k(ve)}finally{M(!1)}}function Ue(){R(!1),_(!1)}const Dt=xe=>{switch(xe){case"active":return"bg-blue-100 text-blue-800";case"pending_acceptance":return"bg-yellow-100 text-yellow-800";case"bill_accepted":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},rt=xe=>{switch(xe){case"active":return m.jsx(pf,{className:"w-4 h-4"});case"pending_acceptance":return m.jsx(Ui,{className:"w-4 h-4"});case"bill_accepted":return m.jsx(_h,{className:"w-4 h-4"});case"completed":return m.jsx(_h,{className:"w-4 h-4"});default:return m.jsx(pf,{className:"w-4 h-4"})}};if(!n&&(!s||!h))return m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:p?"Sign in to your account":"Create a new account"}),G&&m.jsx("div",{className:"mt-4 p-3 bg-blue-50 text-blue-700 text-sm rounded-md",children:G}),m.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:[p?"Don't have an account? ":"Already have an account? ",m.jsx("button",{type:"button",onClick:()=>{re(""),v(!p)},className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none",children:p?"Sign up":"Sign in"})]})]}),C&&m.jsxs(Rx,{variant:"destructive",className:"mb-4",children:[m.jsx(Ui,{className:"h-4 w-4"}),m.jsx(Nx,{children:C})]}),P&&m.jsxs(Rx,{className:"mb-4 bg-green-50 border-green-200",children:[m.jsx(_h,{className:"h-4 w-4 text-green-600"}),m.jsx(Nx,{className:"text-green-700",children:P})]}),m.jsxs("form",{className:"mt-4 space-y-4",onSubmit:Te,children:[m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(Ft,{htmlFor:"email",children:"Email address"}),m.jsx(Mn,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:Re.email,onChange:de,className:"mt-1",placeholder:"Enter your email",disabled:H})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx(Ft,{htmlFor:"password",children:"Password"}),p&&m.jsx("a",{href:"#",className:"text-sm text-blue-600 hover:text-blue-500",children:"Forgot password?"})]}),m.jsx(Mn,{id:"password",name:"password",type:"password",autoComplete:p?"current-password":"new-password",required:!0,value:Re.password,onChange:de,className:"mt-1",placeholder:p?"Enter your password":"Create a password (min 6 characters)",minLength:p?void 0:6,disabled:H})]}),!p&&m.jsxs("div",{children:[m.jsx(Ft,{htmlFor:"confirmPassword",children:"Confirm Password"}),m.jsx(Mn,{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:Re.confirmPassword,onChange:de,className:"mt-1",placeholder:"Confirm your password",disabled:H})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(Ee,{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:H,children:H?m.jsxs(m.Fragment,{children:[m.jsx(Kf,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),p?"Signing in...":"Creating account..."]}):p?"Sign in":"Create account"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("div",{className:"w-full border-t border-gray-300"})}),m.jsx("div",{className:"relative flex justify-center text-sm",children:m.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),m.jsxs(Ee,{type:"button",variant:"outline",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>logInWithGoogle("admin"),disabled:H,children:[m.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",children:[m.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),m.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),m.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),m.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),p?"Sign in with Google":"Sign up with Google"]})]})]}),m.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500",children:[m.jsxs("p",{children:["By ",p?"signing in":"signing up",", you agree to our"]}),m.jsxs("p",{className:"mt-1",children:[m.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-500",children:"Terms of Service"})," and"," ",m.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-500",children:"Privacy Policy"})]})]})]})});if(s&&!S&&!K&&!I)return m.jsx(KV,{user:s,onRestaurantCreated:A});if(s||S){if(K)return m.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"Loading Dashboard..."})]})});const xe=!S&&z.length===0&&j.length===0;return m.jsxs("div",{className:"min-h-screen bg-background p-4",children:[m.jsx(QV,{open:he,onOpenChange:ue}),m.jsxs("div",{className:"max-w-6xl mx-auto",children:[m.jsx(GV,{open:Ce,onOpenChange:Y,restaurant:I}),m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("div",{className:"flex items-center",children:m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold",children:"Restaurant Dashboard"}),m.jsx("p",{className:"text-muted-foreground capitalize",children:S?"Viewing in Demo Mode":(I==null?void 0:I.name)||"Real-time tab and payment monitoring"})]})}),m.jsxs("div",{className:"flex items-center gap-2",children:[!S&&I&&m.jsxs(m.Fragment,{children:[m.jsxs(Ee,{variant:"outline",size:"sm",onClick:()=>e("/waiterhome"),className:"bg-primary/10 hover:bg-primary/20 border-primary/30",children:[m.jsx(au,{className:"w-4 h-4 mr-2"}),"Waiter Dashboard"]}),m.jsxs(Ee,{variant:"outline",size:"sm",onClick:()=>Y(!0),children:[m.jsx(jv,{className:"w-4 h-4 mr-2"}),"Get QR Code"]})]}),m.jsxs(Ee,{variant:"outline",size:"sm",onClick:s?u:Ue,children:[m.jsx(UM,{className:"w-4 h-4 mr-2"}),"Log Out"]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[m.jsx(tt,{children:m.jsx(pt,{className:"p-4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(au,{className:"w-8 h-8 text-blue-600 mr-3"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-2xl font-bold",children:Q.activeTabs}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Tabs"})]})]})})}),m.jsx(tt,{children:m.jsx(pt,{className:"p-4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(QM,{className:"w-8 h-8 text-purple-600 mr-3"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-2xl font-bold",children:Q.orders}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Orders"})]})]})})}),m.jsx(tt,{children:m.jsx(pt,{className:"p-4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(YS,{className:"w-8 h-8 text-green-600 mr-3"}),m.jsxs("div",{children:[m.jsxs("p",{className:"text-2xl font-bold",children:["Ksh ",Q.sales.toFixed(2)]}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Sales"})]})]})})}),m.jsx(tt,{children:m.jsx(pt,{className:"p-4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(Ui,{className:"w-8 h-8 text-yellow-600 mr-3"}),m.jsxs("div",{children:[m.jsxs("p",{className:"text-2xl font-bold",children:["Ksh ",Q.outstanding.toFixed(2)]}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Outstanding"})]})]})})})]}),m.jsxs(d5,{defaultValue:"tabs",className:"w-full space-y-4",children:[m.jsxs(h5,{className:"grid w-full grid-cols-4",children:[m.jsxs(Sh,{value:"tabs",className:"flex items-center",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 mr-2"}),"Active Tabs"]}),m.jsxs(Sh,{value:"menu",children:[m.jsx(ZS,{className:"w-4 h-4 mr-2"}),"Menu"]}),m.jsxs(Sh,{value:"waiters",children:[m.jsx(au,{className:"w-4 h-4 mr-2"}),"Waiters"]}),m.jsx(Sh,{value:"payments",children:"Payment History"})]}),m.jsx(Ah,{value:"tabs",className:"space-y-4",children:m.jsxs(tt,{children:[m.jsxs(un,{children:[m.jsx(dn,{children:"Active Tabs"}),m.jsx(xn,{children:"List of all active tabs, assigned waiter, and outstanding amounts"})]}),m.jsx(pt,{children:K?m.jsxs("div",{className:"flex justify-center items-center p-8",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),m.jsx("span",{className:"ml-2",children:"Loading active tabs..."})]}):xe||z.length===0?m.jsxs("div",{className:"text-center p-8 text-gray-500",children:[m.jsx(gy,{className:"mx-auto h-12 w-12 text-gray-400"}),m.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No active tabs"}),m.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Active tabs will appear here when customers start ordering."})]}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Tab #"}),m.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Waiter"}),m.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Sales"}),m.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Paid"}),m.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Outstanding"}),m.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),m.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map(ye=>{var Ys;const ve=ye.total||ye.amount||0,lt=ye.status==="completed"||ye.status==="paid"?ve:0,Mt=ye.status!=="completed"&&ye.status!=="paid"?ve:0,Ln=ye.referenceNumber||ye.tabNumber||`#${ye.id.slice(-4)}`,pn=ye.waiterName||((Ys=ye.waiter)==null?void 0:Ys.name)||"Unassigned",os=ye.status||"active";return m.jsxs("tr",{className:ye.expired?"bg-red-50":"",children:[m.jsxs("td",{className:"px-4 py-2 font-semibold",children:["Tab ",Ln]}),m.jsx("td",{className:"px-4 py-2",children:pn}),m.jsxs("td",{className:"px-4 py-2 font-medium",children:["Ksh ",ve.toFixed(2)]}),m.jsxs("td",{className:"px-4 py-2 text-green-600",children:["Ksh ",lt.toFixed(2)]}),m.jsxs("td",{className:"px-4 py-2 text-red-600 font-bold",children:["Ksh ",Mt.toFixed(2)]}),m.jsx("td",{className:"px-4 py-2",children:m.jsxs(Xc,{className:Dt(os),children:[rt(os),m.jsx("span",{className:"ml-1 capitalize",children:os.replace("_"," ")})]})}),m.jsx("td",{className:"px-4 py-2",children:m.jsx(Ee,{size:"sm",variant:"outline",onClick:()=>{e(`/tab/${ye.id}`,{state:{tabData:ye,referenceNumber:Ln,waiterName:pn}})},children:"View"})})]},ye.id)})})]})})})]})}),m.jsx(Ah,{value:"menu",className:"space-y-6",children:m.jsx(OV,{restaurant:I})}),m.jsx(Ah,{value:"waiters",className:"space-y-4",children:m.jsx(kV,{restaurant:I})}),m.jsx(Ah,{value:"payments",className:"space-y-4",children:m.jsxs(tt,{children:[m.jsxs(un,{children:[m.jsx(dn,{children:"Payment History"}),m.jsx(xn,{children:"Recent payment transactions"})]}),m.jsx(pt,{children:j.length===0?m.jsx("div",{className:"text-center py-8",children:m.jsx("p",{className:"text-muted-foreground",children:"No payment history available"})}):m.jsx("div",{className:"space-y-4",children:j.map(ye=>{var ve;return m.jsx("div",{className:"border rounded-lg p-4",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsxs("p",{className:"font-medium",children:["Payment #",ye.referenceNumber||ye.id.slice(-6)]}),ye.customerName&&m.jsx(Xc,{variant:"outline",children:ye.customerName}),ye.status==="completed"&&m.jsxs(Xc,{className:"bg-green-100 text-green-800",children:[m.jsx(_h,{className:"w-4 h-4 mr-1"}),m.jsx("span",{children:"Completed"})]})]}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:[ye.tabId&&`${ye.tabId} • `,ye.time||((ve=ye.timestamp)!=null&&ve.toDate?new Date(ye.timestamp.toDate()).toLocaleString():"")]})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("p",{className:"text-lg font-bold text-green-600",children:["Ksh ",typeof ye.amount=="number"?ye.amount.toFixed(2):"0.00"]}),ye.method&&m.jsx(Xc,{variant:"outline",className:"mt-1",children:ye.method})]})]})},ye.id)})})})]})})]})]})]})}return null}function KV({user:n,onRestaurantCreated:e}){var S,R;const t=[{code:"KES",name:"Kenyan Shilling",symbol:"KSh"},{code:"UGX",name:"Ugandan Shilling",symbol:"USh"},{code:"TZS",name:"Tanzanian Shilling",symbol:"TSh"},{code:"USD",name:"US Dollar",symbol:"$"},{code:"EUR",name:"Euro",symbol:"€"},{code:"GBP",name:"British Pound",symbol:"£"},{code:"ZAR",name:"South African Rand",symbol:"R"},{code:"ETB",name:"Ethiopian Birr",symbol:"Br"},{code:"NGN",name:"Nigerian Naira",symbol:"₦"},{code:"GHS",name:"Ghanaian Cedi",symbol:"GH₵"}],[s,a]=T.useState({restaurantName:"",city:"",telephone:"",currency:"KES",paymentTypes:{cash:!1,card:!1,mobileMoney:!1},logo:null}),[l,u]=T.useState(null),[h,g]=T.useState(!1),[p,v]=T.useState(""),w=C=>{const{name:k,value:P,type:B,checked:H,files:M}=C.target;if(B==="file"){const K=M[0];if(K){if(!K.type.startsWith("image/")){v("Please upload an image file (JPEG, PNG, etc.)");return}if(K.size>5*1024*1024){v("Image size should be less than 5MB");return}const ne=new FileReader;ne.onloadend=()=>{u(ne.result)},ne.readAsDataURL(K),a(I=>({...I,[k]:K}))}}else a(B==="checkbox"?K=>({...K,paymentTypes:{...K.paymentTypes,[k]:H}}):K=>({...K,[k]:P}));p&&v("")},_=async C=>{if(C.preventDefault(),!s.restaurantName.trim()){v("Restaurant name is required");return}if(!s.city.trim()){v("City is required");return}if(!s.telephone.trim()){v("Telephone number is required");return}const k=Object.entries(s.paymentTypes).filter(([B,H])=>H).map(([B])=>B);if(k.length===0){v("Please select at least one payment method");return}let P="";s.logo&&(P=l),g(!0),v("");try{console.log("Creating restaurant with data:",s);const B=t.find(K=>K.code===s.currency),H=await g6({name:s.restaurantName,ownerId:n.uid,email:n.email,city:s.city,telephone:s.telephone,paymentTypes:k,logo:P,currency:{code:B.code,symbol:B.symbol,name:B.name},address:{city:s.city},settings:{},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});console.log("Restaurant created:",H),console.log("Updating user profile with restaurantId:",H.id),await $S({...n,restaurantId:H.id},"admin"),console.log("Refreshing user data...");const M=await KS(n.uid);console.log("Updated user data:",M),e(H)}catch(B){const H="Failed to create restaurant. Please try again.";console.error(H,B),v(H)}finally{g(!1)}};return m.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:m.jsxs(tt,{className:"w-full max-w-md",children:[m.jsxs(un,{children:[m.jsx(dn,{children:"Welcome to Bill-O!"}),m.jsx(xn,{children:"Let's set up your restaurant profile to get started."})]}),m.jsx(pt,{children:m.jsxs("form",{onSubmit:_,className:"space-y-4",children:[m.jsx("div",{children:m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{children:m.jsxs("div",{className:"flex flex-col items-center mb-4",children:[m.jsx("div",{className:"relative w-24 h-24 rounded-full bg-gray-100 border-2 border-dashed border-gray-300 flex items-center justify-center overflow-hidden",children:l?m.jsx("img",{src:l,alt:"Restaurant logo preview",className:"w-full h-full object-cover"}):m.jsx("div",{className:"text-gray-400",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-8 h-8",children:[m.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),m.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),m.jsx("path",{d:"M21 15l-3.1-3.9a2 2 0 0 0-3.1.1l-3.6 4.6-1.1-1.1a2 2 0 0 0-2.9.1L3 18"})]})})}),m.jsxs("label",{className:"mt-2",children:[m.jsx("span",{className:"text-sm text-blue-600 hover:text-blue-500 cursor-pointer",children:l?"Change logo":"Add restaurant logo (optional)"}),m.jsx("input",{type:"file",name:"logo",accept:"image/*",onChange:w,className:"hidden"})]})]})}),m.jsxs("div",{children:[m.jsx(Ft,{htmlFor:"restaurantName",children:"Restaurant Name *"}),m.jsx(Mn,{id:"restaurantName",name:"restaurantName",value:s.restaurantName,onChange:w,placeholder:"e.g., The Blue Moon Bar & Grill",required:!0})]}),m.jsxs("div",{children:[m.jsx(Ft,{htmlFor:"city",children:"City *"}),m.jsx(Mn,{id:"city",name:"city",value:s.city,onChange:w,placeholder:"e.g., Nairobi",required:!0})]}),m.jsxs("div",{children:[m.jsx(Ft,{htmlFor:"telephone",children:"Telephone *"}),m.jsx(Mn,{id:"telephone",name:"telephone",type:"tel",value:s.telephone,onChange:w,placeholder:"e.g., +254 700 123456",required:!0})]}),m.jsxs("div",{children:[m.jsx(Ft,{htmlFor:"currency",children:"Currency *"}),m.jsx("select",{id:"currency",name:"currency",value:s.currency,onChange:w,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:t.map(C=>m.jsxs("option",{value:C.code,children:[C.code," - ",C.name," (",C.symbol,")"]},C.code))}),m.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Selected: ",(S=t.find(C=>C.code===s.currency))==null?void 0:S.symbol," - ",(R=t.find(C=>C.code===s.currency))==null?void 0:R.name]})]}),m.jsxs("div",{children:[m.jsx(Ft,{children:"Payment Methods Accepted *"}),m.jsxs("div",{className:"mt-2 space-y-2",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(_g,{id:"payment-cash",name:"cash",checked:s.paymentTypes.cash,onChange:C=>a(k=>({...k,paymentTypes:{...k.paymentTypes,cash:C.target.checked}}))}),m.jsx(Ft,{htmlFor:"payment-cash",className:"font-normal",children:"Cash"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(_g,{id:"payment-card",name:"card",checked:s.paymentTypes.card,onChange:C=>a(k=>({...k,paymentTypes:{...k.paymentTypes,card:C.target.checked}}))}),m.jsx(Ft,{htmlFor:"payment-card",className:"font-normal",children:"Credit/Debit Card"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(_g,{id:"payment-mobile",name:"mobileMoney",checked:s.paymentTypes.mobileMoney,onChange:C=>a(k=>({...k,paymentTypes:{...k.paymentTypes,mobileMoney:C.target.checked}}))}),m.jsx(Ft,{htmlFor:"payment-mobile",className:"font-normal",children:"Mobile Money"})]})]})]})]})}),p&&m.jsx("p",{className:"text-sm text-red-500",children:p}),m.jsx(Ee,{type:"submit",className:"w-full",disabled:h,children:h?"Creating...":"Create Restaurant"})]})})]})})}function QV({open:n,onOpenChange:e}){const t=()=>{alert("Connecting to Google... (placeholder)"),e(!1)};return m.jsx(_2,{open:n,onOpenChange:e,children:m.jsxs(Hv,{className:"sm:max-w-md",children:[m.jsxs(Gv,{children:[m.jsx($v,{children:"Connect to Google Sheets"}),m.jsx(Kv,{children:"Sign in with your Google account to link a spreadsheet for your menu."})]}),m.jsxs("div",{className:"py-4 text-center",children:[m.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"You will be redirected to Google to authorize access. We will provide a template for you to use."}),m.jsxs(Ee,{onClick:t,className:"w-full",children:[m.jsx("svg",{className:"mr-2 h-4 w-4","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:m.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 126 21.2 172.9 60.2l-67.4 64.8C295.5 98.2 273.5 84 248 84c-73.2 0-132.3 59.2-132.3 132S174.8 388 248 388c78.2 0 110.3-57.5 114.3-87.2H248v-85.3h236.1c2.3 12.7 3.9 26.9 3.9 41.4z"})}),"Sign in with Google"]})]})]})})}const WV=()=>m.jsxs("div",{className:"my-4 rounded-lg border border-border overflow-hidden relative aspect-[16/9] md:aspect-[21/9] group cursor-pointer",children:[m.jsx("img",{src:"https://images.unsplash.com/photo-1514933651103-005eec06c04b?q=80&w=1200&auto=format&fit=crop",alt:"A modern bar interior with warm lighting",className:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent"}),m.jsxs("div",{className:"relative h-full flex flex-col justify-end items-center text-center p-6 text-white",children:[m.jsx("h4",{className:"text-2xl md:text-3xl font-bold tracking-tight whitespace-nowrap",children:"Modernize Your Bar with Bill-O"}),m.jsx("p",{className:"text-sm md:text-base text-white/90 mt-1",children:"Effortless tabs, faster payments, happier customers."})]})]});function YV(){return m.jsx("div",{className:"min-h-screen bg-background p-4",children:m.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[m.jsxs("div",{className:"text-center py-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-primary mb-2",children:"Bill-O"}),m.jsx("p",{className:"text-muted-foreground",children:"User Centered Tab Management"})]}),m.jsx(WV,{}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs(tt,{className:"border-2 hover:border-primary/50 transition-colors",children:[m.jsxs(un,{className:"text-center",children:[m.jsx(jv,{className:"w-12 h-12 text-primary mx-auto mb-2"}),m.jsx(dn,{children:"Customer"}),m.jsx(xn,{children:"Open a tab and manage your bill"})]}),m.jsx(pt,{children:m.jsx(Oi,{to:"/customer",className:"w-full",children:m.jsx(Ee,{className:"w-full",children:"Start Tab"})})})]}),m.jsxs(tt,{className:"border-2 hover:border-primary/50 transition-colors",children:[m.jsxs(un,{className:"text-center",children:[m.jsx(pM,{className:"w-12 h-12 text-primary mx-auto mb-2"}),m.jsx(dn,{children:"Restaurant"}),m.jsx(xn,{children:"Monitor tabs and payments"})]}),m.jsx(pt,{children:m.jsx(Oi,{to:"/restaurant",className:"w-full",children:m.jsx(Ee,{variant:"outline",className:"w-full",children:"Admin Dashboard"})})})]})]})]})})}function XV(){const[n]=iE(),[e,t]=T.useState(null),[s,a]=T.useState(!0),l=n.get("restaurantId");if(T.useEffect(()=>{l?eA(l).then(t).finally(()=>a(!1)):a(!1)},[l]),s)return m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."});if(!e)return m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Invalid Restaurant QR Code."});const u=`intent://customer?restaurantId=${l}#Intent;scheme=billo;package=com.billo.app;end`;return m.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:m.jsxs(tt,{className:"w-full max-w-sm text-center",children:[m.jsxs(un,{children:[m.jsx(dn,{children:"Welcome to"}),m.jsx(xn,{className:"text-xl font-bold text-primary",children:e.name})]}),m.jsxs(pt,{className:"space-y-4",children:[m.jsx("p",{children:"How would you like to open your tab?"}),m.jsx(Oi,{to:`/customer?restaurantId=${l}`,children:m.jsxs(Ee,{className:"w-full",children:[m.jsx(PM,{className:"w-4 h-4 mr-2"}),"Continue in Web Browser"]})}),m.jsx("a",{href:u,children:m.jsxs(Ee,{variant:"outline",className:"w-full",children:[m.jsx(YM,{className:"w-4 h-4 mr-2"}),"Open in Android App"]})}),m.jsx("p",{className:"text-xs text-muted-foreground pt-2",children:"If you don't have the app, you will be redirected to the Play Store."})]})]})})}function ZV({onNameSubmit:n}){const[e,t]=T.useState(""),[s,a]=T.useState("");Ks();const l=u=>{if(u.preventDefault(),!e.trim()){a("Please enter your name");return}const h=`cust-${Date.now()}`;localStorage.setItem("customerName",e),localStorage.setItem("customerId",h),n(e,h)};return m.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Welcome!"}),m.jsx("p",{className:"mb-6 text-gray-600",children:"Please enter your name to start your tab"}),m.jsxs("form",{onSubmit:l,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"customerName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Name"}),m.jsx(Mn,{id:"customerName",type:"text",value:e,onChange:u=>{t(u.target.value),s&&a("")},placeholder:"e.g., John",className:"w-full",autoFocus:!0}),s&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:s})]}),m.jsx(Ee,{type:"submit",className:"w-full",children:"Start My Tab"})]})]})}function JV(){const{restaurantId:n}=zN(),[e,t]=T.useState([]),[s,a]=T.useState([]),[l,u]=T.useState(!0),[h,g]=T.useState(!1),[p,v]=T.useState(""),[w,_]=T.useState(""),S=Ks();T.useEffect(()=>{const P=localStorage.getItem("customerName"),B=localStorage.getItem("customerId");!P||!B?S(`/restaurant/${n}/start`):(v(P),_(B))},[n,S]),T.useEffect(()=>{(async()=>{if(n)try{const B=fn(vt(Le,"menuItems"),bt("restaurantId","==",n),bt("available","==",!0)),H=await $s(B),M=[];H.forEach(K=>{M.push({id:K.id,...K.data()})}),t(M)}catch(B){console.error("Error fetching menu:",B)}finally{u(!1)}})()},[n]);const R=P=>{a([...s,{...P,cartId:Date.now().toString()}])},C=P=>{a(s.filter(B=>B.cartId!==P))},k=async()=>{if(s.length!==0)try{const P=fn(vt(Le,"tabs"),bt("customerId","==",w),bt("status","==","active")),B=await $s(P);let H,M;if(B.empty){const A={restaurantId:n,customerId:w,customerName:p,status:"active",createdAt:Sn(),referenceNumber:`TAB-${Math.floor(1e3+Math.random()*9e3)}`,total:0,items:[]};M=await fl(vt(Le,"tabs"),A),H=M.id}else{const A=B.docs[0];H=A.id,M=A.ref}const K=s.reduce((A,O)=>A+O.price,0),ne={tabId:H,restaurantId:n,customerId:w,customerName:p,items:s.map(A=>({menuItemId:A.id,name:A.name,price:A.price,quantity:1})),status:"pending",createdAt:Sn(),total:K},I=await fl(vt(Le,"orders"),ne);await $f(M,{total:US(K),updatedAt:Sn()}),g(!0),a([]),setTimeout(()=>g(!1),3e3)}catch(P){console.error("Error placing order:",P)}};return l?m.jsx("div",{className:"flex justify-center p-8",children:"Loading menu..."}):m.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",p,"!"]}),m.jsx(Ee,{variant:"outline",onClick:()=>{localStorage.removeItem("customerName"),localStorage.removeItem("customerId"),S(`/restaurant/${n}/start`)},children:"Change Name"})]}),h&&m.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:"Order placed successfully!"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Menu"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(P=>m.jsxs(tt,{className:"overflow-hidden",children:[m.jsxs(un,{className:"p-4 pb-2",children:[m.jsx(dn,{className:"text-lg",children:P.name}),m.jsx(xn,{children:P.description})]}),m.jsx(pt,{className:"p-4 pt-0",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("span",{className:"font-medium",children:["$",P.price.toFixed(2)]}),m.jsx(Ee,{size:"sm",onClick:()=>R(P),children:"Add to Order"})]})})]},P.id))})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Your Order"}),m.jsx(tt,{children:m.jsx(pt,{className:"p-4",children:s.length===0?m.jsx("p",{className:"text-gray-500 text-center py-4",children:"Your cart is empty"}):m.jsxs(m.Fragment,{children:[m.jsx("ul",{className:"space-y-2 mb-4",children:s.map(P=>m.jsxs("li",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:P.name}),m.jsxs("p",{className:"text-sm text-gray-500",children:["$",P.price.toFixed(2)]})]}),m.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>C(P.cartId),children:"Remove"})]},P.cartId))}),m.jsxs("div",{className:"border-t pt-4",children:[m.jsxs("div",{className:"flex justify-between font-bold mb-4",children:[m.jsx("span",{children:"Total:"}),m.jsxs("span",{children:["$",s.reduce((P,B)=>P+B.price,0).toFixed(2)]})]}),m.jsx(Ee,{className:"w-full",onClick:k,children:"Place Order"})]})]})})})]})]})]})}function eL(){const[n,e]=T.useState(""),[t,s]=T.useState(!1),a=T.useRef(null),l=T.useRef(null),u=T.useRef(null),h=T.useRef(),g=Ks(),p=()=>{u.current&&(u.current.getTracks().forEach(S=>S.stop()),u.current=null),h.current&&(cancelAnimationFrame(h.current),h.current=null),s(!1)},v=async()=>{try{e("");const S=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1});a.current&&(a.current.srcObject=S,a.current.play(),u.current=S,s(!0),_())}catch(S){console.error("Camera error:",S),e("Failed to access camera. Please ensure you have granted camera permissions.")}},w=S=>{try{try{const R=JSON.parse(S);if(R.restaurantId)return p(),g(`/restaurant/${R.restaurantId}/menu`),!0}catch{}try{const C=new URL(S).searchParams.get("restaurantId");if(C)return p(),g(`/restaurant/${C}/menu`),!0}catch{}return console.log("Unrecognized QR code format:",S),!1}catch(R){return console.error("Error processing QR code:",R),!1}},_=async()=>{if(!a.current||!l.current)return;const S=a.current,R=l.current,C=R.getContext("2d");if(S.readyState===S.HAVE_ENOUGH_DATA){R.width=S.videoWidth,R.height=S.videoHeight,C.drawImage(S,0,0,R.width,R.height);try{const P=await new BarcodeDetector({formats:["qr_code"]}).detect(S);if(P.length>0){const B=P[0].rawValue;if(w(B))return}}catch(k){console.error("Barcode detection error:",k)}}t&&(h.current=requestAnimationFrame(_))};return T.useEffect(()=>{if(!("BarcodeDetector"in window)){e("QR code scanning is not supported in your browser. Please use a modern browser like Chrome or Edge.");return}return()=>{p()}},[]),m.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Scan Restaurant QR Code"}),m.jsx("div",{className:"w-full max-w-md border-2 border-dashed border-gray-300 rounded-lg p-4 mb-4",children:n?m.jsxs("div",{className:"text-red-500 text-center p-4",children:[n,m.jsx(Ee,{onClick:()=>e(""),className:"mt-4",disabled:!("BarcodeDetector"in window),children:"Try Again"})]}):t?m.jsxs("div",{className:"relative w-full",style:{paddingBottom:"75%"},children:[m.jsx("video",{ref:a,className:"absolute inset-0 w-full h-full object-cover rounded",playsInline:!0}),m.jsx("canvas",{ref:l,className:"hidden"}),m.jsx("div",{className:"absolute inset-0 border-4 border-green-500 rounded-lg pointer-events-none"})]}):m.jsx("div",{className:"flex flex-col items-center justify-center p-8",children:m.jsx(Ee,{onClick:v,children:"Start Camera"})})}),t&&m.jsx(Ee,{variant:"outline",onClick:p,className:"mb-4",children:"Stop Camera"}),m.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Point your camera at a restaurant's QR code to view their menu."})]})}function tL({onVerify:n,onClose:e,waiterName:t}){const[s,a]=T.useState(""),[l,u]=T.useState(""),h=v=>{s.length<4&&(a(w=>w+v),u(""))},g=()=>{a(v=>v.slice(0,-1)),u("")},p=()=>{s.length===4?n(s):u("Please enter a 4-digit PIN")};return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("h3",{className:"text-lg font-semibold",children:["Enter PIN for ",t]}),m.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:m.jsx(JS,{className:"w-5 h-5"})})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("div",{className:"flex justify-center items-center space-x-2 mb-2",children:[1,2,3,4].map((v,w)=>m.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${w<s.length?"bg-primary border-primary":"border-gray-300"}`},w))}),l&&m.jsx("p",{className:"text-red-500 text-sm text-center",children:l})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[[1,2,3,4,5,6,7,8,9,0].map(v=>m.jsx(Ee,{variant:"outline",className:"h-14 text-lg",onClick:()=>h(v.toString()),children:v},v)),m.jsx(Ee,{variant:"outline",className:"h-14",onClick:g,children:m.jsx(CM,{className:"w-5 h-5"})}),m.jsx(Ee,{className:"h-14 bg-primary hover:bg-primary/90",onClick:p,children:"Enter"})]})]})})}function nL(){const n=Ks(),{currentUser:e}=Bu(),[t,s]=T.useState([]),[a,l]=T.useState(!0),[u,h]=T.useState(""),[g,p]=T.useState(""),[v,w]=T.useState("checking"),[_,S]=T.useState(!1),[R,C]=T.useState(null),k=T.useCallback(async()=>{try{if(l(!0),h(""),!e)throw new Error("You need to be logged in to access this page");let M=e==null?void 0:e.restaurantId,K=null;if(!M&&(e!=null&&e.uid))try{K=await by(e.uid),K&&(M=K.id,e.updateProfile?await e.updateProfile({restaurantId:M}):e.restaurantId=M)}catch(I){console.error("Error fetching restaurant:",I)}if(!M){s([]),h("No restaurant associated with this account. Please complete restaurant setup first.");return}const ne=await v6(M);s(ne)}catch(M){console.error("Error loading waiters:",M),h(M.message||"Failed to load waiters")}finally{l(!1)}},[e]),P=M=>{C(M),S(!0)},B=async M=>{try{if(l(!0),h(""),!e)throw console.error("No current user found"),new Error("You need to be logged in to access this page");console.log("=== PIN Verification Debug ==="),console.log("Current user:",{uid:e.uid,email:e.email,restaurantId:e.restaurantId}),console.log("Selected waiter:",R),console.log("Entered PIN:",M,"Type:",typeof M);const K=await ix(R.id);if(console.log("Waiter from DB:",K),!K)throw console.error("Waiter not found in database"),new Error("Waiter not found in database");console.log("Waiter data:",{id:K.id,name:K.name,storedPIN:K.pin,pinType:typeof K.pin,restaurantId:K.restaurantId});const ne=M.toString().trim(),I=K.pin?K.pin.toString().trim():"";if(I&&I===ne){console.log("✅ PIN verification successful"),console.log("Navigating to waiter dashboard...");const O=await ix(K.id);n(`/waiter/${O.id}`,{state:{waiter:O,user:e,timestamp:new Date().toISOString()},replace:!0});return}console.log("Direct PIN comparison failed, trying database query...");const A=await y6(R.restaurantId,M);console.log("Waiter found by PIN query:",A),A&&A.id===R.id?(console.log("✅ Database PIN verification successful"),n(`/waiter/${A.id}`,{state:{waiter:A,user:e,timestamp:new Date().toISOString()},replace:!0})):(console.error("❌ All PIN verification methods failed"),h("Invalid PIN. Please try again."),S(!1))}catch(K){console.error("Error verifying PIN:",K),h("Error verifying PIN. Please try again."),S(!1)}finally{l(!1)}},H=async()=>{try{p("Checking waiters collection...");const M=await tA();p(`Found ${M.size} waiters in collection. Check console for details.`)}catch(M){console.error("Debug error:",M),p(`Error: ${M.message}`)}};return T.useEffect(()=>{(async()=>{try{const K=await sx();w(K?"connected":"disconnected")}catch(K){console.error("Connection test error:",K),w("error")}})()},[]),T.useEffect(()=>{e&&k()},[e,k]),a&&t.length===0?m.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:m.jsxs("div",{className:"text-center",children:[m.jsx(Va,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),m.jsx("p",{className:"text-muted-foreground",children:"Loading waiters..."})]})}):m.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 p-4 md:p-6 relative",children:[_&&R&&m.jsx(tL,{onVerify:B,onClose:()=>S(!1),waiterName:R.name}),m.jsxs("div",{className:"max-w-7xl mx-auto",children:[m.jsxs("div",{className:"flex items-center justify-between mb-8",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx(Ee,{variant:"outline",size:"icon",onClick:()=>n(-1),className:"rounded-full",children:m.jsx(py,{className:"w-4 h-4"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Waiter Dashboard"}),m.jsx("p",{className:"text-muted-foreground",children:"Select a waiter to view their dashboard"})]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsxs(Ee,{variant:"outline",size:"sm",onClick:k,disabled:a,className:"gap-2",children:[a?m.jsx(Va,{className:"h-4 w-4 animate-spin"}):m.jsx(Kf,{className:"h-4 w-4"}),"Refresh"]}),m.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>{e?n("/restaurant"):n("/",{state:{showLogin:!0}})},className:"gap-2 bg-red-50 text-red-700 hover:bg-red-100 hover:text-red-800 border-red-200",children:e?"Restaurant Dashboard":"Back to Login"})]})]}),m.jsxs("div",{className:"mb-6 flex items-center space-x-2",children:[m.jsxs(Ee,{variant:"outline",size:"sm",onClick:H,title:"Debug waiters collection",className:"gap-2",children:[m.jsx(fM,{className:"h-4 w-4"}),"Debug"]}),m.jsxs(Ee,{variant:"outline",size:"sm",onClick:async()=>{w("checking");const M=await sx();w(M?"connected":"disconnected")},title:"Test Firestore connection",className:`gap-2 ${v==="connected"?"bg-green-50 text-green-700 border-green-200":v==="error"?"bg-red-50 text-red-700 border-red-200":"bg-yellow-50 text-yellow-700 border-yellow-200"}`,children:[v==="connected"?m.jsx(i6,{className:"h-4 w-4 text-green-600"}):v==="error"?m.jsx(r6,{className:"h-4 w-4 text-red-600"}):m.jsx(Va,{className:"h-4 w-4 animate-spin"}),v==="connected"?"Connected":v==="error"?"Error":"Connecting..."]})]}),g&&m.jsx("div",{className:"mb-6 p-3 bg-yellow-50 border border-yellow-200 text-yellow-800 text-sm rounded-lg",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(MM,{className:"w-4 h-4 mr-2 flex-shrink-0"}),m.jsx("span",{children:g})]})}),u&&m.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx(Ui,{className:"w-5 h-5 mr-2 mt-0.5 flex-shrink-0"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Error loading waiters"}),m.jsx("p",{className:"text-sm mt-1",children:u}),m.jsx(Ee,{variant:"ghost",size:"sm",className:"mt-2 text-red-700 hover:bg-red-100",onClick:k,disabled:a,children:a?"Retrying...":"Try Again"})]})]})}),m.jsx(m.Fragment,{children:m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Active Waiters"}),m.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.length," ",t.length===1?"waiter":"waiters"," available"]})]}),t.length>0?m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(M=>m.jsx(tt,{className:"group cursor-pointer transition-all duration-200 hover:shadow-md hover:-translate-y-1 border-border/60",onClick:()=>P(M),children:m.jsx(pt,{className:"p-5",children:m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:m.jsx(yy,{className:"w-6 h-6 text-primary"})}),m.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:M.name||"Unnamed Waiter"}),m.jsx("p",{className:"text-sm text-muted-foreground truncate",children:M.email||"No email provided"}),m.jsx("div",{className:"mt-1 flex items-center",children:m.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})})]})]})})},M.id))}):a?null:m.jsxs("div",{className:"text-center py-12 px-4 border-2 border-dashed border-gray-200 rounded-xl bg-white",children:[m.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:m.jsx(yy,{className:"w-8 h-8 text-gray-400"})}),m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No waiters found"}),m.jsx("p",{className:"text-sm text-gray-500 max-w-md mx-auto mb-4",children:"Add waiters in the admin panel to get started managing your restaurant's service team."}),m.jsx(Ee,{variant:"outline",onClick:()=>n("/restaurant"),children:"Go to Admin Panel"})]})]})}),a&&m.jsxs("div",{className:"mt-8 text-center",children:[m.jsx(Va,{className:"inline-block w-6 h-6 text-primary animate-spin"}),m.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading waiters..."})]})]})]})}const rL=({children:n})=>{var v,w;const{user:e,loading:t}=Bu(),s=Pr(),[a,l]=T.useState(""),[u,h]=T.useState(!0),[g,p]=T.useState(null);if(n||WaiterDashboard,T.useEffect(()=>{var _;if(console.log("WaiterRoute - Auth state changed:",{user:e,loading:t}),(_=s.state)!=null&&_.waiter){console.log("Waiter data found in location state:",s.state.waiter),p(s.state.waiter),l(""),h(!1);return}!t&&!e?(console.error("No authenticated user found"),l("You need to be logged in to access this page"),h(!1)):e&&(console.log("User authenticated:",e.email),l(""),h(!1))},[e,t,s.state]),t||u)return m.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),m.jsx("p",{className:"mt-4 text-gray-600",children:"Loading waiter dashboard..."})]})});if(a){if((v=s.state)!=null&&v.waiter){console.log("Found waiter in location state, proceeding to dashboard...");const _=Jt.Children.map(n,S=>Jt.isValidElement(S)?Jt.cloneElement(S,{waiter:s.state.waiter}):S);return m.jsx(m.Fragment,{children:_})}return m.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:m.jsxs("div",{className:"max-w-md p-6 bg-white rounded-lg shadow-md text-center",children:[m.jsx("div",{className:"flex justify-center mb-4",children:m.jsx(Ui,{className:"w-12 h-12 text-red-500"})}),m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Access Denied"}),m.jsx("p",{className:"text-gray-600 mb-6",children:a}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ee,{onClick:()=>window.location.href="/landing",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:"Go to Login"}),m.jsx(Ee,{variant:"outline",onClick:()=>window.location.reload(),className:"w-full",children:"Try Again"})]})]})})}if(g||(w=s.state)!=null&&w.waiter){const _=g||s.state.waiter;console.log("Rendering WaiterDashboard with data:",_);const S=Jt.Children.map(n,R=>Jt.isValidElement(R)?Jt.cloneElement(R,{waiter:_,key:_.id||"waiter-dashboard"}):R);return m.jsx(m.Fragment,{children:S})}return m.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),m.jsx("p",{className:"mt-4 text-gray-600",children:"Loading waiter dashboard..."})]})})};function sL(){return m.jsx(iM,{children:m.jsx(AC,{children:m.jsxs(tC,{children:[m.jsx(pr,{path:"/",element:m.jsx(YV,{})}),m.jsx(pr,{path:"/landing",element:m.jsx(XV,{})}),m.jsxs(pr,{path:"/customer",element:m.jsx(_3,{}),children:[m.jsx(pr,{index:!0,element:m.jsx(eL,{})}),m.jsx(pr,{path:"restaurant/:restaurantId/start",element:m.jsx(ZV,{})}),m.jsx(pr,{path:"restaurant/:restaurantId/menu",element:m.jsx(JV,{})})]}),m.jsx(pr,{path:"/restaurant",element:m.jsx($V,{})}),m.jsx(pr,{path:"/waiterhome",element:m.jsx(nL,{})}),m.jsx(pr,{path:"/waiter/:waiterId",element:m.jsx(rL,{children:m.jsx(N3,{})})}),m.jsx(pr,{path:"/restaurant/waiter",element:m.jsx(b1,{to:"/waiter",replace:!0})}),m.jsx(pr,{path:"*",element:m.jsx(b1,{to:"/",replace:!0})})]})})})}cN.createRoot(document.getElementById("root")).render(m.jsx(T.StrictMode,{children:m.jsx(sL,{})}));
//# sourceMappingURL=index-D2sxVFC1.js.map
